# Informa√ß√µes B√°sicas sobre o Gitea

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>

## Estrutura B√°sica

A estrutura b√°sica do ambiente Gitea √© agrupar reposit√≥rios por **organiza√ß√£o(√µes)**, cada uma delas pode conter **v√°rios reposit√≥rios** e **v√°rias equipes**. No entanto, observe que, assim como no github, os usu√°rios podem ter reposit√≥rios fora da organiza√ß√£o.

Al√©m disso, um **usu√°rio** pode ser **membro** de **diferentes organiza√ß√µes**. Dentro da organiza√ß√£o, o usu√°rio pode ter **diferentes permiss√µes sobre cada reposit√≥rio**.

Um usu√°rio tamb√©m pode fazer **parte de diferentes equipes** com diferentes permiss√µes sobre diferentes reposit√≥rios.

E, finalmente, **os reposit√≥rios podem ter mecanismos de prote√ß√£o especiais**.

## Permiss√µes

### Organiza√ß√µes

Quando uma **organiza√ß√£o √© criada**, uma equipe chamada **Owners** √© **criada** e o usu√°rio √© colocado dentro dela. Esta equipe dar√° **acesso de administrador** sobre a **organiza√ß√£o**, essas **permiss√µes** e o **nome** da equipe **n√£o podem ser modificados**.

Os **administradores da org** (propriet√°rios) podem selecionar a **visibilidade** da organiza√ß√£o:

* P√∫blica
* Limitada (apenas usu√°rios logados)
* Privada (apenas membros)

Os **administradores da org** tamb√©m podem indicar se os **administradores do reposit√≥rio** podem **adicionar e/ou remover acesso** para equipes. Eles tamb√©m podem indicar o n√∫mero m√°ximo de reposit√≥rios.

Ao criar uma nova equipe, v√°rias configura√ß√µes importantes s√£o selecionadas:

* √â indicado os **reposit√≥rios da org que os membros da equipe poder√£o acessar**: reposit√≥rios espec√≠ficos (reposit√≥rios onde a equipe √© adicionada) ou todos.
* Tamb√©m √© indicado **se os membros podem criar novos reposit√≥rios** (o criador ter√° acesso de administrador a ele)
* As **permiss√µes** que os **membros** do reposit√≥rio ter√£o:
* Acesso de **Administrador**
* Acesso **Espec√≠fico**:

![](<../../.gitbook/assets/image (118).png>)

### Equipes e Usu√°rios

Em um reposit√≥rio, o **administrador da org** e os **administradores do reposit√≥rio** (se permitido pela org) podem **gerenciar os pap√©is** atribu√≠dos a colaboradores (outros usu√°rios) e equipes. Existem **3** poss√≠veis **pap√©is**:

* Administrador
* Escrever
* Ler

## Autentica√ß√£o do Gitea

### Acesso Web

Usando **nome de usu√°rio + senha** e potencialmente (e recomendado) um 2FA.

### **Chaves SSH**

Voc√™ pode configurar sua conta com uma ou v√°rias chaves p√∫blicas permitindo que a **chave privada relacionada execute a√ß√µes em seu nome**. [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Chaves GPG**

Voc√™ **n√£o pode se passar pelo usu√°rio com essas chaves**, mas se voc√™ n√£o as usar, pode ser poss√≠vel que voc√™ **seja descoberto por enviar commits sem uma assinatura**.

### **Tokens de Acesso Pessoal**

Voc√™ pode gerar um token de acesso pessoal para **dar a um aplicativo acesso √† sua conta**. Um token de acesso pessoal d√° acesso total √† sua conta: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Aplica√ß√µes Oauth

Assim como os tokens de acesso pessoal, as **aplica√ß√µes Oauth** ter√£o **acesso completo** √† sua conta e aos lugares onde sua conta tem acesso porque, como indicado na [documenta√ß√£o](https://docs.gitea.io/en-us/oauth2-provider/#scopes), os escopos ainda n√£o s√£o suportados:

![](<../../.gitbook/assets/image (194).png>)

### Chaves de Implanta√ß√£o

As chaves de implanta√ß√£o podem ter acesso somente leitura ou grava√ß√£o ao reposit√≥rio, ent√£o podem ser interessantes para comprometer reposit√≥rios espec√≠ficos.

## Prote√ß√µes de Branch

As prote√ß√µes de branch s√£o projetadas para **n√£o dar controle completo de um reposit√≥rio** aos usu√°rios. O objetivo √© **colocar v√°rios m√©todos de prote√ß√£o antes de poder escrever c√≥digo em algum branch**.

As **prote√ß√µes de branch de um reposit√≥rio** podem ser encontradas em _https://localhost:3000/\<orgname>/\<reponame>/settings/branches_

{% hint style="info" %}
**N√£o √© poss√≠vel definir uma prote√ß√£o de branch no n√≠vel da organiza√ß√£o**. Portanto, todas elas devem ser declaradas em cada reposit√≥rio.
{% endhint %}

Diferentes prote√ß√µes podem ser aplicadas a um branch (como ao master):

* **Desativar Push**: Ningu√©m pode fazer push para este branch
* **Ativar Push**: Qualquer pessoa com acesso pode fazer push, mas n√£o push for√ßado.
* **Whitelist de Push Restrito**: Apenas usu√°rios/equipes selecionados podem fazer push para este branch (mas sem push for√ßado)
* **Ativar Lista de Merge**: Apenas usu√°rios/equipes da lista branca podem fazer merge de PRs.
* **Ativar verifica√ß√µes de status:** Exigir que as verifica√ß√µes de status passem antes de fazer merge.
* **Exigir aprova√ß√µes**: Indicar o n√∫mero de aprova√ß√µes necess√°rias antes que um PR possa ser mesclado.
* **Restringir aprova√ß√µes a lista branca**: Indicar usu√°rios/equipes que podem aprovar PRs.
* **Bloquear merge em revis√µes rejeitadas**: Se forem solicitadas altera√ß√µes, n√£o pode ser mesclado (mesmo que as outras verifica√ß√µes passem)
* **Bloquear merge em solicita√ß√µes de revis√£o oficiais**: Se houver solicita√ß√µes de revis√£o oficiais, n√£o pode ser mesclado
* **Dispensar aprova√ß√µes antigas**: Com novos commits, as aprova√ß√µes antigas ser√£o dispensadas.
* **Exigir Commits Assinados**: Os commits devem ser assinados.
* **Bloquear merge se a solicita√ß√£o de pull estiver desatualizada**
* **Padr√µes de arquivos protegidos/n√£o protegidos**: Indicar padr√µes de arquivos para proteger/n√£o proteger contra altera√ß√µes

{% hint style="info" %}
Como voc√™ pode ver, mesmo se conseguir obter algumas credenciais de um usu√°rio, **os reposit√≥rios podem estar protegidos evitando que voc√™ envie c√≥digo para o master**, por exemplo, comprometendo o pipeline CI/CD.
{% endhint %}

<details>

<summary><strong>Aprenda hacking AWS do zero ao her√≥i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras maneiras de apoiar o HackTricks:

* Se voc√™ deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A Fam√≠lia PEASS**](https://opensea.io/collection/the-peass-family), nossa cole√ß√£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** üí¨ [**grupo Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo telegram**](https://t.me/peass) ou **siga-nos** no **Twitter** üê¶ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Compartilhe seus truques de hacking enviando PRs para os** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) reposit√≥rios do github.

</details>
