# Podstawowe informacje o Gitea

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowa struktura

Podstawowa struktura rodowiska Gitea polega na grupowaniu repozytori贸w przez **organizacje**, z kt贸rych ka偶da mo偶e zawiera **kilka repozytori贸w** i **kilka zespo贸w**. Jednak nale偶y zauwa偶y, 偶e, podobnie jak w przypadku githuba, u偶ytkownicy mog mie repozytoria poza organizacj.

Co wicej, **u偶ytkownik** mo偶e by **czonkiem r贸偶nych organizacji**. W ramach organizacji u偶ytkownik mo偶e mie **r贸偶ne uprawnienia do ka偶dego repozytorium**.

U偶ytkownik mo偶e r贸wnie偶 by **czonkiem r贸偶nych zespo贸w** z r贸偶nymi uprawnieniami do r贸偶nych repozytori贸w.

Na koniec **repozytoria mog mie specjalne mechanizmy ochrony**.

## Uprawnienia

### Organizacje

Po utworzeniu **organizacji** tworzony jest zesp贸 o nazwie **Waciciele**, do kt贸rego dodawany jest u偶ytkownik. Ten zesp贸 zapewni **dostp administratora** do **organizacji**, te **uprawnienia** i **nazw** zespou **nie mog by zmienione**.

**Administratorzy organizacji** (waciciele) mog wybra **widoczno organizacji**:

* Publiczna
* Ograniczona (tylko zalogowani u偶ytkownicy)
* Prywatna (tylko czonkowie)

**Administratorzy organizacji** mog r贸wnie偶 wskaza, czy **administratorzy repozytori贸w** mog **dodawa i/lub usuwa dostp** dla zespo贸w. Mog r贸wnie偶 okreli maksymaln liczb repozytori贸w.

Podczas tworzenia nowego zespou wybierane s kilka istotnych ustawie:

* Wskazuje si **repozytoria organizacji, do kt贸rych czonkowie zespou bd mieli dostp**: konkretne repozytoria (repozytoria, do kt贸rych zesp贸 jest dodany) lub wszystkie.
* Wskazuje si r贸wnie偶, **czy czonkowie mog tworzy nowe repozytoria** (tw贸rca otrzyma dostp administratora do niego)
* **Uprawnienia**, jakie bd mie **czonkowie** repozytorium:
* Dostp **Administratora**
* Dostp **Specyficzny**:

![](<../../.gitbook/assets/image (118).png>)

### Zespoy i U偶ytkownicy

W repozytorium **administrator organizacji** i **administratorzy repozytorium** (jeli zezwala na to organizacja) mog **zarzdza rolami** nadanymi wsp贸pracownikom (innym u偶ytkownikom) i zespoom. Istniej **3** mo偶liwe **role**:

* Administrator
* Zapisz
* Odczyt

## Autentykacja Gitea

### Dostp przez sie

Korzystajc z **nazwy u偶ytkownika + hasa** i potencjalnie (i zalecane) 2FA.

### **Klucze SSH**

Mo偶esz skonfigurowa swoje konto z jednym lub kilkoma kluczami publicznymi, pozwalajcymi powizanemu **kluczowi prywatnemu na wykonywanie dziaa w twoim imieniu**. [http://localhost:3000/user/settings/keys](http://localhost:3000/user/settings/keys)

#### **Klucze GPG**

Nie mo偶esz **podawa si za u偶ytkownika za pomoc tych kluczy**, ale jeli ich nie u偶ywasz, mo偶e by mo偶liwe, 偶e **zostaniesz odkryty za wysyanie commit贸w bez podpisu**.

### **Tokeny dostpu osobistego**

Mo偶esz wygenerowa token dostpu osobistego, aby **udzieli aplikacji dostpu do swojego konta**. Token dostpu osobistego daje peny dostp do twojego konta: [http://localhost:3000/user/settings/applications](http://localhost:3000/user/settings/applications)

### Aplikacje Oauth

Podobnie jak tokeny dostpu osobistego, **aplikacje Oauth** bd miay **peny dostp** do twojego konta i miejsc, do kt贸rych ma dostp twoje konto, poniewa偶, zgodnie z [dokumentacj](https://docs.gitea.io/en-us/oauth2-provider/#scopes), zakresy nie s jeszcze obsugiwane:

![](<../../.gitbook/assets/image (194).png>)

### Klucze deploy

Klucze deploy mog mie dostp tylko do odczytu lub zapisu do repozytorium, wic mog by interesujce do skompromitowania konkretnych repozytori贸w.

## Ochrona gazi

Ochrona gazi ma na celu **nie dawanie u偶ytkownikom penej kontroli nad repozytorium**. Celem jest **ustawienie kilku metod ochrony przed mo偶liwoci pisania kodu w okrelonej gazi**.

**Ochrony gazi repozytorium** mo偶na znale藕 pod adresem _https://localhost:3000/\<nazwa_organizacji>/\<nazwa_repozytorium>/settings/branches_

{% hint style="info" %}
**Nie mo偶na ustawi ochrony gazi na poziomie organizacji**. Dlatego wszystkie zabezpieczenia musz by zadeklarowane dla ka偶dego repozytorium.
{% endhint %}

Do gazi mo偶na zastosowa r贸偶ne zabezpieczenia (np. dla master):

* **Wyczanie Push**: Nikt nie mo偶e przesa do tej gazi
* **Wczanie Push**: Ka偶dy z dostpem mo偶e przesa, ale nie force push.
* **Biaa lista ograniczonego Push**: Tylko wybrane u偶ytkownicy/zespoy mog przesya do tej gazi (ale bez force push)
* **Wcz bia list scalania**: Tylko u偶ytkownicy/zespoy z biaej listy mog czy PR.
* **Wcz sprawdzanie stanu**: Wymaga, aby sprawdzenia stanu zostay zakoczone pomylnie przed scaleniem.
* **Wymagaj zatwierdze**: Wskazuje liczb wymaganych zatwierdze przed scaleniem PR.
* **Ogranicz zatwierdzenia do biaej listy**: Wskazuje u偶ytkownik贸w/zespoy, kt贸re mog zatwierdza PR.
* **Zablokuj scalanie przy odrzuconych recenzjach**: Jeli s 偶dane zmiany, nie mo偶na ich scali (nawet jeli inne sprawdzenia przechodz)
* **Zablokuj scalanie przy oficjalnych 偶daniach recenzji**: Jeli s oficjalne 偶dania recenzji, nie mo偶na ich scali
* **Odrzu przeterminowane zatwierdzenia**: Po dodaniu nowych commit贸w stare zatwierdzenia zostan odrzucone.
* **Wymagaj podpisanych commit贸w**: Commity musz by podpisane.
* **Zablokuj scalanie, jeli pull request jest przestarzay**
* **Chronione/Niechronione wzorce plik贸w**: Wskazuje wzorce plik贸w do ochrony/przeciwko zmianom

{% hint style="info" %}
Jak wida, nawet jeli udao ci si uzyska pewne dane uwierzytelniajce u偶ytkownika, **repozytoria mog by chronione, uniemo偶liwiajc przesyanie kodu do mastera** na przykad w celu skompromitowania procesu CI/CD.
{% endhint %}

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
