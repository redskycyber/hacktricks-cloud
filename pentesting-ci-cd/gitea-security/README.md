# Gitea GÃ¼venliÄŸi

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI'na**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## Gitea Nedir

**Gitea**, Go dilinde yazÄ±lmÄ±ÅŸ **kendine ait barÄ±ndÄ±rÄ±lan topluluk yÃ¶netimli hafif kod barÄ±ndÄ±rma** Ã§Ã¶zÃ¼mÃ¼dÃ¼r.

![](<../../.gitbook/assets/image (5) (1) (1) (1) (1) (1).png>)

### Temel Bilgiler

{% content-ref url="basic-gitea-information.md" %}
[basic-gitea-information.md](basic-gitea-information.md)
{% endcontent-ref %}

## Lab

Yerel bir Gitea Ã¶rneÄŸini Ã§alÄ±ÅŸtÄ±rmak iÃ§in sadece bir docker konteyneri Ã§alÄ±ÅŸtÄ±rabilirsiniz:
```bash
docker run -p 3000:3000 gitea/gitea
```
Web sayfasÄ±na eriÅŸmek iÃ§in 3000 numaralÄ± porta baÄŸlanÄ±n.

AyrÄ±ca kubernetes ile Ã§alÄ±ÅŸtÄ±rabilirsiniz:
```
helm repo add gitea-charts https://dl.gitea.io/charts/
helm install gitea gitea-charts/gitea
```
## Kimlik DoÄŸrulamasÄ± YapÄ±lmamÄ±ÅŸ SÄ±ralama

* Genel depolar: [http://localhost:3000/explore/repos](http://localhost:3000/explore/repos)
* KayÄ±tlÄ± kullanÄ±cÄ±lar: [http://localhost:3000/explore/users](http://localhost:3000/explore/users)
* KayÄ±tlÄ± Organizasyonlar: [http://localhost:3000/explore/organizations](http://localhost:3000/explore/organizations)

UnutmayÄ±n ki **varsayÄ±lan olarak Gitea yeni kullanÄ±cÄ±larÄ±n kaydolmasÄ±na izin verir**. Bu, yeni kullanÄ±cÄ±lara diÄŸer organizasyonlar/kullanÄ±cÄ±lar depolarÄ± Ã¼zerinde Ã¶zel eriÅŸim saÄŸlamaz, ancak **giriÅŸ yapmÄ±ÅŸ bir kullanÄ±cÄ±** daha fazla depo veya organizasyonu **gÃ¶rebilir**.

## Ä°Ã§eriden SÄ±zma

Bu senaryoda, bir github hesabÄ±na bazÄ± eriÅŸimler elde ettiÄŸinizi varsayacaÄŸÄ±z.

### KullanÄ±cÄ± Kimlik Bilgileri/Web Ã‡erezi ile

EÄŸer bir organizasyon iÃ§indeki bir kullanÄ±cÄ±nÄ±n kimlik bilgilerine sahipseniz (veya bir oturum Ã§erezi Ã§aldÄ±ysanÄ±z), **sadece giriÅŸ yapabilir** ve **hangi izinlere** sahip olduÄŸunuzu, **hangi depolarda** olduÄŸunuzu, **hangi takÄ±mlarda** olduÄŸunuzu, **diÄŸer kullanÄ±cÄ±larÄ± listeyebilir** ve **depolarÄ±n nasÄ±l korunduÄŸunu** kontrol edebilirsiniz.

UnutmayÄ±n ki **2FA kullanÄ±labilir**, bu nedenle bu bilgilere eriÅŸebilmeniz iÃ§in **bu kontrolÃ¼ de geÃ§ebilmeniz gerekecektir**.

{% hint style="info" %}
UnutmayÄ±n ki, `i_like_gitea` Ã§ereziyi (ÅŸu anda SameSite: Lax ile yapÄ±landÄ±rÄ±lmÄ±ÅŸ) **Ã§almayÄ± baÅŸarÄ±rsanÄ±z**, kimlik bilgilerine veya 2FA'ya ihtiyaÃ§ duymadan **kullanÄ±cÄ±yÄ± tamamen taklit edebilirsiniz**.
{% endhint %}

### KullanÄ±cÄ± SSH AnahtarÄ± ile

Gitea, **kullanÄ±cÄ±larÄ±n** kimlik doÄŸrulama yÃ¶ntemi olarak kullanÄ±lacak **SSH anahtarlarÄ±** belirlemelerine izin verir (2FA uygulanmaz).

Bu anahtarla, **kullanÄ±cÄ±nÄ±n bazÄ± ayrÄ±calÄ±klara sahip olduÄŸu depolarda deÄŸiÅŸiklikler yapabilirsiniz**, ancak gitea api'ye eriÅŸmek iÃ§in kullanamazsÄ±nÄ±z. Bununla birlikte, eriÅŸiminiz olan depolar ve kullanÄ±cÄ± hakkÄ±nda bilgi almak iÃ§in **yerel ayarlarÄ± sÄ±ralayabilirsiniz**:
```bash
# Go to the the repository folder
# Get repo config and current user name and email
git config --list
```
EÄŸer kullanÄ±cÄ± kullanÄ±cÄ± adÄ±nÄ± gitea kullanÄ±cÄ± adÄ± olarak yapÄ±landÄ±rdÄ±ysa, hesabÄ±nda ayarladÄ±ÄŸÄ± **genel anahtarlarÄ±** _https://github.com/\<gitea\_kullanÄ±cÄ±adÄ±>.keys_ adresinden eriÅŸebilirsiniz, bu ÅŸekilde bulduÄŸunuz Ã¶zel anahtarÄ±n kullanÄ±labileceÄŸini doÄŸrulamak iÃ§in bunu kontrol edebilirsiniz.

**SSH anahtarlarÄ±**, **daÄŸÄ±tÄ±m anahtarlarÄ±** olarak da depolarda ayarlanabilir. Bu anahtara eriÅŸimi olan herkes, bir depodan projeleri **baÅŸlatabilir**. Genellikle farklÄ± daÄŸÄ±tÄ±m anahtarlarÄ±na sahip bir sunucuda yerel **`~/.ssh/config`** dosyasÄ± size hangi anahtarÄ±n iliÅŸkili olduÄŸu hakkÄ±nda bilgi verecektir.

#### GPG AnahtarlarÄ±

[**Burada**](broken-reference/) aÃ§Ä±klandÄ±ÄŸÄ± gibi bazen taahhÃ¼tleri imzalamak gerekebilir veya keÅŸfedilebilirsiniz.

Mevcut kullanÄ±cÄ±nÄ±n herhangi bir anahtara sahip olup olmadÄ±ÄŸÄ±nÄ± yerel olarak kontrol edin:
```shell
gpg --list-secret-keys --keyid-format=long
```
### KullanÄ±cÄ± Jetonu ile

[**KullanÄ±cÄ± JetonlarÄ± hakkÄ±nda temel bilgilere buradan bakabilirsiniz**](basic-gitea-information.md#personal-access-tokens).

KullanÄ±cÄ± jetonu, Gitea sunucusuna [**API aracÄ±lÄ±ÄŸÄ±yla**](https://try.gitea.io/api/swagger#/) kimlik doÄŸrulamasÄ± yapmak iÃ§in **bir ÅŸifre yerine** kullanÄ±labilir. KullanÄ±cÄ± Ã¼zerinde **tam eriÅŸime** sahip olacaktÄ±r.

### Oauth UygulamasÄ± ile

[**Gitea Oauth UygulamalarÄ± hakkÄ±nda temel bilgilere buradan bakabilirsiniz**](./#with-oauth-application).

Bir saldÄ±rgan, muhtemelen bir dolandÄ±rÄ±cÄ±lÄ±k kampanyasÄ±nÄ±n bir parÃ§asÄ± olarak, kullanÄ±cÄ±larÄ±n ayrÄ±calÄ±klÄ± veri/aksiyonlara eriÅŸmek iÃ§in **kÃ¶tÃ¼ niyetli bir Oauth UygulamasÄ±** oluÅŸturabilir.

Temel bilgilerde aÃ§Ä±klandÄ±ÄŸÄ± gibi, uygulama, kullanÄ±cÄ± hesabÄ± Ã¼zerinde **tam eriÅŸime** sahip olacaktÄ±r.

### Åube Koruma Atlatma

Github'da, varsayÄ±lan olarak, **yazma eriÅŸimi olan bir jeton** alan **github eylemleri** bulunur ve bu, **ÅŸube korumalarÄ±nÄ± atlatmak** iÃ§in kullanÄ±labilir. Bu durumda, bu tÃ¼r bir ÅŸey yok, bu yÃ¼zden atlatmalar daha sÄ±nÄ±rlÄ±dÄ±r. Ancak, neler yapabileceÄŸimize bir gÃ¶z atalÄ±m:

* **Push EtkinleÅŸtir**: Yazma eriÅŸimi olan herhangi bir kiÅŸi ÅŸubeye itebilir, sadece itin.
* **Beyaz Liste KÄ±sÄ±tlÄ± Ä°tme**: AynÄ± ÅŸekilde, bu listede yer alÄ±yorsanÄ±z, ÅŸubeye itin.
* **BirleÅŸtirme Beyaz Listesini EtkinleÅŸtir**: Bir birleÅŸtirme beyaz listesi varsa, iÃ§inde olmanÄ±z gerekiyor.
* **Onaylar 0'dan bÃ¼yÃ¼k olmalÄ±**: O zaman... baÅŸka bir kullanÄ±cÄ±yÄ± ele geÃ§irmeniz gerekiyor.
* **OnaylarÄ± beyaz listeye al**: Sadece beyaz listeye alÄ±nan kullanÄ±cÄ±lar onay verebilirse... o zaman bu listede olan baÅŸka bir kullanÄ±cÄ±yÄ± ele geÃ§irmeniz gerekiyor.
* **Eski onaylarÄ± reddet**: Onaylar yeni taahhÃ¼tlerle kaldÄ±rÄ±lmazsa, zaten onaylanmÄ±ÅŸ bir PR'yi ele geÃ§irerek kodunuzu enjekte edebilir ve PR'yi birleÅŸtirebilirsiniz.

UnutmayÄ±n ki **bir org/repo yÃ¶neticisi** olarak korumalarÄ± atlayabilirsiniz.

### Webhook'larÄ± NumaralandÄ±rma

**Webhook'lar**, belirli gitea bilgilerini bazÄ± yerlere **gÃ¶nderebilir**. Bu iletiÅŸimi **sÃ¶mÃ¼rmek** mÃ¼mkÃ¼n olabilir.\
Ancak genellikle, webhook'ta **alÄ±namayan bir gizli** ayarlanÄ±r ve bu, webhook'un URL'sini bilen ancak gizliyi bilmeyen harici kullanÄ±cÄ±larÄ±n **webhook'u sÃ¶mÃ¼rmesini engeller**.\
Ancak bazÄ± durumlarda, insanlar gizliyi yerine **URL'de bir parametre olarak ayarlarlar**, bu nedenle URL'leri kontrol etmek, daha fazla sÃ¶mÃ¼rÃ¼lebilecek gizli bilgiler ve diÄŸer yerleri bulmanÄ±za olanak saÄŸlayabilir.

Webhook'lar **repo ve org dÃ¼zeyinde** ayarlanabilir.

## Son AÅŸama SÃ¶mÃ¼rÃ¼sÃ¼

### Sunucu Ä°Ã§inde

Herhangi bir ÅŸekilde gitea'nÄ±n Ã§alÄ±ÅŸtÄ±ÄŸÄ± sunucuya eriÅŸmeyi baÅŸarÄ±rsanÄ±z, gitea yapÄ±landÄ±rma dosyasÄ±nÄ± aramalÄ±sÄ±nÄ±z. VarsayÄ±lan olarak `/data/gitea/conf/app.ini` konumunda bulunur.

Bu dosyada **anahtarlar** ve **ÅŸifreler** bulabilirsiniz.

Gitea yolunda (varsayÄ±lan olarak: /data/gitea), ayrÄ±ca aÅŸaÄŸÄ±daki gibi ilginÃ§ bilgiler bulabilirsiniz:

* **sqlite** DB: Gitea, harici bir veritabanÄ± kullanmÄ±yorsa, bir sqlite veritabanÄ± kullanÄ±r.
* Oturumlar oturumlar klasÃ¶rÃ¼ iÃ§inde: `cat sessions/*/*/*` komutunu Ã§alÄ±ÅŸtÄ±rarak oturum aÃ§mÄ±ÅŸ kullanÄ±cÄ±larÄ±n kullanÄ±cÄ± adlarÄ±nÄ± gÃ¶rebilirsiniz (gitea oturumlarÄ± ayrÄ±ca DB iÃ§inde kaydedebilir).
* jwt klasÃ¶rÃ¼ iÃ§indeki **jwt Ã¶zel anahtarÄ±**
* Bu klasÃ¶rde daha fazla **hassas bilgi** bulunabilir

Sunucu iÃ§indeyseniz, bilgilere eriÅŸmek/deÄŸiÅŸtirmek iÃ§in **`gitea` ikili dosyasÄ±nÄ±** kullanabilirsiniz:

* `gitea dump` gitea'yÄ± dÃ¶ker ve bir .zip dosyasÄ± oluÅŸturur
* `gitea generate secret INTERNAL_TOKEN/JWT_SECRET/SECRET_KEY/LFS_JWT_SECRET` belirtilen tÃ¼rde bir belirteÃ§ oluÅŸturur (kalÄ±cÄ±lÄ±k)
* `gitea admin user change-password --username admin --password newpassword` Åifreyi deÄŸiÅŸtirir
* `gitea admin user create --username newuser --password superpassword --email user@user.user --admin --access-token` Yeni yÃ¶netici kullanÄ±cÄ± oluÅŸturur ve bir eriÅŸim belirteci alÄ±r

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **tanÄ±tmak veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINA**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin, Ã¶zel [**NFT'lerimizi**](https://opensea.io/collection/the-peass-family) gÃ¶rÃ¼n
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da** takip edin.
* **Hacking hilelerinizi HackTricks ve HackTricks Cloud** github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
