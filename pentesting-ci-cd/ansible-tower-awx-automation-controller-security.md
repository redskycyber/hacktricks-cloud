# Ansible Tower / AWX / Otomasyon Denetleyici GÃ¼venliÄŸi

<details>

<summary><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimizden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## Temel Bilgiler

**Ansible Tower** veya aÃ§Ä±k kaynak versiyonu olan [**AWX**](https://github.com/ansible/awx), aynÄ± zamanda **Ansible'Ä±n kullanÄ±cÄ± arayÃ¼zÃ¼, gÃ¶sterge tablosu ve REST API'si** olarak da bilinir. **Rol tabanlÄ± eriÅŸim kontrolÃ¼**, iÅŸ zamanlamasÄ± ve grafik tabanlÄ± envanter yÃ¶netimi ile Ansible altyapÄ±nÄ±zÄ± modern bir kullanÄ±cÄ± arayÃ¼zÃ¼nden yÃ¶netebilirsiniz. Tower'Ä±n REST API'si ve komut satÄ±rÄ± arayÃ¼zÃ¼, mevcut araÃ§lar ve iÅŸ akÄ±ÅŸlarÄ±na kolayca entegre etmenizi saÄŸlar.

**Otomasyon Denetleyici**, daha fazla yeteneÄŸe sahip olan Ansible Tower'Ä±n daha yeni bir sÃ¼rÃ¼mÃ¼dÃ¼r.

### FarklÄ±lÄ±klar

[**Bu**](https://blog.devops.dev/ansible-tower-vs-awx-under-the-hood-65cfec78db00) kaynaÄŸa gÃ¶re, Ansible Tower ile AWS arasÄ±ndaki temel farklar, aldÄ±ÄŸÄ± destek ve Ansible Tower'Ä±n rol tabanlÄ± eriÅŸim kontrolÃ¼, Ã¶zel API'lar iÃ§in destek ve kullanÄ±cÄ± tanÄ±mlÄ± iÅŸ akÄ±ÅŸlarÄ± gibi ek Ã¶zelliklere sahip olmasÄ±dÄ±r.

### Teknoloji YÄ±ÄŸÄ±nÄ±

* **Web ArayÃ¼zÃ¼**: Bu, kullanÄ±cÄ±larÄ±n envanterleri, kimlik bilgilerini, ÅŸablonlarÄ± ve iÅŸleri yÃ¶netebileceÄŸi grafik arayÃ¼zdÃ¼r. KullanÄ±mÄ± kolay olacak ÅŸekilde tasarlanmÄ±ÅŸtÄ±r ve otomasyon iÅŸlerinin durumunu ve sonuÃ§larÄ±nÄ± anlamaya yardÄ±mcÄ± olacak gÃ¶rselleÅŸtirmeler sunar.
* **REST API**: Web arayÃ¼zÃ¼nde yapabileceÄŸiniz her ÅŸeyi REST API Ã¼zerinden de yapabilirsiniz. Bu, AWX/Tower'Ä± diÄŸer sistemlerle entegre etmenizi veya genellikle arayÃ¼zde gerÃ§ekleÅŸtireceÄŸiniz eylemleri betiklemeyi saÄŸlar.
* **VeritabanÄ±**: AWX/Tower, yapÄ±landÄ±rmasÄ±nÄ±, iÅŸ sonuÃ§larÄ±nÄ± ve diÄŸer gerekli iÅŸletme verilerini depolamak iÃ§in bir veritabanÄ± (genellikle PostgreSQL) kullanÄ±r.
* **RabbitMQ**: AWX/Tower'Ä±n farklÄ± bileÅŸenler arasÄ±nda iletiÅŸim kurmak iÃ§in kullandÄ±ÄŸÄ± mesajlaÅŸma sistemidir, Ã¶zellikle web hizmeti ile gÃ¶rev Ã§alÄ±ÅŸtÄ±rÄ±cÄ±larÄ± arasÄ±nda.
* **Redis**: Redis, bir Ã¶nbellek ve gÃ¶rev kuyruÄŸu iÃ§in bir arka uÃ§ olarak hizmet verir.

### MantÄ±ksal BileÅŸenler

* **Envanterler**: Bir envanter, **iÅŸlerin** (Ansible playbook'larÄ±) **Ã§alÄ±ÅŸtÄ±rÄ±labileceÄŸi ana bilgisayarlarÄ±n (veya dÃ¼ÄŸÃ¼mlerin)** bir **koleksiyonudur**. AWX/Tower, envanterlerinizi tanÄ±mlamanÄ±za ve gruplandÄ±rmanÄ±za olanak tanÄ±r ve AWS, Azure vb. gibi diÄŸer sistemlerden ana bilgisayar listelerini **alabilen dinamik envanterleri** destekler.
* **Projeler**: Bir proje, ihtiyaÃ§ duyulduÄŸunda en son playbook'larÄ± Ã§ekmek iÃ§in bir **sÃ¼rÃ¼m kontrol sistemi**nden (Git gibi) alÄ±nan Ansible playbook'larÄ±nÄ±n bir **koleksiyonu**dur.
* **Åablonlar**: Ä°ÅŸ ÅŸablonlarÄ±, belirli bir playbook'un nasÄ±l Ã§alÄ±ÅŸtÄ±rÄ±lacaÄŸÄ±nÄ± belirler ve iÅŸ iÃ§in envanter, kimlik bilgileri ve diÄŸer parametreleri belirtir.
* **Kimlik Bilgileri**: AWX/Tower, SSH anahtarlarÄ±, ÅŸifreler ve API belirteÃ§leri gibi sÄ±rlarÄ± **gÃ¼venli bir ÅŸekilde yÃ¶netmek ve depolamak** iÃ§in bir yÃ¶ntem saÄŸlar. Bu kimlik bilgileri, playbook'larÄ±n Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda gerekli eriÅŸimi saÄŸlamak iÃ§in iÅŸ ÅŸablonlarÄ±yla iliÅŸkilendirilebilir.
* **GÃ¶rev Motoru**: Ä°ÅŸte sihir burada gerÃ§ekleÅŸir. GÃ¶rev motoru, Ansible Ã¼zerine kurulmuÅŸtur ve playbook'larÄ± **Ã§alÄ±ÅŸtÄ±rmaktan sorumludur**. Ä°ÅŸler, gÃ¶rev motoruna gÃ¶nderilir, ardÄ±ndan belirtilen kimlik bilgilerini kullanarak belirtilen envanter Ã¼zerindeki Ansible playbook'larÄ±nÄ± Ã§alÄ±ÅŸtÄ±rÄ±r.
* **ZamanlayÄ±cÄ±lar ve Geri Ã‡aÄŸrÄ±lar**: Bunlar, AWX/Tower'da iÅŸlerin belirli zamanlarda Ã§alÄ±ÅŸtÄ±rÄ±lmasÄ± veya harici olaylar tarafÄ±ndan tetiklenmesine izin veren geliÅŸmiÅŸ Ã¶zelliklerdir.
* **Bildirimler**: AWX/Tower, iÅŸlerin baÅŸarÄ± veya baÅŸarÄ±sÄ±zlÄ±k durumuna baÄŸlÄ± olarak bildirimler gÃ¶nderebilir. E-postalar, Slack mesajlarÄ±, web kancalarÄ± vb. gibi Ã§eÅŸitli bildirim yÃ¶ntemlerini destekler.
* **Ansible Playbook'larÄ±**: Ansible playbook'larÄ±, yapÄ±landÄ±rma, daÄŸÄ±tÄ±m ve orkestrasyon araÃ§larÄ±dÄ±r. Otomatik, tekrarlanabilir bir ÅŸekilde sistemlerin istenen durumunu tanÄ±mlarlar. YAML'de yazÄ±lan playbook'lar, yapÄ±landÄ±rmalarÄ±, gÃ¶revleri ve adÄ±mlarÄ± tanÄ±mlamak iÃ§in Ansible'Ä±n deklaratif otomasyon dilini kullanÄ±r.

### Ä°ÅŸ YÃ¼rÃ¼tme AkÄ±ÅŸÄ±

1. **KullanÄ±cÄ± EtkileÅŸimi**: Bir kullanÄ±cÄ±, AWX/Tower ile **Web ArayÃ¼zÃ¼** veya **REST API** aracÄ±lÄ±ÄŸÄ±yla etkileÅŸimde bulunabilir. Bu, AWX/Tower tarafÄ±ndan sunulan tÃ¼m iÅŸlevlere Ã¶n uÃ§ eriÅŸimi saÄŸlar.
2. **Ä°ÅŸ BaÅŸlatma**:
* KullanÄ±cÄ±, Web ArayÃ¼zÃ¼ veya API aracÄ±lÄ±ÄŸÄ±yla, bir **Ä°ÅŸ Åablonu**na dayalÄ± olarak bir iÅŸ baÅŸlatÄ±r.
* Ä°ÅŸ Åablonu, **Envanter**, **Proje** (playbook'Ä± iÃ§eren) ve **Kimlik Bilgileri**ne referanslar iÃ§erir.
* Ä°ÅŸ baÅŸlatÄ±ldÄ±ÄŸÄ±nda, iÅŸin yÃ¼rÃ¼tÃ¼lmesi iÃ§in bir istek AWX/Tower arka uÃ§una gÃ¶nderilir.
3. **Ä°ÅŸ KuyruÄŸa Alma**:
* **RabbitMQ**, web bileÅŸeni ile gÃ¶rev Ã§alÄ±ÅŸtÄ±rÄ±cÄ±larÄ± arasÄ±ndaki iletiÅŸimi yÃ¶netir. Bir iÅŸ baÅŸlatÄ±ldÄ±ÄŸÄ±nda, RabbitMQ kullanarak bir mesaj gÃ¶rev motoruna gÃ¶nderilir.
* **Redis**, bekleyen iÅŸleri yÃ¶neten gÃ¶rev kuyruÄŸu iÃ§in bir arka uÃ§ olarak hizmet verir.
4. **Ä°ÅŸ YÃ¼rÃ¼tme**:
* **GÃ¶rev Motoru**, kuyruÄŸa alÄ±nan iÅŸi alÄ±r. Ä°ÅŸin iliÅŸkili playbook, envanter ve kimlik bilgileri hakkÄ±ndaki gerekli bilgileri VeritabanÄ±ndan alÄ±r.
* Ä°liÅŸkili **Proje**den alÄ±nan Ansible playbook'u kullanarak GÃ¶rev Motoru, belirtilen **Envanter** dÃ¼ÄŸÃ¼mleri Ã¼zerinde belirtilen **Kimlik Bilgileri**ni kullanarak playbook'u Ã§alÄ±ÅŸtÄ±rÄ±r.
* Playbook Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±kÃ§a, yÃ¼rÃ¼tme Ã§Ä±ktÄ±sÄ± (gÃ¼nlÃ¼kler, gerÃ§ekler vb.) yakalanÄ±r ve VeritabanÄ±nda depolanÄ±r.
5. **Ä°ÅŸ SonuÃ§larÄ±**:
* Playbook Ã§alÄ±ÅŸmasÄ± tamamlandÄ±ÄŸÄ±nda, sonuÃ§lar (baÅŸarÄ±, baÅŸarÄ±sÄ±zlÄ±k, gÃ¼nlÃ¼kler) VeritabanÄ±na kaydedilir.
* KullanÄ±cÄ±lar sonuÃ§larÄ± Web Aray
```bash
git clone -b x.y.z https://github.com/ansible/awx.git # Get in x.y.z the latest release version

cd awx

# Build
make docker-compose-build

# Run
make docker-compose

# Or to create a more complex env
MAIN_NODE_TYPE=control EXECUTION_NODE_COUNT=2 COMPOSE_TAG=devel make docker-compose

# Clean and build the UI
docker exec tools_awx_1 make clean-ui ui-devel

# Once migrations are completed and the UI is built, you can begin using AWX. The UI can be reached in your browser at https://localhost:8043/#/home, and the API can be found at https://localhost:8043/api/v2.

# Create an admin user
docker exec -ti tools_awx_1 awx-manage createsuperuser

# Load demo data
docker exec tools_awx_1 awx-manage create_preload_data
```
{% endcode %}

## RBAC

### Desteklenen roller

En ayrÄ±calÄ±klÄ± rol **Sistem YÃ¶neticisi** olarak adlandÄ±rÄ±lÄ±r. Bu role sahip olan herkes **herhangi bir deÄŸiÅŸiklik yapabilir**.

**Beyaz kutu gÃ¼venliÄŸi** incelemesinden, **Sistem DenetÃ§isi rolÃ¼ne** ihtiyacÄ±nÄ±z olacaktÄ±r. Bu rol, **tÃ¼m sistem verilerini gÃ¶rÃ¼ntÃ¼lemeye** izin verir, ancak herhangi bir deÄŸiÅŸiklik yapamaz. BaÅŸka bir seÃ§enek **Organizasyon DenetÃ§isi rolÃ¼** olabilir, ancak diÄŸerini almak daha iyi olur.

<details>

<summary>DetaylÄ± rol aÃ§Ä±klamasÄ±nÄ± almak iÃ§in burayÄ± geniÅŸletin</summary>

1. **Sistem YÃ¶neticisi**:
* Bu, sistemdeki herhangi bir kaynaÄŸa eriÅŸim ve deÄŸiÅŸiklik yapma izinlerine sahip olan sÃ¼per kullanÄ±cÄ± rolÃ¼dÃ¼r.
* TÃ¼m organizasyonlarÄ±, ekipleri, projeleri, envanterleri, iÅŸ ÅŸablonlarÄ±nÄ± vb. yÃ¶netebilirler.
2. **Sistem DenetÃ§isi**:
* Bu role sahip kullanÄ±cÄ±lar tÃ¼m sistem verilerini gÃ¶rÃ¼ntÃ¼leyebilir, ancak herhangi bir deÄŸiÅŸiklik yapamazlar.
* Bu rol, uyumluluk ve denetim iÃ§in tasarlanmÄ±ÅŸtÄ±r.
3. **Organizasyon Roller**:
* **YÃ¶netici**: Organizasyonun kaynaklarÄ± Ã¼zerinde tam kontrol sahibi olur.
* **DenetÃ§i**: Organizasyonun kaynaklarÄ±na yalnÄ±zca gÃ¶rÃ¼ntÃ¼leme eriÅŸimi saÄŸlar.
* **Ãœye**: Belirli izinlere sahip olmadan bir organizasyonun temel Ã¼yeliÄŸi.
* **Ã‡alÄ±ÅŸtÄ±r**: Organizasyon iÃ§inde iÅŸ ÅŸablonlarÄ±nÄ± Ã§alÄ±ÅŸtÄ±rabilir.
* **Oku**: Organizasyonun kaynaklarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyebilir.
4. **Proje Roller**:
* **YÃ¶netici**: Projeyi yÃ¶netebilir ve deÄŸiÅŸtirebilir.
* **Kullan**: Projeyi bir iÅŸ ÅŸablonunda kullanabilir.
* **GÃ¼ncelle**: Kaynak kontrolÃ¼nÃ¼ kullanarak projeyi gÃ¼ncelleyebilir.
5. **Envanter Roller**:
* **YÃ¶netici**: Envanteri yÃ¶netebilir ve deÄŸiÅŸtirebilir.
* **Ad Hoc**: Envanter Ã¼zerinde anlÄ±k komutlar Ã§alÄ±ÅŸtÄ±rabilir.
* **GÃ¼ncelle**: Envanter kaynaÄŸÄ±nÄ± gÃ¼ncelleyebilir.
* **Kullan**: Envanteri bir iÅŸ ÅŸablonunda kullanabilir.
* **Oku**: YalnÄ±zca gÃ¶rÃ¼ntÃ¼leme eriÅŸimi.
6. **Ä°ÅŸ Åablonu Roller**:
* **YÃ¶netici**: Ä°ÅŸ ÅŸablonunu yÃ¶netebilir ve deÄŸiÅŸtirebilir.
* **Ã‡alÄ±ÅŸtÄ±r**: Ä°ÅŸi Ã§alÄ±ÅŸtÄ±rabilir.
* **Oku**: YalnÄ±zca gÃ¶rÃ¼ntÃ¼leme eriÅŸimi.
7. **Kimlik Bilgisi Roller**:
* **YÃ¶netici**: Kimlik bilgilerini yÃ¶netebilir ve deÄŸiÅŸtirebilir.
* **Kullan**: Kimlik bilgilerini iÅŸ ÅŸablonlarÄ±nda veya diÄŸer ilgili kaynaklarda kullanabilir.
* **Oku**: YalnÄ±zca gÃ¶rÃ¼ntÃ¼leme eriÅŸimi.
8. **Ekip Roller**:
* **Ãœye**: Ekip Ã¼yesi, ancak belirli izinlere sahip deÄŸil.
* **YÃ¶netici**: Ekip Ã¼yelerini ve iliÅŸkili kaynaklarÄ± yÃ¶netebilir.
9. **Ä°ÅŸ AkÄ±ÅŸÄ± Roller**:
* **YÃ¶netici**: Ä°ÅŸ akÄ±ÅŸÄ±nÄ± yÃ¶netebilir ve deÄŸiÅŸtirebilir.
* **Ã‡alÄ±ÅŸtÄ±r**: Ä°ÅŸ akÄ±ÅŸÄ±nÄ± Ã§alÄ±ÅŸtÄ±rabilir.
* **Oku**: YalnÄ±zca gÃ¶rÃ¼ntÃ¼leme eriÅŸimi.

</details>

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **tanÄ±tmak** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'i **takip edin**.
* Hacking hilelerinizi **HackTricks** ve **HackTricks Cloud** github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
