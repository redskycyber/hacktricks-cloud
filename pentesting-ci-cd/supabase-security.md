# Supabase GÃ¼venliÄŸi

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI'na**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## Temel Bilgiler

[**Landing sayfalarÄ±na**](https://supabase.com/) gÃ¶re Supabase, aÃ§Ä±k kaynaklÄ± bir Firebase alternatifidir. Projeye Postgres veritabanÄ±, Kimlik DoÄŸrulama, anlÄ±k API'lar, Kenar Ä°ÅŸlevleri, GerÃ§ek ZamanlÄ± abonelikler, Depolama ve VektÃ¶r gÃ¶mmeleri ile baÅŸlayÄ±n.

### Alt Alan AdÄ±

Temelde bir proje oluÅŸturulduÄŸunda, kullanÄ±cÄ± **`jnanozjdybtpqgcwhdiz.supabase.co`** gibi bir supabase.co alt alan adÄ± alacaktÄ±r.

## **VeritabanÄ± yapÄ±landÄ±rmasÄ±**

{% hint style="success" %}
**Bu verilere `https://supabase.com/dashboard/project/<project-id>/settings/database` gibi bir baÄŸlantÄ±dan eriÅŸilebilir**
{% endhint %}

Bu **veritabanÄ±** bazÄ± AWS bÃ¶lgelerine daÄŸÄ±tÄ±lacak ve ona baÄŸlanmak iÃ§in ÅŸu ÅŸekilde baÄŸlanmak mÃ¼mkÃ¼n olacaktÄ±r: `postgres://postgres.jnanozjdybtpqgcwhdiz:[YOUR-PASSWORD]@aws-0-us-west-1.pooler.supabase.com:5432/postgres` (bu us-west-1'de oluÅŸturuldu).\
Åifre Ã¶nceden kullanÄ±cÄ±nÄ±n belirlediÄŸi bir **ÅŸifredir**.

Bu nedenle, alt alan adÄ± bilindiÄŸi ve kullanÄ±cÄ± adÄ± olarak kullanÄ±ldÄ±ÄŸÄ± iÃ§in ve AWS bÃ¶lgeleri sÄ±nÄ±rlÄ± olduÄŸundan, **ÅŸifreyi denemek iÃ§in kaba kuvvet uygulamak** mÃ¼mkÃ¼n olabilir.

Bu bÃ¶lÃ¼m ayrÄ±ca ÅŸunlarÄ± iÃ§erir:

* VeritabanÄ± ÅŸifresini sÄ±fÄ±rlama
* BaÄŸlantÄ± havuzunu yapÄ±landÄ±rma
* SSL'yi yapÄ±landÄ±rma: DÃ¼z metin baÄŸlantÄ±larÄ±nÄ± reddet (varsayÄ±lan olarak etkindir)
* Disk boyutunu yapÄ±landÄ±rma
* AÄŸ kÄ±sÄ±tlamalarÄ± ve yasaklarÄ± uygulama

## API YapÄ±landÄ±rmasÄ±

{% hint style="success" %}
**Bu verilere `https://supabase.com/dashboard/project/<project-id>/settings/api` gibi bir baÄŸlantÄ±dan eriÅŸilebilir**
{% endhint %}

Projedeki supabase API'Ä±na eriÅŸmek iÃ§in URL ÅŸu ÅŸekilde olacaktÄ±r: `https://jnanozjdybtpqgcwhdiz.supabase.co`.

### anon api anahtarlarÄ±

AyrÄ±ca, `role: "anon"` olan bir **anon API anahtarÄ±** oluÅŸturacaktÄ±r, Ã¶rneÄŸin: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk` uygulamanÄ±n API'ye eriÅŸmek iÃ§in kullanmasÄ± gerekecektir.

Bu API'ye eriÅŸmek iÃ§in API REST'i [**belgelerde**](https://supabase.com/docs/reference/self-hosting-auth/returns-the-configuration-settings-for-the-gotrue-server) bulunabilir, ancak en ilginÃ§ uÃ§ noktalar ÅŸunlar olacaktÄ±r:

<details>

<summary>Kaydol (/auth/v1/signup)</summary>
```
POST /auth/v1/signup HTTP/2
Host: id.io.net
Content-Length: 90
X-Client-Info: supabase-js-web/2.39.2
Sec-Ch-Ua: "Not-A.Brand";v="99", "Chromium";v="124"
Sec-Ch-Ua-Mobile: ?0
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36
Content-Type: application/json;charset=UTF-8
Apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
Sec-Ch-Ua-Platform: "macOS"
Accept: */*
Origin: https://cloud.io.net
Sec-Fetch-Site: same-site
Sec-Fetch-Mode: cors
Sec-Fetch-Dest: empty
Referer: https://cloud.io.net/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-GB,en-US;q=0.9,en;q=0.8
Priority: u=1, i

{"email":"test@exmaple.com","password":"SomeCOmplexPwd239."}
```
</details>

<details>

<summary>GiriÅŸ (/auth/v1/token?grant_type=password)</summary>
```
POST /auth/v1/token?grant_type=password HTTP/2
Host: hypzbtgspjkludjcnjxl.supabase.co
Content-Length: 80
X-Client-Info: supabase-js-web/2.39.2
Sec-Ch-Ua: "Not-A.Brand";v="99", "Chromium";v="124"
Sec-Ch-Ua-Mobile: ?0
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36
Content-Type: application/json;charset=UTF-8
Apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ5OTI3MTksImV4cCI6MjAzMDU2ODcxOX0.sRN0iMGM5J741pXav7UxeChyqBE9_Z-T0tLA9Zehvqk
Sec-Ch-Ua-Platform: "macOS"
Accept: */*
Origin: https://cloud.io.net
Sec-Fetch-Site: same-site
Sec-Fetch-Mode: cors
Sec-Fetch-Dest: empty
Referer: https://cloud.io.net/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-GB,en-US;q=0.9,en;q=0.8
Priority: u=1, i

{"email":"test@exmaple.com","password":"SomeCOmplexPwd239."}
```
</details>

Bu yÃ¼zden, bir mÃ¼ÅŸterinin supabase'i kullandÄ±ÄŸÄ±nÄ± ve kendilerine verilen alt alan adÄ±nÄ± keÅŸfettiÄŸinizde (ÅŸirketin bir alt alan adÄ±nÄ±n supabase alt alan adÄ±nÄ±n Ã¼stÃ¼nde bir CNAME'e sahip olmasÄ± mÃ¼mkÃ¼ndÃ¼r), **supabase API'sÄ±nÄ± kullanarak platformda yeni bir hesap oluÅŸturmayÄ± deneyebilirsiniz**.

### gizli / service\_role api anahtarlarÄ±

Bir gizli API anahtarÄ± da **`role: "service_role"`** ile oluÅŸturulacaktÄ±r. Bu API anahtarÄ± gizli olmalÄ±dÄ±r Ã§Ã¼nkÃ¼ **SatÄ±r DÃ¼zeyi GÃ¼venliÄŸi** atlayabilecektir.

API anahtarÄ± ÅŸu ÅŸekildedir: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpuYW5vemRyb2J0cHFnY3doZGl6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxNDk5MjcxOSwiZXhwIjoyMDMwNTY4NzE5fQ.0a8fHGp3N_GiPq0y0dwfs06ywd-zhTwsm486Tha7354`

### JWT Secret

UygulamanÄ±n **Ã¶zel JWT belirteci** de oluÅŸturulacak, bÃ¶ylece uygulama **Ã¶zel JWT belirteÃ§leri oluÅŸturup imzalayabilir**.

## Kimlik DoÄŸrulama

### KayÄ±tlar

{% hint style="success" %}
**VarsayÄ±lan olarak**, supabase **yeni kullanÄ±cÄ±larÄ±n** Ã¶nceki bahsedilen API uÃ§ noktalarÄ±nÄ± kullanarak projenizde hesap oluÅŸturmalarÄ±na izin verecektir.
{% endhint %}

Ancak, bu yeni hesaplarÄ±n, varsayÄ±lan olarak, **giriÅŸ yapabilmek iÃ§in e-posta adreslerini doÄŸrulamalarÄ± gerekecektir**. E-posta adreslerini doÄŸrulamadan giriÅŸ yapmalarÄ±na izin vermek iÃ§in **"Anonim giriÅŸlere izin ver"** Ã¶zelliÄŸini etkinleÅŸtirmek mÃ¼mkÃ¼ndÃ¼r. Bu, **beklenmeyen verilere eriÅŸim** saÄŸlayabilir (rolleri `public` ve `authenticated` olur).\
Bu Ã§ok kÃ¶tÃ¼ bir fikirdir Ã§Ã¼nkÃ¼ supabase aktif kullanÄ±cÄ± baÅŸÄ±na Ã¼cretlendirme yapar, bu yÃ¼zden insanlar kullanÄ±cÄ±lar oluÅŸturabilir ve giriÅŸ yapabilir ve supabase bu kullanÄ±cÄ±lar iÃ§in Ã¼cretlendirme yapacaktÄ±r:

<figure><img src="../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

### Åifreler & oturumlar

Minimum ÅŸifre uzunluÄŸunu (varsayÄ±lan olarak), gereksinimleri (varsayÄ±lan olarak yok) belirtmek ve sÄ±zdÄ±rÄ±lmÄ±ÅŸ ÅŸifreleri kullanmayÄ± engellemek mÃ¼mkÃ¼ndÃ¼r.\
VarsayÄ±lan olanlarÄ±n zayÄ±f olduÄŸu iÃ§in **gereksinimleri iyileÅŸtirmek Ã¶nerilir**.

* KullanÄ±cÄ± OturumlarÄ±: KullanÄ±cÄ± oturumlarÄ±nÄ±n nasÄ±l Ã§alÄ±ÅŸacaÄŸÄ±nÄ± yapÄ±landÄ±rmak mÃ¼mkÃ¼ndÃ¼r (zaman aÅŸÄ±mÄ±, kullanÄ±cÄ± baÅŸÄ±na 1 oturum...)
* Bot ve KÃ¶tÃ¼ye KullanÄ±m KorumasÄ±: Captcha'yÄ± etkinleÅŸtirmek mÃ¼mkÃ¼ndÃ¼r.

### SMTP AyarlarÄ±

E-posta gÃ¶ndermek iÃ§in bir SMTP ayarlamak mÃ¼mkÃ¼ndÃ¼r.

### GeliÅŸmiÅŸ Ayarlar

* EriÅŸim belirteÃ§lerinin sÃ¼resini ayarlamak (varsayÄ±lan olarak 3600)
* Potansiyel olarak tehlikeye atÄ±lmÄ±ÅŸ yenileme belirteÃ§lerini tespit etmek ve iptal etmek iÃ§in zaman aÅŸÄ±mÄ± ayarlamak
* MFA: KullanÄ±cÄ± baÅŸÄ±na aynÄ± anda kaÃ§ MFA faktÃ¶rÃ¼nÃ¼n kaydedilebileceÄŸini belirtmek (varsayÄ±lan olarak 10)
* Maksimum DoÄŸrudan VeritabanÄ± BaÄŸlantÄ±larÄ±: Kimlik doÄŸrulamada kullanÄ±lan baÄŸlantÄ±larÄ±n maksimum sayÄ±sÄ± (varsayÄ±lan olarak 10)
* Maksimum Ä°stek SÃ¼resi: Bir Kimlik doÄŸrulama isteÄŸinin sÃ¼rebileceÄŸi maksimum sÃ¼re (varsayÄ±lan olarak 10s)

## Depolama

{% hint style="success" %}
Supabase, **dosyalarÄ± depolamaya** ve bunlara bir URL Ã¼zerinden eriÅŸilebilmesini saÄŸlamaya izin verir (S3 kovalarÄ± kullanÄ±r).
{% endhint %}

* YÃ¼kleme dosya boyutu sÄ±nÄ±rÄ±nÄ± ayarlamak (varsayÄ±lan olarak 50MB)
* S3 baÄŸlantÄ±sÄ±, ÅŸu ÅŸekilde bir URL ile verilir: `https://jnanozjdybtpqgcwhdiz.supabase.co/storage/v1/s3`
* Bir `eriÅŸim anahtarÄ± kimliÄŸi` (Ã¶r. `a37d96544d82ba90057e0e06131d0a7b`) ve bir `gizli eriÅŸim anahtarÄ±` (Ã¶r. `58420818223133077c2cec6712a4f909aec93b4daeedae205aa8e30d5a860628`) tarafÄ±ndan oluÅŸturulan S3 eriÅŸim anahtarlarÄ±nÄ± **isteme** mÃ¼mkÃ¼ndÃ¼r.

## Kenar Ä°ÅŸlevleri

Supabase'e **saklanacak sÄ±rlarÄ±** da mÃ¼mkÃ¼ndÃ¼r ve bunlar **kenar iÅŸlevleri tarafÄ±ndan eriÅŸilebilir** olacaktÄ±r (web Ã¼zerinden oluÅŸturulabilir ve silinebilirler, ancak deÄŸerlerine doÄŸrudan eriÅŸmek mÃ¼mkÃ¼n deÄŸildir).

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hacklemeyi Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na gÃ¶z atÄ±n(https://github.com/sponsors/carlospolop)!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu
* **ğŸ’¬ [Discord grubuna](https://discord.gg/hRep4RUj7f) veya [telegram grubuna](https://t.me/peass) katÄ±lÄ±n veya** bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **Hacking hilelerinizi gÃ¶ndererek HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR'lar gÃ¶ndererek paylaÅŸÄ±n.

</details>
