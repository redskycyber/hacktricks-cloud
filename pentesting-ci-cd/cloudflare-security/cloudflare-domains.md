# Domeny Cloudflare

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Kup [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na GitHubie.

</details>

W kaÅ¼dej skonfigurowanej domenie w Cloudflare moÅ¼na skonfigurowaÄ‡ pewne **ogÃ³lne ustawienia i usÅ‚ugi**. Na tej stronie zamierzamy **analizowaÄ‡ ustawienia zwiÄ…zane z bezpieczeÅ„stwem w kaÅ¼dej sekcji:**

<figure><img src="../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

## PrzeglÄ…d

* [ ] ZdobÄ…dÅº poczucie **jak bardzo** usÅ‚ugi konta sÄ… **uÅ¼ywane**
* [ ] ZnajdÅº rÃ³wnieÅ¼ **ID strefy** i **ID konta**

## Analiza

* [ ] W sekcji **`BezpieczeÅ„stwo`** sprawdÅº, czy istnieje jakieÅ› **Ograniczenie szybkoÅ›ci**

## DNS

* [ ] SprawdÅº **interesujÄ…ce** (wraÅ¼liwe?) dane w rekordach DNS
* [ ] SprawdÅº **poddomeny**, ktÃ³re mogÄ… zawieraÄ‡ **wraÅ¼liwe informacje** tylko na podstawie **nazwy** (np. admin173865324.domin.com)
* [ ] SprawdÅº strony internetowe, ktÃ³re **nie sÄ…** **proxy**
* [ ] SprawdÅº **strony internetowe z proxy**, do ktÃ³rych moÅ¼na uzyskaÄ‡ **bezpoÅ›redni dostÄ™p** za pomocÄ… CNAME lub adresu IP
* [ ] SprawdÅº, czy **DNSSEC** jest **wÅ‚Ä…czony**
* [ ] SprawdÅº, czy **Splaszczenie CNAME** jest **uÅ¼ywane** we **wszystkich CNAME**
* MoÅ¼e to byÄ‡ przydatne do **ukrycia podatnoÅ›ci na przejÄ™cie poddomeny** i poprawy czasÃ³w Å‚adowania
* [ ] SprawdÅº, czy domeny [**nie sÄ… podatne na podszywanie siÄ™**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

## **Email**

TODO

## Spectrum

TODO

## SSL/TLS

### **PrzeglÄ…d**

* [ ] Szyfrowanie **SSL/TLS** powinno byÄ‡ **PeÅ‚ne** lub **PeÅ‚ne (ÅšcisÅ‚e)**. KaÅ¼de inne spowoduje przesyÅ‚anie **ruchu w tekÅ›cie jawnym** w pewnym momencie.
* [ ] Rekomendowane jest wÅ‚Ä…czenie **Rekomendacji SSL/TLS**

### Certyfikaty Edge

* [ ] **Zawsze uÅ¼ywaj protokoÅ‚u HTTPS** powinno byÄ‡ **wÅ‚Ä…czone**
* [ ] **ÅšcisÅ‚a polityka transportu HTTP (HSTS)** powinna byÄ‡ **wÅ‚Ä…czona**
* [ ] **Minimalna wersja TLS powinna wynosiÄ‡ 1.2**
* [ ] **TLS 1.3 powinien byÄ‡ wÅ‚Ä…czony**
* [ ] **Automatyczne przepisywanie na HTTPS** powinno byÄ‡ **wÅ‚Ä…czone**
* [ ] Monitorowanie **TransparentnoÅ›ci CertyfikatÃ³w** powinno byÄ‡ **wÅ‚Ä…czone**

## **BezpieczeÅ„stwo**

* [ ] W sekcji **`WAF`** warto sprawdziÄ‡, czy sÄ… uÅ¼ywane **reguÅ‚y zapory** i **ograniczenia szybkoÅ›ci** w celu zapobiegania naduÅ¼yciom.
* DziaÅ‚anie **`Bypass`** wyÅ‚Ä…czy funkcje bezpieczeÅ„stwa Cloudflare dla Å¼Ä…dania. Nie powinno byÄ‡ uÅ¼ywane.
* [ ] W sekcji **`Page Shield`** zaleca siÄ™ sprawdzenie, czy jest **wÅ‚Ä…czony**, jeÅ›li jest uÅ¼ywana jakaÅ› strona
* [ ] W sekcji **`API Shield`** zaleca siÄ™ sprawdzenie, czy jest **wÅ‚Ä…czony**, jeÅ›li jakieÅ› API jest wystawione w Cloudflare
* [ ] W sekcji **`DDoS`** zaleca siÄ™ wÅ‚Ä…czenie ochrony **DDoS**
* [ ] W sekcji **`Ustawienia`**:
* [ ] SprawdÅº, czy **`Poziom bezpieczeÅ„stwa`** jest **Å›redni** lub wyÅ¼szy
* [ ] SprawdÅº, czy **`PrzejÅ›cie wyzwania`** wynosi maksymalnie 1 godzinÄ™
* [ ] SprawdÅº, czy **`Sprawdzanie integralnoÅ›ci przeglÄ…darki`** jest **wÅ‚Ä…czone**
* [ ] SprawdÅº, czy **`Wsparcie dla Privacy Pass`** jest **wÅ‚Ä…czone**

### **Ochrona przed DDoS w CloudFlare**

* JeÅ›li moÅ¼esz, wÅ‚Ä…cz **Tryb Walki z Botami** lub **Super Tryb Walki z Botami**. JeÅ›li chronisz jakieÅ› API dostÄ™pne programowo (na przykÅ‚ad z strony frontowej JS), moÅ¼esz nie mÃ³c tego wÅ‚Ä…czyÄ‡ bez zakÅ‚Ã³cania tego dostÄ™pu.
* W **WAF**: MoÅ¼esz tworzyÄ‡ **limity szybkoÅ›ci wedÅ‚ug Å›cieÅ¼ki URL** lub dla **zweryfikowanych botÃ³w** (reguÅ‚y ograniczania szybkoÅ›ci), lub **blokowaÄ‡ dostÄ™p** na podstawie IP, Cookie, odwoÅ‚ujÄ…cego siÄ™...). MoÅ¼esz wiÄ™c blokowaÄ‡ Å¼Ä…dania, ktÃ³re nie pochodzÄ… z strony internetowej lub nie majÄ… ciasteczka.
* JeÅ›li atak pochodzi od **zweryfikowanego bota**, przynajmniej **dodaj limit szybkoÅ›ci** dla botÃ³w.
* JeÅ›li atak jest na **konkretnÄ… Å›cieÅ¼kÄ™**, jako mechanizm zapobiegawczy, dodaj **limit szybkoÅ›ci** na tej Å›cieÅ¼ce.
* MoÅ¼esz rÃ³wnieÅ¼ **uwzglÄ™dniÄ‡ na biaÅ‚ej liÅ›cie** adresy IP, zakresy IP, kraje lub ASNs z **narzÄ™dzi** w WAF.
* SprawdÅº, czy **ZarzÄ…dzane reguÅ‚y** mogÄ… rÃ³wnieÅ¼ pomÃ³c w zapobieganiu eksploatacjom podatnoÅ›ci.
* W sekcji **NarzÄ™dzia** moÅ¼esz **blokowaÄ‡ lub stawiaÄ‡ wyzwania okreÅ›lonym IP** i **agentom uÅ¼ytkownika.**
* W DDoS moÅ¼esz **nadpisaÄ‡ niektÃ³re reguÅ‚y, aby byÅ‚y bardziej restrykcyjne**.
* **Ustawienia**: Ustaw **Poziom bezpieczeÅ„stwa** na **Wysoki** i na **Atakowany** jeÅ›li jesteÅ› Atakowany i upewnij siÄ™, Å¼e **Sprawdzanie integralnoÅ›ci przeglÄ…darki jest wÅ‚Ä…czone**.
* W Domeny Cloudflare -> Analiza -> BezpieczeÅ„stwo -> SprawdÅº, czy jest wÅ‚Ä…czone **ograniczenie szybkoÅ›ci**
* W Domeny Cloudflare -> BezpieczeÅ„stwo -> Zdarzenia -> SprawdÅº **wykryte zdarzenia zÅ‚oÅ›liwe**

## DostÄ™p

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## SzybkoÅ›Ä‡

_Nie znalazÅ‚em Å¼adnej opcji zwiÄ…zanej z bezpieczeÅ„stwem_

## Buforowanie

* [ ] W sekcji **`Konfiguracja`** rozwaÅ¼ wÅ‚Ä…czenie **NarzÄ™dzia Skanowania CSAM**

## **Trasy Workers**

_JuÅ¼ powinieneÅ› sprawdziÄ‡_ [_workers Cloudflare_](./#workers)

## ReguÅ‚y

TODO

## SieÄ‡

* [ ] JeÅ›li **`HTTP/2`** jest **wÅ‚Ä…czone**, **`HTTP/2 do ÅºrÃ³dÅ‚a`** powinno byÄ‡ **wÅ‚Ä…czone**
* [ ] **`HTTP/3 (z QUIC)`** powinno byÄ‡ **wÅ‚Ä…czone**
* JeÅ›li **prywatnoÅ›Ä‡** twoich **uÅ¼ytkownikÃ³w** jest waÅ¼na, upewnij siÄ™, Å¼e **`Onion Routing`** jest **wÅ‚Ä…czony**

## **Ruch**

TODO

## Strony Niestandardowe

* [ ] Opcjonalnie skonfiguruj niestandardowe strony, gdy wystÄ…pi bÅ‚Ä…d zwiÄ…zany z bezpieczeÅ„stwem (np. blokada, ograniczenie szybkoÅ›ci lub tryb â€Jestem atakowanyâ€)

## Aplikacje

TODO
## Tarcza Scrapingu

* [ ] SprawdÅº, czy **Zaciemnianie Adresu Email** jest **wÅ‚Ä…czone**
* [ ] SprawdÅº, czy **WyÅ‚Ä…czenia Po Stronie Serwera** sÄ… **wÅ‚Ä…czone**

## **Zaraz**

TODO

## **Web3**

TODO

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**Grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na GitHubie.

</details>
