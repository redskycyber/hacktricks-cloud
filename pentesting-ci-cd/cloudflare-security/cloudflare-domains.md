# Cloudflare Domains

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

U svakom TLD konfigurisanom u Cloudflare-u postoje neka **opÅ¡ta podeÅ¡avanja i usluge** koje se mogu konfigurisati. Na ovoj stranici Ä‡emo **analizirati sigurnosna podeÅ¡avanja svake sekcije:**

<figure><img src="../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

## Pregled

* [ ] Stvorite oseÄ‡aj **koliko** su usluge naloga **koriÅ¡Ä‡ene**
* [ ] PronaÄ‘ite takoÄ‘e **zone ID** i **account ID**

## Analitika

* [ ] U **`Security`** proverite da li postoji **Rate limiting**

## DNS

* [ ] Proverite **interesantne** (osetljive?) podatke u DNS **zapisima**
* [ ] Proverite **poddomene** koje bi mogle sadrÅ¾ati **osetljive informacije** samo na osnovu **imenovanja** (kao Å¡to je admin173865324.domin.com)
* [ ] Proverite web stranice koje **nisu** **proksirane**
* [ ] Proverite **proksirane web stranice** do kojih se moÅ¾e **pristupiti direktno** putem CNAME-a ili IP adrese
* [ ] Proverite da li je **DNSSEC** **omoguÄ‡en**
* [ ] Proverite da li se **CNAME Flattening** koristi u **svim CNAME-ovima**
* Ovo moÅ¾e biti korisno za **sakrivanje ranjivosti preuzimanja poddomena** i poboljÅ¡anje vremena uÄitavanja
* [ ] Proverite da li domeni [**nisu ranjivi na spoofing**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

## **Email**

TODO

## Spectrum

TODO

## SSL/TLS

### **Pregled**

* [ ] **SSL/TLS enkripcija** treba da bude **Puna** ili **Puna (Striktna)**. Bilo koja druga Ä‡e slati **Äisti tekst saobraÄ‡aj** u nekom trenutku.
* [ ] PreporuÄuje se da je **SSL/TLS Recommender** omoguÄ‡en

### Edge Certifikati

* [ ] **Uvek koristi HTTPS** treba da bude **omoguÄ‡eno**
* [ ] **HTTP Strict Transport Security (HSTS)** treba da bude **omoguÄ‡eno**
* [ ] **Minimalna verzija TLS-a treba da bude 1.2**
* [ ] **TLS 1.3 treba da bude omoguÄ‡en**
* [ ] **Automatsko HTTPS preusmeravanje** treba da bude **omoguÄ‡eno**
* [ ] **Monitoring transparentnosti sertifikata** treba da bude **omoguÄ‡en**

## **Sigurnost**

* [ ] U odeljku **`WAF`** vaÅ¾no je proveriti da li se koriste **Firewall** i **pravila za ograniÄavanje brzine** kako bi se spreÄile zloupotrebe.
* Radnja **`Bypass`** Ä‡e **onemoguÄ‡iti sigurnosne funkcije Cloudflare-a** za zahtev. Ne bi trebalo da se koristi.
* [ ] U odeljku **`Page Shield`** preporuÄuje se provera da li je **omoguÄ‡en** ako se koristi neka stranica
* [ ] U odeljku **`API Shield`** preporuÄuje se provera da li je **omoguÄ‡en** ako je neki API izloÅ¾en u Cloudflare-u
* [ ] U odeljku **`DDoS`** preporuÄuje se omoguÄ‡avanje **DDoS zaÅ¡tite**
* [ ] U odeljku **`PodeÅ¡avanja`**:
* [ ] Proverite da li je **`Nivo sigurnosti`** **srednji** ili veÄ‡i
* [ ] Proverite da li je **`Prohod izazova`** maksimalno 1 sat
* [ ] Proverite da li je **`Provera celovitosti pregledaÄa`** **omoguÄ‡ena**
* [ ] Proverite da li je **`PodrÅ¡ka za privatnost Pass`** **omoguÄ‡ena**

### **CloudFlare DDoS ZaÅ¡tita**

* Ako moÅ¾ete, omoguÄ‡ite **Bot Fight Mode** ili **Super Bot Fight Mode**. Ako Å¡titite neki API koji se pristupa programski (sa JS front end stranice na primer). MoÅ¾da neÄ‡ete moÄ‡i da omoguÄ‡ite ovo bez naruÅ¡avanja tog pristupa.
* U **WAF-u**: MoÅ¾ete kreirati **ograniÄenja brzine po URL putanji** ili za **verifikovane botove** (pravila za ograniÄavanje brzine), ili za **blokiranje pristupa** na osnovu IP adrese, kolaÄiÄ‡a, referera...). Tako da moÅ¾ete blokirati zahteve koji ne dolaze sa web stranice ili nemaju kolaÄiÄ‡.
* Ako je napad od **verifikovanog bota**, barem dodajte **ograniÄenje brzine** za botove.
* Ako je napad na **specifiÄnu putanju**, kao preventivni mehanizam, dodajte **ograniÄenje brzine** na ovoj putanji.
* TakoÄ‘e moÅ¾ete **belistiati** IP adrese, IP opsege, zemlje ili ASN-ove iz **Alatki** u WAF-u.
* Proverite da li bi **Upravljana pravila** takoÄ‘e mogla pomoÄ‡i u spreÄavanju eksploatacije ranjivosti.
* U odeljku **Alatke** moÅ¾ete **blokirati ili postaviti izazov specifiÄnim IP adresama** i **korisniÄkim agentima.**
* U DDoS-u moÅ¾ete **zameniti neka pravila da budu restriktivnija**.
* **PodeÅ¡avanja**: Postavite **Nivo sigurnosti** na **Visok** i na **Pod napadom** ako ste pod napadom i proverite da je **Provera celovitosti pregledaÄa omoguÄ‡ena**.
* U Cloudflare Domains -> Analitika -> Sigurnost -> Proverite da li je omoguÄ‡eno **ograniÄenje brzine**
* U Cloudflare Domains -> Sigurnost -> DogaÄ‘aji -> Proverite da li su **detektovani zlonamerni dogaÄ‘aji**

## Pristup

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## Brzina

_Nisam mogao da pronaÄ‘em opciju koja se odnosi na sigurnost_

## KeÅ¡iranje

* [ ] U odeljku **`Konfiguracija`** razmotrite omoguÄ‡avanje **CSAM Skenera**

## **Workers Routes**

_VeÄ‡ ste trebali da proverite_ [_cloudflare workers_](./#workers)

## Pravila

TODO

## MreÅ¾a

* [ ] Ako je **`HTTP/2` omoguÄ‡en**, **`HTTP/2 do OdrediÅ¡ta`** treba da bude **omoguÄ‡eno**
* [ ] **`HTTP/3 (sa QUIC)`** treba da bude **omoguÄ‡eno**
* Ako je **privatnost** vaÅ¡ih **korisnika** vaÅ¾na, proverite da li je **`Onion Routing`** omoguÄ‡en

## **SaobraÄ‡aj**

TODO

## PrilagoÄ‘ene Stranice

* [ ] Opciono je konfigurisati prilagoÄ‘ene stranice kada se pokrene greÅ¡ka vezana za sigurnost (kao blokada, ograniÄavanje brzine ili reÅ¾im "Pod napadom")

## Aplikacije

TODO
## ZaÅ¡tita od skidanja

* [ ] Proverite da li je **Zamagljivanje adrese e-poÅ¡te** **omoguÄ‡eno**
* [ ] Proverite da li je **IskljuÄenje sa servera** **omoguÄ‡eno**

## **Zaraz**

TODO

## **Web3**

TODO

<details>

<summary><strong>NauÄite hakovanje AWS-a od poÄetnika do struÄnjaka sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikova slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
