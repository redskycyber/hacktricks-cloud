# Cloudflare åŸŸå

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨ **Twitter** ä¸Š **å…³æ³¨**æˆ‘ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

åœ¨ Cloudflare ä¸­é…ç½®çš„æ¯ä¸ªé¡¶çº§åŸŸåï¼ˆTLDï¼‰éƒ½å¯ä»¥é…ç½®ä¸€äº›**å¸¸è§„è®¾ç½®å’ŒæœåŠ¡**ã€‚åœ¨æœ¬é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å°†**åˆ†ææ¯ä¸ªéƒ¨åˆ†çš„å®‰å…¨ç›¸å…³è®¾ç½®**ï¼š

<figure><img src="../../.gitbook/assets/image (2) (4).png" alt=""><figcaption></figcaption></figure>

## æ¦‚è¿°

* [ ] äº†è§£è´¦æˆ·çš„æœåŠ¡ä½¿ç”¨æƒ…å†µ
* [ ] æŸ¥æ‰¾**åŒºåŸŸ ID**å’Œ**è´¦æˆ· ID**

## åˆ†æ

* [ ] åœ¨**`å®‰å…¨`**ä¸­æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•**é€Ÿç‡é™åˆ¶**

## DNS

* [ ] æ£€æŸ¥ DNS **è®°å½•**ä¸­çš„**æœ‰è¶£**ï¼ˆæ•æ„Ÿï¼Ÿï¼‰æ•°æ®
* [ ] æ ¹æ®**åç§°**ï¼ˆä¾‹å¦‚ admin173865324.domin.comï¼‰æ£€æŸ¥å¯èƒ½åŒ…å«**æ•æ„Ÿä¿¡æ¯**çš„**å­åŸŸ**
* [ ] æ£€æŸ¥**æœªä»£ç†**çš„ç½‘é¡µ
* [ ] æ£€æŸ¥å¯ä»¥é€šè¿‡ CNAME æˆ– IP åœ°å€**ç›´æ¥è®¿é—®**çš„**ä»£ç†ç½‘é¡µ**
* [ ] æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†**DNSSEC**
* [ ] æ£€æŸ¥æ˜¯å¦åœ¨**æ‰€æœ‰ CNAME**ä¸­ä½¿ç”¨äº†**CNAME Flattening**
* è¿™å¯èƒ½å¯¹**éšè—å­åŸŸæ¥ç®¡æ¼æ´**å’Œæé«˜åŠ è½½æ—¶é—´æœ‰ç”¨
* [ ] æ£€æŸ¥åŸŸåæ˜¯å¦**å®¹æ˜“å—åˆ°æ¬ºéª—**ï¼ˆ[å‚è€ƒé“¾æ¥](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)ï¼‰

## **ç”µå­é‚®ä»¶**

å¾…åŠäº‹é¡¹

## Spectrum

å¾…åŠäº‹é¡¹

## SSL/TLS

### **æ¦‚è¿°**

* [ ] SSL/TLS åŠ å¯†åº”ä¸º**å®Œå…¨**æˆ–**å®Œå…¨ï¼ˆä¸¥æ ¼ï¼‰**ã€‚å…¶ä»–ä»»ä½•é€‰é¡¹éƒ½ä¼šåœ¨æŸä¸ªæ—¶å€™å‘é€**æ˜æ–‡æµé‡**ã€‚
* [ ] åº”å¯ç”¨**SSL/TLS æ¨èå™¨**

### è¾¹ç¼˜è¯ä¹¦

* [ ] åº”å¯ç”¨**å§‹ç»ˆä½¿ç”¨ HTTPS**
* [ ] åº”å¯ç”¨**HTTP ä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼ˆHSTSï¼‰**
* [ ] **æœ€ä½ TLS ç‰ˆæœ¬åº”ä¸º 1.2**
* [ ] åº”å¯ç”¨**TLS 1.3**
* [ ] åº”å¯ç”¨**è‡ªåŠ¨ HTTPS é‡å†™**
* [ ] åº”å¯ç”¨**è¯ä¹¦é€æ˜åº¦ç›‘æ§**

## **å®‰å…¨**

* [ ] åœ¨**`WAF`**éƒ¨åˆ†ï¼Œæœ‰å¿…è¦æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†**é˜²ç«å¢™**å’Œ**é€Ÿç‡é™åˆ¶è§„åˆ™**ä»¥é˜²æ­¢æ»¥ç”¨ã€‚
* **`Bypass`** æ“ä½œå°†ä¸ºè¯·æ±‚**ç¦ç”¨ Cloudflare å®‰å…¨**åŠŸèƒ½ã€‚ä¸åº”ä½¿ç”¨æ­¤æ“ä½œã€‚
* [ ] åœ¨**`é¡µé¢é˜²æŠ¤`**éƒ¨åˆ†ï¼Œå»ºè®®æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†è¯¥åŠŸèƒ½ï¼ˆå¦‚æœä½¿ç”¨äº†ä»»ä½•é¡µé¢ï¼‰ã€‚
* [ ] åœ¨**`API é˜²æŠ¤`**éƒ¨åˆ†ï¼Œå»ºè®®æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†è¯¥åŠŸèƒ½ï¼ˆå¦‚æœåœ¨ Cloudflare ä¸­å…¬å¼€äº†ä»»ä½• APIï¼‰ã€‚
* [ ] åœ¨**`DDoS`**éƒ¨åˆ†ï¼Œå»ºè®®å¯ç”¨**DDoS ä¿æŠ¤**
* [ ] åœ¨**`è®¾ç½®`**éƒ¨åˆ†ï¼š
* [ ] æ£€æŸ¥**`å®‰å…¨çº§åˆ«`**æ˜¯å¦ä¸º**ä¸­ç­‰**æˆ–æ›´é«˜
* [ ] æ£€æŸ¥**`æŒ‘æˆ˜é€šè¿‡æ—¶é—´`**æ˜¯å¦æœ€å¤šä¸º 1 å°æ—¶
* [ ] æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†**`æµè§ˆå™¨å®Œæ•´æ€§æ£€æŸ¥`**
* [ ] æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†**`Privacy Pass Support`**

### **CloudFlare DDoS ä¿æŠ¤**

* å¦‚æœå¯ä»¥ï¼Œå¯ç”¨**Bot Fight Mode**æˆ–**Super Bot Fight Mode**ã€‚å¦‚æœæ‚¨æ­£åœ¨ä¿æŠ¤æŸä¸ªä»¥ç¼–ç¨‹æ–¹å¼è®¿é—®çš„ APIï¼ˆä¾‹å¦‚æ¥è‡ª JS å‰ç«¯é¡µé¢ï¼‰ï¼Œæ‚¨å¯èƒ½æ— æ³•åœ¨ä¸ä¸­æ–­è¯¥è®¿é—®çš„æƒ…å†µä¸‹å¯ç”¨æ­¤åŠŸèƒ½ã€‚
* åœ¨**WAF**ä¸­ï¼šæ‚¨å¯ä»¥é€šè¿‡ URL è·¯å¾„ï¼ˆé€Ÿç‡é™åˆ¶è§„åˆ™ï¼‰åˆ›å»º**é€Ÿç‡é™åˆ¶**ï¼Œæˆ–è€…æ ¹æ® IPã€Cookieã€å¼•èæ¥æºç­‰**é˜»æ­¢è®¿é—®**ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥é˜»æ­¢ä¸æ¥è‡ªç½‘é¡µæˆ–æ²¡æœ‰ Cookie çš„è¯·æ±‚ã€‚
* å¦‚æœæ— æ³•é˜»æ­¢æ¯ä¸ªæœºå™¨äººï¼Œè‡³å°‘ä¸ºæœºå™¨äººæ·»åŠ é€Ÿç‡é™åˆ¶ã€‚
* æ‚¨è¿˜å¯ä»¥åœ¨ WAF çš„**å·¥å…·**ä¸­å°† IP åœ°å€ã€IP èŒƒå›´ã€å›½å®¶æˆ– ASNs åŠ å…¥**ç™½åå•**ã€‚
* æ£€æŸ¥æ˜¯å¦**æ‰˜ç®¡è§„åˆ™**ä¹Ÿå¯ä»¥å¸®åŠ©é˜²æ­¢æ¼æ´åˆ©ç”¨ã€‚
* åœ¨å·¥å…·éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥**é˜»æ­¢æˆ–å‘ç‰¹å®š IP å‘å‡ºæŒ‘æˆ˜**
* åœ¨ DDoS ä¸­ï¼Œæ‚¨å¯ä»¥**è¦†ç›–æŸäº›è§„åˆ™ä»¥ä½¿å…¶æ›´åŠ ä¸¥æ ¼**ã€‚
* **è®¾ç½®**ï¼šå°†**å®‰å…¨çº§åˆ«**è®¾ç½®ä¸º**é«˜**ï¼Œå¦‚æœæ‚¨å—åˆ°æ”»å‡»ï¼Œåˆ™è®¾ç½®ä¸º**å—åˆ°æ”»å‡»**ï¼Œå¹¶ç¡®ä¿å¯ç”¨äº†**æµè§ˆå™¨å®Œæ•´æ€§æ£€æŸ¥**ã€‚
* åœ¨ Cloudflare åŸŸå -> åˆ†æ -> å®‰å…¨ -> æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†**é€Ÿç‡é™åˆ¶**
* åœ¨ Cloudflare åŸŸå -> å®‰å…¨ -> äº‹ä»¶ -> æ£€æŸ¥æ˜¯å¦æœ‰**æ£€æµ‹åˆ°çš„æ¶æ„äº‹ä»¶**

## è®¿é—®

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## é€Ÿåº¦

_æˆ‘æ‰¾ä¸åˆ°ä¸å®‰å…¨ç›¸å…³çš„ä»»ä½•é€‰é¡¹_

## ç¼“å­˜

* [ ] åœ¨**`é…ç½®`**éƒ¨åˆ†ï¼Œè€ƒè™‘å¯ç”¨**CSAM æ‰«æå·¥å…·**

## **Workers è·¯ç”±**

_æ‚¨åº”è¯¥å·²ç»æ£€æŸ¥è¿‡_ [_cloudflare workers_](./#workers)

## è§„åˆ™

å¾…åŠäº‹é¡¹
## ç½‘ç»œ

* [ ] å¦‚æœå¯ç”¨äº†**`HTTP/2`**ï¼Œåº”å¯ç”¨**`HTTP/2 to Origin`**
* [ ] åº”å¯ç”¨**`HTTP/3 (with QUIC)`**
* [ ] å¦‚æœç”¨æˆ·çš„**éšç§**å¾ˆé‡è¦ï¼Œè¯·ç¡®ä¿å¯ç”¨**`Onion Routing`**

## **æµé‡**

å¾…åŠäº‹é¡¹

## è‡ªå®šä¹‰é¡µé¢

* [ ] å½“è§¦å‘ä¸å®‰å…¨ç›¸å…³çš„é”™è¯¯ï¼ˆå¦‚é˜»æ­¢ã€é€Ÿç‡é™åˆ¶æˆ–æˆ‘æ­£åœ¨é­å—æ”»å‡»æ¨¡å¼ï¼‰æ—¶ï¼Œé…ç½®è‡ªå®šä¹‰é¡µé¢æ˜¯å¯é€‰çš„

## åº”ç”¨ç¨‹åº

å¾…åŠäº‹é¡¹

## Scrape Shield

* [ ] æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†**ç”µå­é‚®ä»¶åœ°å€æ··æ·†**
* [ ] æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†**æœåŠ¡å™¨ç«¯æ’é™¤**

## **Zaraz**

å¾…åŠäº‹é¡¹

## **Web3**

å¾…åŠäº‹é¡¹

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨å¸Œæœ›åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
