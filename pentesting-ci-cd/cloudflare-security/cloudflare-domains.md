# Domeny Cloudflare

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w GitHub.

</details>

W kaÅ¼dej skonfigurowanej domenie TLD w Cloudflare moÅ¼na skonfigurowaÄ‡ pewne **ogÃ³lne ustawienia i usÅ‚ugi**. Na tej stronie bÄ™dziemy **analizowaÄ‡ ustawienia zwiÄ…zane z bezpieczeÅ„stwem w kaÅ¼dej sekcji:**

<figure><img src="../../.gitbook/assets/image (2) (4).png" alt=""><figcaption></figcaption></figure>

## PrzeglÄ…d

* [ ] ZdobÄ…dÅº poczucie, **jak bardzo** usÅ‚ugi konta sÄ… **uÅ¼ywane**
* [ ] ZnajdÅº rÃ³wnieÅ¼ **ID strefy** i **ID konta**

## Analiza

* [ ] W sekcji **`BezpieczeÅ„stwo`** sprawdÅº, czy istnieje jakieÅ› **Ograniczenie czÄ™stotliwoÅ›ci**

## DNS

* [ ] SprawdÅº **interesujÄ…ce** (wraÅ¼liwe?) dane w rekordach **DNS**
* [ ] SprawdÅº, czy istniejÄ… **subdomeny**, ktÃ³re mogÄ… zawieraÄ‡ **wraÅ¼liwe informacje** tylko na podstawie **nazwy** (np. admin173865324.domin.com)
* [ ] SprawdÅº strony internetowe, ktÃ³re **nie sÄ…** **proxy**
* [ ] SprawdÅº, czy istniejÄ… **strony internetowe przekierowane** , do ktÃ³rych moÅ¼na uzyskaÄ‡ **bezpoÅ›redni dostÄ™p** za pomocÄ… CNAME lub adresu IP
* [ ] SprawdÅº, czy **DNSSEC** jest **wÅ‚Ä…czony**
* [ ] SprawdÅº, czy **CNAME Flattening** jest **uÅ¼ywane** we wszystkich CNAME
* MoÅ¼e to byÄ‡ przydatne do **ukrywania podatnoÅ›ci na przejÄ™cie subdomeny** i poprawy czasÃ³w Å‚adowania
* [ ] SprawdÅº, czy domeny [**nie sÄ… podatne na podszywanie siÄ™**](https://book.hacktricks.xyz/network-services-pentesting/pentesting-smtp#mail-spoofing)

## **Email**

TODO

## Spectrum

TODO

## SSL/TLS

### **PrzeglÄ…d**

* [ ] Szyfrowanie **SSL/TLS** powinno byÄ‡ **PeÅ‚ne** lub **PeÅ‚ne (ÅšcisÅ‚e)**. KaÅ¼de inne spowoduje wysyÅ‚anie **tekstu jawnego** w pewnym momencie.
* [ ] Zaleca siÄ™ wÅ‚Ä…czenie **Rekomendacji SSL/TLS**

### Certyfikaty Edge

* [ ] Powinno byÄ‡ wÅ‚Ä…czone **Zawsze uÅ¼ywaj protokoÅ‚u HTTPS**
* [ ] Powinno byÄ‡ wÅ‚Ä…czone **ÅšcisÅ‚e zabezpieczenia transportu HTTP (HSTS)**
* [ ] Minimalna wersja TLS powinna wynosiÄ‡ 1.2
* [ ] Powinno byÄ‡ wÅ‚Ä…czone TLS 1.3
* [ ] Powinno byÄ‡ wÅ‚Ä…czone **Automatyczne przepisywanie HTTPS**
* [ ] Powinno byÄ‡ wÅ‚Ä…czone **Monitorowanie przejrzystoÅ›ci certyfikatÃ³w**

## **BezpieczeÅ„stwo**

* [ ] W sekcji **`WAF`** warto sprawdziÄ‡, czy sÄ… uÅ¼ywane **reguÅ‚y zapory ogniowej** i **ograniczenia czÄ™stotliwoÅ›ci** w celu zapobiegania naduÅ¼yciom.
* DziaÅ‚anie **`Bypass`** wyÅ‚Ä…czy funkcje bezpieczeÅ„stwa Cloudflare dla Å¼Ä…dania. Nie powinno siÄ™ go uÅ¼ywaÄ‡.
* [ ] W sekcji **`Page Shield`** zaleca siÄ™ sprawdzenie, czy jest **wÅ‚Ä…czony**, jeÅ›li uÅ¼ywana jest jakaÅ› strona
* [ ] W sekcji **`API Shield`** zaleca siÄ™ sprawdzenie, czy jest **wÅ‚Ä…czony**, jeÅ›li jakieÅ› API jest wystawione w Cloudflare
* [ ] W sekcji **`DDoS`** zaleca siÄ™ wÅ‚Ä…czenie **ochrony przed atakami DDoS**
* [ ] W sekcji **`Ustawienia`**:
* [ ] SprawdÅº, czy **`Poziom bezpieczeÅ„stwa`** wynosi co najmniej **Å›redni**
* [ ] SprawdÅº, czy **`PrzejÅ›cie wyzwania`** wynosi maksymalnie 1 godzinÄ™
* [ ] SprawdÅº, czy **`Sprawdzanie integralnoÅ›ci przeglÄ…darki`** jest **wÅ‚Ä…czone**
* [ ] SprawdÅº, czy **`Wsparcie dla Privacy Pass`** jest **wÅ‚Ä…czone**

### **Ochrona przed DDoS w CloudFlare**

* JeÅ›li to moÅ¼liwe, wÅ‚Ä…cz **Tryb walki z botami** lub **Tryb super walki z botami**. JeÅ›li chronisz jakieÅ› API dostÄ™pne programowo (na przykÅ‚ad z strony front-endowej JS), moÅ¼liwe, Å¼e nie bÄ™dziesz w stanie tego wÅ‚Ä…czyÄ‡ bez przerwania tego dostÄ™pu.
* W **WAF**: MoÅ¼esz tworzyÄ‡ **limity czÄ™stotliwoÅ›ci wedÅ‚ug Å›cieÅ¼ki URL** lub dla **zweryfikowanych botÃ³w** (reguÅ‚y ograniczania czÄ™stotliwoÅ›ci) lub do **blokowania dostÄ™pu** na podstawie adresu IP, pliku cookie, odwoÅ‚ania...). MoÅ¼esz wiÄ™c blokowaÄ‡ Å¼Ä…dania, ktÃ³re nie pochodzÄ… ze strony internetowej lub nie majÄ… pliku cookie.
* JeÅ›li atak pochodzi od **zweryfikowanego bota**, dodaj przynajmniej **limit czÄ™stotliwoÅ›ci** dla botÃ³w.
* JeÅ›li atak jest na **konkretnÄ… Å›cieÅ¼kÄ™**, jako mechanizm zapobiegawczy dodaj **limit czÄ™stotliwoÅ›ci** na tej Å›cieÅ¼ce.
* MoÅ¼esz rÃ³wnieÅ¼ **uwzglÄ™dniÄ‡ na biaÅ‚ej liÅ›cie** adresy IP, zakresy adresÃ³w IP, kraje lub ASN w **narzÄ™dziach** w WAF.
* SprawdÅº, czy **zarzÄ…dzane reguÅ‚y** mogÄ… rÃ³wnieÅ¼ pomÃ³c w zapobieganiu wykorzystywaniu podatnoÅ›ci.
* W sekcji **NarzÄ™dzia** moÅ¼esz **blokowaÄ‡ lub wyzwalaÄ‡ wyzwanie dla okreÅ›lonych adresÃ³w IP** i **agentÃ³w uÅ¼ytkownika**.
* W DDoS moÅ¼esz **nadpisaÄ‡ niektÃ³re reguÅ‚y, aby byÅ‚y bardziej restrykcyjne**.
* **Ustawienia**: Ustaw **Poziom bezpieczeÅ„stwa** na **Wysoki** i na **Atakowany**, jeÅ›li jesteÅ› atakowany, oraz sprawdÅº, czy jest wÅ‚Ä…czone **Sprawdzanie integralnoÅ›ci przeglÄ…darki**.
* W Cloudflare Domains -> Analytics -> Security -> SprawdÅº, czy jest wÅ‚Ä…czony **limit czÄ™stotliwoÅ›ci**
* W Cloudflare Domains -> Security -> Events -> SprawdÅº, czy sÄ… wykrywane **zdarzenia zÅ‚oÅ›liwe**

## DostÄ™p

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## SzybkoÅ›Ä‡

_Nie znalazÅ‚em Å¼adnej opcji zwiÄ…zanej z bezpieczeÅ„stwem_

## PamiÄ™Ä‡ podrÄ™czna

* [ ] W sekcji **`Konfiguracja`** rozwaÅ¼ wÅ‚Ä…czenie **NarzÄ™dzia skanowania CSAM**

## **Trasy pracownikÃ³w**

_JuÅ¼ powinieneÅ› sprawdziÄ‡_ [_pracownikÃ³w Cloudflare_](./#workers)

## ReguÅ‚y

TODO

## SieÄ‡

* [ ] JeÅ›li **`HTTP/2`** jest **wÅ‚Ä…czone**, **`HTTP/2 do ÅºrÃ³dÅ‚a`** powinno byÄ‡ **wÅ‚Ä…czone**
* [ ] Powinno byÄ‡ wÅ‚Ä…czone **`HTTP/3 (z protokoÅ‚em QUIC)`**
* [ ] JeÅ›li prywatnoÅ›Ä‡ twoich uÅ¼ytkownikÃ³w jest waÅ¼na, upewnij siÄ™, Å¼e **`Onion Routing`** jest **
## Aplikacje

TODO

## Scrape Shield

* [ ] SprawdÅº, czy **Zaciemnianie adresu e-mail** jest **wÅ‚Ä…czone**
* [ ] SprawdÅº, czy **WyÅ‚Ä…czanie na serwerze** jest **wÅ‚Ä…czone**

## **Zaraz**

TODO

## **Web3**

TODO

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
