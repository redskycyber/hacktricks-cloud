# Cloudflare λ³΄μ•

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>λ¥Ό ν†µν•΄ AWS ν•΄ν‚Ήμ„ μ²μλ¶€ν„° μ „λ¬Έκ°€κΉμ§€ λ°°μ›λ³΄μ„Έμ”<strong>!</strong></summary>

HackTricksλ¥Ό μ§€μ›ν•λ” λ‹¤λ¥Έ λ°©λ²•:

* HackTricksμ—μ„ **νμ‚¬ κ΄‘κ³ λ¥Ό λ³΄κ±°λ‚ HackTricksλ¥Ό PDFλ΅ λ‹¤μ΄λ΅λ“**ν•λ ¤λ©΄ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)λ¥Ό ν™•μΈν•μ„Έμ”!
* [**κ³µμ‹ PEASS & HackTricks μ¤μ›¨κ·Έ**](https://peass.creator-spring.com)λ¥Ό μ–»μΌμ„Έμ”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)λ¥Ό λ°κ²¬ν•μ„Έμ”. λ…μ μ μΈ [**NFTs**](https://opensea.io/collection/the-peass-family) μ»¬λ ‰μ…μ…λ‹λ‹¤.
* π’¬ [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**ν…”λ κ·Έλ¨ κ·Έλ£Ή**](https://t.me/peass)μ— **μ°Έμ—¬**ν•κ±°λ‚ **Twitter** π¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)λ¥Ό **ν”λ΅μ°**ν•μ„Έμ”.
* **Hacking νΈλ¦­μ„ κ³µμ ν•λ ¤λ©΄** [**HackTricks**](https://github.com/carlospolop/hacktricks) λ° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github μ €μ¥μ†μ— PRμ„ μ μ¶ν•μ„Έμ”.

</details>

Cloudflare κ³„μ •μ—λ” κµ¬μ„±ν•  μ μλ” μΌλ¶€ **μΌλ° μ„¤μ • λ° μ„λΉ„μ¤**κ°€ μμµλ‹λ‹¤. μ΄ νμ΄μ§€μ—μ„λ” κ° μ„Ήμ…μ **λ³΄μ• κ΄€λ ¨ μ„¤μ •μ„ λ¶„μ„**ν•κ² μµλ‹λ‹¤:

<figure><img src="../../.gitbook/assets/image (85) (1).png" alt=""><figcaption></figcaption></figure>

## μ›Ήμ‚¬μ΄νΈ

κ°κ°μ„ κ²€ν† ν•μ„Έμ”:

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

### λ„λ©”μΈ λ“±λ΅

* [ ] **`λ„λ©”μΈ μ΄μ „`**μ—μ„ μ–΄λ–¤ λ„λ©”μΈλ„ μ΄μ „ν•  μ μ—†λ”μ§€ ν™•μΈν•μ„Έμ”.

κ°κ°μ„ κ²€ν† ν•μ„Έμ”:

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

## λ¶„μ„

_κµ¬μ„± λ³΄μ• κ²€ν† λ¥Ό μ„ν•΄ ν™•μΈν•  λ‚΄μ©μ„ μ°Ύμ§€ λ»ν–μµλ‹λ‹¤._

## νμ΄μ§€

κ° Cloudflare νμ΄μ§€μ—μ„:

* [ ] **`λΉλ“ λ΅κ·Έ`**μ— **λ―Όκ°ν• μ •λ³΄**κ°€ μλ”μ§€ ν™•μΈν•μ„Έμ”.
* [ ] νμ΄μ§€μ— ν• λ‹Ήλ **Github μ €μ¥μ†**μ—μ„ **λ―Όκ°ν• μ •λ³΄**κ°€ μλ”μ§€ ν™•μΈν•μ„Έμ”.
* [ ] **μ›ν¬ν”λ΅μ° λ…λ Ή μ‚½μ…** λλ” `pull_request_target` μΉ¨ν•΄λ¥Ό ν†µν• **ν¬ν…μ…ν• Github μ €μ¥μ† μΉ¨ν•΄**λ¥Ό ν™•μΈν•μ„Έμ”. μμ„Έν• λ‚΄μ©μ€ [**Github Security νμ΄μ§€**](../github-security/)λ¥Ό μ°Έμ΅°ν•μ„Έμ”.
* [ ] `/fuctions` λ””λ ‰ν† λ¦¬(μλ” κ²½μ°)μ **μ·¨μ•½ν• ν•¨μ**, `_redirects` νμΌ(μλ” κ²½μ°)μ **λ¦¬λ””λ ‰μ…**, `_headers` νμΌ(μλ” κ²½μ°)μ **μλ» κµ¬μ„±λ ν—¤λ”**λ¥Ό ν™•μΈν•μ„Έμ”.
* [ ] **μ›Ή νμ΄μ§€**μ—μ„ **λΈ”λ™λ°•μ¤** λλ” **ν™”μ΄νΈλ°•μ¤**λ¥Ό ν†µν•΄ **μ·¨μ•½μ **μ„ ν™•μΈν•μ„Έμ”. μ½”λ“μ— **μ•΅μ„Έμ¤ν•  μ μλ‹¤λ©΄**.
* [ ] κ° νμ΄μ§€μ μ„Έλ¶€ μ •λ³΄ `/<page_id>/pages/view/blocklist/settings/functions`μ—μ„ **`ν™κ²½ λ³€μ`**μ— **λ―Όκ°ν• μ •λ³΄**κ°€ μλ”μ§€ ν™•μΈν•μ„Έμ”.
* [ ] μ„Έλ¶€ μ •λ³΄ νμ΄μ§€μ—μ„ **λΉλ“ λ…λ Ή**κ³Ό **λ£¨νΈ λ””λ ‰ν† λ¦¬**λ„ ν™•μΈν•μ—¬ νμ΄μ§€λ¥Ό μΉ¨ν•΄ν•κΈ° μ„ν• **ν¬ν…μ…ν• μΈμ μ…**μ„ ν™•μΈν•μ„Έμ”.

## **μ›μ»¤**

κ° Cloudflare μ›μ»¤μ—μ„ ν™•μΈν•μ„Έμ”:

* [ ] νΈλ¦¬κ±°: μ›μ»¤λ¥Ό νΈλ¦¬κ±°ν•λ” μ”μ†λ” λ¬΄μ—‡μΈκ°€μ”? **μ‚¬μ©μκ°€ μ›μ»¤μ—μ„ μ‚¬μ©ν•  λ°μ΄ν„°λ¥Ό λ³΄λ‚Ό μ μλ”μ§€** ν™•μΈν•μ„Έμ”.
* [ ] **`μ„¤μ •`**μ—μ„ **λ―Όκ°ν• μ •λ³΄**λ¥Ό ν¬ν•¨ν•λ” **`λ³€μ`**λ¥Ό ν™•μΈν•μ„Έμ”.
* [ ] μ›μ»¤μ **μ½”λ“**λ¥Ό ν™•μΈν•κ³  **μ·¨μ•½μ **μ„ κ²€μƒ‰ν•μ„Έμ”(νΉν μ‚¬μ©μκ°€ μ…λ ¥μ„ κ΄€λ¦¬ν•  μ μλ” μ„μΉμ—μ„).
* μ μ–΄ν•  μ μλ” μ§€μ‹λ νμ΄μ§€λ¥Ό λ°ν™ν•λ” **SSRF** ν™•μΈ
* **SVG μ΄λ―Έμ§€ λ‚΄μ—μ„ JSλ¥Ό μ‹¤ν–‰**ν•μ—¬ **XSS** ν™•μΈ

{% hint style="warning" %}
κΈ°λ³Έμ μΌλ΅ **μ›μ»¤λ”** `<worker-name>.<account>.workers.dev`μ™€ κ°™μ€ **URLμ΄ μ κ³µ**λ©λ‹λ‹¤. μ‚¬μ©μλ” **μ„λΈλ„λ©”μΈ**μΌλ΅ μ„¤μ •ν•  μ μμ§€λ§, μ•κ³  μλ‹¤λ©΄ ν•­μƒ ν•΄λ‹Ή **μ›λ URL**λ΅ μ•΅μ„Έμ¤ν•  μ μμµλ‹λ‹¤.
{% endhint %}

## R2

TODO

## μ¤νΈλ¦Ό

TODO

## μ΄λ―Έμ§€

TODO

## λ³΄μ• μ„Όν„°

* [ ] κ°€λ¥ν•λ‹¤λ©΄ **`λ³΄μ• μΈμ‚¬μ΄νΈ`** **μ¤μΊ”**κ³Ό **`μΈν”„λΌ`** **μ¤μΊ”**μ„ μ‹¤ν–‰ν•μ—¬ **λ³΄μ• κ΄€λ ¨** ν¥λ―Έλ΅μ΄ μ •λ³΄λ¥Ό **κ°•μ΅°**ν•©λ‹λ‹¤.
* [ ] λ³΄μ• κµ¬μ„± μ¤λ¥ λ° ν¥λ―Έλ΅μ΄ μ •λ³΄λ¥Ό ν™•μΈν•κΈ° μ„ν•΄ μ΄ μ •λ³΄λ¥Ό **κ²€ν† **ν•μ„Έμ”.

## Turnstile

TODO

## **μ λ΅ νΈλ¬μ¤νΈ**

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## λ€λ‰ λ¦¬λ””λ ‰μ…

{% hint style="info" %}
[λ™μ  λ¦¬λ””λ ‰μ…](https://developers.cloudflare.com/rules/url-forwarding/dynamic-redirects/)κ³Ό λ‹¬λ¦¬ [**λ€λ‰ λ¦¬λ””λ ‰μ…**](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/)μ€ κΈ°λ³Έμ μΌλ΅ μ •μ μ…λ‹λ‹¤. **λ¬Έμμ—΄ λ€μ²΄** μ‘μ—…μ΄λ‚ μ •κ· ν‘ν„μ‹μ„ μ§€μ›ν•μ§€ **μ•μµλ‹λ‹¤**. κ·Έλ¬λ‚ URL μΌμΉ λ™μ‘ λ° λ°νƒ€μ„ λ™μ‘μ— μν–¥μ„ μ£Όλ” URL λ¦¬λ””λ ‰μ… λ§¤κ°λ³€μλ¥Ό κµ¬μ„±ν•  μ μμµλ‹λ‹¤.
{% endhint %}

* [ ] λ¦¬λ””λ ‰μ…μ **ν‘ν„μ‹**κ³Ό **μ”κµ¬ μ‚¬ν•­**μ΄ **μ ν¨ν•μ§€** ν™•μΈν•μ„Έμ”.
* [ ] λν• **λ―Όκ°ν• μ¨κ²¨μ§„ μ—”λ“ν¬μΈνΈ**μ™€ κ΄€λ ¨λ **URL**μ„ ν™•μΈν•μ„Έμ”.

## μ•λ¦Ό

* [ ] **μ•λ¦Ό**μ„ ν™•μΈν•μ„Έμ”. μ΄λ¬ν• μ•λ¦Όμ€ λ³΄μ•μ„ μ„ν•΄ κ¶μ¥λ©λ‹λ‹¤:
* `Usage Based Billing`
* `HTTP DDoS Attack Alert`
* `Layer 3/4 DDoS Attack Alert`
* `Advanced HTTP DDoS Attack Alert`
* `Advanced Layer 3/4 DDoS Attack Alert`
* `Flow-based Monitoring: Volumetric Attack`
* `Route Leak Detection Alert`
* `Access mTLS Certificate Expiration Alert`
* `SSL for SaaS Custom Hostnames Alert`
* `Universal SSL Alert`
* `Script Monitor New Code Change Detection Alert`
* `Script Monitor New Domain Alert`
* `Script Monitor New Malicious Domain Alert`
* `Script Monitor New Malicious Script Alert`
* `Script Monitor New Malicious URL Alert`
* `Script Monitor New Scripts Alert`
* `Script Monitor New Script Exceeds Max URL Length Alert`
* `Advanced Security Events Alert`
* `Security Events Alert`
* [ ] **λ©μ μ§€**λ¥Ό λ¨λ‘ ν™•μΈν•μ„Έμ”. μ›Ήν›… URLμ— **λ―Όκ°ν• μ •λ³΄**(κΈ°λ³Έ http μΈμ¦)κ°€ μμ„ μ μμµλ‹λ‹¤. λν• μ›Ήν›… URLμ΄ **HTTPS**λ¥Ό μ‚¬μ©ν•λ”μ§€ ν™•μΈν•μ„Έμ”.
* [ ] μ¶”κ°€λ΅ ν™•μΈν•κΈ° μ„ν•΄ **ν΄λΌμ°λ“ν”λ μ–΄ μ•λ¦Όμ„** μ 3μμ—κ² **μ„μ¥**ν•΄ λ³Ό μ μμµλ‹λ‹¤. μ–΄λ–»κ²λ“  **μ„ν—ν• λ‚΄μ©μ„ μ‚½μ…**ν•  μ μμ„μ§€λ„ λ¨λ¦…λ‹λ‹¤.

## κ³„μ • κ΄€λ¦¬

* [ ] **`κ²°μ ` -> `κ²°μ  μ •λ³΄`**μ—μ„ **μ‹ μ©μΉ΄λ“μ λ§μ§€λ§‰ 4μλ¦¬**, **λ§λ£μΌ** λ° **μ²­κµ¬ μ£Όμ†**λ¥Ό λ³Ό μ μμµλ‹λ‹¤.
* [ ] **`κ²°μ ` -> `κµ¬λ…`**μ—μ„ κ³„μ •μ—μ„ μ‚¬μ©ν•λ” **ν”λ μ ν•**μ„ λ³Ό μ μμµλ‹λ‹¤.
* [ ] **`λ©¤λ²„`**μ—μ„ κ³„
## DDoS μ΅°μ‚¬

[μ΄ λ¶€λ¶„μ„ ν™•μΈν•μ„Έμ”](cloudflare-domains.md#cloudflare-ddos-protection).

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>λ¥Ό ν†µν•΄ μ λ΅λ¶€ν„° AWS ν•΄ν‚Ήμ„ λ°°μ›λ³΄μ„Έμ”<strong>!</strong></summary>

HackTricksλ¥Ό μ§€μ›ν•λ” λ‹¤λ¥Έ λ°©λ²•:

* **νμ‚¬λ¥Ό HackTricksμ—μ„ κ΄‘κ³ ν•κ±°λ‚ HackTricksλ¥Ό PDFλ΅ λ‹¤μ΄λ΅λ“**ν•λ ¤λ©΄ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)λ¥Ό ν™•μΈν•μ„Έμ”!
* [**κ³µμ‹ PEASS & HackTricks μ¤μ›¨κ·Έ**](https://peass.creator-spring.com)λ¥Ό μ–»μΌμ„Έμ”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)λ¥Ό λ°κ²¬ν•μ„Έμ”. λ…μ μ μΈ [**NFTs**](https://opensea.io/collection/the-peass-family) μ»¬λ ‰μ…μ…λ‹λ‹¤.
* π’¬ [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**ν…”λ κ·Έλ¨ κ·Έλ£Ή**](https://t.me/peass)μ— **μ°Έμ—¬**ν•κ±°λ‚ **Twitter** π¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)λ¥Ό **ν”λ΅μ°**ν•μ„Έμ”.
* **HackTricks**μ™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github μ €μ¥μ†μ— PRμ„ μ μ¶ν•μ—¬ μ—¬λ¬λ¶„μ ν•΄ν‚Ή κΈ°λ²•μ„ κ³µμ ν•μ„Έμ”.

</details>
