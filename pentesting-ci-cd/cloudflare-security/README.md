# Cloudflareå®‰å…¨

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFç‰ˆçš„HackTricksï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

åœ¨Cloudflareå¸æˆ·ä¸­ï¼Œæœ‰ä¸€äº›å¯ä»¥é…ç½®çš„**å¸¸è§„è®¾ç½®å’ŒæœåŠ¡**ã€‚åœ¨æœ¬é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å°†**åˆ†ææ¯ä¸ªéƒ¨åˆ†çš„å®‰å…¨ç›¸å…³è®¾ç½®**ï¼š

<figure><img src="../../.gitbook/assets/image (85) (1).png" alt=""><figcaption></figcaption></figure>

## ç½‘ç«™

ä½¿ç”¨ä»¥ä¸‹å†…å®¹æ£€æŸ¥æ¯ä¸ªç½‘ç«™ï¼š

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

### åŸŸåæ³¨å†Œ

* [ ] åœ¨**`Transfer Domains`**ä¸­æ£€æŸ¥æ˜¯å¦æ— æ³•è½¬ç§»ä»»ä½•åŸŸåã€‚

ä½¿ç”¨ä»¥ä¸‹å†…å®¹æ£€æŸ¥æ¯ä¸ªç½‘ç«™ï¼š

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

## åˆ†æ

_æˆ‘æ‰¾ä¸åˆ°ä»»ä½•éœ€è¦è¿›è¡Œé…ç½®å®‰å…¨å®¡æŸ¥çš„å†…å®¹ã€‚_

## é¡µé¢

åœ¨æ¯ä¸ªCloudflareé¡µé¢ä¸Šï¼š

* [ ] æ£€æŸ¥**`Build log`**ä¸­æ˜¯å¦å­˜åœ¨**æ•æ„Ÿä¿¡æ¯**ã€‚
* [ ] æ£€æŸ¥åˆ†é…ç»™é¡µé¢çš„**Githubå­˜å‚¨åº“**ä¸­æ˜¯å¦å­˜åœ¨**æ•æ„Ÿä¿¡æ¯**ã€‚
* [ ] æ£€æŸ¥é€šè¿‡**å·¥ä½œæµå‘½ä»¤æ³¨å…¥**æˆ–**`pull_request_target`**å…¥ä¾µæ¥æ£€æŸ¥æ½œåœ¨çš„Githubå­˜å‚¨åº“å¦¥åã€‚æ›´å¤šä¿¡æ¯è¯·å‚è§[**Githubå®‰å…¨é¡µé¢**](../github-security/)ã€‚
* [ ] æ£€æŸ¥`/fuctions`ç›®å½•ï¼ˆå¦‚æœæœ‰ï¼‰ä¸­çš„**æ˜“å—æ”»å‡»çš„å‡½æ•°**ï¼Œæ£€æŸ¥`_redirects`æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰ä¸­çš„**é‡å®šå‘**ï¼Œä»¥åŠ`_headers`æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰ä¸­çš„**é…ç½®é”™è¯¯çš„æ ‡å¤´**ã€‚
* [ ] å¦‚æœå¯ä»¥**è®¿é—®ä»£ç **ï¼Œé€šè¿‡**é»‘ç›’**æˆ–**ç™½ç›’**æ–¹å¼æ£€æŸ¥**ç½‘é¡µ**ä¸­çš„**æ¼æ´**
* [ ] åœ¨æ¯ä¸ªé¡µé¢çš„è¯¦ç»†ä¿¡æ¯ä¸­æ£€æŸ¥`/<page_id>/pages/view/blocklist/settings/functions`ã€‚æ£€æŸ¥**`ç¯å¢ƒå˜é‡`**ä¸­æ˜¯å¦å­˜åœ¨**æ•æ„Ÿä¿¡æ¯**ã€‚
* [ ] åœ¨è¯¦ç»†ä¿¡æ¯é¡µé¢ä¸­è¿˜æ£€æŸ¥**æ„å»ºå‘½ä»¤**å’Œ**æ ¹ç›®å½•**ï¼Œä»¥æŸ¥æ‰¾**æ½œåœ¨çš„æ³¨å…¥**æ¥å¦¥åé¡µé¢ã€‚

## **Workers**

åœ¨æ¯ä¸ªCloudflareçš„workerä¸Šæ£€æŸ¥ï¼š

* [ ] è§¦å‘å™¨ï¼šæ˜¯ä»€ä¹ˆè§¦å‘äº†workerï¼Ÿç”¨æˆ·æ˜¯å¦å¯ä»¥å‘é€æ•°æ®ä¾›workerä½¿ç”¨ï¼Ÿ
* [ ] åœ¨**`Settings`**ä¸­ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰åŒ…å«**æ•æ„Ÿä¿¡æ¯**çš„**`Variables`**
* [ ] æ£€æŸ¥workerçš„ä»£ç å¹¶æœç´¢**æ¼æ´**ï¼ˆç‰¹åˆ«æ˜¯ç”¨æˆ·å¯ä»¥ç®¡ç†è¾“å…¥çš„åœ°æ–¹ï¼‰
* æ£€æŸ¥è¿”å›æ‚¨å¯ä»¥æ§åˆ¶çš„æŒ‡å®šé¡µé¢çš„SSRF
* æ£€æŸ¥æ‰§è¡ŒJSçš„XSSæ˜¯å¦åœ¨svgå›¾åƒä¸­

{% hint style="warning" %}
è¯·æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ**Workerä¼šè¢«åˆ†é…ä¸€ä¸ªURL**ï¼Œä¾‹å¦‚`<worker-name>.<account>.workers.dev`ã€‚ç”¨æˆ·å¯ä»¥å°†å…¶è®¾ç½®ä¸º**å­åŸŸ**ï¼Œä½†å¦‚æœæ‚¨çŸ¥é“åŸå§‹URLï¼Œæ‚¨å§‹ç»ˆå¯ä»¥ä½¿ç”¨è¯¥**åŸå§‹URL**è®¿é—®å®ƒã€‚
{% endhint %}

## R2

å¾…åŠäº‹é¡¹

## Stream

å¾…åŠäº‹é¡¹

## å›¾åƒ

å¾…åŠäº‹é¡¹

## å®‰å…¨ä¸­å¿ƒ

* [ ] å¦‚æœå¯èƒ½ï¼Œè¯·è¿è¡Œ**`Security Insights`**æ‰«æå’Œ**`Infrastructure`**æ‰«æï¼Œå› ä¸ºå®ƒä»¬å°†ä»å®‰å…¨è§’åº¦**çªå‡ºæ˜¾ç¤º**æœ‰è¶£çš„ä¿¡æ¯ã€‚
* [ ] ä»…å‡ºäºå®‰å…¨é…ç½®é”™è¯¯å’Œæœ‰è¶£ä¿¡æ¯çš„ç›®çš„ï¼Œ**æ£€æŸ¥æ­¤ä¿¡æ¯**

## è½¬é—¨

å¾…åŠäº‹é¡¹

## **é›¶ä¿¡ä»»**

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## æ‰¹é‡é‡å®šå‘

{% hint style="info" %}
ä¸[åŠ¨æ€é‡å®šå‘](https://developers.cloudflare.com/rules/url-forwarding/dynamic-redirects/)ä¸åŒï¼Œ[**æ‰¹é‡é‡å®šå‘**](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/)åŸºæœ¬ä¸Šæ˜¯é™æ€çš„ - å®ƒä»¬**ä¸æ”¯æŒä»»ä½•å­—ç¬¦ä¸²æ›¿æ¢**æ“ä½œæˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥é…ç½®å½±å“å…¶URLåŒ¹é…è¡Œä¸ºå’Œè¿è¡Œæ—¶è¡Œä¸ºçš„URLé‡å®šå‘å‚æ•°ã€‚
{% endhint %}

* [ ] æ£€æŸ¥é‡å®šå‘çš„**è¡¨è¾¾å¼**å’Œ**è¦æ±‚**æ˜¯å¦åˆç†ã€‚
* [ ] è¿˜è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨åŒ…å«æœ‰è¶£ä¿¡æ¯çš„**æ•æ„Ÿéšè—ç«¯ç‚¹**ã€‚

## é€šçŸ¥

* [ ] æ£€æŸ¥**é€šçŸ¥**ã€‚ä»¥ä¸‹é€šçŸ¥å¯¹äºå®‰å…¨æ€§æ˜¯æ¨èçš„ï¼š
* `Usage Based Billing`
* `HTTP DDoS Attack Alert`
* `Layer 3/4 DDoS Attack Alert`
* `Advanced HTTP DDoS Attack Alert`
* `Advanced Layer 3/4 DDoS Attack Alert`
* `Flow-based Monitoring: Volumetric Attack`
* `Route Leak Detection Alert`
* `Access mTLS Certificate Expiration Alert`
* `SSL for SaaS Custom Hostnames Alert`
* `Universal SSL Alert`
* `Script Monitor New Code Change Detection Alert`
* `Script Monitor New Domain Alert`
* `Script Monitor New Malicious Domain Alert`
* `Script Monitor New Malicious Script Alert`
* `Script Monitor New Malicious URL Alert`
* `Script Monitor New Scripts Alert`
* `Script Monitor New Script Exceeds Max URL Length Alert`
* `Advanced Security Events Alert`
* `Security Events Alert`
* [ ] æ£€æŸ¥æ‰€æœ‰**ç›®æ ‡**ï¼Œå› ä¸ºWebhook URLä¸­å¯èƒ½åŒ…å«**æ•æ„Ÿä¿¡æ¯**ï¼ˆåŸºæœ¬HTTPèº«ä»½éªŒè¯ï¼‰ã€‚è¿˜è¦ç¡®ä¿Webhook URLä½¿ç”¨**HTTPS**
* [ ] ä½œä¸ºé¢å¤–çš„æ£€æŸ¥ï¼Œæ‚¨å¯ä»¥å°è¯•å‘ç¬¬ä¸‰æ–¹**å†’å……Cloudflareé€šçŸ¥**ï¼Œä¹Ÿè®¸æ‚¨å¯ä»¥ä»¥æŸç§æ–¹å¼**æ³¨å…¥å±é™©å†…å®¹**
## ç®¡ç†è´¦æˆ·

* [ ] å¯ä»¥åœ¨**`Billing` -> `Payment info`**ä¸­æŸ¥çœ‹ä¿¡ç”¨å¡çš„**æœ€å4ä½æ•°å­—**ï¼Œ**åˆ°æœŸæ—¶é—´**å’Œ**è´¦å•åœ°å€**ã€‚
* [ ] å¯ä»¥åœ¨**`Billing` -> `Subscriptions`**ä¸­æŸ¥çœ‹è´¦æˆ·ä½¿ç”¨çš„**è®¡åˆ’ç±»å‹**ã€‚
* [ ] åœ¨**`Members`**ä¸­å¯ä»¥æŸ¥çœ‹è´¦æˆ·çš„æ‰€æœ‰æˆå‘˜åŠå…¶**è§’è‰²**ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœè®¡åˆ’ç±»å‹ä¸æ˜¯ä¼ä¸šç‰ˆï¼Œåˆ™åªæœ‰ä¸¤ä¸ªè§’è‰²ï¼šç®¡ç†å‘˜å’Œè¶…çº§ç®¡ç†å‘˜ã€‚ä½†å¦‚æœä½¿ç”¨çš„æ˜¯**ä¼ä¸šç‰ˆè®¡åˆ’**ï¼Œå¯ä»¥ä½¿ç”¨[**æ›´å¤šè§’è‰²**](https://developers.cloudflare.com/fundamentals/account-and-billing/account-setup/account-roles/)æ¥éµå¾ªæœ€å°æƒé™åŸåˆ™ã€‚
* å› æ­¤ï¼Œå°½å¯èƒ½ä½¿ç”¨**ä¼ä¸šç‰ˆè®¡åˆ’**æ˜¯**æ¨èçš„**ã€‚
* [ ] åœ¨æˆå‘˜ä¸­å¯ä»¥æ£€æŸ¥å“ªäº›æˆå‘˜å·²å¯ç”¨**åŒé‡èº«ä»½éªŒè¯ï¼ˆ2FAï¼‰**ã€‚**æ¯ä¸ª**ç”¨æˆ·éƒ½åº”è¯¥å¯ç”¨å®ƒã€‚

{% hint style="info" %}
è¯·æ³¨æ„ï¼Œå¹¸è¿çš„æ˜¯ï¼Œ**`ç®¡ç†å‘˜`**è§’è‰²ä¸å…·å¤‡ç®¡ç†æˆå‘˜çš„æƒé™ï¼ˆ**æ— æ³•æå‡æƒé™æˆ–é‚€è¯·**æ–°æˆå‘˜ï¼‰
{% endhint %}

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
