# Cloudflare å®‰å…¨æ€§

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºè‹±é›„</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ **HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç° [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFTs é›†åˆ**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š **å…³æ³¨** æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

åœ¨ Cloudflare è´¦æˆ·ä¸­ï¼Œå¯ä»¥é…ç½®ä¸€äº›**é€šç”¨è®¾ç½®å’ŒæœåŠ¡**ã€‚åœ¨æ­¤é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å°†**åˆ†ææ¯ä¸ªéƒ¨åˆ†çš„ä¸å®‰å…¨ç›¸å…³çš„è®¾ç½®**ï¼š

<figure><img src="../../.gitbook/assets/image (85) (1).png" alt=""><figcaption></figcaption></figure>

## ç½‘ç«™

ä½¿ç”¨ä»¥ä¸‹å†…å®¹è¿›è¡Œå®¡æŸ¥ï¼š

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

### åŸŸåæ³¨å†Œ

* [ ] åœ¨ **`Transfer Domains`** ä¸­æ£€æŸ¥æ˜¯å¦ä¸å¯èƒ½è½¬ç§»ä»»ä½•åŸŸåã€‚

ä½¿ç”¨ä»¥ä¸‹å†…å®¹è¿›è¡Œå®¡æŸ¥ï¼š

{% content-ref url="cloudflare-domains.md" %}
[cloudflare-domains.md](cloudflare-domains.md)
{% endcontent-ref %}

## åˆ†æ

_æˆ‘æ‰¾ä¸åˆ°ä»»ä½•é…ç½®å®‰å…¨å®¡æŸ¥çš„å†…å®¹ã€‚_

## é¡µé¢

åœ¨æ¯ä¸ª Cloudflare çš„é¡µé¢ä¸Šï¼š

* [ ] åœ¨ **`Build log`** ä¸­æ£€æŸ¥**æ•æ„Ÿä¿¡æ¯**ã€‚
* [ ] åœ¨åˆ†é…ç»™é¡µé¢çš„ **Github ä»“åº“** ä¸­æ£€æŸ¥**æ•æ„Ÿä¿¡æ¯**ã€‚
* [ ] é€šè¿‡ **workflow å‘½ä»¤æ³¨å…¥** æˆ– `pull_request_target` å¦¥åæ£€æŸ¥æ½œåœ¨çš„ github ä»“åº“å¦¥åã€‚æ›´å¤šä¿¡æ¯è¯·å‚è§ [**Github å®‰å…¨é¡µé¢**](../github-security/)ã€‚
* [ ] åœ¨ `/functions` ç›®å½•ä¸­æ£€æŸ¥**æ˜“å—æ”»å‡»çš„å‡½æ•°**ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œæ£€æŸ¥ `_redirects` æ–‡ä»¶ä¸­çš„**é‡å®šå‘**ï¼ˆå¦‚æœæœ‰ï¼‰å’Œ `_headers` æ–‡ä»¶ä¸­çš„**é…ç½®é”™è¯¯çš„å¤´éƒ¨**ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚
* [ ] å¦‚æœæ‚¨å¯ä»¥**è®¿é—®ä»£ç **ï¼Œé€šè¿‡**é»‘ç›’**æˆ–**ç™½ç›’**æ£€æŸ¥**ç½‘é¡µ**ä¸­çš„**æ¼æ´**ã€‚
* [ ] åœ¨æ¯ä¸ªé¡µé¢çš„è¯¦ç»†ä¿¡æ¯ `/<page_id>/pages/view/blocklist/settings/functions` ä¸­ï¼Œæ£€æŸ¥**`ç¯å¢ƒå˜é‡`**ä¸­çš„**æ•æ„Ÿä¿¡æ¯**ã€‚
* [ ] åœ¨è¯¦ç»†ä¿¡æ¯é¡µé¢è¿˜è¦æ£€æŸ¥**æ„å»ºå‘½ä»¤**å’Œ**æ ¹ç›®å½•**ï¼Œä»¥å¯»æ‰¾**æ½œåœ¨æ³¨å…¥**ï¼Œå¯èƒ½ä¼šå¦¥åé¡µé¢ã€‚

## **Workers**

åœ¨æ¯ä¸ª Cloudflare çš„ worker ä¸Šæ£€æŸ¥ï¼š

* [ ] è§¦å‘å™¨ï¼šæ˜¯ä»€ä¹ˆè®© worker è§¦å‘ï¼Ÿç”¨æˆ·èƒ½å¦å‘é€å°†è¢« worker **ä½¿ç”¨**çš„**æ•°æ®**ï¼Ÿ
* [ ] åœ¨ **`è®¾ç½®`** ä¸­ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰åŒ…å«**æ•æ„Ÿä¿¡æ¯**çš„**`å˜é‡`**ã€‚
* [ ] æ£€æŸ¥ worker çš„**ä»£ç **å¹¶æœç´¢**æ¼æ´**ï¼ˆç‰¹åˆ«æ˜¯åœ¨ç”¨æˆ·å¯ä»¥ç®¡ç†è¾“å…¥çš„åœ°æ–¹ï¼‰
* æ£€æŸ¥ SSRFs æ˜¯å¦è¿”å›æ‚¨å¯ä»¥æ§åˆ¶çš„æŒ‡å®šé¡µé¢
* æ£€æŸ¥ XSSs æ˜¯å¦åœ¨ svg å›¾åƒå†…æ‰§è¡Œ JS

{% hint style="warning" %}
è¯·æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ**Worker ä¼šè¢«èµ‹äºˆä¸€ä¸ª URL**ï¼Œä¾‹å¦‚ `<worker-name>.<account>.workers.dev`ã€‚ç”¨æˆ·å¯ä»¥å°†å…¶è®¾ç½®ä¸º**å­åŸŸå**ï¼Œä½†å¦‚æœæ‚¨çŸ¥é“å®ƒï¼Œæ‚¨å§‹ç»ˆå¯ä»¥ä½¿ç”¨è¯¥**åŸå§‹ URL**è®¿é—®å®ƒã€‚
{% endhint %}

## R2

å¾…åŠäº‹é¡¹

## æµ

å¾…åŠäº‹é¡¹

## å›¾ç‰‡

å¾…åŠäº‹é¡¹

## å®‰å…¨ä¸­å¿ƒ

* [ ] å¦‚æœå¯èƒ½ï¼Œè¿è¡Œ**`å®‰å…¨æ´å¯Ÿ`** **æ‰«æ**å’Œ**`åŸºç¡€è®¾æ–½`** **æ‰«æ**ï¼Œå› ä¸ºå®ƒä»¬ä¼š**çªå‡ºæ˜¾ç¤º**ä¸**å®‰å…¨**ç›¸å…³çš„æœ‰è¶£ä¿¡æ¯ã€‚
* [ ] åªéœ€**æ£€æŸ¥è¿™äº›ä¿¡æ¯**æ˜¯å¦æœ‰å®‰å…¨é…ç½®é”™è¯¯å’Œæœ‰è¶£çš„ä¿¡æ¯

## Turnstile

å¾…åŠäº‹é¡¹

## **é›¶ä¿¡ä»»**

{% content-ref url="cloudflare-zero-trust-network.md" %}
[cloudflare-zero-trust-network.md](cloudflare-zero-trust-network.md)
{% endcontent-ref %}

## æ‰¹é‡é‡å®šå‘

{% hint style="info" %}
ä¸[åŠ¨æ€é‡å®šå‘](https://developers.cloudflare.com/rules/url-forwarding/dynamic-redirects/)ä¸åŒï¼Œ[**æ‰¹é‡é‡å®šå‘**](https://developers.cloudflare.com/rules/url-forwarding/bulk-redirects/)æœ¬è´¨ä¸Šæ˜¯é™æ€çš„ â€” å®ƒä»¬**ä¸æ”¯æŒä»»ä½•å­—ç¬¦ä¸²æ›¿æ¢**æ“ä½œæˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥é…ç½®å½±å“å…¶ URL åŒ¹é…è¡Œä¸ºå’Œè¿è¡Œæ—¶è¡Œä¸ºçš„ URL é‡å®šå‘å‚æ•°ã€‚
{% endhint %}

* [ ] æ£€æŸ¥é‡å®šå‘çš„**è¡¨è¾¾å¼**å’Œ**è¦æ±‚**æ˜¯å¦**åˆç†**ã€‚
* [ ] è¿˜è¦æ£€æŸ¥æ˜¯å¦æœ‰**éšè—çš„æ•æ„Ÿç«¯ç‚¹**ï¼Œæ‚¨å¯èƒ½åŒ…å«æœ‰è¶£çš„ä¿¡æ¯ã€‚

## é€šçŸ¥

* [ ] æ£€æŸ¥**é€šçŸ¥**ã€‚è¿™äº›é€šçŸ¥å¯¹äºå®‰å…¨æ¥è¯´æ˜¯æ¨èçš„ï¼š
* `åŸºäºä½¿ç”¨é‡çš„è®¡è´¹`
* `HTTP DDoS æ”»å‡»è­¦æŠ¥`
* `ç¬¬ 3/4 å±‚ DDoS æ”»å‡»è­¦æŠ¥`
* `é«˜çº§ HTTP DDoS æ”»å‡»è­¦æŠ¥`
* `é«˜çº§ç¬¬ 3/4 å±‚ DDoS æ”»å‡»è­¦æŠ¥`
* `åŸºäºæµé‡çš„ç›‘æ§ï¼šä½“é‡æ”»å‡»`
* `è·¯ç”±æ³„éœ²æ£€æµ‹è­¦æŠ¥`
* `è®¿é—® mTLS è¯ä¹¦åˆ°æœŸè­¦æŠ¥`
* `SSL for SaaS è‡ªå®šä¹‰ä¸»æœºåè­¦æŠ¥`
* `é€šç”¨ SSL è­¦æŠ¥`
* `è„šæœ¬ç›‘æ§æ–°ä»£ç å˜æ›´æ£€æµ‹è­¦æŠ¥`
* `è„šæœ¬ç›‘æ§æ–°åŸŸåè­¦æŠ¥`
* `è„šæœ¬ç›‘æ§æ–°æ¶æ„åŸŸåè­¦æŠ¥`
* `è„šæœ¬ç›‘æ§æ–°æ¶æ„è„šæœ¬è­¦æŠ¥`
* `è„šæœ¬ç›‘æ§æ–°æ¶æ„ URL è­¦æŠ¥`
* `è„šæœ¬ç›‘æ§æ–°è„šæœ¬è­¦æŠ¥`
* `è„šæœ¬ç›‘æ§æ–°è„šæœ¬è¶…è¿‡æœ€å¤§ URL é•¿åº¦è­¦æŠ¥`
* `é«˜çº§å®‰å…¨äº‹ä»¶è­¦æŠ¥`
* `å®‰å…¨äº‹ä»¶è­¦æŠ¥`
* [ ] æ£€æŸ¥æ‰€æœ‰**ç›®çš„åœ°**ï¼Œå› ä¸º webhook urls ä¸­å¯èƒ½æœ‰**æ•æ„Ÿä¿¡æ¯**ï¼ˆåŸºæœ¬ http è®¤è¯ï¼‰ã€‚è¿˜è¦ç¡®ä¿ webhook urls ä½¿ç”¨**HTTPS**
* [ ] ä½œä¸ºé¢å¤–æ£€æŸ¥ï¼Œæ‚¨å¯ä»¥å°è¯•**å†’å…… Cloudflare é€šçŸ¥**ç»™ç¬¬ä¸‰æ–¹ï¼Œä¹Ÿè®¸æ‚¨å¯ä»¥ä»¥æŸç§æ–¹å¼**æ³¨å…¥å±é™©çš„ä¸œè¥¿**
## ç®¡ç†è´¦æˆ·

* [ ] å¯ä»¥åœ¨ **`Billing` -> `Payment info`** ä¸­çœ‹åˆ°**ä¿¡ç”¨å¡çš„æœ€å4ä½æ•°å­—**ã€**æœ‰æ•ˆæœŸ**å’Œ**è´¦å•åœ°å€**ã€‚
* [ ] å¯ä»¥åœ¨ **`Billing` -> `Subscriptions`** ä¸­çœ‹åˆ°è´¦æˆ·ä½¿ç”¨çš„**å¥—é¤ç±»å‹**ã€‚
* [ ] åœ¨ **`Members`** ä¸­å¯ä»¥çœ‹åˆ°æ‰€æœ‰è´¦æˆ·æˆå‘˜åŠå…¶**è§’è‰²**ã€‚æ³¨æ„ï¼Œå¦‚æœå¥—é¤ç±»å‹ä¸æ˜¯ä¼ä¸šç‰ˆï¼Œåªå­˜åœ¨2ç§è§’è‰²ï¼šç®¡ç†å‘˜å’Œè¶…çº§ç®¡ç†å‘˜ã€‚ä½†å¦‚æœä½¿ç”¨çš„**å¥—é¤æ˜¯ä¼ä¸šç‰ˆ**ï¼Œå¯ä»¥ä½¿ç”¨[**æ›´å¤šè§’è‰²**](https://developers.cloudflare.com/fundamentals/account-and-billing/account-setup/account-roles/)æ¥éµå¾ªæœ€å°æƒé™åŸåˆ™ã€‚
* å› æ­¤ï¼Œå»ºè®®å°½å¯èƒ½ä½¿ç”¨**ä¼ä¸šç‰ˆå¥—é¤**ã€‚
* [ ] åœ¨ Members ä¸­å¯ä»¥æ£€æŸ¥å“ªäº›**æˆå‘˜**å¯ç”¨äº†**åŒå› ç´ è®¤è¯**ã€‚**æ¯ä¸ª**ç”¨æˆ·éƒ½åº”è¯¥å¯ç”¨å®ƒã€‚

{% hint style="info" %}
æ³¨æ„ï¼Œå¹¸è¿çš„æ˜¯è§’è‰² **`Administrator`** ä¸æˆäºˆç®¡ç†æˆå‘˜èµ„æ ¼çš„æƒé™ï¼ˆ**ä¸èƒ½å‡çº§æƒé™æˆ–é‚€è¯·**æ–°æˆå‘˜ï¼‰
{% endhint %}

## DDoS è°ƒæŸ¥

[æŸ¥çœ‹è¿™éƒ¨åˆ†](cloudflare-domains.md#cloudflare-ddos-protection)ã€‚

<details>

<summary><strong>é€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ä»é›¶åˆ°è‹±é›„å­¦ä¹  AWS é»‘å®¢æ”»å‡»ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœä½ æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°ä½ çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFTs**](https://opensea.io/collection/the-peass-family) æ”¶è—
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥**åˆ†äº«ä½ çš„é»‘å®¢æŠ€å·§ã€‚

</details>
