# Osnovne informacije o Jenkinsu

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu**, proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Pristup

### Korisni캜ko ime + Lozinka

Naj캜e코캖i na캜in prijave na Jenkins je putem korisni캜kog imena ili lozinke.

### Kola캜i캖

Ako se **ukrade ovla코캖eni kola캜i캖**, mo쬰 se koristiti za pristup sesiji korisnika. Kola캜i캖 se obi캜no naziva `JSESSIONID.*`. (Korisnik mo쬰 prekinuti sve svoje sesije, ali prvo mora saznati da je kola캜i캖 ukraden).

### SSO/Pluginovi

Jenkins se mo쬰 konfigurisati kori코캖enjem pluginova da bude **dostupan putem SSO-a tre캖e strane**.

### Tokeni

**Korisnici mogu generisati tokene** kako bi omogu캖ili pristup aplikacijama da ih opona코aju putem CLI-ja ili REST API-ja.

### SSH klju캜evi

Ovaj komponenta pru쬬 ugra캠eni SSH server za Jenkins. To je alternativni interfejs za [Jenkins CLI](https://www.jenkins.io/doc/book/managing/cli/), i komande se mogu pozvati na ovaj na캜in koriste캖i bilo koji SSH klijent. (Iz [dokumentacije](https://plugins.jenkins.io/sshd/))

## Autorizacija

U `/configureSecurity` je mogu캖e **konfigurisati metodu autorizacije Jenkins-a**. Postoji nekoliko opcija:

* **Svako mo쬰 sve**: 캛ak i anonimni pristup mo쬰 administrirati server
* **Legacy re쬴m**: Isto kao Jenkins <1.164. Ako imate **"admin" ulogu**, ima캖ete **potpunu kontrolu** nad sistemom, a **ina캜e** (uklju캜uju캖i **anonimne** korisnike) ima캖ete samo **pristup za 캜itanje**.
* **Prijavljeni korisnici mogu sve**: U ovom re쬴mu, svaki **prijavljeni korisnik ima potpunu kontrolu** nad Jenkins-om. Jedini korisnik koji nema potpunu kontrolu je **anonimni korisnik**, koji ima samo **pristup za 캜itanje**.
* **Matrix-based security**: Mo쬰te konfigurisati **ko mo쬰 코ta** u tabeli. Svaka **kolona** predstavlja **dozvolu**. Svaki **red** predstavlja **korisnika ili grupu/ulogu**. Ovo uklju캜uje posebnog korisnika '**anonymous**', koji predstavlja **neautentifikovane korisnike**, kao i '**authenticated**', koji predstavlja **sve autentifikovane korisnike**.

![](<../../.gitbook/assets/image (40).png>)

* **Project-based Matrix Authorization Strategy:** Ovaj re쬴m je **pro코irenje** za "**Matrix-based security**" koje omogu캖ava dodatnu ACL matricu da se **defini코e za svaki projekat posebno**.
* **Role-Based Strategy:** Omogu캖ava definisanje autorizacija kori코캖enjem **uloga**. Upravljajte ulogama u `/role-strategy`.

## **Security Realm**

U `/configureSecurity` je mogu캖e **konfigurisati security realm**. Po defaultu, Jenkins podr쬬va nekoliko razli캜itih Security Realms:

* **Delegiraj servlet kontejneru**: Za **delegiranje autentifikacije servlet kontejneru koji pokre캖e Jenkins kontroler**, kao 코to je [Jetty](https://www.eclipse.org/jetty/).
* **Jenkins-ova sopstvena baza korisnika**: Koristite **Jenkins-ovu sopstvenu ugra캠enu bazu podataka korisnika** za autentifikaciju umesto delegiranja eksternom sistemu. Ovo je podrazumevano omogu캖eno.
* **LDAP**: Delegirajte autentifikaciju konfigurisanom LDAP serveru, uklju캜uju캖i korisnike i grupe.
* **Unix baza korisnika/grupa**: Delegira autentifikaciju na osnovnu Unix bazu korisnika na Jenkins kontroleru. Ovaj re쬴m tako캠e omogu캖ava ponovnu upotrebu Unix grupa za autorizaciju.

Pluginovi mogu pru쬴ti dodatne security realme koji mogu biti korisni za uklju캜ivanje Jenkins-a u postoje캖e identitetske sisteme, kao 코to su:

* [Active Directory](https://plugins.jenkins.io/active-directory)
* [GitHub Authentication](https://plugins.jenkins.io/github-oauth)
* [Atlassian Crowd 2](https://plugins.jenkins.io/crowd2)

## Jenkins 캜vorovi, agenti i izvr코ioci

Definicije iz [dokumentacije](https://www.jenkins.io/doc/book/managing/nodes/):

**캛vorovi** su **ma코ine** na kojima se pokre캖u **agenti za izgradnju**. Jenkins prati svaki povezani 캜vor za prostor na disku, slobodan privremeni prostor, slobodnu zamenu, vreme/sinhronizaciju sata i vreme odziva. 캛vor se isklju캜uje ako bilo koja od ovih vrednosti pre캠e konfigurisani prag.

**Agenti** **upravljaju** izvr코enjem zadataka u ime Jenkins kontrolera koriste캖i izvr코ioce. Agent mo쬰 koristiti bilo koji operativni sistem koji podr쬬va Java-u. Alati potrebni za izgradnju i testiranje instaliraju se na 캜voru na kojem se agent pokre캖e; mogu **se instalirati direktno ili u kontejneru** (Docker ili Kubernetes). Svaki **agent je efektivno proces sa sopstvenim PID-om** na host ma코ini.

Izvr코ilac je **slot za izvr코avanje zadataka**; efektivno, to je **nit u agentu**. Broj izvr코ilaca na 캜voru defini코e broj **paralelnih zadataka** koji mogu biti izvr코eni na tom 캜voru istovremeno. Drugim re캜ima, ovo odre캠uje broj **paralelnih Pipeline `stages`** koji mogu biti izvr코eni na tom 캜voru istovremeno.

## Jenkins Tajne

### Enkripcija Tajni i Akreditiva

Definicija iz [dokumentacije](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials):
Jenkins koristi **AES za enkripciju i za코titu tajni**, akreditiva i njihovih odgovaraju캖ih klju캜eva za enkripciju. Ovi klju캜evi za enkripciju se 캜uvaju u `$JENKINS_HOME/secrets/` zajedno sa glavnim klju캜em koji se koristi za za코titu tih klju캜eva. Ovaj direktorijum treba konfigurisati tako da samo korisnik operativnog sistema koji pokre캖e Jenkins kontroler ima pristup za 캜itanje i pisanje ovom direktorijumu (tj. `chmod` vrednost `0700` ili kori코캖enje odgovaraju캖ih atributa fajla). **Glavni klju캜** (ponekad nazvan "klju캜 za enkripciju klju캜eva" u
### Pristup akreditivima

Akreditivi mogu biti **ograni캜eni na globalne provajdere** (`/credentials/`) koji mogu biti pristupljeni od strane bilo kog konfigurisanog projekta, ili mogu biti ograni캜eni na **specifi캜ne projekte** (`/job/<ime-projekta>/configure`) i stoga pristupa캜ni samo iz tog specifi캜nog projekta.

Prema [**dokumentaciji**](https://www.jenkins.io/blog/2019/02/21/credentials-masking/): Akreditivi koji su u opsegu su dostupni u pipelajnu bez ograni캜enja. Da bi se **spre캜ilo slu캜ajno otkrivanje u zapisu izgradnje**, akreditivi su **maskirani** iz redovnog izlaza, tako da poziv `env` (Linux) ili `set` (Windows), ili programi koji ispisuju svoje okru쬰nje ili parametre ne bi **otkrili ih u zapisu izgradnje** korisnicima koji ina캜e ne bi imali pristup akreditivima.

**Zato napada캜u treba, na primer, da ih base64 kodira kako bi izvukao akreditive.**

## Reference

* [https://www.jenkins.io/doc/book/security/managing-security/](https://www.jenkins.io/doc/book/security/managing-security/)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)
* [https://www.jenkins.io/doc/developer/security/secrets/](https://www.jenkins.io/doc/developer/security/secrets/)
* [https://www.jenkins.io/blog/2019/02/21/credentials-masking/](https://www.jenkins.io/blog/2019/02/21/credentials-masking/)
* [https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery)
* [https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
