# Osnovne informacije o Jenkins-u

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Pristup

### Korisni캜ko ime + Lozinka

Naj캜e코캖i na캜in prijave u Jenkins je sa korisni캜kim imenom ili lozinkom.

### Kola캜i캖

Ako se **ukrade ovla코캖eni kola캜i캖**, mo쬰 se koristiti za pristup sesiji korisnika. Kola캜i캖 se obi캜no naziva `JSESSIONID.*`. (Korisnik mo쬰 prekinuti sve svoje sesije, ali prvo mora da otkrije da je kola캜i캖 ukraden).

### SSO/Dodaci

Jenkins se mo쬰 konfigurisati kori코캖enjem dodataka da bude **pristupa캜an putem SSO-a tre캖ih strana**.

### Tokeni

**Korisnici mogu generisati tokene** kako bi omogu캖ili pristup aplikacijama da ih opona코aju putem CLI-ja ili REST API-ja.

### SSH Klju캜evi

Ovaj komponent pru쬬 ugra캠eni SSH server za Jenkins. To je alternativni interfejs za [Jenkins CLI](https://www.jenkins.io/doc/book/managing/cli/), i komande se mogu pozvati na ovaj na캜in kori코캖enjem bilo kog SSH klijenta. (Iz [dokumenata](https://plugins.jenkins.io/sshd/))

## Autorizacija

U `/configureSecurity` je mogu캖e **konfigurisati metodu autorizacije Jenkins-a**. Postoji nekoliko opcija:

* **Svako mo쬰 uraditi bilo 코ta**: 캛ak i anonimni pristup mo쬰 administrirati server
* **Legacy re쬴m**: Isti kao Jenkins <1.164. Ako imate ulogu **"admin"**, bi캖ete dodeljeni **puna kontrola** nad sistemom, a **ina캜e** (uklju캜uju캖i **anonimne** korisnike) ima캖ete **samo pristup za 캜itanje**.
* **Prijavljeni korisnici mogu uraditi bilo 코ta**: U ovom re쬴mu, svaki **prijavljeni korisnik dobija punu kontrolu** nad Jenkins-om. Jedini korisnik koji ne캖e imati punu kontrolu je **anonimni korisnik**, koji dobija **samo pristup za 캜itanje**.
* **Matrix-based security**: Mo쬰te konfigurisati **ko mo쬰 uraditi 코ta** u tabeli. Svaka **kolona** predstavlja **dozvolu**. Svaki **red** predstavlja **korisnika ili grupu/ulogu**. Ovo uklju캜uje posebnog korisnika '**anonimni**', koji predstavlja **neautentifikovane korisnike**, kao i '**autentifikovani**', koji predstavlja **sve autentifikovane korisnike**.

![](<../../.gitbook/assets/image (149).png>)

* **Project-based Matrix Authorization Strategy:** Ovaj re쬴m je **pro코irenje** za "**Matrix-based security**" koje omogu캖ava dodatnu ACL matricu da se **defini코e za svaki projekat posebno**.
* **Role-Based Strategy:** Omogu캖ava definisanje autorizacija kori코캖enjem **role-based strategije**. Upravljajte ulogama u `/role-strategy`.

## **Bezbednosno podru캜je**

U `/configureSecurity` je mogu캖e **konfigurisati bezbednosno podru캜je.** Po podrazumevanim postavkama, Jenkins uklju캜uje podr코ku za nekoliko razli캜itih bezbednosnih podru캜ja:

* **Delegiraj servlet kontejneru**: Za **delegiranje autentifikacije servlet kontejneru koji pokre캖e Jenkins kontroler**, kao 코to je [Jetty](https://www.eclipse.org/jetty/).
* **Jenkins-ova sopstvena baza korisnika:** Koristi **Jenkins-ovu sopstvenu ugra캠enu bazu podataka korisnika** za autentifikaciju umesto delegiranja spoljnom sistemu. Ovo je podrazumevano omogu캖eno.
* **LDAP**: Delegira svu autentifikaciju konfigurisanom LDAP serveru, uklju캜uju캖i korisnike i grupe.
* **Unix baza korisnika/grupa**: **Delegira autentifikaciju osnovnoj Unix** bazi podataka korisnika na Jenkins kontroleru. Ovaj re쬴m tako캠e omogu캖ava ponovnu upotrebu Unix grupa za autorizaciju.

Dodaci mogu pru쬴ti dodatna bezbednosna podru캜ja koja mogu biti korisna za uklju캜ivanje Jenkins-a u postoje캖e sisteme identiteta, kao 코to su:

* [Active Directory](https://plugins.jenkins.io/active-directory)
* [GitHub Authentication](https://plugins.jenkins.io/github-oauth)
* [Atlassian Crowd 2](https://plugins.jenkins.io/crowd2)

## Jenkins 캛vorovi, Agenti i Izvr코ioci

Definicije iz [dokumenata](https://www.jenkins.io/doc/book/managing/nodes/):

**캛vorovi** su **ma코ine** na kojima se pokre캖u **agenti za izgradnju**. Jenkins prati svaki povezan 캜vor za prostor na disku, slobodan privremeni prostor, slobodnu razmenu, vreme sata/sinhronizaciju i vreme odziva. 캛vor se skida sa mre쬰 ako bilo koja od ovih vrednosti pre캠e konfigurisani prag.

**Agenti** **upravljaju** izvr코enjem zadatka u ime Jenkins kontrolera **koriste캖i izvr코ioce**. Agent mo쬰 koristiti bilo koji operativni sistem koji podr쬬va Java. Alati potrebni za izgradnju i testove instalirani su na 캜voru na kojem agent radi; mogu **biti instalirani direktno ili u kontejneru** (Docker ili Kubernetes). Svaki **agent je efektivno proces sa svojim PID-om** na glavnoj ma코ini.

**Izvr코ilac** je **slot za izvr코enje zadataka**; efektivno, to je **nit u agentu**. Broj izvr코ilaca na 캜voru defini코e broj **istovremenih zadataka** koji mogu biti izvr코eni na tom 캜voru u jednom trenutku. Drugim re캜ima, ovo odre캠uje **broj istovremenih faza Pipeline-a** koje mogu biti izvr코ene na tom 캜voru u jednom trenutku.

## Jenkins Tajne

### Enkripcija Tajni i Kredencijala

Definicija iz [dokumenata](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials): Jenkins koristi **AES za enkripciju i za코titu tajni**, kredencijala i njihovih odgovaraju캖ih klju캜eva za enkripciju. Ovi klju캜evi za enkripciju se 캜uvaju u `$JENKINS_HOME/secrets/` zajedno sa glavnim klju캜em koji se koristi za za코titu tih klju캜eva. Ovaj direktorijum treba konfigurisati tako da samo operativni sistem korisnik pod kojim Jenkins kontroler radi ima pristup za 캜itanje i pisanje ovom direktorijumu (tj. `chmod` vrednost `0700` ili kori코캖enje odgovaraju캖ih atributa datoteke). **Glavni klju캜** (ponekad nazvan "klju캜 za enkripciju klju캜eva" u kriptojargonu) je **캜uvan \_ne코ifrovan**\_ na Jenkins kontroleru u sistemu datoteka pod nazivom **`$JENKINS_HOME/secrets/master.key`** 코to ne 코titi od napada캜a sa direktnim pristupom toj datoteci. Ve캖ina korisnika i programera 캖e koristiti ove klju캜eve za enkripciju indirektno putem [Secret](https://javadoc.jenkins.io/byShortName/Secret) API-ja za enkripciju generi캜kih tajnih podataka ili kroz API kredencijala. Za kriptozainteresovane, Jenkins koristi AES u re쬴mu 코ifrovanja blokova sa lancem (CBC) sa PKCS#5 punjenjem i slu캜ajnim IV-ima za enkripciju instanci [CryptoConfidentialKey](https://javadoc.jenkins.io/byShortName/CryptoConfidentialKey) koji se 캜uvaju u `$JENKINS_HOME/secrets/` sa nazivom datoteke koji odgovara njihovom `CryptoConfidentialKey` id-u. Uobi캜ajeni ID-ovi klju캜eva uklju캜uju:

* `hudson.util.Secret`: kori코캖en za generi캜ke tajne;
* `com.cloudbees.plugins.credentials.SecretBytes.KEY`: kori코캖en za neke tipove kredencijala;
* `jenkins.model.Jenkins.crumbSalt`: kori코캖en od strane [mehanizma za코tite od CSRF-a](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery); i
### Pristup podacima za pristupnice

Pristupnice mogu biti **ograni캜ene na globalne provajdere** (`/credentials/`) koji mogu biti pristupa캜ni svakom konfigurisanom projektu, ili mogu biti ograni캜ene na **specifi캜ne projekte** (`/job/<ime-projekta>/configure`) i stoga su pristupa캜ne samo iz specifi캜nog projekta.

Prema [**dokumentaciji**](https://www.jenkins.io/blog/2019/02/21/credentials-masking/): Pristupnice koje su u opsegu su dostupne u pipelajnu bez ograni캜enja. Da bi se **sprije캜ilo slu캜ajno otkrivanje u zapisniku izgradnje**, pristupnice su **maskirane** iz redovnog izlaza, tako da njihovo otkrivanje u zapisniku izgradnje ne bi bilo mogu캖e putem poziva `env` (Linux) ili `set` (Windows), ili programa koji ispisuju svoje okru쬰nje ili parametre korisnicima koji ina캜e ne bi imali pristup pristupnicama.

**Zato napada캜u treba, na primer, da ih enkodira u base64 formatu kako bi iznio pristupnice.**

## Reference

* [https://www.jenkins.io/doc/book/security/managing-security/](https://www.jenkins.io/doc/book/security/managing-security/)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)
* [https://www.jenkins.io/doc/developer/security/secrets/](https://www.jenkins.io/doc/developer/security/secrets/)
* [https://www.jenkins.io/blog/2019/02/21/credentials-masking/](https://www.jenkins.io/blog/2019/02/21/credentials-masking/)
* [https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery](https://www.jenkins.io/doc/book/managing/security/#cross-site-request-forgery)
* [https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials](https://www.jenkins.io/doc/developer/security/secrets/#encryption-of-secrets-and-credentials)
* [https://www.jenkins.io/doc/book/managing/nodes/](https://www.jenkins.io/doc/book/managing/nodes/)

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** Pogledajte [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** 游냕 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
