# Concourse Architecture

## Concourse Architecture

<details>

<summary><strong>ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§ã®AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„å ´åˆ**ã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã‚‹
* **ğŸ’¬ [Discordã‚°ãƒ«ãƒ¼ãƒ—](https://discord.gg/hRep4RUj7f)**ã«å‚åŠ ã™ã‚‹ã‹ã€[telegramã‚°ãƒ«ãƒ¼ãƒ—](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ã§ç§ãŸã¡ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€PRã‚’** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ã¨** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

[**Concourseãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã®é–¢é€£ãƒ‡ãƒ¼ã‚¿:**](https://concourse-ci.org/internals.html)

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

![](<../../.gitbook/assets/image (187).png>)

#### ATC: web UI & build scheduler

ATCã¯Concourseã®ä¸­å¿ƒã§ã™ã€‚**web UIã¨API**ã‚’å®Ÿè¡Œã—ã€ã™ã¹ã¦ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®**ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°**ã‚’æ‹…å½“ã—ã¾ã™ã€‚**PostgreSQLã«æ¥ç¶š**ã—ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã‚’å«ã‚€ï¼‰ã‚’ä¿å­˜ã—ã¾ã™ã€‚

[checker](https://concourse-ci.org/checker.html)ã¯ãƒªã‚½ãƒ¼ã‚¹ã®æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¶™ç¶šçš„ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚[scheduler](https://concourse-ci.org/scheduler.html)ã¯ã‚¸ãƒ§ãƒ–ã®ãŸã‚ã«ãƒ“ãƒ«ãƒ‰ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã™ã‚‹è²¬ä»»ãŒã‚ã‚Šã€[build tracker](https://concourse-ci.org/build-tracker.html)ã¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã•ã‚ŒãŸãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚[garbage collector](https://concourse-ci.org/garbage-collector.html)ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚„ãƒœãƒªãƒ¥ãƒ¼ãƒ ãªã©ã®æœªä½¿ç”¨ã¾ãŸã¯å¤ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‰Šé™¤ã™ã‚‹ãŸã‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã§ã™ã€‚

#### TSA: worker registration & forwarding

TSAã¯ã€[ATC](https://concourse-ci.org/internals.html#component-atc)ã«**åŠ´åƒè€…**ã‚’å®‰å…¨ã«**ç™»éŒ²**ã™ã‚‹ãŸã‚ã ã‘ã«ä½¿ç”¨ã•ã‚Œã‚‹**ã‚«ã‚¹ã‚¿ãƒ SSHã‚µãƒ¼ãƒãƒ¼**ã§ã™ã€‚

TSAã¯**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒãƒ¼ãƒˆ`2222`ã§ãƒªãƒƒã‚¹ãƒ³**ã—ã€é€šå¸¸ã¯[ATC](https://concourse-ci.org/internals.html#component-atc)ã¨åŒã˜å ´æ‰€ã«ã‚ã‚Šã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã®èƒŒå¾Œã«é…ç½®ã•ã‚Œã¦ã„ã¾ã™ã€‚

**TSAã¯SSHæ¥ç¶šã‚’ä»‹ã—ã¦CLIã‚’å®Ÿè£…**ã—ã€[**ã“ã‚Œã‚‰ã®ã‚³ãƒãƒ³ãƒ‰**](https://concourse-ci.org/internals.html#component-tsa)ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

#### Workers

ConcourseãŒã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã¯ã€ã„ãã¤ã‹ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒå¿…è¦ã§ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã¯[TSA](https://concourse-ci.org/internals.html#component-tsa)ã‚’ä»‹ã—ã¦**è‡ªå·±ç™»éŒ²**ã—ã€[**Garden**](https://github.com/cloudfoundry-incubator/garden)ã¨[**Baggageclaim**](https://github.com/concourse/baggageclaim)ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

* **Garden**: ã“ã‚Œã¯**ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†API**ã§ã€é€šå¸¸ã¯**HTTP**ã‚’ä»‹ã—ã¦**ãƒãƒ¼ãƒˆ7777**ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
* **Baggageclaim**: ã“ã‚Œã¯**ãƒœãƒªãƒ¥ãƒ¼ãƒ ç®¡ç†API**ã§ã€é€šå¸¸ã¯**HTTP**ã‚’ä»‹ã—ã¦**ãƒãƒ¼ãƒˆ7788**ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

## å‚è€ƒæ–‡çŒ®

* [https://concourse-ci.org/internals.html](https://concourse-ci.org/internals.html)

<details>

<summary><strong>ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§ã®AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„å ´åˆ**ã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã‚‹
* **ğŸ’¬ [Discordã‚°ãƒ«ãƒ¼ãƒ—](https://discord.gg/hRep4RUj7f)**ã«å‚åŠ ã™ã‚‹ã‹ã€[telegramã‚°ãƒ«ãƒ¼ãƒ—](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ã§ç§ãŸã¡ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€PRã‚’** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ã¨** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>
