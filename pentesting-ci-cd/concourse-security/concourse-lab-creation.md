# Concourse Lab OluÅŸturma

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## Test OrtamÄ±

### Concourse Ã‡alÄ±ÅŸtÄ±rma

#### Docker-Compose ile

Bu docker-compose dosyasÄ±, concourse ile bazÄ± testler yapmak iÃ§in kurulumu basitleÅŸtirir:
```bash
wget https://raw.githubusercontent.com/starkandwayne/concourse-tutorial/master/docker-compose.yml
docker-compose up -d
```
Komut satÄ±rÄ± `fly`'Ä± iÅŸletim sisteminize `127.0.0.1:8080` adresinden web Ã¼zerinden indirebilirsiniz.

#### Kubernetes ile (Tavsiye Edilen)

Helm-chart kullanarak **Kubernetes** Ã¼zerinde (Ã¶rneÄŸin **minikube** Ã¼zerinde) concourse'u kolayca daÄŸÄ±tabilirsiniz: [**concourse-chart**](https://github.com/concourse/concourse-chart).
```bash
brew install helm
helm repo add concourse https://concourse-charts.storage.googleapis.com/
helm install concourse-release concourse/concourse
# concourse-release will be the prefix name for the concourse elements in k8s
# After the installation you will find the indications to connect to it in the console

# If you need to delete it
helm delete concourse-release
```
Concourse ortamÄ±nÄ± oluÅŸturduktan sonra, bir sÄ±r oluÅŸturabilir ve concourse web'de Ã§alÄ±ÅŸan SA'ya K8s sÄ±rlarÄ±na eriÅŸim izni verebilirsiniz:
```yaml
echo 'apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
name: read-secrets
rules:
- apiGroups: [""]
resources: ["secrets"]
verbs: ["get"]

---

apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
name: read-secrets-concourse
roleRef:
apiGroup: rbac.authorization.k8s.io
kind: ClusterRole
name: read-secrets
subjects:
- kind: ServiceAccount
name: concourse-release-web
namespace: default

---

apiVersion: v1
kind: Secret
metadata:
name: super
namespace: concourse-release-main
type: Opaque
data:
secret: MWYyZDFlMmU2N2Rm

' | kubectl apply -f -
```
### Pipeline OluÅŸturma

Bir pipeline, sÄ±ralÄ± adÄ±mlarÄ±n (Steps) bir listesinden oluÅŸur ve her bir adÄ±m bir iÅŸi (Job) temsil eder.

### AdÄ±mlar

FarklÄ± tÃ¼rde adÄ±mlar kullanÄ±labilir:

* **[**`task` adÄ±mÄ±**](https://concourse-ci.org/task-step.html)** bir gÃ¶revi (task) Ã§alÄ±ÅŸtÄ±rÄ±r**
* [`get` adÄ±mÄ±](https://concourse-ci.org/get-step.html) bir kaynaÄŸÄ± (resource) alÄ±r
* [`put` adÄ±mÄ±](https://concourse-ci.org/put-step.html) bir kaynaÄŸÄ± (resource) gÃ¼nceller
* [`set_pipeline` adÄ±mÄ±](https://concourse-ci.org/set-pipeline-step.html) bir pipeline'Ä± (pipeline) yapÄ±landÄ±rÄ±r
* [`load_var` adÄ±mÄ±](https://concourse-ci.org/load-var-step.html) bir deÄŸeri bir yerel deÄŸiÅŸkene (local var) yÃ¼kler
* [`in_parallel` adÄ±mÄ±](https://concourse-ci.org/in-parallel-step.html) adÄ±mlarÄ± paralel olarak Ã§alÄ±ÅŸtÄ±rÄ±r
* [`do` adÄ±mÄ±](https://concourse-ci.org/do-step.html) adÄ±mlarÄ± sÄ±rayla Ã§alÄ±ÅŸtÄ±rÄ±r
* [`across` adÄ±m deÄŸiÅŸtirici](https://concourse-ci.org/across-step.html#schema.across) bir adÄ±mÄ± birden fazla kez Ã§alÄ±ÅŸtÄ±rÄ±r; her bir deÄŸiÅŸken deÄŸeri kombinasyonu iÃ§in bir kez Ã§alÄ±ÅŸtÄ±rÄ±r
* [`try` adÄ±mÄ±](https://concourse-ci.org/try-step.html) bir adÄ±mÄ± Ã§alÄ±ÅŸtÄ±rmaya Ã§alÄ±ÅŸÄ±r ve adÄ±m baÅŸarÄ±sÄ±z olsa bile baÅŸarÄ±lÄ± olur

Her [adÄ±m](https://concourse-ci.org/steps.html), bir [iÅŸ planÄ±nda](https://concourse-ci.org/jobs.html#schema.job.plan) kendi **konteynerÄ±nda** Ã§alÄ±ÅŸÄ±r. Konteyner iÃ§inde istediÄŸiniz her ÅŸeyi Ã§alÄ±ÅŸtÄ±rabilirsiniz _(Ã¶rneÄŸin testlerimi Ã§alÄ±ÅŸtÄ±r, bu bash betiÄŸini Ã§alÄ±ÅŸtÄ±r, bu imajÄ± oluÅŸtur, vb.)_. Bu nedenle, beÅŸ adÄ±mlÄ± bir iÅŸiniz varsa, Concourse her adÄ±m iÃ§in bir konteyner oluÅŸturur.

Bu nedenle, her adÄ±mÄ±n hangi tÃ¼rde bir konteyner iÃ§inde Ã§alÄ±ÅŸmasÄ± gerektiÄŸini belirtebilirsiniz.

### Basit Pipeline Ã–rneÄŸi
```yaml
jobs:
- name: simple
plan:
- task: simple-task
privileged: true
config:
# Tells Concourse which type of worker this task should run on
platform: linux
image_resource:
type: registry-image
source:
repository: busybox # images are pulled from docker hub by default
run:
path: sh
args:
- -cx
- |
sleep 1000
echo "$SUPER_SECRET"
params:
SUPER_SECRET: ((super.secret))
```

```bash
fly -t tutorial set-pipeline -p pipe-name -c hello-world.yml
# pipelines are paused when first created
fly -t tutorial unpause-pipeline -p pipe-name
# trigger the job and watch it run to completion
fly -t tutorial trigger-job --job pipe-name/simple --watch
# From another console
fly -t tutorial intercept --job pipe-name/simple
```
Pipeline akÄ±ÅŸÄ±nÄ± gÃ¶rmek iÃ§in **127.0.0.1:8080** adresini kontrol edin.

### Ã‡Ä±ktÄ±/GiriÅŸ boru hattÄ±yla Bash komut dosyasÄ±

Bir gÃ¶revin sonuÃ§larÄ±nÄ± bir dosyada kaydetmek ve bunun bir Ã§Ä±ktÄ± olduÄŸunu belirtmek, ardÄ±ÅŸÄ±k bir gÃ¶revin giriÅŸini Ã¶nceki gÃ¶revin Ã§Ä±ktÄ±sÄ± olarak belirtmek mÃ¼mkÃ¼ndÃ¼r. Concourse, Ã¶nceki gÃ¶revin dizinini yeni gÃ¶reve baÄŸlar ve bÃ¶ylece Ã¶nceki gÃ¶rev tarafÄ±ndan oluÅŸturulan dosyalara eriÅŸebilirsiniz.

### Tetikleyiciler

Ä°ÅŸleri her seferinde manuel olarak tetiklemeniz gerekmez, aynÄ± zamanda onlarÄ± her seferinde Ã§alÄ±ÅŸtÄ±rÄ±lacak ÅŸekilde programlayabilirsiniz:

* Belirli bir sÃ¼re geÃ§tiÄŸinde: [Zaman kaynaÄŸÄ±](https://github.com/concourse/time-resource/)
* Ana dalda yeni taahhÃ¼tler olduÄŸunda: [Git kaynaÄŸÄ±](https://github.com/concourse/git-resource)
* Yeni PR'lar: [Github-PR kaynaÄŸÄ±](https://github.com/telia-oss/github-pr-resource)
* UygulamanÄ±zÄ±n en son gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ alÄ±n veya gÃ¶nderin: [KayÄ±t defteri gÃ¶rÃ¼ntÃ¼sÃ¼ kaynaÄŸÄ±](https://github.com/concourse/registry-image-resource/)

Yeni taahhÃ¼tlerde tetiklenen bir YAML boru hattÄ± Ã¶rneÄŸini [https://concourse-ci.org/tutorial-resources.html](https://concourse-ci.org/tutorial-resources.html) adresinde kontrol edin.

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **tanÄ±tmak** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin, Ã¶zel [**NFT'lerimizi**](https://opensea.io/collection/the-peass-family) gÃ¶rÃ¼n
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
