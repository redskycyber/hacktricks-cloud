# Concourse Lab ìƒì„±

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>

## í…ŒìŠ¤íŠ¸ í™˜ê²½

### Concourse ì‹¤í–‰

#### Docker-Composeë¥¼ ì‚¬ìš©í•˜ì—¬

ì´ docker-compose íŒŒì¼ì€ concourseë¡œ ì¼ë¶€ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì„¤ì¹˜ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤:
```bash
wget https://raw.githubusercontent.com/starkandwayne/concourse-tutorial/master/docker-compose.yml
docker-compose up -d
```
ë‹¹ì‹ ì€ `127.0.0.1:8080`ì—ì„œ ì›¹ì—ì„œ ìš´ì˜ ì²´ì œì— ë§ëŠ” ëª…ë ¹ ì¤„ `fly`ë¥¼ ë‹¤ìš´ë¡œë“œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### Kubernetesë¡œ (ê¶Œì¥)

[**concourse-chart**](https://github.com/concourse/concourse-chart)ë¥¼ ì‚¬ìš©í•˜ì—¬ **Kubernetes**(ì˜ˆ: **minikube**)ì— ì‰½ê²Œ concourseë¥¼ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
brew install helm
helm repo add concourse https://concourse-charts.storage.googleapis.com/
helm install concourse-release concourse/concourse
# concourse-release will be the prefix name for the concourse elements in k8s
# After the installation you will find the indications to connect to it in the console

# If you need to delete it
helm delete concourse-release
```
concourse envë¥¼ ìƒì„±í•œ í›„, ë¹„ë°€ì„ ìƒì„±í•˜ê³  concourse ì›¹ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ SAì— K8s ë¹„ë°€ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```yaml
echo 'apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
name: read-secrets
rules:
- apiGroups: [""]
resources: ["secrets"]
verbs: ["get"]

---

apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
name: read-secrets-concourse
roleRef:
apiGroup: rbac.authorization.k8s.io
kind: ClusterRole
name: read-secrets
subjects:
- kind: ServiceAccount
name: concourse-release-web
namespace: default

---

apiVersion: v1
kind: Secret
metadata:
name: super
namespace: concourse-release-main
type: Opaque
data:
secret: MWYyZDFlMmU2N2Rm

' | kubectl apply -f -
```
### íŒŒì´í”„ë¼ì¸ ìƒì„±

íŒŒì´í”„ë¼ì¸ì€ [ì‘ì—…](https://concourse-ci.org/jobs.html) ëª©ë¡ìœ¼ë¡œ êµ¬ì„±ë˜ë©°, ê° ì‘ì—…ì€ [ë‹¨ê³„](https://concourse-ci.org/steps.html)ì˜ ìˆœì„œê°€ ìˆëŠ” ëª©ë¡ì…ë‹ˆë‹¤.

### ë‹¨ê³„

ë‹¤ì–‘í•œ ìœ í˜•ì˜ ë‹¨ê³„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

* **[`task` ë‹¨ê³„](https://concourse-ci.org/task-step.html)**ëŠ” [ì‘ì—…](https://concourse-ci.org/tasks.html)ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
* [`get` ë‹¨ê³„](https://concourse-ci.org/get-step.html)ëŠ” [ë¦¬ì†ŒìŠ¤](https://concourse-ci.org/resources.html)ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
* [`put` ë‹¨ê³„](https://concourse-ci.org/put-step.html)ì€ [ë¦¬ì†ŒìŠ¤](https://concourse-ci.org/resources.html)ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
* [`set_pipeline` ë‹¨ê³„](https://concourse-ci.org/set-pipeline-step.html)ì€ [íŒŒì´í”„ë¼ì¸](https://concourse-ci.org/pipelines.html)ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
* [`load_var` ë‹¨ê³„](https://concourse-ci.org/load-var-step.html)ëŠ” ê°’ì„ [ë¡œì»¬ ë³€ìˆ˜](https://concourse-ci.org/vars.html#local-vars)ì— ë¡œë“œí•©ë‹ˆë‹¤.
* [`in_parallel` ë‹¨ê³„](https://concourse-ci.org/in-parallel-step.html)ëŠ” ë‹¨ê³„ë¥¼ ë³‘ë ¬ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.
* [`do` ë‹¨ê³„](https://concourse-ci.org/do-step.html)ëŠ” ë‹¨ê³„ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.
* [`across` ë‹¨ê³„ ìˆ˜ì •ì](https://concourse-ci.org/across-step.html#schema.across)ëŠ” ë³€ìˆ˜ ê°’ì˜ ê° ì¡°í•©ì— ëŒ€í•´ ë‹¨ê³„ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•©ë‹ˆë‹¤.
* [`try` ë‹¨ê³„](https://concourse-ci.org/try-step.html)ëŠ” ë‹¨ê³„ë¥¼ ì‹¤í–‰í•˜ë ¤ê³  ì‹œë„í•˜ê³ , ë‹¨ê³„ê°€ ì‹¤íŒ¨í•´ë„ ì„±ê³µí•©ë‹ˆë‹¤.

ê° [ì‘ì—… ê³„íš](https://concourse-ci.org/jobs.html#schema.job.plan)ì˜ [ë‹¨ê³„](https://concourse-ci.org/steps.html)ëŠ” **ë…ë¦½ì ì¸ ì»¨í…Œì´ë„ˆ**ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì›í•˜ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. _(ì˜ˆ: í…ŒìŠ¤íŠ¸ ì‹¤í–‰, bash ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰, ì´ë¯¸ì§€ ë¹Œë“œ ë“±)_ ë”°ë¼ì„œ, ë‹¤ì„¯ ê°œì˜ ë‹¨ê³„ê°€ ìˆëŠ” ì‘ì—…ì´ ìˆë‹¤ë©´ ConcourseëŠ” ê° ë‹¨ê³„ë§ˆë‹¤ í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

ë”°ë¼ì„œ, ê° ë‹¨ê³„ê°€ ì‹¤í–‰ë˜ëŠ” ì»¨í…Œì´ë„ˆì˜ ìœ í˜•ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê°„ë‹¨í•œ íŒŒì´í”„ë¼ì¸ ì˜ˆì œ
```yaml
jobs:
- name: simple
plan:
- task: simple-task
privileged: true
config:
# Tells Concourse which type of worker this task should run on
platform: linux
image_resource:
type: registry-image
source:
repository: busybox # images are pulled from docker hub by default
run:
path: sh
args:
- -cx
- |
sleep 1000
echo "$SUPER_SECRET"
params:
SUPER_SECRET: ((super.secret))
```

```bash
fly -t tutorial set-pipeline -p pipe-name -c hello-world.yml
# pipelines are paused when first created
fly -t tutorial unpause-pipeline -p pipe-name
# trigger the job and watch it run to completion
fly -t tutorial trigger-job --job pipe-name/simple --watch
# From another console
fly -t tutorial intercept --job pipe-name/simple
```
íŒŒì´í”„ë¼ì¸ íë¦„ì„ í™•ì¸í•˜ë ¤ë©´ **127.0.0.1:8080**ì„ í™•ì¸í•˜ì„¸ìš”.

### ì¶œë ¥/ì…ë ¥ íŒŒì´í”„ë¼ì¸ì´ ìˆëŠ” Bash ìŠ¤í¬ë¦½íŠ¸

í•œ ì‘ì—…ì˜ ê²°ê³¼ë¥¼ íŒŒì¼ì— ì €ì¥í•˜ê³ , ì´ë¥¼ ì¶œë ¥ìœ¼ë¡œ ì§€ì •í•œ ë‹¤ìŒ ë‹¤ìŒ ì‘ì—…ì˜ ì…ë ¥ì„ ì´ì „ ì‘ì—…ì˜ ì¶œë ¥ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ConcourseëŠ” ì´ì „ ì‘ì—…ì˜ ë””ë ‰í† ë¦¬ë¥¼ ìƒˆ ì‘ì—…ì— ë§ˆìš´íŠ¸í•˜ì—¬ ì´ì „ ì‘ì—…ì—ì„œ ìƒì„±ëœ íŒŒì¼ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

### íŠ¸ë¦¬ê±°

ì‘ì—…ì„ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•  í•„ìš” ì—†ì´, í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ë„ë¡ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

* ì¼ì • ì‹œê°„ì´ ê²½ê³¼: [Time ë¦¬ì†ŒìŠ¤](https://github.com/concourse/time-resource/)
* ë©”ì¸ ë¸Œëœì¹˜ì— ìƒˆë¡œìš´ ì»¤ë°‹ì´ ìˆì„ ë•Œ: [Git ë¦¬ì†ŒìŠ¤](https://github.com/concourse/git-resource)
* ìƒˆë¡œìš´ PR: [Github-PR ë¦¬ì†ŒìŠ¤](https://github.com/telia-oss/github-pr-resource)
* ì•±ì˜ ìµœì‹  ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ í‘¸ì‹œ: [Registry-image ë¦¬ì†ŒìŠ¤](https://github.com/concourse/registry-image-resource/)

[https://concourse-ci.org/tutorial-resources.html](https://concourse-ci.org/tutorial-resources.html)ì—ì„œ ë©”ì¸ ë¸Œëœì¹˜ì— ìƒˆë¡œìš´ ì»¤ë°‹ì´ ìˆì„ ë•Œ íŠ¸ë¦¬ê±°ë˜ëŠ” YAML íŒŒì´í”„ë¼ì¸ ì˜ˆì œë¥¼ í™•ì¸í•˜ì„¸ìš”.

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”!</summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* HackTricksì—ì„œ **íšŒì‚¬ ê´‘ê³ ë¥¼ ë³´ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìƒí’ˆ**](https://peass.creator-spring.com)ì„ êµ¬ë§¤í•˜ì„¸ìš”!
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”! ë…ì ì ì¸ [**NFT**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”!
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
