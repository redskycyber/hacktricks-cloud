# Airflowé…ç½®

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFç‰ˆçš„HackTricksï¼Œè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## é…ç½®æ–‡ä»¶

**Apache Airflow**åœ¨æ‰€æœ‰çš„Airflowæœºå™¨ä¸Šç”Ÿæˆä¸€ä¸ªåä¸º**`airflow.cfg`**çš„**é…ç½®æ–‡ä»¶**ï¼Œè¯¥æ–‡ä»¶ä½äºAirflowç”¨æˆ·çš„ä¸»ç›®å½•ä¸­ã€‚æ­¤é…ç½®æ–‡ä»¶åŒ…å«é…ç½®ä¿¡æ¯å’Œ**å¯èƒ½åŒ…å«æœ‰è¶£å’Œæ•æ„Ÿçš„ä¿¡æ¯**ã€‚

**è®¿é—®æ­¤æ–‡ä»¶çš„ä¸¤ç§æ–¹å¼ï¼šé€šè¿‡å…¥ä¾µæŸäº›Airflowæœºå™¨æˆ–è®¿é—®Webæ§åˆ¶å°ã€‚**

è¯·æ³¨æ„ï¼Œ**é…ç½®æ–‡ä»¶ä¸­çš„å€¼å¯èƒ½ä¸æ˜¯å®é™…ä½¿ç”¨çš„å€¼**ï¼Œå› ä¸ºæ‚¨å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚`AIRFLOW__WEBSERVER__EXPOSE_CONFIG: 'true'`ï¼‰æ¥è¦†ç›–å®ƒä»¬ã€‚

å¦‚æœæ‚¨å¯ä»¥è®¿é—®**WebæœåŠ¡å™¨ä¸Šçš„é…ç½®æ–‡ä»¶**ï¼Œæ‚¨å¯ä»¥åœ¨æ˜¾ç¤ºé…ç½®çš„åŒä¸€é¡µä¸Šæ£€æŸ¥**å®é™…è¿è¡Œçš„é…ç½®**ã€‚\
å¦‚æœæ‚¨å¯ä»¥**è®¿é—®Airflowç¯å¢ƒä¸­çš„æŸå°æœºå™¨**ï¼Œè¯·æ£€æŸ¥**ç¯å¢ƒ**ã€‚

é˜…è¯»é…ç½®æ–‡ä»¶æ—¶è¦æ£€æŸ¥çš„ä¸€äº›æœ‰è¶£çš„å€¼ï¼š

### \[api]

* **`access_control_allow_headers`**ï¼šè¿™è¡¨ç¤º**CORSå…è®¸çš„æ ‡å¤´**
* **`access_control_allow_methods`**ï¼šè¿™è¡¨ç¤º**CORSå…è®¸çš„æ–¹æ³•**
* **`access_control_allow_origins`**ï¼šè¿™è¡¨ç¤º**CORSå…è®¸çš„æ¥æº**
* **`auth_backend`**ï¼š[**æ ¹æ®æ–‡æ¡£**](https://airflow.apache.org/docs/apache-airflow/stable/security/api.html)ï¼Œå¯ä»¥é‡‡å–ä¸€äº›é€‰é¡¹æ¥é…ç½®è°å¯ä»¥è®¿é—®APIï¼š
* `airflow.api.auth.backend.deny_all`ï¼š**é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰äºº**å¯ä»¥è®¿é—®API
* `airflow.api.auth.backend.default`ï¼š**ä»»ä½•äººéƒ½å¯ä»¥**åœ¨ä¸è¿›è¡Œèº«ä»½éªŒè¯çš„æƒ…å†µä¸‹è®¿é—®
* `airflow.api.auth.backend.kerberos_auth`ï¼šç”¨äºé…ç½®**Kerberosèº«ä»½éªŒè¯**
* `airflow.api.auth.backend.basic_auth`ï¼šç”¨äº**åŸºæœ¬èº«ä»½éªŒè¯**
* `airflow.composer.api.backend.composer_auth`ï¼šä½¿ç”¨Composerèº«ä»½éªŒè¯ï¼ˆGCPï¼‰ï¼ˆæ¥è‡ª[**è¿™é‡Œ**](https://cloud.google.com/composer/docs/access-airflow-api)ï¼‰ã€‚
* `composer_auth_user_registration_role`ï¼šè¿™è¡¨ç¤º**composerç”¨æˆ·**åœ¨**airflow**ä¸­å°†è·å¾—çš„**è§’è‰²**ï¼ˆé»˜è®¤ä¸ºOpï¼‰ã€‚
* æ‚¨è¿˜å¯ä»¥ä½¿ç”¨Python**åˆ›å»ºè‡ªå·±çš„èº«ä»½éªŒè¯**æ–¹æ³•ã€‚
* **`google_key_path`:** GCPæœåŠ¡å¸æˆ·å¯†é’¥çš„è·¯å¾„

### **\[atlas]**

* **`password`**ï¼šAtlaså¯†ç 
* **`username`**ï¼šAtlasç”¨æˆ·å

### \[celery]

* **`flower_basic_auth`**ï¼šå‡­æ®ï¼ˆ_user1:password1,user2:password2_ï¼‰
* **`result_backend`**ï¼šå¯èƒ½åŒ…å«**å‡­æ®**çš„Postgres URLã€‚
* **`ssl_cacert`**ï¼šcacertçš„è·¯å¾„
* **`ssl_cert`**ï¼šè¯ä¹¦çš„è·¯å¾„
* **`ssl_key`**ï¼šå¯†é’¥çš„è·¯å¾„

### \[core]

* **`dag_discovery_safe_mode`**ï¼šé»˜è®¤å¯ç”¨ã€‚åœ¨å‘ç°DAGæ—¶ï¼Œå¿½ç•¥ä¸åŒ…å«å­—ç¬¦ä¸²`DAG`å’Œ`airflow`çš„æ–‡ä»¶ã€‚
* **`fernet_key`**ï¼šç”¨äºå­˜å‚¨åŠ å¯†å˜é‡çš„å¯†é’¥ï¼ˆå¯¹ç§°ï¼‰
* **`hide_sensitive_var_conn_fields`**ï¼šé»˜è®¤å¯ç”¨ï¼Œéšè—è¿æ¥çš„æ•æ„Ÿä¿¡æ¯ã€‚
* **`security`**ï¼šè¦ä½¿ç”¨çš„å®‰å…¨æ¨¡å—ï¼ˆä¾‹å¦‚Kerberosï¼‰

### \[dask]

* **`tls_ca`**ï¼šcaçš„è·¯å¾„
* **`tls_cert`**ï¼šè¯ä¹¦çš„è·¯å¾„
* **`tls_key`**ï¼štlså¯†é’¥çš„è·¯å¾„

### \[kerberos]

* **`ccache`**ï¼šccacheæ–‡ä»¶çš„è·¯å¾„
* **`forwardable`**ï¼šé»˜è®¤å¯ç”¨

### \[logging]

* **`google_key_path`**ï¼šGCP JSONå‡­æ®çš„è·¯å¾„ã€‚

### \[secrets]

* **`backend`**ï¼šå¯ç”¨çš„secretsåç«¯çš„å®Œæ•´ç±»å
* **`backend_kwargs`**ï¼šbackend\_kwargså‚æ•°åŠ è½½åˆ°å­—å…¸ä¸­ï¼Œå¹¶ä¼ é€’ç»™secretsåç«¯ç±»çš„**init**æ–¹æ³•ã€‚

### \[smtp]

* **`smtp_password`**ï¼šSMTPå¯†ç 
* **`smtp_user`**ï¼šSMTPç”¨æˆ·

### \[webserver]

* **`cookie_samesite`**ï¼šé»˜è®¤ä¸º**Lax**ï¼Œå› æ­¤å·²ç»æ˜¯æœ€å¼±çš„å¯èƒ½å€¼
* **`cookie_secure`**ï¼šåœ¨ä¼šè¯cookieä¸Šè®¾ç½®**secureæ ‡å¿—**
* **`expose_config`**ï¼šé»˜è®¤ä¸ºFalseï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™å¯ä»¥ä»Webæ§åˆ¶å°**è¯»å–**é…ç½®
* **`expose_stacktrace`**ï¼šé»˜è®¤ä¸ºTrueï¼Œå®ƒå°†æ˜¾ç¤º**Pythonè·Ÿè¸ª**ï¼ˆå¯¹æ”»å‡»è€…å¯èƒ½æœ‰ç”¨ï¼‰
* **`secret_key`**ï¼šè¿™æ˜¯flaskç”¨äºç­¾ç½²cookieçš„**å¯†é’¥**ï¼ˆå¦‚æœæ‚¨æ‹¥æœ‰æ­¤å¯†é’¥ï¼Œåˆ™å¯ä»¥**å†’å……Airflowä¸­çš„ä»»ä½•ç”¨æˆ·**ï¼‰
* **`web_server_ssl_cert`**ï¼š**SSLè¯ä¹¦**çš„**è·¯å¾„**
* **`web_server_ssl_key`**ï¼š**SSLå¯†é’¥**çš„**è·¯å¾„**
* **`x_frame_enabled`**ï¼šé»˜è®¤ä¸º**True**ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹æ— æ³•è¿›è¡Œç‚¹å‡»åŠ«æŒ

### Webèº«ä»½éªŒè¯

é»˜è®¤æƒ…å†µä¸‹ï¼Œ**Webèº«ä»½éªŒè¯**åœ¨æ–‡ä»¶**`webserver_config.py`**ä¸­æŒ‡å®šï¼Œå¹¶é…ç½®ä¸º
```bash
AUTH_TYPE = AUTH_DB
```
è¿™æ„å‘³ç€**èº«ä»½éªŒè¯å°†ä¸æ•°æ®åº“è¿›è¡ŒéªŒè¯**ã€‚ç„¶è€Œï¼Œå…¶ä»–é…ç½®ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œæ¯”å¦‚
```bash
AUTH_TYPE = AUTH_OAUTH
```
å°†èº«ä»½éªŒè¯äº¤ç»™ç¬¬ä¸‰æ–¹æœåŠ¡ã€‚

ç„¶è€Œï¼Œä¹Ÿæœ‰ä¸€ç§é€‰æ‹©å…è®¸åŒ¿åç”¨æˆ·è®¿é—®ï¼Œå°†ä»¥ä¸‹å‚æ•°è®¾ç½®ä¸ºæ‰€éœ€çš„è§’è‰²ï¼š
```bash
AUTH_ROLE_PUBLIC = 'Admin'
```
<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„å…¬å¸åœ¨ HackTricks ä¸­è¿›è¡Œå¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å¾—[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“ï¼Œ[**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass)ï¼Œæˆ–åœ¨ **Twitter** ä¸Š **å…³æ³¨** æˆ‘ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
