# Gh Actions - Betik EnjeksiyonlarÄ±

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong> Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## Temel Bilgiler

Dikkat edin, bazÄ± [**github baÄŸlamlarÄ±**](https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context) deÄŸerleri, PR oluÅŸturan **kullanÄ±cÄ±** tarafÄ±ndan **kontrol edilir**. EÄŸer github eylemi bu verileri **yÃ¼rÃ¼tmek iÃ§in kullanÄ±yorsa**, bu **keyfi kod yÃ¼rÃ¼tme**ye yol aÃ§abilir. Bu baÄŸlamlar genellikle `body`, `default_branch`, `email`, `head_ref`, `label`, `message`, `name`, `page_name`,`ref` ve `title` ile biter. Ã–rneÄŸin (bu [**yazÄ±dan**](https://medium.com/tinder/exploiting-github-actions-on-open-source-projects-5d93936d189f) alÄ±nan liste):

* github.event.comment.body
* github.event.issue.body
* github.event.issue.title
* github.head\_ref
* github.pull\_request.\*
* github.\*.\*.authors.name
* github.\*.\*.authors.email

Dikkat edin, burada **daha az aÃ§Ä±k kaynaklar** da vardÄ±r, Ã¶rneÄŸin dal adlarÄ± ve e-posta adresleri, izin verilen iÃ§erik aÃ§Ä±sÄ±ndan oldukÃ§a esnek olabilir. Ã–rneÄŸin, `zzz";echo${IFS}"hello";#` geÃ§erli bir dal adÄ± olabilir ve hedef bir depo iÃ§in olasÄ± bir saldÄ±rÄ± vektÃ¶rÃ¼ olabilir.

### Betik enjeksiyon saldÄ±rÄ±sÄ±nÄ±n bir Ã¶rneÄŸi <a href="#example-of-a-script-injection-attack" id="example-of-a-script-injection-attack"></a>

Bir betik enjeksiyon saldÄ±rÄ±sÄ±, bir iÅŸ akÄ±ÅŸÄ±nÄ±n iÃ§inde doÄŸrudan gerÃ§ekleÅŸebilir. AÅŸaÄŸÄ±daki Ã¶rnekte, bir eylem, bir pull request baÅŸlÄ±ÄŸÄ±nÄ±n geÃ§erliliÄŸini test etmek iÃ§in bir **ifade kullanÄ±r**, ancak aynÄ± zamanda betik enjeksiyonu riskini de ekler:
```yaml
- name: Check PR title
run: |
title="${{ github.event.pull_request.title }}"
if [[ $title =~ ^octocat ]]; then
echo "PR title starts with 'octocat'"
exit 0
else
echo "PR title did not start with 'octocat'"
exit 1
fi
```
Shell script Ã§alÄ±ÅŸtÄ±rÄ±lmadan Ã¶nce `${{ }}` iÃ§indeki ifadeler **deÄŸerlendirilir** ve ardÄ±ndan elde edilen deÄŸerlerle deÄŸiÅŸtirilir, bu da onu **komut enjeksiyonuna karÅŸÄ± savunmasÄ±z** hale getirebilir.

Komut enjeksiyonu yapmak iÃ§in saldÄ±rgan, baÅŸlÄ±ÄŸÄ± **`a"; ls $GITHUB_WORKSPACE"`** olan bir pull isteÄŸi oluÅŸturabilir.

Bu Ã¶rnekte, **`"`** karakteri, `title=`**`"${{ github.event.pull_request.title }}"`** ifadesini kesintiye uÄŸratmak iÃ§in kullanÄ±lÄ±r ve bÃ¶ylece `ls` komutu Ã§alÄ±ÅŸtÄ±rÄ±labilir hale gelir.

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahramanla Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da** takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>
