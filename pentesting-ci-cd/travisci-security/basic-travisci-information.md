# Podstawowe informacje o TravisCI

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Dostp

TravisCI bezporednio integruje si z r贸偶nymi platformami git, takimi jak Github, Bitbucket, Assembla i Gitlab. Poprosi u偶ytkownika o udzielenie uprawnie TravisCI do dostpu do repozytori贸w, z kt贸rymi chce si zintegrowa.

Na przykad, w Githubie poprosi o nastpujce uprawnienia:

* `user:email` (tylko do odczytu)
* `read:org` (tylko do odczytu)
* `repo`: Udziela dostpu do odczytu i zapisu do kodu, status贸w commit贸w, wsp贸pracownik贸w i status贸w wdro偶e dla publicznych i prywatnych repozytori贸w i organizacji.

## Zaszyfrowane sekrety

### Zmienne rodowiskowe

W TravisCI, podobnie jak w innych platformach CI, mo偶liwe jest **zapisanie na poziomie repozytorium tajemnic**, kt贸re zostan zapisane w postaci zaszyfrowanej i **odszyfrowane i przekazane do zmiennej rodowiskowej** maszyny wykonujcej proces budowy.

![](<../../.gitbook/assets/image (44).png>)

Mo偶na wskaza **gazie, dla kt贸rych maj by dostpne tajemnice** (domylnie wszystkie) oraz czy TravisCI **powinien ukry ich warto**, jeli pojawi si **w logach** (domylnie tak).

### Niestandardowe zaszyfrowane sekrety

Dla **ka偶dego repozytorium** TravisCI generuje **par kluczy RSA**, **zachowuje** klucz **prywatny** i udostpnia **klucz publiczny repozytorium** tym, kt贸rzy maj **dostp** do repozytorium.

Mo偶esz uzyska dostp do klucza publicznego jednego repozytorium za pomoc:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Nastpnie mo偶esz u偶y tej konfiguracji do **szyfrowania sekret贸w i dodawania ich do pliku `.travis.yaml`**. Sekrety zostan **odszyfrowane podczas uruchamiania procesu budowania** i bd dostpne jako **zmienne rodowiskowe**.

![](<../../.gitbook/assets/image (2) (2) (1) (1).png>)

Nale偶y zauwa偶y, 偶e sekrety zaszyfrowane w ten spos贸b nie bd widoczne na licie zmiennych rodowiskowych w ustawieniach.

### Niestandardowe zaszyfrowane pliki

Podobnie jak wczeniej, TravisCI umo偶liwia r贸wnie偶 **szyfrowanie plik贸w, a nastpnie ich odszyfrowanie podczas procesu budowania**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Zauwa偶, 偶e podczas szyfrowania pliku zostan skonfigurowane 2 zmienne rodowiskowe wewntrz repozytorium, takie jak:

![](<../../.gitbook/assets/image (23).png>)

## TravisCI Enterprise

Travis CI Enterprise to **wersja Travis CI dziaajca w infrastrukturze lokalnej**, kt贸r mo偶na wdro偶y **w Twojej infrastrukturze**. Mo偶na to por贸wna do wersji "serwerowej" Travis CI. Korzystanie z Travis CI umo偶liwia wczenie prostego w u偶yciu systemu Continuous Integration/Continuous Deployment (CI/CD) w rodowisku, kt贸re mo偶na skonfigurowa i zabezpieczy wedug wasnych preferencji.

**Travis CI Enterprise skada si z dw贸ch g贸wnych czci:**

1. Usugi TCI (lub TCI Core Services), odpowiedzialne za integracj z systemami kontroli wersji, autoryzacj budowy, harmonogramowanie zada budowy, itp.
2. Pracownik TCI i obrazy rodowiska budowy (zwane r贸wnie偶 obrazami systemu operacyjnego).

**Usugi TCI Core wymagaj nastpujcych element贸w:**

1. Bazy danych **PostgreSQL11** (lub nowszej).
2. Infrastruktury do wdro偶enia klastra Kubernetes; mo偶e by wdro偶ony w klastrze serwer贸w lub na pojedynczej maszynie, jeli jest to wymagane.
3. W zale偶noci od konfiguracji, mo偶na chcie wdro偶y i skonfigurowa niekt贸re z komponent贸w samodzielnie, np. RabbitMQ - zobacz [Konfiguracja Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) dla wicej szczeg贸贸w.

**Pracownik TCI wymaga nastpujcych element贸w:**

1. Infrastruktury, w kt贸rej mo偶na wdro偶y obraz dockerowy zawierajcy pracownika i powizany obraz budowy.
2. Poczenia z niekt贸rymi komponentami usug TCI Core - zobacz [Konfiguracja pracownika](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) dla wicej szczeg贸贸w.

Ilo wdro偶onych pracownik贸w TCI i obraz贸w rodowiska budowy systemu operacyjnego bdzie miaa wpyw na cakowit jednoczesn pojemno wdro偶enia Travis CI Enterprise w Twojej infrastrukturze.

![](<../../.gitbook/assets/image (8) (1) (1) (1) (1) (1).png>)

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy **reklam swojej firmy w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi trikami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
