# Podstawowe informacje o TravisCI

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Kup [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegram**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na GitHubie.

</details>

## DostÄ™p

TravisCI bezpoÅ›rednio integruje siÄ™ z rÃ³Å¼nymi platformami gitowymi, takimi jak Github, Bitbucket, Assembla i Gitlab. Poprosi uÅ¼ytkownika o udzielenie uprawnieÅ„ TravisCI do dostÄ™pu do repozytoriÃ³w, z ktÃ³rymi chce zintegrowaÄ‡ TravisCI.

Na przykÅ‚ad, w Githubie poprosi o nastÄ™pujÄ…ce uprawnienia:

* `user:email` (tylko do odczytu)
* `read:org` (tylko do odczytu)
* `repo`: Udziela dostÄ™pu do odczytu i zapisu kodu, statusÃ³w commitÃ³w, wspÃ³Å‚pracownikÃ³w i statusÃ³w wdroÅ¼eÅ„ dla publicznych i prywatnych repozytoriÃ³w oraz organizacji.

## Zaszyfrowane Sekrety

### Zmienne Åšrodowiskowe

W TravisCI, podobnie jak w innych platformach CI, moÅ¼liwe jest **zapisanie tajnych informacji na poziomie repozytorium**, ktÃ³re zostanÄ… zaszyfrowane i **odszyfrowane oraz przekazane jako zmienna Å›rodowiskowa** maszyny wykonujÄ…cej proces budowania.

![](<../../.gitbook/assets/image (203).png>)

MoÅ¼na wskazaÄ‡ **gaÅ‚Ä™zie, dla ktÃ³rych tajne informacje bÄ™dÄ… dostÄ™pne** (domyÅ›lnie wszystkie) oraz czy TravisCI **powinien ukryÄ‡ ich wartoÅ›Ä‡**, jeÅ›li pojawi siÄ™ **w logach** (domyÅ›lnie tak).

### Niestandardowe Zaszyfrowane Sekrety

Dla **kaÅ¼dego repozytorium** TravisCI generuje **parÄ™ kluczy RSA**, **przechowuje** klucz **prywatny** i udostÄ™pnia klucz **publiczny repozytorium** tym, ktÃ³rzy majÄ… **dostÄ™p** do repozytorium.

MoÅ¼esz uzyskaÄ‡ dostÄ™p do klucza publicznego jednego repozytorium za pomocÄ…:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
NastÄ™pnie moÅ¼esz uÅ¼yÄ‡ tego ustawienia do **szyfrowania tajemnic i dodawania ich do twojego pliku `.travis.yaml`**. Tajemnice zostanÄ… **odszyfrowane podczas uruchamiania procesu kompilacji** i bÄ™dÄ… dostÄ™pne w **zmiennych Å›rodowiskowych**.

![](<../../.gitbook/assets/image (139).png>)

NaleÅ¼y zauwaÅ¼yÄ‡, Å¼e tajemnice zaszyfrowane w ten sposÃ³b nie bÄ™dÄ… widoczne na liÅ›cie zmiennych Å›rodowiskowych w ustawieniach.

### Niestandardowe Pliki Szyfrowane

Tak samo jak wczeÅ›niej, TravisCI pozwala rÃ³wnieÅ¼ **szyfrowaÄ‡ pliki, a nastÄ™pnie odszyfrowywaÄ‡ je podczas procesu kompilacji**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
NaleÅ¼y pamiÄ™taÄ‡, Å¼e podczas szyfrowania pliku w repozytorium zostanÄ… skonfigurowane 2 zmienne Å›rodowiskowe, takie jak:

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterprise to **wersja lokalna Travis CI**, ktÃ³rÄ… moÅ¼na wdroÅ¼yÄ‡ **w swojej infrastrukturze**. MoÅ¼na to porÃ³wnaÄ‡ do wersji â€serwerowejâ€ Travis CI. Korzystanie z Travis CI pozwala na uruchomienie Å‚atwego w uÅ¼yciu systemu ciÄ…gÅ‚ej integracji/dostarczania (CI/CD) w Å›rodowisku, ktÃ³re moÅ¼na skonfigurowaÄ‡ i zabezpieczyÄ‡ wedÅ‚ug wÅ‚asnych potrzeb.

**Travis CI Enterprise skÅ‚ada siÄ™ z dwÃ³ch gÅ‚Ã³wnych czÄ™Å›ci:**

1. UsÅ‚ugi TCI (lub UsÅ‚ugi Podstawowe TCI), odpowiedzialne za integracjÄ™ z systemami kontroli wersji, autoryzacjÄ™ budowy, planowanie zadaÅ„ budowy, itp.
2. Pracownik TCI oraz obrazy Å›rodowiska budowy (nazywane rÃ³wnieÅ¼ obrazami systemu operacyjnego).

**UsÅ‚ugi podstawowe TCI wymagajÄ… nastÄ™pujÄ…cego:**

1. Bazy danych **PostgreSQL11** (lub nowszej).
2. Infrastruktury do wdroÅ¼enia klastra Kubernetes; moÅ¼e byÄ‡ wdroÅ¼ony w klastrze serwerowym lub na pojedynczej maszynie, jeÅ›li jest to wymagane.
3. W zaleÅ¼noÅ›ci od konfiguracji, moÅ¼esz chcieÄ‡ wdroÅ¼yÄ‡ i skonfigurowaÄ‡ niektÃ³re z komponentÃ³w samodzielnie, np. RabbitMQ - zobacz [Konfiguracja Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) po wiÄ™cej szczegÃ³Å‚Ã³w.

**Pracownik TCI wymaga nastÄ™pujÄ…cego:**

1. Infrastruktury, w ktÃ³rej moÅ¼na wdroÅ¼yÄ‡ obraz dockerowy zawierajÄ…cy **Pracownika i poÅ‚Ä…czony obraz budowy**.
2. PoÅ‚Ä…czenia z niektÃ³rymi komponentami UsÅ‚ug Podstawowych TCI - zobacz [Konfiguracja Pracownika](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) po wiÄ™cej szczegÃ³Å‚Ã³w.

IloÅ›Ä‡ wdroÅ¼onych pracownikÃ³w TCI i obrazÃ³w systemu operacyjnego Å›rodowiska budowy bÄ™dzie decydowaÄ‡ o caÅ‚kowitej zdolnoÅ›ci rÃ³wnoczesnej wdroÅ¼enia Travis CI Enterprise w Twojej infrastrukturze.

![](<../../.gitbook/assets/image (199).png>)
