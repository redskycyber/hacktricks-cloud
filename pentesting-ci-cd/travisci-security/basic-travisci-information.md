# åŸºæœ¬çš„TravisCIä¿¡æ¯

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—å¥½å¤„ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricksï¼Œè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ–è€… [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–è€… **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„è´¦å· ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## è®¿é—®

TravisCIç›´æ¥ä¸ä¸åŒçš„gitå¹³å°é›†æˆï¼Œå¦‚Githubã€Bitbucketã€Assemblaå’ŒGitlabã€‚å®ƒä¼šè¦æ±‚ç”¨æˆ·æˆäºˆTravisCIè®¿é—®ä»–æƒ³è¦ä¸TravisCIé›†æˆçš„ä»“åº“çš„æƒé™ã€‚

ä¾‹å¦‚ï¼Œåœ¨Githubä¸Šï¼Œå®ƒä¼šè¦æ±‚ä»¥ä¸‹æƒé™ï¼š

* `user:email`ï¼ˆåªè¯»ï¼‰
* `read:org`ï¼ˆåªè¯»ï¼‰
* `repo`ï¼šä¸ºå…¬å…±å’Œç§æœ‰ä»“åº“å’Œç»„ç»‡æˆäºˆä»£ç ã€æäº¤çŠ¶æ€ã€åä½œè€…å’Œéƒ¨ç½²çŠ¶æ€çš„è¯»å†™è®¿é—®æƒé™ã€‚

## åŠ å¯†çš„ç§˜å¯†

### ç¯å¢ƒå˜é‡

åœ¨TravisCIä¸­ï¼Œä¸å…¶ä»–CIå¹³å°ä¸€æ ·ï¼Œå¯ä»¥åœ¨ä»“åº“çº§åˆ«ä¿å­˜åŠ å¯†çš„ç§˜å¯†ï¼Œå¹¶å°†å…¶è§£å¯†å¹¶æ¨é€åˆ°æ‰§è¡Œæ„å»ºçš„æœºå™¨çš„ç¯å¢ƒå˜é‡ä¸­ã€‚

![](<../../.gitbook/assets/image (44).png>)

å¯ä»¥æŒ‡å®š**å¯ä»¥ä½¿ç”¨è¿™äº›ç§˜å¯†çš„åˆ†æ”¯**ï¼ˆé»˜è®¤ä¸ºå…¨éƒ¨ï¼‰ï¼Œè¿˜å¯ä»¥æŒ‡å®šTravisCIæ˜¯å¦åº”è¯¥åœ¨æ—¥å¿—ä¸­å‡ºç°æ—¶**éšè—å…¶å€¼**ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¼šéšè—ï¼‰ã€‚

### è‡ªå®šä¹‰åŠ å¯†çš„ç§˜å¯†

å¯¹äº**æ¯ä¸ªä»“åº“**ï¼ŒTravisCIä¼šç”Ÿæˆä¸€å¯¹**RSAå¯†é’¥**ï¼Œ**ä¿ç•™**ç§é’¥ï¼Œå¹¶å°†ä»“åº“çš„**å…¬é’¥æä¾›ç»™**é‚£äº›**æœ‰æƒè®¿é—®**è¯¥ä»“åº“çš„äººã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¿é—®ä¸€ä¸ªä»“åº“çš„å…¬é’¥ï¼š
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤è®¾ç½®æ¥**åŠ å¯†å¯†é’¥å¹¶å°†å…¶æ·»åŠ åˆ°æ‚¨çš„`.travis.yaml`**æ–‡ä»¶ä¸­ã€‚è¿™äº›å¯†é’¥å°†åœ¨æ„å»ºè¿è¡Œæ—¶**è§£å¯†ï¼Œå¹¶å¯åœ¨ç¯å¢ƒå˜é‡ä¸­è®¿é—®**ã€‚

![](<../../.gitbook/assets/image (2) (2) (1) (1).png>)

è¯·æ³¨æ„ï¼Œä»¥è¿™ç§æ–¹å¼åŠ å¯†çš„å¯†é’¥ä¸ä¼šåœ¨è®¾ç½®çš„ç¯å¢ƒå˜é‡ä¸­åˆ—å‡ºã€‚

### è‡ªå®šä¹‰åŠ å¯†æ–‡ä»¶

ä¸ä¹‹å‰ä¸€æ ·ï¼ŒTravisCIè¿˜å…è®¸åœ¨æ„å»ºè¿‡ç¨‹ä¸­**åŠ å¯†æ–‡ä»¶ï¼Œç„¶åè§£å¯†å®ƒä»¬**ï¼š
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
è¯·æ³¨æ„ï¼ŒåŠ å¯†æ–‡ä»¶æ—¶ï¼Œå°†åœ¨å­˜å‚¨åº“ä¸­é…ç½®2ä¸ªç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](<../../.gitbook/assets/image (23).png>)

## TravisCIä¼ä¸šç‰ˆ

Travis CI Enterpriseæ˜¯Travis CIçš„**æœ¬åœ°ç‰ˆæœ¬**ï¼Œæ‚¨å¯ä»¥åœ¨**è‡ªå·±çš„åŸºç¡€è®¾æ–½**ä¸­éƒ¨ç½²ã€‚å¯ä»¥å°†å…¶è§†ä¸ºTravis CIçš„â€œæœåŠ¡å™¨â€ç‰ˆæœ¬ã€‚ä½¿ç”¨Travis CIå¯ä»¥åœ¨æ‚¨æƒ³è¦çš„ç¯å¢ƒä¸­é…ç½®å’Œä¿æŠ¤çš„æ˜“äºä½¿ç”¨çš„æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰ç³»ç»Ÿã€‚

**Travis CI Enterpriseç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š**

1. TCIæœåŠ¡ï¼ˆæˆ–TCIæ ¸å¿ƒæœåŠ¡ï¼‰ï¼Œè´Ÿè´£ä¸ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé›†æˆã€æˆæƒæ„å»ºã€è°ƒåº¦æ„å»ºä½œä¸šç­‰ã€‚
2. TCI Workerå’Œæ„å»ºç¯å¢ƒé•œåƒï¼ˆä¹Ÿç§°ä¸ºæ“ä½œç³»ç»Ÿé•œåƒï¼‰ã€‚

**TCIæ ¸å¿ƒæœåŠ¡éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š**

1. ä¸€ä¸ª**PostgreSQL11**ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰æ•°æ®åº“ã€‚
2. ä¸€ä¸ªç”¨äºéƒ¨ç½²Kubernetesé›†ç¾¤çš„åŸºç¡€è®¾æ–½ï¼›å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨é›†ç¾¤æˆ–å•å°æœºå™¨ä¸Šéƒ¨ç½²ã€‚
3. æ ¹æ®æ‚¨çš„è®¾ç½®ï¼Œæ‚¨å¯èƒ½å¸Œæœ›è‡ªå·±éƒ¨ç½²å’Œé…ç½®ä¸€äº›ç»„ä»¶ï¼Œä¾‹å¦‚RabbitMQ - æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[è®¾ç½®Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/)ã€‚

**TCI Workeréœ€è¦ä»¥ä¸‹å†…å®¹ï¼š**

1. ä¸€ä¸ªåŸºç¡€è®¾æ–½ï¼Œå¯ä»¥éƒ¨ç½²åŒ…å«**Workerå’Œé“¾æ¥çš„æ„å»ºé•œåƒçš„Dockeré•œåƒ**ã€‚
2. è¿æ¥åˆ°æŸäº›Travis CIæ ¸å¿ƒæœåŠ¡ç»„ä»¶ - æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[è®¾ç½®Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/)ã€‚

éƒ¨ç½²çš„TCI Workerå’Œæ„å»ºç¯å¢ƒæ“ä½œç³»ç»Ÿé•œåƒçš„æ•°é‡å°†ç¡®å®šTravis CI Enterpriseåœ¨æ‚¨çš„åŸºç¡€è®¾æ–½ä¸­çš„æ€»å¹¶å‘å®¹é‡ã€‚

![](<../../.gitbook/assets/image (8) (1) (1).png>)

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨å¸Œæœ›åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è¦è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘**[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubå­˜å‚¨åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
