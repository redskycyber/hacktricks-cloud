# Informaci贸n b谩sica de TravisCI

<details>

<summary><strong>隆Apoya a HackTricks y obt茅n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **煤ltima versi贸n de PEASS o descargar HackTricks en PDF**, 隆consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n [**productos oficiales de PEASS y HackTricks**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s铆gueme** en **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>

## Acceso

TravisCI se integra directamente con diferentes plataformas de git como Github, Bitbucket, Assembla y Gitlab. Pedir谩 al usuario que le d茅 permisos a TravisCI para acceder a los repositorios con los que desea integrarse.

Por ejemplo, en Github pedir谩 los siguientes permisos:

* `user:email` (solo lectura)
* `read:org` (solo lectura)
* `repo`: Otorga acceso de lectura y escritura a c贸digo, estados de confirmaci贸n, colaboradores y estados de implementaci贸n para repositorios y organizaciones p煤blicas y privadas.

## Secretos encriptados

### Variables de entorno

En TravisCI, al igual que en otras plataformas de CI, es posible **guardar secretos a nivel de repositorio** que se guardar谩n encriptados y se **desencriptar谩n y se enviar谩n a la variable de entorno** de la m谩quina que ejecuta la compilaci贸n.

![](<../../.gitbook/assets/image (44).png>)

Es posible indicar las **ramas en las que los secretos estar谩n disponibles** (por defecto, todas) y tambi茅n si TravisCI **debe ocultar su valor** si aparece **en los registros** (por defecto, lo har谩).

### Secretos encriptados personalizados

Para **cada repositorio**, TravisCI genera un **par de claves RSA**, **guarda** la **clave privada** y pone a disposici贸n la **clave p煤blica del repositorio** para aquellos que tienen **acceso** al repositorio.

Puedes acceder a la clave p煤blica de un repositorio con:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
Entonces, puedes usar esta configuraci贸n para **encriptar secretos y agregarlos a tu `.travis.yaml`**. Los secretos se **desencriptar谩n cuando se ejecute la compilaci贸n** y estar谩n accesibles en las **variables de entorno**.

![](<../../.gitbook/assets/image (2) (2) (1).png>)

Ten en cuenta que los secretos encriptados de esta manera no aparecer谩n en la lista de variables de entorno de la configuraci贸n.

### Archivos Encriptados Personalizados

De la misma manera que antes, TravisCI tambi茅n permite **encriptar archivos y luego desencriptarlos durante la compilaci贸n**:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
Ten en cuenta que al cifrar un archivo se configurar谩n 2 variables de entorno dentro del repositorio, como se muestra a continuaci贸n:

![](<../../.gitbook/assets/image (23).png>)

## TravisCI Enterprise

Travis CI Enterprise es una versi贸n **local de Travis CI**, que puedes implementar **en tu infraestructura**. Piensa en la versi贸n 'servidor' de Travis CI. Usar Travis CI te permite habilitar un sistema de Integraci贸n Continua/Implementaci贸n Continua (CI/CD) f谩cil de usar en un entorno que puedes configurar y asegurar seg煤n tus necesidades.

**Travis CI Enterprise consta de dos partes principales:**

1. Servicios de TCI (o Servicios Principales de TCI), responsables de la integraci贸n con sistemas de control de versiones, autorizaci贸n de compilaciones, programaci贸n de trabajos de compilaci贸n, etc.
2. Trabajador de TCI e im谩genes de entorno de compilaci贸n (tambi茅n llamadas im谩genes de SO).

**Los servicios principales de TCI requieren lo siguiente:**

1. Una base de datos **PostgreSQL11** (o posterior).
2. Una infraestructura para implementar un cl煤ster de Kubernetes; se puede implementar en un cl煤ster de servidores o en una sola m谩quina si es necesario.
3. Dependiendo de tu configuraci贸n, es posible que desees implementar y configurar algunos de los componentes por tu cuenta, por ejemplo, RabbitMQ. Consulta la [Configuraci贸n de Travis CI Enterprise](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/) para obtener m谩s detalles.

**El trabajador de TCI requiere lo siguiente:**

1. Una infraestructura donde se pueda implementar una imagen de Docker que contenga el trabajador y una imagen de compilaci贸n vinculada.
2. Conectividad a ciertos componentes de los servicios principales de Travis CI. Consulta la [Configuraci贸n del Trabajador](https://docs.travis-ci.com/user/enterprise/setting-up-worker/) para obtener m谩s detalles.

La cantidad de trabajadores de TCI implementados y las im谩genes de entorno de compilaci贸n determinar谩n la capacidad concurrente total de la implementaci贸n de Travis CI Enterprise en tu infraestructura.

![](<../../.gitbook/assets/image (8) (1) (1).png>)

<details>

<summary><strong>隆Apoya a HackTricks y obt茅n beneficios!</strong></summary>

* Si quieres ver tu **empresa anunciada en HackTricks** o si quieres acceder a la **煤ltima versi贸n de PEASS o descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop).
* Obt茅n el [**merchandising oficial de PEASS y HackTricks**](https://peass.creator-spring.com).
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family).
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de Telegram**](https://t.me/peass) o **s铆gueme** en **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) en GitHub.

</details>
