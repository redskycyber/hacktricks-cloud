# κΈ°λ³Έ TravisCI μ •λ³΄

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)λ¥Ό ν†µν•΄ AWS ν•΄ν‚Ήμ„ μ λ΅λ¶€ν„° μ „λ¬Έκ°€κΉμ§€ λ°°μ°μ„Έμ”</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>!</strong></a><strong>!</strong></summary>

HackTricksλ¥Ό μ§€μ›ν•λ” λ‹¤λ¥Έ λ°©λ²•:

* **νμ‚¬κ°€ HackTricksμ— κ΄‘κ³ λκΈΈ μ›ν•κ±°λ‚ HackTricksλ¥Ό PDFλ΅ λ‹¤μ΄λ΅λ“**ν•κ³  μ‹¶λ‹¤λ©΄ [**κµ¬λ… μ”κΈμ **](https://github.com/sponsors/carlospolop)λ¥Ό ν™•μΈν•μ„Έμ”!
* [**κ³µμ‹ PEASS & HackTricks μ¤μ™‘**](https://peass.creator-spring.com)μ„ κµ¬λ§¤ν•μ„Έμ”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)λ¥Ό λ°κ²¬ν•μ„Έμ”, λ‹Ήμ‚¬μ λ…μ  [**NFTs**](https://opensea.io/collection/the-peass-family) μ»¬λ ‰μ…
* **π’¬ [Discord κ·Έλ£Ή](https://discord.gg/hRep4RUj7f)** λλ” [ν…”λ κ·Έλ¨ κ·Έλ£Ή](https://t.me/peass)μ— **κ°€μ…**ν•κ±°λ‚ **νΈμ„ν„°** π¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**λ¥Ό ν”λ΅μ°**ν•μ„Έμ”.
* **HackTricks** λ° **HackTricks Cloud** github μ €μ¥μ†μ— PRμ„ μ μ¶ν•μ—¬ **ν•΄ν‚Ή νΈλ¦­μ„ κ³µμ **ν•μ„Έμ”.

</details>

## μ ‘κ·Ό

TravisCIλ” Github, Bitbucket, Assembla, Gitlab λ“±κ³Ό κ°™μ€ λ‹¤μ–‘ν• git ν”λ«νΌκ³Ό μ§μ ‘ ν†µν•©λ©λ‹λ‹¤. μ‚¬μ©μμ—κ² TravisCI κ¶ν•μ„ λ¶€μ—¬ν•μ—¬ TravisCIμ™€ ν†µν•©ν•λ ¤λ” λ¦¬ν¬μ§€ν† λ¦¬μ— μ•΅μ„Έμ¤ν•  μ μλ„λ΅ μ”μ²­ν•©λ‹λ‹¤.

μλ¥Ό λ“¤μ–΄, Githubμ—μ„λ” λ‹¤μ κ¶ν•μ„ μ”μ²­ν•  κ²ƒμ…λ‹λ‹¤:

* `user:email` (μ½κΈ° μ „μ©)
* `read:org` (μ½κΈ° μ „μ©)
* `repo`: κ³µκ° λ° λΉ„κ³µκ° μ €μ¥μ† λ° μ΅°μ§μ μ½”λ“, μ»¤λ°‹ μƒνƒ, ν‘λ ¥μ λ° λ°°ν¬ μƒνƒμ— λ€ν• μ½κΈ° λ° μ“°κΈ° μ•΅μ„Έμ¤λ¥Ό λ¶€μ—¬ν•©λ‹λ‹¤.

## μ•”νΈν™”λ λΉ„λ°€

### ν™κ²½ λ³€μ

TravisCIμ—μ„λ” λ‹¤λ¥Έ CI ν”λ«νΌκ³Ό λ§μ°¬κ°€μ§€λ΅ **λ¦¬ν¬μ§€ν† λ¦¬ μμ¤€μ λΉ„λ°€μ„ μ €μ¥**ν•κ³  **μ•”νΈν™”ν•μ—¬ λΉλ“λ¥Ό μ‹¤ν–‰ν•λ” λ¨Έμ‹ μ ν™κ²½ λ³€μμ— λ³µνΈν™”ν•κ³  ν‘Έμ‹**ν•  μ μμµλ‹λ‹¤.

![](<../../.gitbook/assets/image (203).png>)

**λΉ„λ°€μ΄ μ‚¬μ© κ°€λ¥ν• λΈλμΉ**λ¥Ό μ§€μ •ν•  μ μμΌλ©° (κΈ°λ³Έμ μΌλ΅ λ¨λ‘), λν• TravisCIκ°€ **λ΅κ·Έμ— λ‚νƒ€λ‚  λ•** **κ°’μ„ μ¨κ²¨μ•Ό ν•λ”μ§€ μ—¬λ¶€**λ¥Ό μ§€μ •ν•  μ μμµλ‹λ‹¤ (κΈ°λ³Έμ μΌλ΅ μ¨κΉλ‹λ‹¤).

### μ‚¬μ©μ μ •μ μ•”νΈν™”λ λΉ„λ°€

**κ° λ¦¬ν¬μ§€ν† λ¦¬**μ— λ€ν•΄ TravisCIλ” **RSA ν‚¤νμ–΄λ¥Ό μƒμ„±**ν•κ³  **κ°μΈ ν‚¤λ¥Ό λ³΄κ΄€**ν•λ©° λ¦¬ν¬μ§€ν† λ¦¬μ **κ³µκ° ν‚¤λ¥Ό** λ¦¬ν¬μ§€ν† λ¦¬μ— **μ•΅μ„Έμ¤ κ¶ν•μ΄ μλ” μ‚¬λλ“¤μ—κ² μ κ³µ**ν•©λ‹λ‹¤.

ν• λ¦¬ν¬μ§€ν† λ¦¬μ κ³µκ° ν‚¤μ— μ•΅μ„Έμ¤ν•  μ μμµλ‹λ‹¤:
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
κ·ΈλΌ, μ΄ μ„¤μ •μ„ μ‚¬μ©ν•μ—¬ **λΉ„λ°€μ„ μ•”νΈν™”ν•κ³  `.travis.yaml`μ— μ¶”κ°€**ν•  μ μμµλ‹λ‹¤. λΉ„λ°€μ€ **λΉλ“κ°€ μ‹¤ν–‰λ  λ• ν•΄λ…**λμ–΄ **ν™κ²½ λ³€μ**μ—μ„ μ ‘κ·Όν•  μ μμµλ‹λ‹¤.

![](<../../.gitbook/assets/image (139).png>)

μ΄ λ°©λ²•μΌλ΅ μ•”νΈν™”λ λΉ„λ°€μ€ μ„¤μ •μ ν™κ²½ λ³€μ λ©λ΅μ— λ‚νƒ€λ‚μ§€ μ•μμ„ μ μν•μ‹­μ‹μ¤.

### μ‚¬μ©μ μ •μ μ•”νΈν™”λ νμΌ

μ΄μ „κ³Ό λ§μ°¬κ°€μ§€λ΅, TravisCIλ” **νμΌμ„ μ•”νΈν™”ν• λ‹¤μ λΉλ“ μ¤‘μ— ν•΄λ…**ν•  μ μλ„λ΅ ν—μ©ν•©λ‹λ‹¤:
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
μ°Έκ³ λ΅ νμΌμ„ μ•”νΈν™”ν•  λ• 2κ°μ ν™κ²½ λ³€μκ°€ λ ν¬μ§€ν† λ¦¬ λ‚΄μ— κµ¬μ„±λ©λ‹λ‹¤.

![](<../../.gitbook/assets/image (170).png>)

## TravisCI Enterprise

Travis CI Enterpriseμ€ Travis CIμ μ¨ν”„λ  λ²„μ „μΌλ΅, **μΈν”„λΌμ— λ°°ν¬ν•  μ μλ” Travis CI**μ…λ‹λ‹¤. Travis CIμ 'μ„λ²„' λ²„μ „μΌλ΅ μƒκ°ν•  μ μμµλ‹λ‹¤. Travis CIλ¥Ό μ‚¬μ©ν•λ©΄ μ›ν•λ”λ€λ΅ κµ¬μ„±ν•κ³  λ³΄μ• μ„¤μ •ν•  μ μλ” μ‰¬μ΄ μ‚¬μ©μ μΈν„°νμ΄μ¤μ μ§€μ†μ  ν†µν•©/μ§€μ†μ  λ°°ν¬ (CI/CD) μ‹μ¤ν…μ„ ν™μ„±ν™”ν•  μ μμµλ‹λ‹¤.

**Travis CI Enterpriseμ€ λ‘ κ°€μ§€ μ£Όμ” λ¶€λ¶„μΌλ΅ κµ¬μ„±λ©λ‹λ‹¤:**

1. TCI **μ„λΉ„μ¤** (λλ” TCI μ½”μ–΄ μ„λΉ„μ¤)λ” λ²„μ „ κ΄€λ¦¬ μ‹μ¤ν…κ³Όμ ν†µν•©, λΉλ“ μΉμΈ, λΉλ“ μ‘μ—… μμ•½ λ“±μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.
2. TCI **Worker** λ° λΉλ“ ν™κ²½ μ΄λ―Έμ§€(λλ” OS μ΄λ―Έμ§€)μ…λ‹λ‹¤.

**TCI μ½”μ–΄ μ„λΉ„μ¤μ—λ” λ‹¤μμ΄ ν•„μ”ν•©λ‹λ‹¤:**

1. **PostgreSQL11** (λλ” κ·Έ μ΄μƒ) λ°μ΄ν„°λ² μ΄μ¤.
2. Kubernetes ν΄λ¬μ¤ν„°λ¥Ό λ°°ν¬ν•  μΈν”„λΌ; ν•„μ”ν• κ²½μ° μ„λ²„ ν΄λ¬μ¤ν„° λλ” λ‹¨μΌ κΈ°κ³„μ— λ°°ν¬ν•  μ μμµλ‹λ‹¤.
3. μ„¤μ •μ— λ”°λΌ μΌλ¶€ κµ¬μ„± μ”μ†λ¥Ό μ§μ ‘ λ°°ν¬ν•κ³  κµ¬μ„±ν•  μ μμµλ‹λ‹¤. μ: RabbitMQ - μμ„Έν• λ‚΄μ©μ€ [Travis CI Enterprise μ„¤μ •](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/)μ„ μ°Έμ΅°ν•μ‹­μ‹μ¤.

**TCI Workerμ—λ” λ‹¤μμ΄ ν•„μ”ν•©λ‹λ‹¤:**

1. **Worker λ° μ—°κ²°λ λΉλ“ μ΄λ―Έμ§€λ¥Ό ν¬ν•¨ν•λ” λ„μ»¤ μ΄λ―Έμ§€λ¥Ό λ°°ν¬ν•  μΈν”„λΌ**κ°€ ν•„μ”ν•©λ‹λ‹¤.
2. νΉμ • Travis CI μ½”μ–΄ μ„λΉ„μ¤ κµ¬μ„± μ”μ†μ— λ€ν• μ—°κ²° - μμ„Έν• λ‚΄μ©μ€ [Worker μ„¤μ •](https://docs.travis-ci.com/user/enterprise/setting-up-worker/)μ„ μ°Έμ΅°ν•μ‹­μ‹μ¤.

λ°°ν¬λ TCI Worker λ° λΉλ“ ν™κ²½ OS μ΄λ―Έμ§€μ μ–‘μ€ μΈν”„λΌμ— Travis CI Enterprise λ°°ν¬μ μ΄ λ™μ‹ μ©λ‰μ„ κ²°μ •ν•©λ‹λ‹¤.

![](<../../.gitbook/assets/image (199).png>)
