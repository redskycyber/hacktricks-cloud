# åŸºæœ¬çš„ TravisCI ä¿¡æ¯

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºè‹±é›„</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ **HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹ [**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å– [**å®˜æ–¹çš„ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç° [**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„ [**NFT é›†åˆ**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š **å…³æ³¨** æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## è®¿é—®

TravisCI ç›´æ¥ä¸ä¸åŒçš„ git å¹³å°é›†æˆï¼Œå¦‚ Githubã€Bitbucketã€Assembla å’Œ Gitlabã€‚å®ƒä¼šè¦æ±‚ç”¨æˆ·æˆæƒ TravisCI è®¿é—®ä»–æƒ³è¦ä¸ TravisCI é›†æˆçš„ä»“åº“ã€‚

ä¾‹å¦‚ï¼Œåœ¨ Github ä¸­ï¼Œå®ƒä¼šè¦æ±‚ä»¥ä¸‹æƒé™ï¼š

* `user:email`ï¼ˆåªè¯»ï¼‰
* `read:org`ï¼ˆåªè¯»ï¼‰
* `repo`ï¼šæˆäºˆå¯¹å…¬å…±å’Œç§æœ‰ä»“åº“åŠç»„ç»‡çš„ä»£ç ã€æäº¤çŠ¶æ€ã€åä½œè€…å’Œéƒ¨ç½²çŠ¶æ€çš„è¯»å†™æƒé™ã€‚

## åŠ å¯†çš„ç§˜å¯†

### ç¯å¢ƒå˜é‡

åœ¨ TravisCI ä¸­ï¼Œä¸å…¶ä»– CI å¹³å°ä¸€æ ·ï¼Œå¯ä»¥**åœ¨ä»“åº“çº§åˆ«ä¿å­˜ç§˜å¯†**ï¼Œè¿™äº›ç§˜å¯†å°†è¢«åŠ å¯†ä¿å­˜ï¼Œå¹¶åœ¨æ‰§è¡Œæ„å»ºçš„æœºå™¨çš„ç¯å¢ƒå˜é‡ä¸­**è§£å¯†å¹¶æ¨é€**ã€‚

![](<../../.gitbook/assets/image (44).png>)

å¯ä»¥æŒ‡å®š**ç§˜å¯†å¯ç”¨çš„åˆ†æ”¯**ï¼ˆé»˜è®¤ä¸ºæ‰€æœ‰åˆ†æ”¯ï¼‰ï¼Œä»¥åŠ TravisCI æ˜¯å¦åº”è¯¥**éšè—å…¶å€¼**ï¼Œå¦‚æœå®ƒå‡ºç°**åœ¨æ—¥å¿—ä¸­**ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¼šéšè—ï¼‰ã€‚

### è‡ªå®šä¹‰åŠ å¯†çš„ç§˜å¯†

å¯¹äº**æ¯ä¸ªä»“åº“**ï¼ŒTravisCI ç”Ÿæˆä¸€ä¸ª**RSA å¯†é’¥å¯¹**ï¼Œ**ä¿ç•™** **ç§é’¥**ï¼Œå¹¶ä½¿ä»“åº“çš„**å…¬é’¥**å¯¹æœ‰**è®¿é—®æƒé™**çš„äººå¯ç”¨ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è®¿é—®æŸä¸ªä»“åº“çš„å…¬é’¥ï¼š
```
travis pubkey -r <owner>/<repo_name>
travis pubkey -r carlospolop/t-ci-test
```
ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤è®¾ç½®æ¥**åŠ å¯†ç§˜å¯†å¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ‚¨çš„ `.travis.yaml`** ä¸­ã€‚æ„å»ºè¿è¡Œæ—¶å°†**è§£å¯†ç§˜å¯†**ï¼Œå¹¶ä¸”å¯ä»¥åœ¨**ç¯å¢ƒå˜é‡**ä¸­è®¿é—®ã€‚

![](<../../.gitbook/assets/image (2) (2) (1) (1).png>)

è¯·æ³¨æ„ï¼Œä»¥è¿™ç§æ–¹å¼åŠ å¯†çš„ç§˜å¯†ä¸ä¼šæ˜¾ç¤ºåœ¨è®¾ç½®çš„ç¯å¢ƒå˜é‡åˆ—è¡¨ä¸­ã€‚

### è‡ªå®šä¹‰åŠ å¯†æ–‡ä»¶

ä¸å‰é¢ç›¸åŒï¼ŒTravisCI ä¹Ÿå…è®¸**åŠ å¯†æ–‡ä»¶ï¼Œç„¶ååœ¨æ„å»ºæœŸé—´è§£å¯†å®ƒä»¬**ï¼š
```
travis encrypt-file super_secret.txt -r carlospolop/t-ci-test

encrypting super_secret.txt for carlospolop/t-ci-test
storing result as super_secret.txt.enc
storing secure env variables for decryption

Please add the following to your build script (before_install stage in your .travis.yml, for instance):

openssl aes-256-cbc -K $encrypted_355e94ba1091_key -iv $encrypted_355e94ba1091_iv -in super_secret.txt.enc -out super_secret.txt -d

Pro Tip: You can add it automatically by running with --add.

Make sure to add super_secret.txt.enc to the git repository.
Make sure not to add super_secret.txt to the git repository.
Commit all changes to your .travis.yml.
```
è¯·æ³¨æ„ï¼ŒåŠ å¯†æ–‡ä»¶æ—¶ï¼Œå°†åœ¨ä»“åº“ä¸­é…ç½®2ä¸ªç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹ï¼š

![](<../../.gitbook/assets/image (23).png>)

## TravisCI ä¼ä¸šç‰ˆ

Travis CI ä¼ä¸šç‰ˆæ˜¯ Travis CI çš„**æœ¬åœ°éƒ¨ç½²ç‰ˆæœ¬**ï¼Œæ‚¨å¯ä»¥åœ¨**è‡ªå·±çš„åŸºç¡€è®¾æ–½ä¸­éƒ¨ç½²**ã€‚å¯ä»¥å°†å…¶è§†ä¸º Travis CI çš„â€˜æœåŠ¡å™¨â€™ç‰ˆæœ¬ã€‚ä½¿ç”¨ Travis CI å¯ä»¥åœ¨æ‚¨å¯ä»¥é…ç½®å’Œä¿æŠ¤çš„ç¯å¢ƒä¸­å¯ç”¨æ˜“äºä½¿ç”¨çš„æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰ç³»ç»Ÿã€‚

**Travis CI ä¼ä¸šç‰ˆç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š**

1. TCI **æœåŠ¡**ï¼ˆæˆ– TCI æ ¸å¿ƒæœåŠ¡ï¼‰ï¼Œè´Ÿè´£ä¸ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé›†æˆã€æˆæƒæ„å»ºã€è°ƒåº¦æ„å»ºä½œä¸šç­‰ã€‚
2. TCI **Worker** å’Œæ„å»ºç¯å¢ƒé•œåƒï¼ˆä¹Ÿç§°ä¸ºæ“ä½œç³»ç»Ÿé•œåƒï¼‰ã€‚

**TCI æ ¸å¿ƒæœåŠ¡éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š**

1. ä¸€ä¸ª **PostgreSQL11**ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰æ•°æ®åº“ã€‚
2. ç”¨äºéƒ¨ç½² Kubernetes é›†ç¾¤çš„åŸºç¡€è®¾æ–½ï¼›å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨é›†ç¾¤æˆ–å•å°æœºå™¨ä¸­éƒ¨ç½²
3. æ ¹æ®æ‚¨çš„è®¾ç½®ï¼Œæ‚¨å¯èƒ½éœ€è¦è‡ªè¡Œéƒ¨ç½²å’Œé…ç½®æŸäº›ç»„ä»¶ï¼Œä¾‹å¦‚ RabbitMQ - æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[è®¾ç½® Travis CI ä¼ä¸šç‰ˆ](https://docs.travis-ci.com/user/enterprise/tcie-3.x-setting-up-travis-ci-enterprise/)ã€‚

**TCI Worker éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š**

1. å¯ä»¥éƒ¨ç½²åŒ…å« **Worker å’Œå…³è”æ„å»ºé•œåƒçš„ docker é•œåƒ**çš„åŸºç¡€è®¾æ–½ã€‚
2. ä¸æŸäº› Travis CI æ ¸å¿ƒæœåŠ¡ç»„ä»¶çš„è¿æ¥æ€§ - æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[è®¾ç½® Worker](https://docs.travis-ci.com/user/enterprise/setting-up-worker/)ã€‚

éƒ¨ç½²çš„ TCI Worker å’Œæ„å»ºç¯å¢ƒæ“ä½œç³»ç»Ÿé•œåƒçš„æ•°é‡å°†å†³å®š Travis CI ä¼ä¸šç‰ˆåœ¨æ‚¨åŸºç¡€è®¾æ–½ä¸­çš„æ€»å¹¶å‘å®¹é‡ã€‚

![](<../../.gitbook/assets/image (8) (1) (1) (1) (1).png>)

<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)ç³»åˆ—
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
