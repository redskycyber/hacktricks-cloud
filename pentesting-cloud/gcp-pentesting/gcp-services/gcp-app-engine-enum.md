# GCP - App Engine Enum

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>

## Grundlegende Informationen <a href="#reviewing-app-engine-configurations" id="reviewing-app-engine-configurations"></a>


Google Cloud Platform's (GCP) App Engine ist eine **robuste, serverlose Plattform, die speziell f√ºr die Entwicklung und das Hosting von Webanwendungen im gro√üen Ma√üstab entwickelt wurde**. Das Design dieser Plattform konzentriert sich darauf, den Entwicklungsprozess zu optimieren und die Verwaltbarkeit von Anwendungen zu verbessern. Die wichtigsten Funktionen und Vorteile von GCP's App Engine sind:

1. **Serverlose Architektur**: App Engine √ºbernimmt automatisch die Infrastruktur, einschlie√ülich Serverbereitstellung, Konfiguration und Skalierung. Dies erm√∂glicht es Entwicklern, sich auf das Schreiben von Code zu konzentrieren, ohne sich um die zugrunde liegende Hardware k√ºmmern zu m√ºssen.
2. **Automatische Skalierung**: App Engine kann Ihre Anwendung automatisch entsprechend dem eingehenden Datenverkehr skalieren. Es skaliert, um mit zunehmendem Datenverkehr umzugehen, und skaliert herunter, wenn der Datenverkehr abnimmt, um Kosten und Leistung zu optimieren.
3. **Unterst√ºtzung f√ºr Sprachen und Laufzeiten**: Es unterst√ºtzt beliebte Programmiersprachen wie Java, Python, Node.js, Go, Ruby, PHP und .NET. Sie k√∂nnen Ihre Anwendungen in einer Standard- oder einer flexiblen Umgebung ausf√ºhren. Die Standardumgebung ist restriktiver, aber hochgradig optimiert f√ºr bestimmte Sprachen, w√§hrend die flexible Umgebung mehr Anpassungsm√∂glichkeiten bietet.
4. **Integrierte Dienste**: App Engine integriert sich mit vielen anderen GCP-Diensten wie Cloud SQL, Cloud Storage, Cloud Datastore und mehr. Diese Integration vereinfacht die Architektur von Cloud-Anwendungen.
5. **Versionierung und Traffic-Aufteilung**: Sie k√∂nnen problemlos mehrere Versionen Ihrer Anwendung bereitstellen und dann den Datenverkehr zwischen ihnen aufteilen, um A/B-Tests oder schrittweise Rollouts durchzuf√ºhren.
6. **Anwendungseinblicke**: App Engine bietet integrierte Dienste wie Protokollierung, Benutzerauthentifizierung und eine Reihe von Entwicklertools zur √úberwachung und Verwaltung von Anwendungen.
7. **Sicherheit**: Es bietet integrierte Sicherheitsfunktionen wie Anwendungsversionierung, SSL/TLS-Zertifikate f√ºr sichere Verbindungen und Identit√§ts- und Zugriffsverwaltung.

### Firewall

F√ºr die Instanzen, auf denen die Apps ausgef√ºhrt werden, kann eine einfache **Firewall** mit den folgenden Optionen konfiguriert werden:

<figure><img src="../../../.gitbook/assets/image (3) (1) (2).png" alt=""><figcaption></figcaption></figure>

### SA

Das Standarddienstkonto, das von diesen Apps verwendet wird, ist **`<proj-name>@appspot.gserviceaccount.com`**, das √ºber die **Editor**-Rolle im Projekt und die SAs innerhalb der APP Engine-Instanz **mit cloud-platform-Berechtigungsumfang (unter anderem)** verf√ºgt.

### Speicher

Der Quellcode und die Metadaten werden **automatisch in Buckets** mit Namen wie `<proj-id>.appspot.com` und `staging.<proj-id>.appspot.com` und `<country>.<proj-id>.appspot.com` gespeichert.

**Jede Datei** der App wird mit dem **sha1 des Inhalts als Dateiname** gespeichert:

<figure><img src="../../../.gitbook/assets/image (4) (6).png" alt=""><figcaption></figcaption></figure>

Im **`ae`**-Ordner von `staging.<proj-id>.appspot.com` **existiert pro Version ein Ordner** mit den **Quellcode**-Dateien und der Datei **`manifest.json`**, die die Komponenten der App **beschreibt**:

{% code overflow="wrap" %}
```json
{"requirements.txt":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/a270eedcbe2672c841251022b7105d340129d108","sha1Sum":"a270eedc_be2672c8_41251022_b7105d34_0129d108"},"main_test.py":{"sourceUrl":"https://storage.googleapis.com/staging.onboarding-host-98efbf97812843.appspot.com/0ca32fd70c953af94d02d8a36679153881943f32","sha1Sum":"0ca32fd7_0c953af9_4d02d8a ...
```
{% endcode %}

### Container

Die Web-App wird letztendlich **innerhalb eines Containers ausgef√ºhrt** und **Code Build** wird verwendet, um den Container zu erstellen.

### URLs & Regionen

Die **Standard**-Webseite wird unter der URL **`<project-uniq-name>.appspot.com`** ver√∂ffentlicht, obwohl die URL √§lterer Versionen leicht unterschiedlich sein kann, wie z.B. **`https://20240117t001540-dot-<project-uniq-name>.uc.r.appspot.com`** (beachten Sie den Anfangszeitstempel).

Es k√∂nnte so aussehen, als ob nur eine App Engine-Webanwendung pro Region bereitgestellt werden kann, aber es ist m√∂glich, **`service: <servicename>`** in der **`app.yml`** anzugeben und einen neuen Dienst (eine neue Webseite) zu erstellen. Das Format der URL f√ºr diese neue Webseite wird **`<servicename>-dot-<project-uniq-name>.appspot.com`** sein.

### Enumeration

{% hint style="danger" %}
Jedes Mal, wenn Sie neuen Code in die App hochladen, wird **eine neue Version erstellt**. **Alle Versionen werden gespeichert** und haben sogar eine **URL, um auf sie zuzugreifen**. Das √Ñndern des Codes einer alten Version k√∂nnte eine **gro√üartige Persistenztechnik** sein.
{% endhint %}

Wie bei Cloud Functions **besteht die M√∂glichkeit, dass die Anwendung auf Secrets angewiesen ist, die zur Laufzeit √ºber Umgebungsvariablen abgerufen werden**. Diese Variablen sind in einer **`app.yaml`**-Datei gespeichert, auf die wie folgt zugegriffen werden kann:
```bash
# List the apps
gcloud app services list
gcloud app services describe <app-name>
# Access via browser to the specified app
gcloud app services browse <app-name>

# Get App versions
gcloud app versions list
# Get all the info of the app and version, included specific verion URL and the env
gcloud app versions describe -s <app-name> <version-id>

# Logs
gcloud app logs tail -s <app-name>

# Instances
## This is only valid if a flexible environment is used and not a standard one
gcloud app instances list
gcloud app instances describe -s <app-name> --version <version-id> <ID>
## Connect to the instance via ssh
gcloud app instances ssh --service <app-name> --version <version-id> <ID>

# Firewalls
gcloud app firewall-rules list
gcloud app firewall-rules describe <num_fw>

# Get domains
gcloud app domain-mappings list
gcloud app domain-mappings describe <name>

# SSl certificates
gcloud app ssl-certificates list
gcloud app ssl-certificates describe <name>
```
### Privilege Escalation

{% content-ref url="../gcp-privilege-escalation/gcp-appengine-privesc.md" %}
[gcp-appengine-privesc.md](../gcp-privilege-escalation/gcp-appengine-privesc.md)
{% endcontent-ref %}

### Unauthenticated Enum

{% content-ref url="../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md" %}
[gcp-app-engine-unauthenticated-enum.md](../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-app-engine-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Exploitation

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md" %}
[gcp-app-engine-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-app-engine-post-exploitation.md)
{% endcontent-ref %}

### Persistence

{% content-ref url="../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md" %}
[gcp-app-engine-persistence.md](../../gcp-security/gcp-persistence/gcp-app-engine-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Lernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks im PDF-Format herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>
