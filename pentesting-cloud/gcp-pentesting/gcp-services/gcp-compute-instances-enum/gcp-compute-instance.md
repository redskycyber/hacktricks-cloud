# GCP - è®¡ç®—å®ä¾‹

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

### æœºå¯† VM

æœºå¯† VM ä½¿ç”¨æœ€æ–°ä¸€ä»£ AMD EPYC å¤„ç†å™¨æä¾›çš„åŸºäºç¡¬ä»¶çš„å®‰å…¨åŠŸèƒ½ï¼ŒåŒ…æ‹¬å†…å­˜åŠ å¯†å’Œå®‰å…¨åŠ å¯†è™šæ‹ŸåŒ–ã€‚è¿™äº›åŠŸèƒ½ä½¿å¾— VM èƒ½å¤Ÿä¿æŠ¤å…¶å†…éƒ¨å¤„ç†å’Œå­˜å‚¨çš„æ•°æ®ï¼Œå³ä½¿æ˜¯æ¥è‡ªä¸»æœºæ“ä½œç³»ç»Ÿå’Œè™šæ‹ŸåŒ–ç¨‹åºçš„æ”»å‡»ä¹Ÿæ— æ³•çªƒå–ã€‚

è¦è¿è¡Œæœºå¯† VMï¼Œå¯èƒ½éœ€è¦æ›´æ”¹è¯¸å¦‚**æœºå™¨ç±»å‹**ã€**ç½‘ç»œæ¥å£**ã€**å¼•å¯¼ç£ç›˜æ˜ åƒ**ç­‰å†…å®¹ã€‚

### ç£ç›˜å’Œç£ç›˜åŠ å¯†

å¯ä»¥**é€‰æ‹©è¦ä½¿ç”¨çš„ç£ç›˜**æˆ–**åˆ›å»ºæ–°çš„ç£ç›˜**ã€‚å¦‚æœé€‰æ‹©åˆ›å»ºæ–°çš„ç£ç›˜ï¼Œæ‚¨å¯ä»¥ï¼š

* é€‰æ‹©ç£ç›˜çš„**å¤§å°**
* é€‰æ‹©**æ“ä½œç³»ç»Ÿ**
* æŒ‡ç¤ºæ˜¯å¦åœ¨åˆ é™¤å®ä¾‹æ—¶**åˆ é™¤ç£ç›˜**
* **åŠ å¯†**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨**Google ç®¡ç†çš„å¯†é’¥**ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥**é€‰æ‹©æ¥è‡ª KMS çš„å¯†é’¥**æˆ–æŒ‡å®š**è¦ä½¿ç”¨çš„åŸå§‹å¯†é’¥**ã€‚

### éƒ¨ç½²å®¹å™¨

å¯ä»¥åœ¨åˆ›å»ºçš„è™šæ‹Ÿæœºä¸­éƒ¨ç½²å®¹å™¨ï¼Œå¹¶ä¸ºè¯¥å®¹å™¨é…ç½®å¤šä¸ªé€‰é¡¹ï¼Œå¦‚ç‰¹æƒæ‰§è¡Œã€æ ‡å‡†è¾“å…¥ã€ä¼ª TTY ç­‰ã€‚

### æœåŠ¡å¸å·

é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨**è®¡ç®—å¼•æ“é»˜è®¤æœåŠ¡å¸å·**ã€‚æ­¤æœåŠ¡å¸å·çš„ç”µå­é‚®ä»¶æ ¼å¼ä¸ºï¼š`<proj-num>-compute@developer.gserviceaccount.com`\
æ­¤æœåŠ¡å¸å·åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å…·æœ‰**ç¼–è¾‘å™¨è§’è‰²ï¼ˆé«˜æƒé™ï¼‰**ã€‚

é»˜è®¤çš„**è®¿é—®èŒƒå›´**å¦‚ä¸‹ï¼š

* **https://www.googleapis.com/auth/devstorage.read\_only** -- è¯»å–å­˜å‚¨æ¡¶çš„è®¿é—®æƒé™ :)
* https://www.googleapis.com/auth/logging.write
* https://www.googleapis.com/auth/monitoring.write
* https://www.googleapis.com/auth/servicecontrol
* https://www.googleapis.com/auth/service.management.readonly
* https://www.googleapis.com/auth/trace.append

ä½†æ˜¯ï¼Œå¯ä»¥é€šè¿‡å•å‡»**æˆäºˆ `cloud-platform` æƒé™**æˆ–æŒ‡å®š**è‡ªå®šä¹‰æƒé™**æ¥ä¿®æ”¹ã€‚

### é˜²ç«å¢™

å¯ä»¥å…è®¸ HTTP å’Œ HTTPS æµé‡

### IP è½¬å‘

å¯ä»¥åœ¨åˆ›å»ºå®ä¾‹æ—¶**å¯ç”¨ IP è½¬å‘**ã€‚

### é¢å¤–å®‰å…¨æ€§

ä»¥ä¸‹é€‰é¡¹å°†**å¢åŠ  VM çš„å®‰å…¨æ€§**ï¼Œå»ºè®®ä½¿ç”¨ï¼š

* **å®‰å…¨å¯åŠ¨**
* **å¯ç”¨ vTPM**
* **å®Œæ•´æ€§ç›‘æ§**

### VM è®¿é—®

å¯ç”¨å¯¹ VM çš„è®¿é—®çš„å¸¸è§æ–¹æ³•æ˜¯**å…è®¸ç‰¹å®šçš„ SSH å…¬é’¥**ä»¥å…è®¸è®¿é—® VMã€‚\
ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ IAM **å¯ç”¨é€šè¿‡ `os-config` æœåŠ¡è®¿é—® VM**ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡æ­¤æœåŠ¡å¯ç”¨ 2FA æ¥è®¿é—® VMã€‚\
å½“å¯ç”¨æ­¤**æœåŠ¡**æ—¶ï¼Œé€šè¿‡**SSH å¯†é’¥çš„è®¿é—®å°†è¢«ç¦ç”¨**ã€‚

### å…ƒæ•°æ®

å¯ä»¥å®šä¹‰**ç”¨æˆ·æ•°æ®**ï¼šæ¯æ¬¡æœºå™¨å¯åŠ¨æˆ–é‡æ–°å¯åŠ¨æ—¶å°†æ‰§è¡Œçš„**Shell å‘½ä»¤**ã€‚

è¿˜å¯ä»¥**æ·»åŠ é¢å¤–çš„å…ƒæ•°æ®é”®å€¼å¯¹**ï¼Œè¿™äº›é”®å€¼å¯¹å°†å¯ä»¥ä»å…ƒæ•°æ®ç«¯ç‚¹è®¿é—®ã€‚æ­¤ä¿¡æ¯é€šå¸¸ç”¨äºç¯å¢ƒå˜é‡å’Œå¯åŠ¨/å…³é—­è„šæœ¬ã€‚å¯ä»¥ä½¿ç”¨æšä¸¾éƒ¨åˆ†ä¸­çš„å‘½ä»¤çš„**`describe` æ–¹æ³•**è·å–æ­¤ä¿¡æ¯ï¼Œä½†ä¹Ÿå¯ä»¥ä»å®ä¾‹å†…éƒ¨è®¿é—®å…ƒæ•°æ®ç«¯ç‚¹æ¥æ£€ç´¢æ­¤ä¿¡æ¯ã€‚
```bash
# view project metadata
curl "http://metadata.google.internal/computeMetadata/v1/project/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"

# view instance metadata
curl "http://metadata.google.internal/computeMetadata/v1/instance/attributes/?recursive=true&alt=text" \
-H "Metadata-Flavor: Google"
```
æ­¤å¤–ï¼Œ**é™„åŠ æœåŠ¡å¸æˆ·çš„èº«ä»½éªŒè¯ä»¤ç‰Œ**ä»¥åŠæœ‰å…³å®ä¾‹ã€ç½‘ç»œå’Œé¡¹ç›®çš„**å¸¸è§„ä¿¡æ¯**ä¹Ÿå¯ä»¥ä»**å…ƒæ•°æ®ç«¯ç‚¹**è·å–ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ï¼š&#x20;

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®**PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
