# AWS Pentesting

<details>

<summary><strong>Apprenez le piratage AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez** moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de piratage en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Informations de Base

**Avant de commencer le pentesting** d'un environnement **AWS**, il y a quelques **choses de base que vous devez savoir** sur le fonctionnement d'AWS pour vous aider √† comprendre ce que vous devez faire, comment trouver des mauvaises configurations et comment les exploiter.

Des concepts tels que la hi√©rarchie des organisations, IAM et d'autres concepts de base sont expliqu√©s dans :

{% content-ref url="aws-basic-information/" %}
[aws-basic-information](aws-basic-information/)
{% endcontent-ref %}

## Labs pour apprendre

* [https://github.com/RhinoSecurityLabs/cloudgoat](https://github.com/RhinoSecurityLabs/cloudgoat)
* [https://hackingthe.cloud/aws/capture\_the\_flag/cicdont/](https://hackingthe.cloud/aws/capture\_the\_flag/cicdont/)
* [https://github.com/BishopFox/iam-vulnerable](https://github.com/BishopFox/iam-vulnerable)
* [https://github.com/nccgroup/sadcloud](https://github.com/nccgroup/sadcloud)
* [https://github.com/bridgecrewio/terragoat](https://github.com/bridgecrewio/terragoat)
* [https://github.com/ine-labs/AWSGoat](https://github.com/ine-labs/AWSGoat)
* [http://flaws.cloud/](http://flaws.cloud/)
* [http://flaws2.cloud/](http://flaws2.cloud/)

Outils pour simuler des attaques :

* [https://github.com/Datadog/stratus-red-team/](https://github.com/Datadog/stratus-red-team/)
* [https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main](https://github.com/sbasu7241/AWS-Threat-Simulation-and-Detection/tree/main)

## M√©thodologie du Pentester/Red Team AWS

Pour auditer un environnement AWS, il est tr√®s important de savoir : quels **services sont utilis√©s**, ce qui est **expos√©**, qui a **acc√®s** √† quoi, et comment les services AWS internes et les **services externes** sont connect√©s.

Du point de vue d'une Red Team, la **premi√®re √©tape pour compromettre un environnement AWS** est de parvenir √† obtenir des **identifiants**. Voici quelques id√©es sur comment faire :

* **Fuites** sur github (ou similaire) - OSINT
* **Ing√©nierie** Sociale
* **R√©utilisation de mot de passe** (fuites de mots de passe)
* Vuln√©rabilit√©s dans les Applications H√©berg√©es par AWS
* [**Server Side Request Forgery**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) avec acc√®s au point de terminaison des m√©tadonn√©es
* **Lecture de Fichier Local**
* `/home/USERNAME/.aws/credentials`
* `C:\Users\USERNAME\.aws\credentials`
* Violations de s√©curit√© chez des **tiers**
* **Employ√©** Interne
* Identifiants [**Cognito**](aws-services/aws-cognito-enum/#cognito)

Ou en **compromettant un service non authentifi√©** expos√© :

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

Ou si vous faites une **r√©vision**, vous pourriez simplement **demander des identifiants** avec ces r√¥les :

{% content-ref url="aws-permissions-for-a-pentest.md" %}
[aws-permissions-for-a-pentest.md](aws-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
Apr√®s avoir r√©ussi √† obtenir des identifiants, vous devez savoir **√† qui appartiennent ces identifiants**, et **√† quoi ils ont acc√®s**, donc vous devez effectuer une √©num√©ration de base :
{% endhint %}

## √ânum√©ration de Base

### SSRF

Si vous avez trouv√© un SSRF dans une machine √† l'int√©rieur d'AWS, consultez cette page pour des astuces :

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### Whoami

Une des premi√®res choses que vous devez savoir est qui vous √™tes (dans quel compte vous √™tes et d'autres informations sur l'environnement AWS) :
```bash
# Easiest way, but might be monitored?
aws sts get-caller-identity
aws iam get-user # This will get your own user

# If you have a Key ID
aws sts get-access-key-info --access-key-id=ASIA1234567890123456

# Get inside error message
aws sns publish --topic-arn arn:aws:sns:us-east-1:*account id*:aaa --message aaa

# From metadata
TOKEN=`curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`
curl -H "X-aws-ec2-metadata-token: $TOKEN" http://169.254.169.254/latest/dynamic/instance-identity/document
```
{% hint style="danger" %}
Notez que les entreprises peuvent utiliser des **canary tokens** pour identifier quand des **tokens sont vol√©s et utilis√©s**. Il est recommand√© de v√©rifier si un token est un canary token ou non avant de l'utiliser.
Pour plus d'informations [**consultez cette page**](aws-services/aws-security-and-detection-services/aws-cloudtrail-enum.md#honeytokens-bypass).
{% endhint %}

### √ânum√©ration des Organisations

{% content-ref url="../aws-pentesting/aws-services/aws-organizations-enum.md" %}
[aws-organizations-enum.md](../aws-pentesting/aws-services/aws-organizations-enum.md)
{% endcontent-ref %}

### √ânum√©ration IAM

Si vous avez suffisamment de permissions, **v√©rifier les privil√®ges de chaque entit√© dans le compte AWS** vous aidera √† comprendre ce que vous et d'autres identit√©s pouvez faire et comment **escalader les privil√®ges**.

Si vous n'avez pas assez de permissions pour √©num√©rer IAM, vous pouvez **les voler par force brute** pour les d√©couvrir.
V√©rifiez **comment faire l'√©num√©ration et le brute-forcing** dans :

{% content-ref url="aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](aws-services/aws-iam-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
Maintenant que vous **avez des informations sur vos identifiants** (et si vous √™tes une √©quipe rouge, esp√©rons que vous **n'avez pas √©t√© d√©tect√©**). Il est temps de d√©terminer quels services sont utilis√©s dans l'environnement.
Dans la section suivante, vous pouvez v√©rifier certaines m√©thodes pour **√©num√©rer certains services courants.**
{% endhint %}

## √ânum√©ration des Services, Post-Exploitation & Persistance

AWS propose une quantit√© impressionnante de services, dans la page suivante vous trouverez des **informations de base, des cheatsheets d'√©num√©ration**, comment **√©viter la d√©tection**, obtenir la **persistance**, et d'autres astuces de **post-exploitation** √† propos de certains d'entre eux :

{% content-ref url="aws-services/" %}
[aws-services](aws-services/)
{% endcontent-ref %}

Notez que vous **n'avez pas** besoin d'effectuer tout le travail **manuellement**, ci-dessous dans cet article vous pouvez trouver une **section sur** [**les outils automatiques**](./#automated-tools).

De plus, √† ce stade, vous pourriez avoir d√©couvert **plus de services expos√©s aux utilisateurs non authentifi√©s,** vous pourriez √™tre en mesure de les exploiter :

{% content-ref url="aws-unauthenticated-enum-access/" %}
[aws-unauthenticated-enum-access](aws-unauthenticated-enum-access/)
{% endcontent-ref %}

## Escalade de Privil√®ges

Si vous pouvez **au moins v√©rifier vos propres permissions** sur diff√©rentes ressources, vous pourriez **v√©rifier si vous √™tes capable d'obtenir davantage de permissions**. Vous devriez vous concentrer au moins sur les permissions indiqu√©es dans :

{% content-ref url="aws-privilege-escalation/" %}
[aws-privilege-escalation](aws-privilege-escalation/)
{% endcontent-ref %}

## Services Expos√©s Publiquement

Lors de l'√©num√©ration des services AWS, vous avez peut-√™tre trouv√© certains d'entre eux **exposant des √©l√©ments √† Internet** (ports de VM/Conteneurs, bases de donn√©es ou services de file d'attente, snapshots ou buckets...).
En tant que pentester/√©quipe rouge, vous devriez toujours v√©rifier si vous pouvez trouver des **informations sensibles / vuln√©rabilit√©s** sur eux car ils pourraient vous fournir **un acc√®s plus approfondi au compte AWS**.

Dans ce livre, vous devriez trouver des **informations** sur comment trouver **des services AWS expos√©s et comment les v√©rifier**. Pour trouver des **vuln√©rabilit√©s dans les services r√©seau expos√©s**, je vous recommanderais de **rechercher** le **service sp√©cifique** dans :

{% embed url="https://book.hacktricks.xyz/" %}

## Compromettre l'Organisation

### Depuis le compte racine/gestion

Lorsque le compte de gestion cr√©e de nouveaux comptes dans l'organisation, un **nouveau r√¥le** est cr√©√© dans le nouveau compte, nomm√© par d√©faut **`OrganizationAccountAccessRole`** et donnant la politique **AdministratorAccess** au **compte de gestion** pour acc√©der au nouveau compte.

<figure><img src="../../.gitbook/assets/image (3) (3) (2).png" alt=""><figcaption></figcaption></figure>

Donc, pour acc√©der en tant qu'administrateur √† un compte enfant, vous avez besoin :

* De **compromettre** le compte de **gestion** et de trouver l'**ID** des **comptes enfants** et les **noms** du **r√¥le** (OrganizationAccountAccessRole par d√©faut) permettant au compte de gestion d'acc√©der en tant qu'admin.
* Pour trouver les comptes enfants, allez √† la section des organisations dans la console aws ou ex√©cutez `aws organizations list-accounts`
* Vous ne pouvez pas trouver directement le nom des r√¥les, alors v√©rifiez toutes les politiques IAM personnalis√©es et recherchez celles permettant **`sts:AssumeRole` sur les comptes enfants pr√©c√©demment d√©couverts**.
* De **compromettre** un **principal** dans le compte de gestion avec la permission **`sts:AssumeRole` sur le r√¥le dans les comptes enfants** (m√™me si le compte permet √† quiconque du compte de gestion de s'impersonnaliser, comme c'est un compte externe, des permissions sp√©cifiques `sts:AssumeRole` sont n√©cessaires).

## Outils Automatis√©s

### Reconnaissance

* [**aws-recon**](https://github.com/darkbitio/aws-recon) : Un outil de collecte d'inventaire ax√© sur la s√©curit√© AWS **multi-thread√©** √©crit en Ruby.
```bash
# Install
gem install aws_recon

# Recon and get json
AWS_PROFILE=<profile> aws_recon \
--services S3,EC2 \
--regions global,us-east-1,us-east-2 \
--verbose
```
* [**cloudlist**](https://github.com/projectdiscovery/cloudlist) : Cloudlist est un **outil multi-cloud pour obtenir des actifs** (noms d'h√¥te, adresses IP) de fournisseurs de cloud.
* [**cloudmapper**](https://github.com/duo-labs/cloudmapper) : CloudMapper vous aide √† analyser vos environnements Amazon Web Services (AWS). Il contient maintenant beaucoup plus de fonctionnalit√©s, y compris l'audit pour des probl√®mes de s√©curit√©.
```bash
# Installation steps in github
# Create a config.json file with the aws info, like:
{
"accounts": [
{
"default": true,
"id": "<account id>",
"name": "dev"
}
],
"cidrs":
{
"2.2.2.2/28": {"name": "NY Office"}
}
}

# Enumerate
python3 cloudmapper.py collect --profile dev
## Number of resources discovered
python3 cloudmapper.py stats --accounts dev

# Create HTML report
## In the report you will find all the info already
python3 cloudmapper.py report --accounts dev

# Identify potential issues
python3 cloudmapper.py audit --accounts dev --json > audit.json
python3 cloudmapper.py audit --accounts dev --markdow > audit.md
python3 cloudmapper.py iam_report --accounts dev

# Identify admins
## The permissions search for are in https://github.com/duo-labs/cloudmapper/blob/4df9fd7303e0337ff16a08f5e58f1d46047c4a87/shared/iam_audit.py#L163-L175
python3 cloudmapper.py find_admins --accounts dev

# Identify unused elements
python3 cloudmapper.py find_unused --accounts dev

# Identify publivly exposed resources
python3 cloudmapper.py public --accounts dev

python cloudmapper.py prepare #Prepare webserver
python cloudmapper.py webserver #Show webserver
```
* [**cartography**](https://github.com/lyft/cartography) : Cartography est un outil Python qui consolide les actifs d'infrastructure et les relations entre eux dans une vue graphique intuitive aliment√©e par une base de donn√©es Neo4j.
```bash
# Install
pip install cartography
## At the time of this writting you need neo4j version 3.5.*

# Get AWS info
AWS_PROFILE=dev cartography --neo4j-uri bolt://127.0.0.1:7687 --neo4j-password-prompt  --neo4j-user neo4j
```
* [**starbase**](https://github.com/JupiterOne/starbase) : Starbase collecte des actifs et des relations de services et syst√®mes incluant l'infrastructure cloud, les applications SaaS, les contr√¥les de s√©curit√©, et plus encore dans une vue graphique intuitive soutenue par la base de donn√©es Neo4j.
* [**aws-inventory**](https://github.com/nccgroup/aws-inventory) : (Utilise python2) C'est un outil qui essaie de **d√©couvrir tous** les [**ressources AWS**](https://docs.aws.amazon.com/general/latest/gr/glos-chap.html#resource) cr√©√©es dans un compte.
* [**aws\_public\_ips**](https://github.com/arkadiyt/aws\_public\_ips) : C'est un outil pour **r√©cup√©rer toutes les adresses IP publiques** (IPv4/IPv6) associ√©es √† un compte AWS.

### Privesc & Exploiting

* [**SkyArk**](https://github.com/cyberark/SkyArk) : D√©couvrez les utilisateurs les plus privil√©gi√©s dans l'environnement AWS analys√©, y compris les AWS Shadow Admins. Il utilise powershell. Vous pouvez trouver la **d√©finition des politiques privil√©gi√©es** dans la fonction **`Check-PrivilegedPolicy`** sur [https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1](https://github.com/cyberark/SkyArk/blob/master/AWStealth/AWStealth.ps1).
* [**pacu**](https://github.com/RhinoSecurityLabs/pacu) : Pacu est un **cadre d'exploitation AWS** open-source, con√ßu pour les tests de s√©curit√© offensifs contre les environnements cloud. Il peut **√©num√©rer**, trouver des **mauvaises configurations** et les **exploiter**. Vous pouvez trouver la **d√©finition des permissions privil√©gi√©es** sur [https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134](https://github.com/RhinoSecurityLabs/pacu/blob/866376cd711666c775bbfcde0524c817f2c5b181/pacu/modules/iam\_\_privesc\_scan/main.py#L134) √† l'int√©rieur du dictionnaire **`user_escalation_methods`**.
* Notez que pacu **v√©rifie uniquement vos propres chemins de privescs** (pas √† l'√©chelle du compte).
```bash
# Install
## Feel free to use venvs
pip3 install pacu

# Use pacu CLI
pacu
> import_keys <profile_name> # import 1 profile from .aws/credentials
> import_keys --all # import all profiles
> list # list modules
> exec iam__enum_permissions # Get permissions
> exec iam__privesc_scan # List privileged permissions
```
* [**PMapper**](https://github.com/nccgroup/PMapper) : Principal Mapper (PMapper) est un script et une biblioth√®que pour identifier les risques dans la configuration de AWS Identity and Access Management (IAM) pour un compte AWS ou une organisation AWS. Il mod√©lise les diff√©rents Utilisateurs IAM et R√¥les dans un compte sous forme de graphe orient√©, ce qui permet de v√©rifier les possibilit√©s d'**escalade de privil√®ges** et les chemins alternatifs qu'un attaquant pourrait emprunter pour acc√©der √† une ressource ou √† une action dans AWS. Vous pouvez v√©rifier les **permissions utilis√©es pour trouver les chemins d'escalade de privil√®ges** dans les noms de fichiers se terminant par `_edges.py` sur [https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing](https://github.com/nccgroup/PMapper/tree/master/principalmapper/graphing)
```bash
# Install
pip install principalmapper

# Get data
pmapper --profile dev graph create
pmapper --profile dev graph display # Show basic info
# Generate graph
pmapper --profile dev visualize # Generate svg graph file (can also be png, dot and graphml)
pmapper --profile dev visualize --only-privesc # Only privesc permissions

# Generate analysis
pmapper --profile dev analysis
## Run queries
pmapper --profile dev query 'who can do iam:CreateUser'
pmapper --profile dev query 'preset privesc *' # Get privescs with admins

# Get organization hierarchy data
pmapper --profile dev orgs create
pmapper --profile dev orgs display
```
* [**cloudsplaining**](https://github.com/salesforce/cloudsplaining) : Cloudsplaining est un outil d'√©valuation de la s√©curit√© IAM AWS qui identifie les violations du principe du moindre privil√®ge et g√©n√®re un rapport HTML prioris√© par risque.\
Il vous montrera les **politiques** client, int√©gr√©es et aws potentiellement **sur-privil√©gi√©es** et quels **principaux y ont acc√®s**. (Il ne v√©rifie pas seulement les escalades de privil√®ges mais aussi d'autres types de permissions int√©ressantes, son utilisation est recommand√©e).
```bash
# Install
pip install cloudsplaining

# Download IAM policies to check
## Only the ones attached with the versions used
cloudsplaining download --profile dev

# Analyze the IAM policies
cloudsplaining scan --input-file /private/tmp/cloudsplaining/dev.json --output /tmp/files/
```
* [**cloudjack**](https://github.com/prevade/cloudjack) : CloudJack √©value les comptes AWS pour les **vuln√©rabilit√©s de d√©tournement de sous-domaine** en raison de configurations Route53 et CloudFront d√©coupl√©es.
* [**ccat**](https://github.com/RhinoSecurityLabs/ccat) : Lister les d√©p√¥ts ECR -> Tirer le d√©p√¥t ECR -> L'int√©grer avec un backdoor -> Pousser l'image avec backdoor
* [**Dufflebag**](https://github.com/bishopfox/dufflebag) : Dufflebag est un outil qui **recherche** dans les instantan√©s publics de Elastic Block Storage (**EBS**) les secrets qui auraient pu √™tre accidentellement laiss√©s.

### Audit

* [**cloudsploit**](https://github.com/aquasecurity/cloudsploit) : CloudSploit par Aqua est un projet open-source con√ßu pour permettre la d√©tection de **risques de s√©curit√© dans les comptes d'infrastructure cloud**, y compris : Amazon Web Services (AWS), Microsoft Azure, Google Cloud Platform (GCP), Oracle Cloud Infrastructure (OCI) et GitHub (Il ne recherche pas les ShadowAdmins).
```bash
./index.js --csv=file.csv --console=table --config ./config.js

# Compiance options: --compliance {hipaa,cis,cis1,cis2,pci}
## use "cis" for cis level 1 and 2
```
* [**Prowler**](https://github.com/prowler-cloud/prowler) : Prowler est un outil de s√©curit√© Open Source pour effectuer des √©valuations des meilleures pratiques de s√©curit√© AWS, des audits, des r√©ponses aux incidents, une surveillance continue, le durcissement et la pr√©paration √† la cybercriminalit√©.
```bash
# Install python3, jq and git
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
prowler aws --profile custom-profile [-M csv json json-asff html]
```
* [**CloudFox**](https://github.com/BishopFox/cloudfox) : CloudFox vous aide √† acqu√©rir une conscience situationnelle dans des environnements cloud non familiers. C'est un outil en ligne de commande open source cr√©√© pour aider les testeurs d'intrusion et autres professionnels de la s√©curit√© offensive √† trouver des chemins d'attaque exploitables dans l'infrastructure cloud.
```bash
cloudfox aws --profile [profile-name] all-checks
```
* [**ScoutSuite**](https://github.com/nccgroup/ScoutSuite) : Scout Suite est un outil d'audit de s√©curit√© multi-cloud open source, qui permet l'√©valuation de la posture de s√©curit√© des environnements cloud.
```bash
# Install
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help

# Get info
scout aws -p dev
```
* [**cs-suite**](https://github.com/SecurityFTW/cs-suite) : Cloud Security Suite (utilise python2.7 et semble ne plus √™tre maintenu)
* [**Zeus**](https://github.com/DenizParlak/Zeus) : Zeus est un outil puissant pour les meilleures pratiques de durcissement AWS EC2 / S3 / CloudTrail / CloudWatch / KMS (semble ne plus √™tre maintenu). Il v√©rifie uniquement les identifiants configur√©s par d√©faut dans le syst√®me.

### Audit Constant

* [**cloud-custodian**](https://github.com/cloud-custodian/cloud-custodian) : Cloud Custodian est un moteur de r√®gles pour la gestion des comptes et ressources du cloud public. Il permet aux utilisateurs de **d√©finir des politiques pour permettre une infrastructure cloud bien g√©r√©e**, qui soit √† la fois s√©curis√©e et optimis√©e en termes de co√ªts. Il consolide de nombreux scripts adhoc des organisations en un outil l√©ger et flexible, avec des m√©triques et rapports unifi√©s.
* [**pacbot**](https://github.com/tmobile/pacbot) : Policy as Code Bot (PacBot) est une plateforme pour **la surveillance continue de la conformit√©, le reporting de conformit√© et l'automatisation de la s√©curit√© pour le cloud**. Dans PacBot, les politiques de s√©curit√© et de conformit√© sont impl√©ment√©es en tant que code. Toutes les ressources d√©couvertes par PacBot sont √©valu√©es par rapport √† ces politiques pour mesurer la conformit√© aux politiques. Le cadre **auto-fix** de PacBot offre la possibilit√© de r√©pondre automatiquement aux violations de politiques en prenant des actions pr√©d√©finies.
* [**streamalert**](https://github.com/airbnb/streamalert) : StreamAlert est un cadre d'analyse de donn√©es en temps r√©el et sans serveur, qui vous permet d'**ing√©rer, analyser et alerter** sur des donn√©es de n'importe quel environnement, en **utilisant des sources de donn√©es et une logique d'alerte que vous d√©finissez**. Les √©quipes de s√©curit√© informatique utilisent StreamAlert pour scanner des t√©raoctets de donn√©es de journalisation chaque jour pour la d√©tection et la r√©ponse aux incidents.

## DEBUG : Capture des requ√™tes AWS cli
```bash
# Set proxy
export HTTP_PROXY=http://localhost:8080
export HTTPS_PROXY=http://localhost:8080

# Capture with burp nor verifying ssl
aws --no-verify-ssl ...

# Dowload brup cert and transform it to pem
curl http://127.0.0.1:8080/cert --output Downloads/certificate.cer
openssl x509 -inform der -in Downloads/certificate.cer -out Downloads/certificate.pem

# Indicate the ca cert to trust
export AWS_CA_BUNDLE=~/Downloads/certificate.pem

# Run aws cli normally trusting burp cert
aws ...
```
## R√©f√©rences

* [https://www.youtube.com/watch?v=8ZXRw4Ry3mQ](https://www.youtube.com/watch?v=8ZXRw4Ry3mQ)
* [https://cloudsecdocs.com/aws/defensive/tooling/audit/](https://cloudsecdocs.com/aws/defensive/tooling/audit/)

<details>

<summary><strong>Apprenez le hacking AWS de z√©ro √† h√©ros avec</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Autres moyens de soutenir HackTricks :

* Si vous souhaitez voir votre **entreprise annonc√©e dans HackTricks** ou **t√©l√©charger HackTricks en PDF**, consultez les [**PLANS D'ABONNEMENT**](https://github.com/sponsors/carlospolop)!
* Obtenez le [**merchandising officiel PEASS & HackTricks**](https://peass.creator-spring.com)
* D√©couvrez [**La Famille PEASS**](https://opensea.io/collection/the-peass-family), notre collection d'[**NFTs**](https://opensea.io/collection/the-peass-family) exclusifs
* **Rejoignez le** üí¨ [**groupe Discord**](https://discord.gg/hRep4RUj7f) ou le [**groupe telegram**](https://t.me/peass) ou **suivez**-moi sur **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Partagez vos astuces de hacking en soumettant des PR aux d√©p√¥ts github** [**HackTricks**](https://github.com/carlospolop/hacktricks) et [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
