# AWS - Enumeraci贸n de MQ

<details>

<summary><strong>Aprende hacking en AWS desde cero hasta experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Red Team de HackTricks AWS)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repositorios de github.

</details>

## Amazon MQ

### Introducci贸n a los Corredores de Mensajes
Los **corredores de mensajes** act煤an como intermediarios, facilitando la comunicaci贸n entre diferentes sistemas de software, que pueden estar construidos en plataformas variadas y programados en diferentes lenguajes. **Amazon MQ** simplifica la implementaci贸n, operaci贸n y mantenimiento de corredores de mensajes en AWS. Proporciona servicios gestionados para **Apache ActiveMQ** y **RabbitMQ**, garantizando una provisi贸n sin problemas y actualizaciones autom谩ticas de versiones de software.

### AWS - RabbitMQ
RabbitMQ es un destacado **software de encolado de mensajes**, tambi茅n conocido como un _corredor de mensajes_ o _gestor de colas_. Es fundamentalmente un sistema donde se configuran colas. Las aplicaciones interact煤an con estas colas para **enviar y recibir mensajes**. Los mensajes en este contexto pueden llevar una variedad de informaci贸n, que va desde comandos para iniciar procesos en otras aplicaciones (potencialmente en servidores diferentes) hasta simples mensajes de texto. Los mensajes son retenidos por el software del gestor de colas hasta que son recuperados y procesados por una aplicaci贸n receptora. AWS proporciona una soluci贸n f谩cil de usar para alojar y gestionar servidores RabbitMQ.

### AWS - ActiveMQ
Apache ActiveMQ庐 es un destacado **corredor de mensajes** de c贸digo abierto basado en Java conocido por su versatilidad. Admite m煤ltiples protocolos est谩ndar de la industria, ofreciendo una amplia compatibilidad con clientes en una amplia gama de lenguajes y plataformas. Los usuarios pueden:

- Conectar con clientes escritos en JavaScript, C, C++, Python, .Net, y m谩s.
- Aprovechar el protocolo **AMQP** para integrar aplicaciones de diferentes plataformas.
- Utilizar **STOMP** sobre websockets para intercambios de mensajes de aplicaciones web.
- Gestionar dispositivos IoT con **MQTT**.
- Mantener la infraestructura existente de **JMS** y ampliar sus capacidades.

La robustez y flexibilidad de ActiveMQ lo hacen adecuado para una multitud de requisitos de mensajer铆a.

## Enumeraci贸n
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: Indicar c贸mo enumerar RabbitMQ y ActiveMQ internamente y c贸mo escuchar en todas las colas y enviar datos (enviar PR si sabes c贸mo hacerlo)
{% endhint %}

## Escalada de privilegios

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Acceso no autenticado

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistencia

Si conoces las credenciales para acceder a la consola web de RabbitMQ, puedes crear un nuevo usuario con privilegios de administrador.

## Referencias

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Aprende hacking en AWS desde cero hasta experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n la [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆guenos** en **Twitter**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
