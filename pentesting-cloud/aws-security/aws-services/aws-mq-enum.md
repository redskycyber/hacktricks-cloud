# AWS - MQ æšä¸¾

<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ **HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š** æˆ– **ä¸‹è½½HackTricksçš„PDFç‰ˆæœ¬**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## Amazon MQ

### æ¶ˆæ¯ä»£ç†ç®€ä»‹
**æ¶ˆæ¯ä»£ç†**ä½œä¸ºä¸­ä»‹ï¼Œä¿ƒè¿›ä¸åŒè½¯ä»¶ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡ï¼Œè¿™äº›ç³»ç»Ÿå¯èƒ½å»ºç«‹åœ¨ä¸åŒçš„å¹³å°ä¸Šå¹¶ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ã€‚**Amazon MQ** ç®€åŒ–äº†åœ¨AWSä¸Šéƒ¨ç½²ã€æ“ä½œå’Œç»´æŠ¤æ¶ˆæ¯ä»£ç†çš„è¿‡ç¨‹ã€‚å®ƒä¸º **Apache ActiveMQ** å’Œ **RabbitMQ** æä¾›äº†æ‰˜ç®¡æœåŠ¡ï¼Œç¡®ä¿æ— ç¼é…ç½®å’Œè‡ªåŠ¨è½¯ä»¶ç‰ˆæœ¬æ›´æ–°ã€‚

### AWS - RabbitMQ
RabbitMQ æ˜¯ä¸€ä¸ªè‘—åçš„**æ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶**ï¼Œä¹Ÿç§°ä¸º_æ¶ˆæ¯ä»£ç†_æˆ–_é˜Ÿåˆ—ç®¡ç†å™¨_ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªé…ç½®é˜Ÿåˆ—çš„ç³»ç»Ÿã€‚åº”ç”¨ç¨‹åºä¸è¿™äº›é˜Ÿåˆ—äº¤äº’ï¼Œä»¥**å‘é€å’Œæ¥æ”¶æ¶ˆæ¯**ã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œæ¶ˆæ¯å¯ä»¥æºå¸¦å„ç§ä¿¡æ¯ï¼Œä»å¯åŠ¨å…¶ä»–åº”ç”¨ç¨‹åºï¼ˆå¯èƒ½åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šï¼‰çš„å‘½ä»¤åˆ°ç®€å•çš„æ–‡æœ¬æ¶ˆæ¯ã€‚æ¶ˆæ¯ç”±é˜Ÿåˆ—ç®¡ç†è½¯ä»¶ä¿å­˜ï¼Œç›´åˆ°è¢«æ¥æ”¶åº”ç”¨ç¨‹åºæ£€ç´¢å’Œå¤„ç†ã€‚AWSæä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨äºæ‰˜ç®¡å’Œç®¡ç†RabbitMQæœåŠ¡å™¨ã€‚

### AWS - ActiveMQ
Apache ActiveMQÂ® æ˜¯ä¸€ä¸ªé¢†å…ˆçš„å¼€æºJavaåŸºç¡€**æ¶ˆæ¯ä»£ç†**ï¼Œä»¥å…¶å¤šåŠŸèƒ½æ€§è€Œé—»åã€‚å®ƒæ”¯æŒå¤šç§è¡Œä¸šæ ‡å‡†åè®®ï¼Œæä¾›å¹¿æ³›çš„å®¢æˆ·ç«¯å…¼å®¹æ€§ï¼Œè¦†ç›–å¤šç§è¯­è¨€å’Œå¹³å°ã€‚ç”¨æˆ·å¯ä»¥ï¼š

- è¿æ¥ä½¿ç”¨JavaScriptã€Cã€C++ã€Pythonã€.Netç­‰ç¼–å†™çš„å®¢æˆ·ç«¯ã€‚
- åˆ©ç”¨ **AMQP** åè®®æ•´åˆä¸åŒå¹³å°çš„åº”ç”¨ç¨‹åºã€‚
- ä½¿ç”¨ **STOMP** é€šè¿‡websocketsè¿›è¡ŒWebåº”ç”¨ç¨‹åºæ¶ˆæ¯äº¤æ¢ã€‚
- é€šè¿‡ **MQTT** ç®¡ç†ç‰©è”ç½‘è®¾å¤‡ã€‚
- ç»´æŠ¤ç°æœ‰çš„ **JMS** åŸºç¡€è®¾æ–½å¹¶æ‰©å±•å…¶åŠŸèƒ½ã€‚

ActiveMQçš„å¥å£®æ€§å’Œçµæ´»æ€§ä½¿å…¶é€‚ç”¨äºå¤šç§æ¶ˆæ¯éœ€æ±‚ã€‚


## æšä¸¾
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
å¾…åŠäº‹é¡¹ï¼šæŒ‡æ˜å¦‚ä½•åœ¨å†…éƒ¨æšä¸¾ RabbitMQ å’Œ ActiveMQï¼Œä»¥åŠå¦‚ä½•ç›‘å¬æ‰€æœ‰é˜Ÿåˆ—å¹¶å‘é€æ•°æ®ï¼ˆå¦‚æœæ‚¨çŸ¥é“å¦‚ä½•åšï¼Œè¯·å‘é€ PRï¼‰
{% endhint %}

## æƒé™æå‡

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## æœªç»è®¤è¯çš„è®¿é—®

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## æŒä¹…æ€§

å¦‚æœæ‚¨çŸ¥é“è®¿é—® RabbitMQ ç½‘ç»œæ§åˆ¶å°çš„å‡­è¯ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå…·æœ‰ç®¡ç†å‘˜æƒé™çš„æ–°ç”¨æˆ·ã€‚

## å‚è€ƒèµ„æ–™

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>é€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æ”»å‡»ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨å¸Œæœ›åœ¨ **HackTricks** ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTs**](https://opensea.io/collection/the-peass-family)ç³»åˆ—
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
