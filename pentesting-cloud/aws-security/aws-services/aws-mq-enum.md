# AWS - MQ Enum

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Grund auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Github-Repositorys einreichen.

</details>

## Amazon MQ

### Einf√ºhrung in Message-Broker
**Message-Broker** dienen als Vermittler und erleichtern die Kommunikation zwischen verschiedenen Softwaresystemen, die auf unterschiedlichen Plattformen aufgebaut und in verschiedenen Sprachen programmiert sein k√∂nnen. **Amazon MQ** vereinfacht Bereitstellung, Betrieb und Wartung von Message-Brokern auf AWS. Es bietet verwaltete Dienste f√ºr **Apache ActiveMQ** und **RabbitMQ**, die eine nahtlose Bereitstellung und automatische Softwareversionenupdates gew√§hrleisten.

### AWS - RabbitMQ
RabbitMQ ist eine prominente **Nachrichtenwarteschlangen-Software**, auch bekannt als _Message-Broker_ oder _Queue-Manager_. Es handelt sich im Wesentlichen um ein System, in dem Warteschlangen konfiguriert sind. Anwendungen interagieren mit diesen Warteschlangen, um **Nachrichten zu senden und zu empfangen**. Nachrichten in diesem Kontext k√∂nnen eine Vielzahl von Informationen enthalten, von Befehlen zur Initiierung von Prozessen in anderen Anwendungen (m√∂glicherweise auf verschiedenen Servern) bis hin zu einfachen Textnachrichten. Die Nachrichten werden von der Queue-Manager-Software gehalten, bis sie von einer empfangenden Anwendung abgerufen und verarbeitet werden. AWS bietet eine benutzerfreundliche L√∂sung f√ºr das Hosting und die Verwaltung von RabbitMQ-Servern.

### AWS - ActiveMQ
Apache ActiveMQ¬Æ ist ein f√ºhrender Open-Source-, Java-basierter **Message-Broker**, der f√ºr seine Vielseitigkeit bekannt ist. Er unterst√ºtzt mehrere branchen√ºbliche Protokolle und bietet umfangreiche Client-Kompatibilit√§t f√ºr eine Vielzahl von Sprachen und Plattformen. Benutzer k√∂nnen:

- Sich mit Clients verbinden, die in JavaScript, C, C++, Python, .Net und mehr geschrieben sind.
- Das **AMQP**-Protokoll nutzen, um Anwendungen von verschiedenen Plattformen zu integrieren.
- **STOMP** √ºber Websockets f√ºr den Austausch von Webanwendungsnachrichten verwenden.
- IoT-Ger√§te mit **MQTT** verwalten.
- Die vorhandene **JMS**-Infrastruktur warten und ihre F√§higkeiten erweitern.

Die Robustheit und Flexibilit√§t von ActiveMQ machen ihn f√ºr eine Vielzahl von Messaging-Anforderungen geeignet.


## Enumeration
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: Geben Sie an, wie Sie RabbitMQ und ActiveMQ intern aufz√§hlen und wie Sie in allen Warteschlangen zuh√∂ren und Daten senden k√∂nnen (senden Sie einen PR, wenn Sie wissen, wie das geht)
{% endhint %}

## Privilege Escalation

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## Nicht authentifizierter Zugriff

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## Persistenz

Wenn Sie die Anmeldeinformationen zum Zugriff auf die RabbitMQ-Webkonsole kennen, k√∂nnen Sie einen neuen Benutzer mit Administratorrechten erstellen.

## Referenzen

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks im PDF-Format herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie uns auf **Twitter** üê¶ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories senden.

</details>
