# AWS - MQ Enum

<details>

<summary><strong>ãƒãƒƒã‚¯ãƒˆãƒªãƒƒã‚¯ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ç‰¹å…¸ã‚’å¾—ã‚‹ï¼</strong></summary>

* **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼ã—ãŸã„**å ´åˆã‚„ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¦‹ãŸã„**å ´åˆã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ã”è¦§ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ãã ã•ã„
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**Telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter**ã§ç§ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€**[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>

## AWS - MQ

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼**ã¯ã€ã—ã°ã—ã°ç•°ãªã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ä½¿ç”¨ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚·ã‚¹ãƒ†ãƒ ãŒã€é€šä¿¡ã‚„æƒ…å ±ã®äº¤æ›ã‚’è¡Œã†ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚**Amazon MQ**ã¯ã€**Apache ActiveMQ**ãŠã‚ˆã³**RabbitMQ**ã®ç®¡ç†å‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚Šã€AWSä¸Šã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€é‹ç”¨ã€ç®¡ç†ã‚’åŠ¹ç‡åŒ–ã—ã¾ã™ã€‚æ•°ã‚¹ãƒ†ãƒƒãƒ—ã§ã€Amazon MQã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã‚’ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã§ãã¾ã™ã€‚

### AWS - RabbitMQ

RabbitMQã¯ã€_ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼_ã¾ãŸã¯_ã‚­ãƒ¥ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£_ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã‚‹**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢**ã§ã™ã€‚ç°¡å˜ã«è¨€ãˆã°ã€**ã‚­ãƒ¥ãƒ¼ãŒå®šç¾©ã•ã‚Œã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢**ã§ã‚ã‚Šã€**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ¥ç¶š**ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’**è»¢é€**ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ä»»æ„ã®ç¨®é¡ã®æƒ…å ±ã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€åˆ¥ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆåˆ¥ã®ã‚µãƒ¼ãƒãƒ¼ä¸Šã«ã‚ã‚‹å ´åˆã‚‚ã‚ã‚Šã¾ã™ï¼‰ã§é–‹å§‹ã™ã‚‹ã¹ããƒ—ãƒ­ã‚»ã‚¹ã‚„ã‚¿ã‚¹ã‚¯ã«é–¢ã™ã‚‹æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã—ã€å˜ç´”ãªãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚­ãƒ¥ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¯ã€å—ä¿¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ¥ç¶šã—ã¦ã‚­ãƒ¥ãƒ¼ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã™ã‚‹ã¾ã§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿å­˜ã—ã¾ã™ã€‚å—ä¿¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ãã®å¾Œã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ã¾ã™ã€‚

AWSã¯ã€RabbitMQã‚µãƒ¼ãƒãƒ¼ã‚’**ç°¡å˜ã«ãƒ›ã‚¹ãƒˆãŠã‚ˆã³ç®¡ç†**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### AWS - ActiveMQ

Apache ActiveMQÂ®ã¯ã€æœ€ã‚‚äººæ°—ã®ã‚ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒãƒ«ãƒãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€Javaãƒ™ãƒ¼ã‚¹ã®**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼**ã§ã™ã€‚æ¥­ç•Œæ¨™æº–ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã•ã¾ã–ã¾ãªè¨€èªã‚„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’é¸æŠã§ãã¾ã™ã€‚JavaScriptã€Cã€C++ã€Pythonã€.Netãªã©ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰æ¥ç¶šã§ãã¾ã™ã€‚æ™®åŠã—ã¦ã„ã‚‹**AMQP**ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ±åˆã—ã¾ã™ã€‚**STOMP** over websocketsã‚’ä½¿ç”¨ã—ã¦Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–“ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’äº¤æ›ã—ã¾ã™ã€‚**MQTT**ã‚’ä½¿ç”¨ã—ã¦IoTãƒ‡ãƒã‚¤ã‚¹ã‚’ç®¡ç†ã—ã¾ã™ã€‚æ—¢å­˜ã®**JMS**ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€ãã‚Œä»¥ä¸Šã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚ActiveMQã¯ã€ã‚ã‚‰ã‚†ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®ãƒ‘ãƒ¯ãƒ¼ã¨æŸ”è»Ÿæ€§ã‚’æä¾›ã—ã¾ã™ã€‚

## åˆ—æŒ™
```bash
# List brokers
aws mq list-brokers

# Get broker info
aws mq describe-broker --broker-id <broker-id>
## Find endpoints in .BrokerInstances
## Find if public accessible in .PubliclyAccessible

# List usernames (only for ActiveMQ)
aws mq list-users --broker-id <broker-id>

# Get user info (PASSWORD NOT INCLUDED)
aws mq describe-user --broker-id <broker-id> --username <username>

# Lits configurations (only for ActiveMQ)
aws mq list-configurations
## Here you can find if simple or LDAP authentication is used

# Creacte Active MQ user
aws mq create-user --broker-id <value> --password <value> --username <value> --console-access
```
{% hint style="warning" %}
TODO: RabbitMQã¨ActiveMQã‚’å†…éƒ¨ã§åˆ—æŒ™ã—ã€ã™ã¹ã¦ã®ã‚­ãƒ¥ãƒ¼ã§ãƒªãƒƒã‚¹ãƒ³ã—ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ãã ã•ã„ï¼ˆã“ã‚Œã‚’è¡Œã†æ–¹æ³•ã‚’çŸ¥ã£ã¦ã„ã‚‹å ´åˆã¯ã€PRã‚’é€ä¿¡ã—ã¦ãã ã•ã„ï¼‰
{% endhint %}

## Privesc

{% content-ref url="../aws-privilege-escalation/aws-mq-privesc.md" %}
[aws-mq-privesc.md](../aws-privilege-escalation/aws-mq-privesc.md)
{% endcontent-ref %}

## èªè¨¼ãªã—ã‚¢ã‚¯ã‚»ã‚¹

{% content-ref url="../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md" %}
[aws-mq-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-mq-unauthenticated-enum.md)
{% endcontent-ref %}

## æ°¸ç¶šåŒ–

RabbitMQã®Webã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã«å¿…è¦ãªè³‡æ ¼æƒ…å ±ã‚’çŸ¥ã£ã¦ã„ã‚‹å ´åˆã€ç®¡ç†è€…æ¨©é™ã‚’æŒã¤æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚

## å‚è€ƒæ–‡çŒ®

* [https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html](https://www.cloudamqp.com/blog/part1-rabbitmq-for-beginners-what-is-rabbitmq.html)
* [https://activemq.apache.org/](https://activemq.apache.org/)

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* If you want to see your **company advertised in HackTricks** or if you want access to the **latest version of the PEASS or download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
