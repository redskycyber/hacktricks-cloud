# AWS - Lambdaæšä¸¾

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFç‰ˆçš„HackTricksï¼Œè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘**[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

## Lambda

Amazon Web Services (AWS) Lambdaæ˜¯ä¸€ç§è®¡ç®—æœåŠ¡ï¼Œå…è®¸æ‚¨åœ¨ä¸éœ€è¦é¢„é…æˆ–ç®¡ç†æœåŠ¡å™¨çš„æƒ…å†µä¸‹è¿è¡Œä»£ç ã€‚Lambdaä¼šè‡ªåŠ¨ç®¡ç†è¿è¡Œä»£ç æ‰€éœ€çš„èµ„æºï¼Œå¹¶æä¾›é«˜å¯ç”¨æ€§ã€æ‰©å±•æ€§å’Œå®‰å…¨æ€§åŠŸèƒ½ã€‚ä½¿ç”¨Lambdaï¼Œæ‚¨åªéœ€æ”¯ä»˜å®é™…æ¶ˆè€—çš„è®¡ç®—æ—¶é—´ï¼Œæ²¡æœ‰é¢„ä»˜è´¹ç”¨æˆ–é•¿æœŸæ‰¿è¯ºã€‚

è¦è°ƒç”¨Lambdaï¼Œå¯ä»¥ä½¿ç”¨Cloudwatchè°ƒç”¨å®ƒçš„é¢‘ç‡ï¼Œå…¬å¼€URLç«¯ç‚¹å¹¶è°ƒç”¨å®ƒï¼Œé€šè¿‡API Gatewayè°ƒç”¨å®ƒï¼Œç”šè‡³åŸºäºS3å­˜å‚¨æ¡¶ä¸­çš„æ•°æ®æ›´æ”¹æˆ–DynamoDBè¡¨çš„æ›´æ–°ç­‰äº‹ä»¶è°ƒç”¨å®ƒã€‚

Lambdaçš„ä»£ç å­˜å‚¨åœ¨`/var/task`ä¸­ã€‚

### Lambdaåˆ«åæƒé‡

Lambdaå¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬ã€‚\
å®ƒå¯ä»¥é€šè¿‡åˆ«åå…¬å¼€å¤šä¸ªç‰ˆæœ¬ã€‚æ¯ä¸ªåˆ«åå…¬å¼€çš„ç‰ˆæœ¬çš„æƒé‡å°†å†³å®šå“ªä¸ªåˆ«åæ¥æ”¶è°ƒç”¨ï¼ˆä¾‹å¦‚å¯ä»¥æ˜¯90%-10%ï¼‰ã€‚\
å¦‚æœå…¶ä¸­ä¸€ä¸ªåˆ«åçš„ä»£ç å­˜åœ¨æ¼æ´ï¼Œæ‚¨å¯ä»¥å‘é€è¯·æ±‚ï¼Œç›´åˆ°æ¼æ´ç‰ˆæœ¬æ¥æ”¶åˆ°æ”»å‡»ã€‚

![](<../../../.gitbook/assets/image (16) (1).png>)

### èµ„æºç­–ç•¥

Lambdaèµ„æºç­–ç•¥å…è®¸å…¶ä»–æœåŠ¡/å¸æˆ·è°ƒç”¨Lambdaã€‚\
ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯å…è®¸ä»»ä½•äººé€šè¿‡URLè®¿é—®Lambdaçš„ç­–ç•¥ï¼š

<figure><img src="https://lh4.googleusercontent.com/4PNFKBdzr3nMrPqeKkTslgwWDKxkXMdQ1SNdv7NPHykj3GX8wODrQyXOFbjk4fxHfZ8pDm5ijWgk2Vq2EGXiPRT3TQfZf1fHycvdEKBuDxJDYos1CJeMHXSeg86ZB-Ol7CNtten6xkVFQj6AhDUEWNQJrQ=s2048" alt=""><figcaption></figcaption></figure>

æˆ–è€…å…è®¸API Gatewayè°ƒç”¨å®ƒçš„ç­–ç•¥ï¼š

<figure><img src="https://lh3.googleusercontent.com/Su0JlR0wBqb-99Z4N_2-_kMlX0Xzx2n_GpZuOPW5IeXR3FYbm8OHFDM3Ora1BpXiSjHpDVUlq4yEyXwaI3nBuze6DJ-wRf2ATsCuWbq0wuBCd34E9uIpqwheE6Cc_PopviI_93O_j2ZKXc1-AJtsBoLVUw=s2048" alt=""><figcaption></figcaption></figure>

### Lambdaæ•°æ®åº“ä»£ç†

å½“æœ‰æ•°ç™¾ä¸ªå¹¶å‘çš„Lambdaè¯·æ±‚æ—¶ï¼Œå¦‚æœæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦è¿æ¥å’Œå…³é—­æ•°æ®åº“è¿æ¥ï¼Œè¿™æ˜¯è¡Œä¸é€šçš„ï¼ˆLambdaæ˜¯æ— çŠ¶æ€çš„ï¼Œæ— æ³•ä¿æŒè¿æ¥æ‰“å¼€ï¼‰ã€‚\
å› æ­¤ï¼Œå¦‚æœæ‚¨çš„Lambdaå‡½æ•°ä¸RDSä»£ç†è€Œä¸æ˜¯æ•°æ®åº“å®ä¾‹è¿›è¡Œäº¤äº’ï¼Œåˆ™å¯ä»¥å¤„ç†ç”±å¹¶å‘Lambdaå‡½æ•°åˆ›å»ºçš„è®¸å¤šåŒæ—¶è¿æ¥æ‰€éœ€çš„è¿æ¥æ± ã€‚è¿™ä½¿å¾—æ‚¨çš„Lambdaåº”ç”¨ç¨‹åºå¯ä»¥é‡ç”¨ç°æœ‰è¿æ¥ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªå‡½æ•°è°ƒç”¨åˆ›å»ºæ–°è¿æ¥ã€‚

### Lambda EFSæ–‡ä»¶ç³»ç»Ÿ

ä¸ºäº†ä¿ç•™ç”šè‡³å…±äº«æ•°æ®ï¼ŒLambdaå¯ä»¥è®¿é—®EFSå¹¶æŒ‚è½½å®ƒä»¬ï¼Œå› æ­¤Lambdaå°†èƒ½å¤Ÿä»ä¸­è¯»å–å’Œå†™å…¥ã€‚

### Lambdaå±‚

Lambdaå±‚æ˜¯ä¸€ä¸ª.zipæ–‡ä»¶å½’æ¡£ï¼Œ**å¯ä»¥åŒ…å«é™„åŠ ä»£ç **æˆ–å…¶ä»–å†…å®¹ã€‚å±‚å¯ä»¥åŒ…å«åº“ã€[è‡ªå®šä¹‰è¿è¡Œæ—¶](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-custom.html)ã€æ•°æ®æˆ–é…ç½®æ–‡ä»¶ã€‚

æ¯ä¸ªå‡½æ•°å¯ä»¥åŒ…å«æœ€å¤š**äº”ä¸ªå±‚**ã€‚å½“æ‚¨åœ¨å‡½æ•°ä¸­åŒ…å«ä¸€ä¸ªå±‚æ—¶ï¼Œ**å†…å®¹å°†è¢«æå–åˆ°æ‰§è¡Œç¯å¢ƒä¸­çš„`/opt`ç›®å½•**ä¸­ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨åˆ›å»ºçš„å±‚å¯¹æ‚¨çš„AWSå¸æˆ·æ˜¯ç§æœ‰çš„ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä¸å…¶ä»–å¸æˆ·å…±äº«å±‚ï¼Œæˆ–å°†å±‚è®¾ä¸ºå…¬å…±ã€‚å¦‚æœæ‚¨çš„å‡½æ•°ä½¿ç”¨äº†å…¶ä»–å¸æˆ·å‘å¸ƒçš„å±‚ç‰ˆæœ¬ï¼Œå³ä½¿åœ¨åˆ é™¤è¯¥å±‚ç‰ˆæœ¬æˆ–æ’¤é”€è®¿é—®è¯¥å±‚çš„æƒé™åï¼Œæ‚¨çš„å‡½æ•°ä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨è¯¥å±‚ç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œæ‚¨æ— æ³•åˆ›å»ºæ–°å‡½æ•°æˆ–ä½¿ç”¨å·²åˆ é™¤çš„å±‚ç‰ˆæœ¬æ›´æ–°å‡½æ•°ã€‚

ä½œä¸ºå®¹å™¨æ˜ åƒéƒ¨ç½²çš„å‡½æ•°ä¸ä½¿ç”¨å±‚ã€‚ç›¸åï¼Œæ‚¨åœ¨æ„å»ºæ˜ åƒæ—¶å°†é¦–é€‰çš„è¿è¡Œæ—¶ã€åº“å’Œå…¶ä»–ä¾èµ–é¡¹æ‰“åŒ…åˆ°å®¹å™¨æ˜ åƒä¸­ã€‚

### Lambdaæ‰©å±•

Lambdaæ‰©å±•ä½¿æ‚¨èƒ½å¤Ÿå¢å¼ºå‡½æ•°åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‰©å±•å°†å‡½æ•°ä¸é¦–é€‰çš„ç›‘è§†ã€å¯è§‚å¯Ÿæ€§ã€å®‰å…¨æ€§å’Œæ²»ç†å·¥å…·é›†æˆã€‚æ‚¨å¯ä»¥ä½¿ç”¨[Lambdaå±‚](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html)å°†æ‰©å±•æ·»åŠ åˆ°.zipå½’æ¡£å‡½æ•°ä¸­ï¼Œæˆ–è€…åœ¨[ä½œä¸ºå®¹å™¨æ˜ åƒéƒ¨ç½²çš„å‡½æ•°](https://aws.amazon.com/blogs/compute/working-with-lambda-layers-and-extensions-in-container-images/)ä¸­å°†å®ƒä»¬åŒ…å«åœ¨æ˜ åƒä¸­ã€‚

* **å†…éƒ¨æ‰©å±•**ä½œä¸º**è¿è¡Œæ—¶**è¿›ç¨‹çš„**ä¸€éƒ¨åˆ†**è¿è¡Œï¼Œä¸æ‚¨çš„ä»£ç **å†…éƒ¨**è¿è¡Œã€‚å®ƒä»¬å…è®¸æ‚¨ä½¿ç”¨ç‰¹å®šäºè¯­è¨€çš„ç¯å¢ƒå˜é‡å’ŒåŒ…è£…è„šæœ¬ä¿®æ”¹è¿è¡Œæ—¶è¿›ç¨‹çš„å¯åŠ¨ã€‚å†…éƒ¨æ‰©å±•å¯å®ç°è‡ªåŠ¨åŒ–ä»£ç çš„ä»ªè¡¨åŒ–ç­‰ç”¨ä¾‹ã€‚
* **å¤–éƒ¨æ‰©å±•**å…è®¸æ‚¨åœ¨ä¸Lambdaå‡½æ•°ç›¸åŒçš„æ‰§è¡Œç¯å¢ƒä¸­**è¿è¡Œå•ç‹¬çš„è¿›ç¨‹**ã€‚å¤–éƒ¨æ‰©å±•å¯ä»¥åœ¨è¿è¡Œæ—¶è¿›ç¨‹ä¹‹å‰å¯åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶å…³é—­ä¹‹åç»§ç»­è¿è¡Œã€‚å¤–éƒ¨æ‰©å±•å¯å®ç°åœ¨è°ƒç”¨ä¹‹å‰è·å–å¯†é’¥æˆ–å°†é¥æµ‹å‘é€åˆ°å‡½æ•°è°ƒç”¨ä¹‹å¤–çš„è‡ªå®šä¹‰ç›®æ ‡ç­‰ç”¨ä¾‹ã€‚è¿™äº›æ‰©å±•ä½œä¸ºLambdaå‡½æ•°çš„ä¼´éšè¿›ç¨‹è¿è¡Œã€‚
### æšä¸¾

Enumeration is the process of gathering information about a target system or service. In the context of AWS Lambda, enumeration involves identifying and gathering information about the Lambda functions, their configurations, and associated resources.

æšä¸¾æ˜¯æ”¶é›†æœ‰å…³ç›®æ ‡ç³»ç»Ÿæˆ–æœåŠ¡çš„ä¿¡æ¯çš„è¿‡ç¨‹ã€‚åœ¨AWS Lambdaçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæšä¸¾æ¶‰åŠè¯†åˆ«å’Œæ”¶é›†æœ‰å…³Lambdaå‡½æ•°ã€å…¶é…ç½®å’Œç›¸å…³èµ„æºçš„ä¿¡æ¯ã€‚

#### Enumerating Lambda Functions

#### æšä¸¾Lambdaå‡½æ•°

To enumerate Lambda functions, you can use the AWS CLI or SDKs, or you can leverage third-party tools like `aws-shell` or `awsume`. The following are some techniques you can use to enumerate Lambda functions:

è¦æšä¸¾Lambdaå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨AWS CLIæˆ–SDKï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å¦‚`aws-shell`æˆ–`awsume`ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç”¨äºæšä¸¾Lambdaå‡½æ•°çš„æŠ€æœ¯ï¼š

- **AWS CLI**: Use the `aws lambda list-functions` command to list all Lambda functions in the AWS account.

- **AWS CLI**ï¼šä½¿ç”¨`aws lambda list-functions`å‘½ä»¤åˆ—å‡ºAWSè´¦æˆ·ä¸­çš„æ‰€æœ‰Lambdaå‡½æ•°ã€‚

- **SDKs**: Use the appropriate SDK for your programming language to interact with the AWS Lambda API and retrieve information about Lambda functions.

- **SDKs**ï¼šä½¿ç”¨é€‚åˆæ‚¨ç¼–ç¨‹è¯­è¨€çš„SDKä¸AWS Lambda APIè¿›è¡Œäº¤äº’ï¼Œå¹¶æ£€ç´¢æœ‰å…³Lambdaå‡½æ•°çš„ä¿¡æ¯ã€‚

- **Third-party tools**: Tools like `aws-shell` or `awsume` provide interactive shells with auto-completion and other features that can simplify the enumeration process.

- **ç¬¬ä¸‰æ–¹å·¥å…·**ï¼šåƒ`aws-shell`æˆ–`awsume`è¿™æ ·çš„å·¥å…·æä¾›äº†å¸¦æœ‰è‡ªåŠ¨è¡¥å…¨å’Œå…¶ä»–åŠŸèƒ½çš„äº¤äº’å¼shellï¼Œå¯ä»¥ç®€åŒ–æšä¸¾è¿‡ç¨‹ã€‚

#### Enumerating Function Configurations

#### æšä¸¾å‡½æ•°é…ç½®

Once you have identified the Lambda functions, you can enumerate their configurations to gather more information. Some techniques to enumerate function configurations include:

ä¸€æ—¦ç¡®å®šäº†Lambdaå‡½æ•°ï¼Œå¯ä»¥æšä¸¾å®ƒä»¬çš„é…ç½®ä»¥æ”¶é›†æ›´å¤šä¿¡æ¯ã€‚ä¸€äº›æšä¸¾å‡½æ•°é…ç½®çš„æŠ€æœ¯åŒ…æ‹¬ï¼š

- **AWS CLI**: Use the `aws lambda get-function-configuration` command to retrieve the configuration of a specific Lambda function.

- **AWS CLI**ï¼šä½¿ç”¨`aws lambda get-function-configuration`å‘½ä»¤æ£€ç´¢ç‰¹å®šLambdaå‡½æ•°çš„é…ç½®ã€‚

- **SDKs**: Use the appropriate SDK for your programming language to interact with the AWS Lambda API and retrieve the configuration of Lambda functions.

- **SDKs**ï¼šä½¿ç”¨é€‚åˆæ‚¨ç¼–ç¨‹è¯­è¨€çš„SDKä¸AWS Lambda APIè¿›è¡Œäº¤äº’ï¼Œå¹¶æ£€ç´¢Lambdaå‡½æ•°çš„é…ç½®ã€‚

- **Third-party tools**: Some third-party tools provide functionality to enumerate and display the configurations of Lambda functions.

- **ç¬¬ä¸‰æ–¹å·¥å…·**ï¼šä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·æä¾›äº†æšä¸¾å’Œæ˜¾ç¤ºLambdaå‡½æ•°é…ç½®çš„åŠŸèƒ½ã€‚

#### Enumerating Associated Resources

#### æšä¸¾å…³è”èµ„æº

Lambda functions can be associated with various AWS resources, such as S3 buckets, DynamoDB tables, or API Gateway endpoints. Enumerating these associated resources can provide valuable information about the function's dependencies and potential attack vectors. Some techniques to enumerate associated resources include:

Lambdaå‡½æ•°å¯ä»¥ä¸å„ç§AWSèµ„æºå…³è”ï¼Œå¦‚S3å­˜å‚¨æ¡¶ã€DynamoDBè¡¨æˆ–API Gatewayç«¯ç‚¹ã€‚æšä¸¾è¿™äº›å…³è”èµ„æºå¯ä»¥æä¾›æœ‰å…³å‡½æ•°çš„ä¾èµ–å…³ç³»å’Œæ½œåœ¨æ”»å‡»å‘é‡çš„æœ‰ä»·å€¼ä¿¡æ¯ã€‚ä¸€äº›æšä¸¾å…³è”èµ„æºçš„æŠ€æœ¯åŒ…æ‹¬ï¼š

- **AWS CLI**: Use the appropriate AWS CLI commands to list and retrieve information about associated resources. For example, use `aws lambda list-event-source-mappings` to list the event source mappings for a Lambda function.

- **AWS CLI**ï¼šä½¿ç”¨é€‚å½“çš„AWS CLIå‘½ä»¤åˆ—å‡ºå’Œæ£€ç´¢æœ‰å…³å…³è”èµ„æºçš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨`aws lambda list-event-source-mappings`åˆ—å‡ºLambdaå‡½æ•°çš„äº‹ä»¶æºæ˜ å°„ã€‚

- **SDKs**: Use the appropriate SDK for your programming language to interact with the AWS Lambda API and retrieve information about associated resources.

- **SDKs**ï¼šä½¿ç”¨é€‚åˆæ‚¨ç¼–ç¨‹è¯­è¨€çš„SDKä¸AWS Lambda APIè¿›è¡Œäº¤äº’ï¼Œå¹¶æ£€ç´¢æœ‰å…³å…³è”èµ„æºçš„ä¿¡æ¯ã€‚

- **Third-party tools**: Some third-party tools provide functionality to enumerate and display the associated resources of Lambda functions.

- **ç¬¬ä¸‰æ–¹å·¥å…·**ï¼šä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·æä¾›äº†æšä¸¾å’Œæ˜¾ç¤ºLambdaå‡½æ•°å…³è”èµ„æºçš„åŠŸèƒ½ã€‚
```bash
aws lambda get-account-settings

# List functions and get extra config info
aws lambda list-functions
aws lambda get-function --function-name <function_name>
aws lambda get-function-configuration --function-name <function_name>
aws lambda list-function-event-invoke-configs --function-name <function_name>
## Check for creds in env vars
aws lambda list-functions | jq '.Functions[].Environment'
## Download & check the source code
aws lambda get-function --function-name "LAMBDA-NAME-HERE-FROM-PREVIOUS-QUERY" --query 'Code.Location' --profile uploadcreds
wget -O lambda-function.zip url-from-previous-query

# Get Lambda URL (if any)
aws lambda list-function-url-configs --function-name <function_name>
aws lambda get-function-url-config --function-name <function_name>

# Get who has permissions to invoke the Lambda
aws lambda get-policy --function-name <function_name>

# Versions and Aliases
aws lambda list-versions-by-function --function-name <func_name>
aws lambda list-aliases --function-name <func_name>

# List layers
aws lambda list-layers
aws lambda list-layer-versions --layer-name <name>
aws lambda get-layer-version --layer-name <name> --version-number <ver>
aws lambda get-layer-version-by-arn --arn <name> #Get external ARNs

# List other metadata
aws lambda list-event-source-mappings
aws lambda list-code-signing-configs
aws lambda list-functions-by-code-signing-config --code-signing-config-arn <arn>
```
### è°ƒç”¨ Lambda

#### æ‰‹åŠ¨æ–¹å¼
```bash
# Invoke function
aws lambda invoke --function-name FUNCTION_NAME /tmp/out
## Some functions will expect parameters, they will access them with something like:
## target_policys = event['policy_names']
## user_name = event['user_name']
aws lambda invoke --function-name <name> --cli-binary-format raw-in-base64-out --payload '{"policy_names": ["AdministratorAccess], "user_name": "sdf"}' out.txt
```
#### é€šè¿‡æš´éœ²çš„URL

If you find an exposed URL of an AWS Lambda function, you can use it to enumerate information about the function and potentially exploit it. Here are some techniques you can use:

- **Function Name Enumeration**: By appending "/2015-03-31/functions" to the exposed URL, you can retrieve a list of all the Lambda functions in the account.

- **Function Configuration Enumeration**: By appending "/2015-03-31/functions/{function_name}/configuration" to the exposed URL, you can retrieve the configuration details of a specific Lambda function.

- **Function Code Enumeration**: By appending "/2015-03-31/functions/{function_name}/code" to the exposed URL, you can retrieve the code of a specific Lambda function.

- **Function Environment Variables Enumeration**: By appending "/2015-03-31/functions/{function_name}/environment" to the exposed URL, you can retrieve the environment variables of a specific Lambda function.

- **Function Permissions Enumeration**: By appending "/2015-03-31/functions/{function_name}/policy" to the exposed URL, you can retrieve the permissions policy of a specific Lambda function.

- **Function Event Source Mappings Enumeration**: By appending "/2015-03-31/functions/{function_name}/event-source-mappings" to the exposed URL, you can retrieve the event source mappings of a specific Lambda function.

- **Function Versions Enumeration**: By appending "/2015-03-31/functions/{function_name}/versions" to the exposed URL, you can retrieve the versions of a specific Lambda function.

- **Function Aliases Enumeration**: By appending "/2015-03-31/functions/{function_name}/aliases" to the exposed URL, you can retrieve the aliases of a specific Lambda function.

- **Function Tags Enumeration**: By appending "/2015-03-31/tags/{resource_arn}" to the exposed URL, you can retrieve the tags associated with a specific Lambda function.

Remember to always obtain proper authorization before performing any enumeration or exploitation activities.
```bash
aws lambda list-function-url-configs --function-name <function_name> #Get lambda URL
aws lambda get-function-url-config   --function-name <function_name> #Get lambda URL
```
#### é€šè¿‡URLè°ƒç”¨Lambdaå‡½æ•°

ç°åœ¨æ˜¯æ—¶å€™æ‰¾å‡ºå¯èƒ½æ‰§è¡Œçš„Lambdaå‡½æ•°äº†ï¼š
```
aws --region us-west-2 --profile level6 lambda list-functions
```
![](<../../../.gitbook/assets/image (21) (1).png>)

æœ‰ä¸€ä¸ªåä¸º"Level6"çš„lambdaå‡½æ•°å¯ç”¨ã€‚è®©æˆ‘ä»¬æ‰¾å‡ºå¦‚ä½•è°ƒç”¨å®ƒï¼š
```bash
aws --region us-west-2 --profile level6 lambda get-policy --function-name Level6
```
ç°åœ¨ï¼Œä½ å·²ç»çŸ¥é“äº†åç§°å’ŒIDï¼Œä½ å¯ä»¥è·å–åç§°ï¼š
```bash
aws --profile level6 --region us-west-2 apigateway get-stages --rest-api-id "s33ppypa75"
```
![](<../../../.gitbook/assets/image (20).png>)

æœ€åè°ƒç”¨å‡½æ•°è®¿é—®ï¼ˆæ³¨æ„URLä¸­çš„IDã€åç§°å’Œå‡½æ•°åç§°ï¼‰ï¼š[https://s33ppypa75.execute-api.us-west-2.amazonaws.com/Prod/level6](https://s33ppypa75.execute-api.us-west-2.amazonaws.com/Prod/level6)

`URL:`**`https://<rest-api-id>.execute-api.<region>.amazonaws.com/<stageName>/<funcName>`**

#### å…¶ä»–è§¦å‘å™¨

è¿˜æœ‰å¾ˆå¤šå…¶ä»–å¯ä»¥è§¦å‘Lambdaçš„æ¥æº

<figure><img src="../../../.gitbook/assets/image (1) (1) (3).png" alt=""><figcaption></figcaption></figure>

### ææƒ

åœ¨ä¸‹ä¸€é¡µä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å¦‚ä½•æ»¥ç”¨Lambdaæƒé™ä»¥æå‡ç‰¹æƒï¼š

{% content-ref url="../../aws-pentesting/aws-privilege-escalation/aws-lambda-privesc.md" %}
[aws-lambda-privesc.md](../../aws-pentesting/aws-privilege-escalation/aws-lambda-privesc.md)
{% endcontent-ref %}

### æœªç»èº«ä»½éªŒè¯çš„è®¿é—®

{% content-ref url="../aws-unauthenticated-enum-access/aws-lambda-unauthenticated-access.md" %}
[aws-lambda-unauthenticated-access.md](../aws-unauthenticated-enum-access/aws-lambda-unauthenticated-access.md)
{% endcontent-ref %}

### åæ¸—é€

{% content-ref url="../../aws-pentesting/aws-post-exploitation/aws-lambda-post-exploitation/" %}
[aws-lambda-post-exploitation](../../aws-pentesting/aws-post-exploitation/aws-lambda-post-exploitation/)
{% endcontent-ref %}

### æŒä¹…æ€§

{% content-ref url="../../aws-pentesting/aws-persistence/aws-lambda-persistence/" %}
[aws-lambda-persistence](../../aws-pentesting/aws-persistence/aws-lambda-persistence/)
{% endcontent-ref %}

## å‚è€ƒèµ„æ–™

* [https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html#gettingstarted-concepts-layer](https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html#gettingstarted-concepts-layer)

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFç‰ˆæœ¬çš„HackTricksï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘**[**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
