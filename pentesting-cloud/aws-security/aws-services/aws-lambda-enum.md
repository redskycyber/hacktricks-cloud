# AWS - Lambda Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã™ã‚‹ã€‚
* **HackTricks**ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã™ã‚‹ã€‚

</details>

## Lambda

AWS Lambdaã¯ã€**ã‚µãƒ¼ãƒãƒ¼ã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚„ç®¡ç†ã‚’ã›ãšã«ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œ**ã§ãã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚Lambdaã¯ã€ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œã«å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ã‚’**è‡ªå‹•çš„ã«ç®¡ç†**ã—ã€é«˜å¯ç”¨æ€§ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚Lambdaã§ã¯ã€**æ¶ˆè²»ã—ãŸã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆæ™‚é–“ã®ã¿**ã«å¯¾ã—ã¦æ”¯æ‰•ã„ã€å‰æ‰•ã„è²»ç”¨ã‚„é•·æœŸå¥‘ç´„ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

Lambdaã‚’å‘¼ã³å‡ºã™ã«ã¯ã€**Cloudwatch**ã‚’ä½¿ã£ã¦**å¥½ããªã ã‘é »ç¹ã«**å‘¼ã³å‡ºã™ã€**URL**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã—ã¦å‘¼ã³å‡ºã™ã€**API Gateway**ã‚’ä»‹ã—ã¦å‘¼ã³å‡ºã™ã€ã¾ãŸã¯**S3**ãƒã‚±ãƒƒãƒˆã®ãƒ‡ãƒ¼ã‚¿ã®**å¤‰æ›´**ã‚„**DynamoDB**ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ›´æ–°ãªã©ã®**ã‚¤ãƒ™ãƒ³ãƒˆ**ã«åŸºã¥ã„ã¦å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

Lambdaã®**ã‚³ãƒ¼ãƒ‰**ã¯**`/var/task`**ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

### Lambda Aliases Weights

Lambdaã«ã¯**è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³**ãŒã‚ã‚Šã¾ã™ã€‚\
ãã—ã¦ã€**1ã¤ä»¥ä¸Šã®**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’**ã‚¨ã‚¤ãƒªã‚¢ã‚¹**ã‚’ä»‹ã—ã¦å…¬é–‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹å†…ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹**å„**ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®**ã‚¦ã‚§ã‚¤ãƒˆ**ãŒã€**ã©ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒå‘¼ã³å‡ºã—ã‚’å—ã‘ã‚‹ã‹**ã‚’æ±ºå®šã—ã¾ã™ï¼ˆä¾‹ãˆã°90%-10%ãªã©ï¼‰ã€‚\
ã‚‚ã—ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®**ã„ãšã‚Œã‹ã®**ã‚³ãƒ¼ãƒ‰ãŒ**è„†å¼±**ã§ã‚ã‚Œã°ã€è„†å¼±ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã‚’å—ã‘ã‚‹ã¾ã§**ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚Šç¶šã‘ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚

![](<../../../.gitbook/assets/image (16) (1).png>)

### Resource Policies

Lambdaãƒªã‚½ãƒ¼ã‚¹ãƒãƒªã‚·ãƒ¼ã«ã‚ˆã‚Šã€ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹/ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒLambdaã‚’å‘¼ã³å‡ºã™ãŸã‚ã®**ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\
ä¾‹ãˆã°ã€ã“ã‚Œã¯**URLçµŒç”±ã§å…¬é–‹ã•ã‚ŒãŸLambdaã«èª°ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹**ãƒãƒªã‚·ãƒ¼ã§ã™ï¼š

<figure><img src="https://lh4.googleusercontent.com/4PNFKBdzr3nMrPqeKkTslgwWDKxkXMdQ1SNdv7NPHykj3GX8wODrQyXOFbjk4fxHfZ8pDm5ijWgk2Vq2EGXiPRT3TQfZf1fHycvdEKBuDxJDYos1CJeMHXSeg86ZB-Ol7CNtten6xkVFQj6AhDUEWNQJrQ=s2048" alt=""><figcaption></figcaption></figure>

ã¾ãŸã¯ã€API GatewayãŒå‘¼ã³å‡ºã™ã“ã¨ã‚’è¨±å¯ã™ã‚‹ã“ã‚Œã§ã™ï¼š

<figure><img src="https://lh3.googleusercontent.com/Su0JlR0wBqb-99Z4N_2-_kMlX0Xzx2n_GpZuOPW5IeXR3FYbm8OHFDM3Ora1BpXiSjHpDVUlq4yEyXwaI3nBuze6DJ-wRf2ATsCuWbq0wuBCd34E9uIpqwheE6Cc_PopviI_93O_j2ZKXc1-AJtsBoLVUw=s2048" alt=""><figcaption></figcaption></figure>

### Lambda Database Proxies

**åŒæ™‚ã«æ•°ç™¾ã®Lambdaãƒªã‚¯ã‚¨ã‚¹ãƒˆ**ãŒã‚ã‚‹å ´åˆã€ãã‚Œãã‚ŒãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«**æ¥ç¶šã—ã¦åˆ‡æ–­ã™ã‚‹å¿…è¦ãŒã‚ã‚‹**ã¨ã€ã†ã¾ãã„ãã¾ã›ã‚“ï¼ˆLambdaã¯ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ã§ã€æ¥ç¶šã‚’é–‹ã„ãŸã¾ã¾ã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼‰ã€‚\
ãã®ãŸã‚ã€**Lambdaé–¢æ•°ãŒRDS Proxyã¨å¯¾è©±ã™ã‚‹**å ´åˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã¯ãªãã€åŒæ™‚ã«å¤šãã®æ¥ç¶šã‚’ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã«å¿…è¦ãªæ¥ç¶šãƒ—ãƒ¼ãƒªãƒ³ã‚°ã‚’å‡¦ç†ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Lambdaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯**æ—¢å­˜ã®æ¥ç¶šã‚’å†åˆ©ç”¨**ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€é–¢æ•°ã®å‘¼ã³å‡ºã—ã”ã¨ã«æ–°ã—ã„æ¥ç¶šã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚

### Lambda EFS Filesystems

ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã€å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€**Lambdaã¯EFSã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒã‚¦ãƒ³ãƒˆ**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®ãŸã‚ã€Lambdaã¯ãã‚Œã‚’èª­ã¿æ›¸ãã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### Lambda Layers

Lambda _ãƒ¬ã‚¤ãƒ¤ãƒ¼_ ã¯ã€è¿½åŠ ã®ã‚³ãƒ¼ãƒ‰ã‚„ãã®ä»–ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å«ã‚€ã“ã¨ãŒã§ãã‚‹.zipãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€[ã‚«ã‚¹ã‚¿ãƒ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-custom.html)ã€ãƒ‡ãƒ¼ã‚¿ã€ã¾ãŸã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚

é–¢æ•°ã”ã¨ã«**æœ€å¤§5ã¤ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼**ã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚é–¢æ•°ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’å«ã‚ã‚‹ã¨ã€**å†…å®¹ã¯å®Ÿè¡Œç’°å¢ƒã®`/opt`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å±•é–‹**ã•ã‚Œã¾ã™ã€‚

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯**ã€ã‚ãªãŸãŒä½œæˆã—ãŸ**ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã‚ãªãŸã®AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ**ã§ã™ã€‚ä»–ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’**å…±æœ‰ã™ã‚‹**ã‹ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’**å…¬é–‹ã™ã‚‹**ã“ã¨ã‚’é¸æŠã§ãã¾ã™ã€‚ç•°ãªã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå…¬é–‹ã—ãŸãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ã‚ãªãŸã®é–¢æ•°ãŒä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ãã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå‰Šé™¤ã•ã‚ŒãŸå¾Œã€ã¾ãŸã¯ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ãŒå–ã‚Šæ¶ˆã•ã‚ŒãŸå¾Œã§ã‚‚ã€ã‚ãªãŸã®é–¢æ•°ã¯ãã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’**å¼•ãç¶šãä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™**ã€‚ãŸã ã—ã€å‰Šé™¤ã•ã‚ŒãŸãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦æ–°ã—ã„é–¢æ•°ã‚’ä½œæˆã—ãŸã‚Šã€é–¢æ•°ã‚’æ›´æ–°ã—ãŸã‚Šã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸé–¢æ•°ã¯ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã«ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ãã«ã€å¥½ã¿ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ãã®ä»–ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã—ã¾ã™ã€‚

### Lambda Extensions

Lambdaæ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€é–¢æ•°ã‚’æ‹¡å¼µã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦ã€é–¢æ•°ã‚’ãŠå¥½ã¿ã®ç›£è¦–ã€å¯è¦–æ€§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚¬ãƒãƒŠãƒ³ã‚¹ãƒ„ãƒ¼ãƒ«ã¨çµ±åˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ‹¡å¼µæ©Ÿèƒ½ã¯ã€[Lambdaãƒ¬ã‚¤ãƒ¤ãƒ¼](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html)ã‚’ä½¿ç”¨ã—ã¦.zipã‚¢ãƒ¼ã‚«ã‚¤ãƒ–é–¢æ•°ã«è¿½åŠ ã™ã‚‹ã‹ã€[ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸé–¢æ•°](https://aws.amazon.com/blogs/compute/working-with-lambda-layers-and-extensions-in-container-images/)ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«å«ã‚ã¾ã™ã€‚

* **å†…éƒ¨æ‹¡å¼µæ©Ÿèƒ½**ã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ—ãƒ­ã‚»ã‚¹ã®**ä¸€éƒ¨**ã¨ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã¨**åŒã˜ãƒ—ãƒ­ã‚»ã‚¹å†…**ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¨€èªå›ºæœ‰ã®ç’°å¢ƒå¤‰æ•°ã‚„ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ—ãƒ­ã‚»ã‚¹ã®**èµ·å‹•ã‚’å¤‰æ›´**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å†…éƒ¨æ‹¡å¼µæ©Ÿèƒ½ã¯ã€ã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•è¨ˆæ¸¬ãªã©ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚
* **å¤–éƒ¨æ‹¡å¼µæ©Ÿèƒ½**ã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã¯åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ãŒã€Lambdaé–¢æ•°ã¨**åŒã˜å®Ÿè¡Œç’°å¢ƒå†…**ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚å¤–éƒ¨æ‹¡å¼µæ©Ÿèƒ½ã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ—ãƒ­ã‚»ã‚¹ãŒ**é–‹å§‹ã•ã‚Œã‚‹å‰**ã«é–‹å§‹ã™ã‚‹ã“ã¨ãŒã§ãã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒ**ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ãŸå¾Œã‚‚ç¶šè¡Œ**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®æ‹¡å¼µæ©Ÿèƒ½ã¯ã€Lambdaé–¢æ•°ã®ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
### åˆ—æŒ™
```bash
aws lambda get-account-settings

# List functions and get extra config info
aws lambda list-functions
aws lambda get-function --function-name <function_name>
aws lambda get-function-configuration --function-name <function_name>
aws lambda list-function-event-invoke-configs --function-name <function_name>
## Check for creds in env vars
aws lambda list-functions | jq '.Functions[].Environment'
## Download & check the source code
aws lambda get-function --function-name "<func_name>" --query 'Code.Location'
wget -O lambda-function.zip <url-from-previous-query>

# Get Lambda URL (if any)
aws lambda list-function-url-configs --function-name <function_name>
aws lambda get-function-url-config --function-name <function_name>

# Get who has permissions to invoke the Lambda
aws lambda get-policy --function-name <function_name>

# Versions and Aliases
aws lambda list-versions-by-function --function-name <func_name>
aws lambda list-aliases --function-name <func_name>

# List layers
aws lambda list-layers
aws lambda list-layer-versions --layer-name <name>
aws lambda get-layer-version --layer-name <name> --version-number <ver>
aws lambda get-layer-version-by-arn --arn <name> #Get external ARNs

# List other metadata
aws lambda list-event-source-mappings
aws lambda list-code-signing-configs
aws lambda list-functions-by-code-signing-config --code-signing-config-arn <arn>
```
### ãƒ©ãƒ ãƒ€ã‚’èµ·å‹•ã™ã‚‹

#### æ‰‹å‹•
```bash
# Invoke function
aws lambda invoke --function-name FUNCTION_NAME /tmp/out
## Some functions will expect parameters, they will access them with something like:
## target_policys = event['policy_names']
## user_name = event['user_name']
aws lambda invoke --function-name <name> --cli-binary-format raw-in-base64-out --payload '{"policy_names": ["AdministratorAccess], "user_name": "sdf"}' out.txt
```
#### éœ²å‡ºã—ãŸURLã‚’é€šã˜ã¦
```bash
aws lambda list-function-url-configs --function-name <function_name> #Get lambda URL
aws lambda get-function-url-config   --function-name <function_name> #Get lambda URL
```
#### URLçµŒç”±ã§Lambdaé–¢æ•°ã‚’å‘¼ã³å‡ºã™

å®Ÿè¡Œå¯èƒ½ãªLambdaé–¢æ•°ã‚’è¦‹ã¤ã‘ã‚‹æ™‚ãŒæ¥ã¾ã—ãŸï¼š
```
aws --region us-west-2 --profile level6 lambda list-functions
```
![](<../../../.gitbook/assets/image (21) (1).png>)

"Level6" ã¨ã„ã†åå‰ã®lambdaé–¢æ•°ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚ãã‚Œã‚’ã©ã®ã‚ˆã†ã«å‘¼ã³å‡ºã™ã‹è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ï¼š
```bash
aws --region us-west-2 --profile level6 lambda get-policy --function-name Level6
```
![](<../../../.gitbook/assets/image (69).png>)

åå‰ã¨IDãŒã‚ã‹ã£ãŸã®ã§ã€æ¬¡ã¯Nameã‚’å–å¾—ã§ãã¾ã™ï¼š
```bash
aws --profile level6 --region us-west-2 apigateway get-stages --rest-api-id "s33ppypa75"
```
```markdown
![](<../../../.gitbook/assets/image (20).png>)

ãã—ã¦æœ€å¾Œã«ã€é–¢æ•°ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å‘¼ã³å‡ºã—ã¾ã™ï¼ˆIDã€åå‰ã€é–¢æ•°åãŒURLã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼‰ï¼š [https://s33ppypa75.execute-api.us-west-2.amazonaws.com/Prod/level6](https://s33ppypa75.execute-api.us-west-2.amazonaws.com/Prod/level6)

`URL:`**`https://<rest-api-id>.execute-api.<region>.amazonaws.com/<stageName>/<funcName>`**

#### ãã®ä»–ã®ãƒˆãƒªã‚¬ãƒ¼

Lambdaã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ä»–ã®å¤šãã®ã‚½ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™

<figure><img src="../../../.gitbook/assets/image (1) (1) (3).png" alt=""><figcaption></figcaption></figure>

### æ¨©é™æ˜‡æ ¼

æ¬¡ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€**Lambdaã®æ¨©é™ã‚’æ‚ªç”¨ã—ã¦æ¨©é™ã‚’æ˜‡æ ¼ã•ã›ã‚‹æ–¹æ³•**ã‚’ç¢ºèªã§ãã¾ã™ï¼š

{% content-ref url="../../aws-pentesting/aws-privilege-escalation/aws-lambda-privesc.md" %}
[aws-lambda-privesc.md](../../aws-pentesting/aws-privilege-escalation/aws-lambda-privesc.md)
{% endcontent-ref %}

### èªè¨¼ã•ã‚Œã¦ã„ãªã„ã‚¢ã‚¯ã‚»ã‚¹

{% content-ref url="../aws-unauthenticated-enum-access/aws-lambda-unauthenticated-access.md" %}
[aws-lambda-unauthenticated-access.md](../aws-unauthenticated-enum-access/aws-lambda-unauthenticated-access.md)
{% endcontent-ref %}

### æ”»æ’ƒå¾Œã®æ´»å‹•

{% content-ref url="../../aws-pentesting/aws-post-exploitation/aws-lambda-post-exploitation/" %}
[aws-lambda-post-exploitation](../../aws-pentesting/aws-post-exploitation/aws-lambda-post-exploitation/)
{% endcontent-ref %}

### æŒç¶šæ€§

{% content-ref url="../../aws-pentesting/aws-persistence/aws-lambda-persistence/" %}
[aws-lambda-persistence](../../aws-pentesting/aws-persistence/aws-lambda-persistence/)
{% endcontent-ref %}

## å‚è€ƒæ–‡çŒ®

* [https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html#gettingstarted-concepts-layer](https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-concepts.html#gettingstarted-concepts-layer)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§<strong>ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã«ã‚ãªãŸã®**ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã¦ãã ã•ã„ã€‚ç§ãŸã¡ã®ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹ã‹ã€**[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã€ã¾ãŸã¯**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã§**ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚**
* **HackTricks**ã®[**GitHubãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
```
