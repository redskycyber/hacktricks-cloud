# AWS - CloudHSM Enum

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju oglaÅ¡enu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Pogledajte [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## HSM - Modul za hardversku sigurnost

Cloud HSM je FIPS 140 nivo dva validisani **hardverski ureÄ‘aj** za sigurno skladiÅ¡tenje kriptografskih kljuÄeva (napomena: CloudHSM je hardverski ureÄ‘aj, nije virtualizovana usluga). To je SafeNetLuna 7000 ureÄ‘aj sa prethodno uÄitanom verzijom 5.3.13. Postoje dve verzije firmware-a i koju Ä‡ete izabrati zavisi od vaÅ¡ih taÄnih potreba. Jedna je za FIPS 140-2 usaglaÅ¡enost, a postoji i novija verzija koja se moÅ¾e koristiti.

NeobiÄna karakteristika CloudHSM-a je da je fiziÄki ureÄ‘aj i stoga se **ne deli sa drugim korisnicima**, ili kako se to obiÄno naziva, multi-tenant. To je dedikovani ureÄ‘aj samo za vas koji je dostupan iskljuÄivo vaÅ¡im radnim optereÄ‡enjima.

UobiÄajeno, ureÄ‘aj je dostupan u roku od 15 minuta, pod uslovom da ima kapaciteta, ali u nekim zonama to moÅ¾da nije sluÄaj.

PoÅ¡to je ovo fiziÄki ureÄ‘aj posveÄ‡en vama, **kljuÄevi se Äuvaju na ureÄ‘aju**. KljuÄevi moraju biti ili **replikovani na drugi ureÄ‘aj**, rezervisani na offline skladiÅ¡tu ili izvezeni na rezervni ureÄ‘aj. **Ovaj ureÄ‘aj nije podrÅ¾an** od strane S3 ili bilo koje druge usluge na AWS-u kao Å¡to je KMS.

U **CloudHSM-u**, morate **samostalno skalirati uslugu**. Morate obezbediti dovoljno CloudHSM ureÄ‘aja da biste se nosili sa svojim potrebama za enkripcijom, na osnovu algoritama enkripcije koje ste izabrali za svoje reÅ¡enje.\
Skaliranje usluge upravljanja kljuÄevima vrÅ¡i AWS i automatski se prilagoÄ‘ava potraÅ¾nji, tako da se broj CloudHSM ureÄ‘aja koji su potrebni moÅ¾e poveÄ‡avati kako raste vaÅ¡e koriÅ¡Ä‡enje. Imajte to u vidu prilikom skaliranja reÅ¡enja i ako vaÅ¡e reÅ¡enje ima automatsko skaliranje, pobrinite se da je vaÅ¡ maksimalni obim uzet u obzir sa dovoljno CloudHSM ureÄ‘aja za uslugu reÅ¡enja.

Kao i skaliranje, **performanse su u vaÅ¡im rukama sa CloudHSM-om**. Performanse variraju u zavisnosti od toga koji algoritam enkripcije se koristi i koliko Äesto trebate pristupiti ili povuÄ‡i kljuÄeve za enkripciju podataka. Performanse usluge upravljanja kljuÄevima se obraÄ‘uju od strane Amazona i automatski se prilagoÄ‘avaju prema potrebama potraÅ¾nje. Performanse CloudHSM-a se postiÅ¾u dodavanjem viÅ¡e ureÄ‘aja, a ako vam je potrebna veÄ‡a performansa, dodajte ureÄ‘aje ili promenite metodu enkripcije na algoritam koji je brÅ¾i.

Ako je vaÅ¡e reÅ¡enje **viÅ¡eregionalno**, trebali biste dodati nekoliko **CloudHSM ureÄ‘aja u drugoj regiji i uspostaviti povezanost izmeÄ‘u regija putem privatne VPN veze** ili nekog drugog naÄina kako biste osigurali da je saobraÄ‡aj uvek zaÅ¡tiÄ‡en izmeÄ‘u ureÄ‘aja na svakom nivou veze. Ako imate viÅ¡eregionalno reÅ¡enje, morate razmisliti o tome kako **replikovati kljuÄeve i postaviti dodatne CloudHSM ureÄ‘aje u regijama u kojima radite**. Vrlo brzo moÅ¾ete doÄ‡i u situaciju da imate Å¡est ili osam ureÄ‘aja rasporeÄ‘enih u viÅ¡e regija, omoguÄ‡avajuÄ‡i potpunu redundanciju vaÅ¡ih kljuÄeva za enkripciju.

**CloudHSM** je usluga za skladiÅ¡tenje kljuÄeva visokog nivoa za preduzeÄ‡a i moÅ¾e se koristiti kao **osnova poverenja za preduzeÄ‡e**. MoÅ¾e skladiÅ¡titi privatne kljuÄeve u PKI i kljuÄeve sertifikacionih tela u X509 implementacijama. Pored simetriÄnih kljuÄeva koji se koriste u simetriÄnim algoritmima kao Å¡to je AES, **KMS skladiÅ¡ti i fiziÄki Å¡titi samo simetriÄne kljuÄeve (ne moÅ¾e delovati kao sertifikaciono telo)**, pa ako trebate skladiÅ¡titi PKI i CA kljuÄeve, CloudHSM ili dva ili tri ureÄ‘aja mogu biti vaÅ¡e reÅ¡enje.

**CloudHSM je znaÄajno skuplji od usluge upravljanja kljuÄevima**. CloudHSM je hardverski ureÄ‘aj, pa imate fiksne troÅ¡kove za obezbeÄ‘ivanje CloudHSM ureÄ‘aja, a zatim i troÅ¡ak po satu za rad ureÄ‘aja. TroÅ¡ak se mnoÅ¾i sa brojem CloudHSM ureÄ‘aja koji su potrebni da bi se postigli vaÅ¡i specifiÄni zahtevi.\
Dodatno, treba uzeti u obzir kupovinu softvera treÄ‡e strane kao Å¡to su SafeNet ProtectV softverski paketi i vreme i napor potreban za integraciju. Usluga upravljanja kljuÄevima se naplaÄ‡uje na osnovu koriÅ¡Ä‡enja i zavisi od broja kljuÄeva koje imate i operacija unosa i izlaza. S obzirom na to da upravljanje kljuÄevima omoguÄ‡ava besprekorno integrisanje sa mnogim AWS uslugama, troÅ¡kovi integracije bi trebali biti znaÄajno niÅ¾i. TroÅ¡kovi bi trebali biti sekundarni faktor u reÅ¡enjima za enkripciju. Enkripcija se obiÄno koristi u svrhu bezbednosti i usaglaÅ¡enosti.

**Samo vi imate pristup kljuÄevima sa CloudHSM-om** i bez ulaska u previÅ¡e detalja, sa CloudHSM-om upravljate sopstvenim kljuÄevima. **Sa KMS-om, vi i Amazon zajedno upravljate kljuÄevima**. AWS ima mnoge politike zaÅ¡tite od zloupotrebe i **joÅ¡ uvek ne moÅ¾e pristupiti vaÅ¡im kljuÄevima ni u jednom od ova dva reÅ¡enja**. Glavna razlika je usaglaÅ¡enost u vezi sa vlasniÅ¡tvom i upravljanjem kljuÄev
### Å ta je Hardverski modul za bezbednost

Hardverski modul za bezbednost (HSM) je posveÄ‡eni kriptografski ureÄ‘aj koji se koristi za generisanje, skladiÅ¡tenje i upravljanje kriptografskim kljuÄevima i zaÅ¡titu osetljivih podataka. Dizajniran je da pruÅ¾i visok nivo bezbednosti fiziÄkim i elektronskim izolovanjem kriptografskih funkcija od ostatka sistema.

NaÄin rada HSM-a moÅ¾e varirati u zavisnosti od specifiÄnog modela i proizvoÄ‘aÄa, ali generalno se javljaju sledeÄ‡i koraci:

1. **Generisanje kljuÄeva**: HSM generiÅ¡e sluÄajni kriptografski kljuÄ koristeÄ‡i siguran generator sluÄajnih brojeva.
2. **SkladiÅ¡tenje kljuÄeva**: KljuÄ je **sigurno skladiÅ¡ten unutar HSM-a, gde mu mogu pristupiti samo ovlaÅ¡Ä‡eni korisnici ili procesi**.
3. **Upravljanje kljuÄevima**: HSM pruÅ¾a razne funkcije upravljanja kljuÄevima, ukljuÄujuÄ‡i rotaciju kljuÄeva, rezervne kopije i opoziv.
4. **Kriptografske operacije**: HSM vrÅ¡i razne kriptografske operacije, ukljuÄujuÄ‡i Å¡ifrovanje, deÅ¡ifrovanje, digitalno potpisivanje i razmenu kljuÄeva. Ove operacije se **izvode unutar sigurnog okruÅ¾enja HSM-a**, koje Å¡titi od neovlaÅ¡Ä‡enog pristupa i manipulacije.
5. **Evidencija nadzora**: HSM beleÅ¾i sve kriptografske operacije i pokuÅ¡aje pristupa, Å¡to se moÅ¾e koristiti u svrhe usklaÄ‘enosti i nadzora bezbednosti.

HSM-ovi se mogu koristiti za Å¡irok spektar aplikacija, ukljuÄujuÄ‡i sigurne online transakcije, digitalne sertifikate, sigurne komunikacije i Å¡ifrovanje podataka. ÄŒesto se koriste u industrijama koje zahtevaju visok nivo bezbednosti, kao Å¡to su finansije, zdravstvo i vlada.

Ukupno, visok nivo bezbednosti koji pruÅ¾aju HSM-ovi Äini **veoma teÅ¡kim izvlaÄenje sirovih kljuÄeva iz njih, a pokuÅ¡aj takvog izvlaÄenja Äesto se smatra krÅ¡enjem bezbednosti**. MeÄ‘utim, mogu postojati **odreÄ‘eni scenariji** u kojima **ovlaÅ¡Ä‡eno osoblje moÅ¾e izvuÄ‡i sirovi kljuÄ** u specifiÄne svrhe, kao Å¡to je sluÄaj postupka oporavka kljuÄeva.

### Enumeracija
```
```
<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
