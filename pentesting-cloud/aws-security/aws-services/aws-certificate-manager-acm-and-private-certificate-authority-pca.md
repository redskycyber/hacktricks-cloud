# AWS - Zarzdzanie Certyfikatami (ACM) i Prywatnym Autorytetem Certyfikacji (PCA)

<details>

<summary><strong>Dowiedz si jak hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi trikami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

**AWS Certificate Manager (ACM)** jest dostarczany jako usuga majca na celu uatwienie **procesu dostarczania, zarzdzania i wdra偶ania certyfikat贸w SSL/TLS** dla usug AWS i zasob贸w wewntrznych. ACM eliminuje konieczno rcznych proces贸w, takich jak zakup, przesyanie i odnawianie certyfikat贸w. Umo偶liwia to u偶ytkownikom skuteczne 偶danie i wdra偶anie certyfikat贸w na r贸偶nych zasobach AWS, w tym na **Elastic Load Balancers, dystrybucjach Amazon CloudFront i interfejsach API na bramce API**.

Kluczow cech ACM jest **automatyczne odnawianie certyfikat贸w**, znacznie redukujce obci偶enie zarzdzaniem. Ponadto, ACM obsuguje tworzenie i scentralizowane zarzdzanie **prywatnymi certyfikatami do u偶ytku wewntrznego**. Chocia偶 certyfikaty SSL/TLS dla zintegrowanych usug AWS, takich jak Elastic Load Balancing, Amazon CloudFront i Amazon API Gateway, s dostarczane bez dodatkowych koszt贸w za porednictwem ACM, u偶ytkownicy s odpowiedzialni za koszty zwizane z wykorzystaniem zasob贸w AWS przez ich aplikacje oraz miesiczn opat za ka偶dy **prywatny Autorytet Certyfikacji (CA)** i prywatne certyfikaty u偶ywane poza zintegrowanymi usugami ACM.

**AWS Private Certificate Authority** jest oferowany jako **zarzdzana usuga prywatnego CA**, rozszerzajc mo偶liwoci ACM poprzez rozszerzenie zarzdzania certyfikatami o prywatne certyfikaty. Te prywatne certyfikaty s niezbdne do uwierzytelniania zasob贸w w organizacji.

## Wyliczanie

### ACM
```bash
# List certificates
aws acm list-certificates

# Get certificate info
aws acm describe-certificate --certificate-arn <arn> # Check "InUseBy" to check which resources are using it

# Get certificate data
aws acm get-certificate --certificate-arn "arn:aws:acm:us-east-1:188868097724:certificate/865abced-82c9-43bf-b7d2-1f4948bf353d"

# Account configuration
aws acm get-account-configuration
```
### PCA

Private Certificate Authority (PCA) to usuga dostpna w AWS Certificate Manager (ACM), kt贸ra umo偶liwia tworzenie i zarzdzanie prywatnymi certyfikatami SSL/TLS. PCA umo偶liwia tworzenie wasnej hierarchii certyfikat贸w, co daje wiksz kontrol nad procesem certyfikacji.

#### Tworzenie PCA

Aby utworzy PCA, nale偶y zdefiniowa polityk certyfikacji, kt贸ra okrela zasady wydawania certyfikat贸w. Nastpnie mo偶na utworzy korze PCA, kt贸ry bdzie su偶y do podpisywania certyfikat贸w. Po utworzeniu korzenia PCA mo偶na tworzy i zarzdza certyfikatami w hierarchii.

#### Wydawanie certyfikat贸w

Wydawanie certyfikat贸w w PCA odbywa si poprzez podpisanie 偶dania certyfikatu przez korze PCA. Po podpisaniu certyfikatu mo偶na go u偶ywa do zabezpieczania usug i aplikacji.

#### Zarzdzanie certyfikatami

PCA umo偶liwia zarzdzanie certyfikatami, w tym odwoywanie, usuwanie i odnawianie certyfikat贸w. Mo偶na r贸wnie偶 monitorowa i rejestrowa dziaania zwizane z certyfikatami.

#### Integracja z innymi usugami AWS

PCA mo偶na zintegrowa z innymi usugami AWS, takimi jak Elastic Load Balancer (ELB) i CloudFront, aby u偶ywa prywatnych certyfikat贸w w tych usugach.

#### Bezpieczestwo PCA

PCA zapewnia wysoki poziom bezpieczestwa poprzez zastosowanie kontroli dostpu, monitorowanie i rejestrowanie dziaa, a tak偶e automatyczne odwoywanie certyfikat贸w w przypadku naruszenia bezpieczestwa.

#### Podsumowanie

PCA w AWS Certificate Manager to usuga umo偶liwiajca tworzenie i zarzdzanie prywatnymi certyfikatami SSL/TLS. Daje to wiksz kontrol nad procesem certyfikacji i zapewnia wysoki poziom bezpieczestwa.
```bash
# List CAs
aws acm-pca list-certificate-authorities

# Get CA info
aws acm-pca describe-certificate-authority --certificate-authority-arn <arn>

# Get CA Permissions
aws acm-pca list-permissions --certificate-authority-arn <arn>

# Get CA certificate
aws acm-pca get-certificate-authority-certificate --certificate-authority-arn <arn>

# Certificate request
aws acm-pca get-certificate-authority-csr --certificate-authority-arn <arn>

# Get CA Policy (if any)
aws acm-pca get-policy --resource-arn <arn>
```
## Privesc

TODO

## Post Exploitation

TODO

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
