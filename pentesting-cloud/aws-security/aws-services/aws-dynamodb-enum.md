# AWS - DynamoDB Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— **PRì„ ì œì¶œí•˜ì—¬** ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ìˆ ì„ ê³µìœ í•˜ì„¸ìš”.

</details>

## DynamoDB

### ê¸°ë³¸ ì •ë³´

Amazon DynamoDBëŠ” AWSì—ì„œ **ì™„ì „íˆ ê´€ë¦¬ë˜ëŠ”, ì„œë²„ë¦¬ìŠ¤, í‚¤-ê°’ NoSQL ë°ì´í„°ë² ì´ìŠ¤**ë¡œ ì œê³µë˜ë©°, í¬ê¸°ì— ê´€ê³„ì—†ì´ ê³ ì„±ëŠ¥ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•˜ê¸° ìœ„í•´ ë§ì¶¤ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ëŠ” ë‚´ì¥ëœ ë³´ì•ˆ ê¸°ëŠ¥, ì¤‘ë‹¨ ì—†ëŠ” ë°±ì—…, ì—¬ëŸ¬ ì§€ì—­ì— ëŒ€í•œ ìë™ ë³µì œ, í†µí•© ì¸ë©”ëª¨ë¦¬ ìºì‹± ë° í¸ë¦¬í•œ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ìœ í‹¸ë¦¬í‹°ì™€ ê°™ì€ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ë³´ì¥í•©ë‹ˆë‹¤.

DynamoDBì˜ ê²½ìš° ì „í†µì ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” ëŒ€ì‹  **í…Œì´ë¸”ì„ ìƒì„±**í•©ë‹ˆë‹¤. ê° í…Œì´ë¸”ì€ **í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤**ì˜ í•„ìˆ˜ êµ¬ì„± ìš”ì†Œì¸ **íŒŒí‹°ì…˜ í‚¤**ì˜ ì§€ì •ì„ ìš”êµ¬í•©ë‹ˆë‹¤. ì´ íŒŒí‹°ì…˜ í‚¤ëŠ” ë³¸ì§ˆì ìœ¼ë¡œ **í•´ì‹œ ê°’**ìœ¼ë¡œ, í•­ëª©ì˜ ê²€ìƒ‰ ë° ë°ì´í„°ì˜ ì—¬ëŸ¬ í˜¸ìŠ¤íŠ¸ ê°„ ë¶„ì‚°ì— ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ ë¶„ì‚°ì€ ë°ì´í„°ë² ì´ìŠ¤ì˜ í™•ì¥ì„±ê³¼ ê°€ìš©ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤. ë˜í•œ ë°ì´í„° ì¡°ì§ì„ ë”ìš± ì„¸ë¶„í™”í•˜ê¸° ìœ„í•´ **ì •ë ¬ í‚¤**ë¥¼ í†µí•©í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì´ ìˆìŠµë‹ˆë‹¤.

### ì•”í˜¸í™”

ê¸°ë³¸ì ìœ¼ë¡œ DynamoDBëŠ” **Amazon DynamoDBì— ì†í•˜ëŠ” KMS í‚¤**ë¥¼ ì‚¬ìš©í•˜ë©°, ì ì–´ë„ ê³„ì •ì— ì†í•˜ëŠ” AWS ê´€ë¦¬ í‚¤ê°€ ì•„ë‹™ë‹ˆë‹¤.

<figure><img src="https://lh4.googleusercontent.com/JjtNS7aA-_GRMgZb4v93jWEQJi6DQdUPq0FEpzZPdeyCeNoG05p0NJiV9Zs-ULs_-Tfjmx0W1ZgsE2Ui2ljo7D-1a87Xny-gpLVQO0XmXdFoph9ci1RepbVNwaCe9oPruEZSEDxGTxF5dIv6pW1WpT6kWA=s2048" alt=""><figcaption></figcaption></figure>

### ë°±ì—… ë° S3ë¡œ ë‚´ë³´ë‚´ê¸°

í…Œì´ë¸” ë°±ì—…ì„ **ì¼ì •ì— ë”°ë¼ ìƒì„±**í•˜ê±°ë‚˜ **ìš”ì²­ì— ë”°ë¼ ìƒì„±**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í…Œì´ë¸”ì— ëŒ€í•œ **ì‹œì  ë³µêµ¬ (PITR)ë¥¼ í™œì„±í™”**í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì‹œì  ë³µêµ¬ëŠ” DynamoDB ë°ì´í„°ë¥¼ **35ì¼ ë™ì•ˆ ì§€ì†ì ìœ¼ë¡œ ë°±ì—…**í•˜ì—¬ ìš°ë°œì ì¸ ì“°ê¸° ë˜ëŠ” ì‚­ì œ ì‘ì—…ìœ¼ë¡œë¶€í„° ë³´í˜¸í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.

ë˜í•œ í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ **S3ë¡œ ë‚´ë³´ë‚¼ ìˆ˜**ë„ ìˆì§€ë§Œ, í…Œì´ë¸”ì€ **PITRì´ í™œì„±í™”**ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

### GUI

[DynamoDB Local](https://aws.amazon.com/blogs/aws/dynamodb-local-for-desktop-development/), [dynalite](https://github.com/mhart/dynalite), [localstack](https://github.com/localstack/localstack) ë“±ê³¼ ê°™ì€ ë¡œì»¬ Dynamo ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ GUIì¸ [https://github.com/aaronshaf/dynamodb-admin](https://github.com/aaronshaf/dynamodb-admin)ì´ ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì—´ê±°

```bash
# Tables
aws dynamodb list-tables
aws dynamodb describe-table --table-name <t_name> #Get metadata info
## The primary key and sort key will appear inside the KeySchema field

#Check if point in time recovery is enabled
aws dynamodb describe-continuous-backups \
--table-name tablename

# Backups
aws dynamodb list-backups
aws dynamodb describe-backup --backup-arn <arn>
aws dynamodb describe-continuous-backups --table-name <t_name>

# Global tables
aws dynamodb list-global-tables
aws dynamodb describe-global-table --global-table-name <name>

# Exports
aws dynamodb list-exports
aws dynamodb describe-export --export-arn <arn>

# Misc
aws dynamodb describe-endpoints #Dynamodb endpoints
```

### ì¸ì¦ë˜ì§€ ì•Šì€ ì•¡ì„¸ìŠ¤

{% content-ref url="../aws-unauthenticated-enum-access/aws-dynamodb-unauthenticated-access.md" %}
[aws-dynamodb-unauthenticated-access.md](../aws-unauthenticated-enum-access/aws-dynamodb-unauthenticated-access.md)
{% endcontent-ref %}

### ê¶Œí•œ ìƒìŠ¹

{% content-ref url="../aws-privilege-escalation/aws-dynamodb-privesc.md" %}
[aws-dynamodb-privesc.md](../aws-privilege-escalation/aws-dynamodb-privesc.md)
{% endcontent-ref %}

### ì‚¬í›„ ì¹¨íˆ¬

{% content-ref url="../aws-post-exploitation/aws-dynamodb-post-exploitation.md" %}
[aws-dynamodb-post-exploitation.md](../aws-post-exploitation/aws-dynamodb-post-exploitation.md)
{% endcontent-ref %}

### ì§€ì†ì„±

{% content-ref url="../aws-persistence/aws-dynamodb-persistence.md" %}
[aws-dynamodb-persistence.md](../aws-persistence/aws-dynamodb-persistence.md)
{% endcontent-ref %}

## DynamoDB ì¸ì ì…˜

### SQL ì¸ì ì…˜

**SQL êµ¬ë¬¸**ì„ ì‚¬ìš©í•˜ì—¬ DynamoDB ë°ì´í„°ì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ë°©ë²•ì´ ìˆìœ¼ë¯€ë¡œ, ì¼ë°˜ì ì¸ **SQL ì¸ì ì…˜ë„ ê°€ëŠ¥**í•©ë‹ˆë‹¤.

{% embed url="https://book.hacktricks.xyz/pentesting-web/sql-injection" %}

### NoSQL ì¸ì ì…˜

DynamoDBì—ì„œëŠ” ì¼ë°˜ì ì¸ NoSQL ì¸ì ì…˜ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ **ì¡°ê±´**ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ **ì¶”ê°€ ì¡°ê±´ì„ ì—°ê²°**í•  ìˆ˜ ìˆë‹¤ë©´ ìˆ¨ê²¨ì§„ ë°ì´í„°ë¥¼ ì–»ê±°ë‚˜ ì „ì²´ í…Œì´ë¸”ì„ ë¤í”„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\
DynamoDBì—ì„œ ì§€ì›í•˜ëŠ” ì¡°ê±´ì€ ë‹¤ìŒì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API\_Condition.html](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API\_Condition.html)

ë°ì´í„°ê°€ **`query`** ë˜ëŠ” \*\*`scan`\*\*ì„ í†µí•´ ì•¡ì„¸ìŠ¤ë˜ëŠ” ê²½ìš° **ë‹¤ë¥¸ ì¡°ê±´**ì´ ì§€ì›ë©ë‹ˆë‹¤.

{% hint style="info" %}
ì‹¤ì œë¡œ **Query** ì‘ì—…ì€ ì‘ë™í•˜ê¸° ìœ„í•´ **ê¸°ë³¸ í‚¤ì—ì„œ "EQ" (equals) ì¡°ê±´**ì„ ì§€ì •í•´ì•¼ í•˜ë¯€ë¡œ NoSQL ì¸ì ì…˜ì— ëŒ€í•œ ì·¨ì•½ì„±ì´ í›¨ì”¬ **ë‚®ì•„ì§‘ë‹ˆë‹¤** (ë˜í•œ ì‘ì—…ì´ ë§¤ìš° ì œí•œë©ë‹ˆë‹¤).
{% endhint %}

ë¹„êµë˜ëŠ” **ë¹„êµ**ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ë¹„êµë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤ë©´ ë” ë§ì€ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# Comparators to dump the database
"NE": "a123" #Get everything that doesn't equal "a123"
"NOT_CONTAINS": "a123" #What you think
"GT": " " #All strings are greater than a space
```

{% embed url="https://book.hacktricks.xyz/pentesting-web/nosql-injection" %}

### Raw Json injection

**DynamoDB**ëŠ” DB ë‚´ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ **Json** ê°ì²´ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤. ê²€ìƒ‰ì— ì „ì†¡ëœ json ê°ì²´ì— ì“¸ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë°œê²¬í•˜ë©´, DB ë¤í”„ë¥¼ ìƒì„±í•˜ì—¬ ëª¨ë“  ë‚´ìš©ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì€ ìš”ì²­ì— ì£¼ì…í•˜ëŠ” ê²½ìš°:

{% code overflow="wrap" %}
```bash
'{"Id": {"ComparisonOperator": "EQ","AttributeValueList": [{"N": "' + user_input + '"}]}}'
```
{% endcode %}

ê³µê²©ìëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒì„ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

`1000"}],"ComparisonOperator": "GT","AttributeValueList": [{"N": "0`

"EQ" ì¡°ê±´ì„ ìˆ˜ì •í•˜ì—¬ ID 1000ì„ ê²€ìƒ‰í•œ ë‹¤ìŒ, 0ë³´ë‹¤ í° Id ë¬¸ìì—´ì„ ê°€ì§„ ëª¨ë“  ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### :property ì£¼ì…

ì¼ë¶€ SDKëŠ” ìˆ˜í–‰í•  í•„í„°ë§ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% code overflow="wrap" %}
```java
new ScanSpec().withProjectionExpression("UserName").withFilterExpression(user_input+" = :username and Password = :password").withValueMap(valueMap)
```
{% endcode %}

DynamoDBì—ì„œ í•­ëª©ì„ ìŠ¤ìº”í•˜ëŠ” ë™ì•ˆ **í•„í„° í‘œí˜„ì‹**ì—ì„œ ì†ì„± **ê°’ì„ ëŒ€ì²´**í•˜ê¸° ìœ„í•´ ê²€ìƒ‰ì„ ìˆ˜í–‰í•  ë•Œ, í† í°ì€ **`:`** ë¬¸ìë¡œ ì‹œì‘í•´ì•¼ í•¨ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í† í°ì€ ì‹¤í–‰ ì‹œ ì‹¤ì œ **ì†ì„± ê°’ìœ¼ë¡œ ëŒ€ì²´**ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ, ì´ì „ê³¼ ê°™ì€ ë¡œê·¸ì¸ì€ ë‹¤ìŒê³¼ ê°™ì´ ìš°íšŒë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
:username = :username or :username
# This will generate the query:
# :username = :username or :username = :username and Password = :password
# which is always true
```

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>
