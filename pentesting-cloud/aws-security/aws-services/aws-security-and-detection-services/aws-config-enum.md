# AWS - Konfiguracja Enum

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakowania, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na GitHubie.

</details>

## Konfiguracja AWS

AWS Config **rejestruje zmiany zasobÃ³w**, wiÄ™c kaÅ¼da zmiana w zasobie obsÅ‚ugiwanym przez Config moÅ¼e byÄ‡ zarejestrowana, co **zapisze, co siÄ™ zmieniÅ‚o wraz z innymi przydatnymi metadanymi, wszystko przechowywane w pliku znanym jako element konfiguracji**, CI. Ta usÅ‚uga jest **specyficzna dla regionu**.

Element konfiguracji lub **CI**, jak jest znany, jest kluczowym elementem AWS Config. SkÅ‚ada siÄ™ z pliku JSON, ktÃ³ry **zawiera informacje konfiguracyjne, informacje o relacjach i inne metadane jako widok migawki punktu w czasie obsÅ‚ugiwanego zasobu**. Wszystkie informacje, ktÃ³re AWS Config moÅ¼e zarejestrowaÄ‡ dla zasobu, sÄ… rejestrowane w CI. CI jest tworzony **za kaÅ¼dym razem**, gdy obsÅ‚ugiwany zasÃ³b ma dokonanÄ… zmianÄ™ w swojej konfiguracji w dowolny sposÃ³b. OprÃ³cz rejestrowania szczegÃ³Å‚Ã³w dotyczÄ…cych dotkniÄ™tego zasobu, AWS Config zarejestruje rÃ³wnieÅ¼ CI dla wszelkich bezpoÅ›rednio powiÄ…zanych zasobÃ³w, aby upewniÄ‡ siÄ™, Å¼e zmiana nie wpÅ‚ynÄ™Å‚a rÃ³wnieÅ¼ na te zasoby.

* **Metadane**: Zawiera szczegÃ³Å‚y dotyczÄ…ce samego elementu konfiguracji. Identyfikator wersji i identyfikator konfiguracji, ktÃ³ry jednoznacznie identyfikuje CI. Inne informacje mogÄ… obejmowaÄ‡ skrÃ³t MD5Hash, ktÃ³ry pozwala porÃ³wnaÄ‡ inne juÅ¼ zarejestrowane CI dla tego samego zasobu.
* **Atrybuty**: Zawiera wspÃ³lne **informacje atrybutÃ³w dotyczÄ…ce rzeczywistego zasobu**. W tej sekcji znajduje siÄ™ rÃ³wnieÅ¼ unikalny identyfikator zasobu oraz wszelkie tagi klucz-wartoÅ›Ä‡ zwiÄ…zane z zasobem. Typ zasobu jest rÃ³wnieÅ¼ wymieniony. Na przykÅ‚ad, jeÅ›li byÅ‚ to CI dla instancji EC2, wymienione mogÄ… byÄ‡ typy zasobÃ³w, takie jak interfejs sieciowy lub adres IP elastyczny dla tej instancji EC2.
* **Relacje**: Zawiera informacje o jakiejkolwiek poÅ‚Ä…czonej **relacji, jakÄ… zasÃ³b moÅ¼e mieÄ‡**. W tej sekcji zostanie wyÅ›wietlone jasne opisanie jakiejkolwiek relacji do innych zasobÃ³w, jakÄ… ma ten zasÃ³b. Na przykÅ‚ad, jeÅ›li CI dotyczyÅ‚by instancji EC2, sekcja relacji mogÅ‚aby pokazaÄ‡ poÅ‚Ä…czenie z VPC oraz podsieciÄ…, w ktÃ³rej znajduje siÄ™ instancja EC2.
* **BieÅ¼Ä…ca konfiguracja:** WyÅ›wietli te same informacje, ktÃ³re zostaÅ‚yby wygenerowane, gdybyÅ› wykonaÅ‚ wywoÅ‚anie API describe lub list za pomocÄ… AWS CLI. AWS Config uÅ¼ywa tych samych wywoÅ‚aÅ„ API, aby uzyskaÄ‡ te same informacje.
* **PowiÄ…zane zdarzenia**: Dotyczy to AWS CloudTrail. WyÅ›wietli to **identyfikator zdarzenia AWS CloudTrail zwiÄ…zany z zmianÄ…, ktÃ³ra spowodowaÅ‚a utworzenie tego CI**. Dla kaÅ¼dej zmiany dokonanej w zasobie tworzy siÄ™ nowe CI. W rezultacie zostanÄ… utworzone rÃ³Å¼ne identyfikatory zdarzeÅ„ CloudTrail.

**Historia konfiguracji**: DziÄ™ki elementom konfiguracji moÅ¼na uzyskaÄ‡ historiÄ™ konfiguracji zasobÃ³w. Historia konfiguracji jest dostarczana co 6 godzin i zawiera wszystkie CI dla okreÅ›lonego typu zasobu.

**Strumienie konfiguracji**: Elementy konfiguracji sÄ… wysyÅ‚ane do tematu SNS, aby umoÅ¼liwiÄ‡ analizÄ™ danych.

**Migawki konfiguracji**: Elementy konfiguracji sÄ… uÅ¼ywane do utworzenia migawki punktu w czasie wszystkich obsÅ‚ugiwanych zasobÃ³w.

**S3 jest uÅ¼ywane do przechowywania** plikÃ³w historii konfiguracji oraz wszelkich migawek konfiguracji Twoich danych w jednym kubeÅ‚ku, ktÃ³ry jest zdefiniowany w rejestratorze konfiguracji. JeÅ›li masz wiele kont AWS, moÅ¼esz chcieÄ‡ zebraÄ‡ pliki historii konfiguracji do tego samego kubeÅ‚ka S3 dla swojego gÅ‚Ã³wnego konta. Musisz jednak udzieliÄ‡ dostÄ™pu do zapisu dla tego zasobu, config.amazonaws.com, oraz Twoich dodatkowych kont z dostÄ™pem do zapisu do kubeÅ‚ka S3 w Twoim gÅ‚Ã³wnym koncie.

### Funkcjonowanie

* Gdy dokonujesz zmian, na przykÅ‚ad w grupie zabezpieczeÅ„ lub liÅ›cie kontroli dostÄ™pu do kubeÅ‚ka â€”> wywoÅ‚uje to zdarzenie, ktÃ³re jest wykrywane przez AWS Config
* Wszystko jest przechowywane w kubeÅ‚ku S3
* W zaleÅ¼noÅ›ci od konfiguracji, gdy coÅ› siÄ™ zmienia, moÅ¼e to wywoÅ‚aÄ‡ funkcjÄ™ lambda LUB zaplanowaÄ‡ funkcjÄ™ lambda do okresowego przeglÄ…dania ustawieÅ„ AWS Config
* Funkcja lambda przekazuje informacje zwrotne do Config
* JeÅ›li reguÅ‚a zostaÅ‚a naruszona, Config uruchamia SNS

![](<../../../../.gitbook/assets/image (126).png>)

### ReguÅ‚y konfiguracji

ReguÅ‚y konfiguracji sÄ… doskonaÅ‚ym sposobem pomagajÄ…cym **egzekwowaÄ‡ konkretne kontrole zgodnoÅ›ci** **i kontrole wÅ›rÃ³d Twoich zasobÃ³w**, co pozwala przyjÄ…Ä‡ idealnÄ… specyfikacjÄ™ wdroÅ¼enia dla kaÅ¼dego typu zasobu. KaÅ¼da reguÅ‚a **jest w zasadzie funkcjÄ… lambda**, ktÃ³ra po wywoÅ‚aniu ocenia zasÃ³b i wykonuje prostÄ… logikÄ™ w celu okreÅ›lenia zgodnoÅ›ci z reguÅ‚Ä…. **Za kaÅ¼dym razem, gdy dokonana jest zmiana** w jednym z obsÅ‚ugiwanych zasobÃ³w, **AWS Config sprawdzi zgodnoÅ›Ä‡ z reguÅ‚ami konfiguracji, ktÃ³re masz ustawione**.\
AWS ma wiele **predefiniowanych reguÅ‚**, ktÃ³re wpisujÄ… siÄ™ w ramy bezpieczeÅ„stwa i sÄ… gotowe do uÅ¼ycia. Na przykÅ‚ad, Rds-storage-encrypted. Sprawdza, czy szyfrowanie magazynu jest aktywowane przez Twoje instancje bazy danych RDS. Encrypted-volumes. Sprawdza, czy jakiekolwiek woluminy EBS, ktÃ³re majÄ… stan doÅ‚Ä…czony, sÄ… zaszyfrowane.

* **ZarzÄ…dzane reguÅ‚y AWS**: Zestaw predefiniowanych reguÅ‚, ktÃ³re obejmujÄ… wiele najlepszych praktyk, wiÄ™c zawsze warto najpierw przejrzeÄ‡ te reguÅ‚y, zanim utworzysz wÅ‚asne, poniewaÅ¼ istnieje szansa, Å¼e reguÅ‚a juÅ¼ istnieje.
* **ReguÅ‚y niestandardowe**: MoÅ¼esz tworzyÄ‡ wÅ‚asne reguÅ‚y, aby sprawdziÄ‡ okreÅ›lone niestandardowe konfiguracje.

Limit 50 reguÅ‚ konfiguracji na region, zanim bÄ™dziesz musiaÅ‚ skontaktowaÄ‡ siÄ™ z AWS o zwiÄ™kszenie.\
Niezgodne wyniki NIE sÄ… usuwane.

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakowania, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w na GitHubie.

</details>
