# AWS - Config Enum

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju oglaÅ¡enu u HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## AWS Config

AWS Config **snima promene resursa**, tako da se svaka promena resursa podrÅ¾ana od strane Config-a moÅ¾e zabeleÅ¾iti, Å¡to Ä‡e **zabeleÅ¾iti Å¡ta se promenilo zajedno sa drugim korisnim metapodacima, sve smeÅ¡teno u datoteku poznatu kao konfiguraciona stavka**, CI.
Ova usluga je **specifiÄna za region**.

Konfiguraciona stavka ili **CI**, kako je poznata, je kljuÄna komponenta AWS Config-a. Sastoji se od JSON datoteke koja **sadrÅ¾i informacije o konfiguraciji, informacije o odnosima i druge metapodatke kao trenutni prikaz taÄke u vremenu podrÅ¾anog resursa**. Sve informacije koje AWS Config moÅ¾e zabeleÅ¾iti za resurs su snimljene unutar CI-ja. CI se kreira **svaki put** kada se podrÅ¾ani resurs promeni na bilo koji naÄin. Osim Å¡to zabeleÅ¾ava detalje o pogoÄ‘enom resursu, AWS Config Ä‡e takoÄ‘e zabeleÅ¾iti CI-jeve za sve direktno povezane resurse kako bi se osiguralo da promena nije uticala na te resurse.

* **Metapodaci**: SadrÅ¾e detalje o samoj konfiguracionoj stavki. ID verzije i ID konfiguracije, koji jedinstveno identifikuju CI. Ostale informacije mogu ukljuÄivati MD5Hash koji vam omoguÄ‡ava poreÄ‘enje drugih veÄ‡ zabeleÅ¾enih CI-jeva protiv istog resursa.
* **Atributi**: Ovo sadrÅ¾i zajedniÄke **informacije o atributima stvarnog resursa**. U okviru ove sekcije, takoÄ‘e imamo jedinstveni ID resursa i bilo koje oznake kljuÄ-vrednost koje su povezane sa resursom. TakoÄ‘e je naveden tip resursa. Na primer, ako je ovo CI za instancu EC2, navedeni tipovi resursa mogu biti mreÅ¾ni interfejs ili elastiÄna IP adresa za tu instancu EC2.
* **Odnosi**: Ovo sadrÅ¾i informacije o bilo kojem povezanom **odnosu koji resurs moÅ¾e imati**. Dakle, u okviru ove sekcije bi se prikazao jasan opis bilo kakvog odnosa sa drugim resursima koje ovaj resurs ima. Na primer, ako je CI za instancu EC2, sekcija odnosa moÅ¾e prikazivati vezu sa VPC-om zajedno sa podmreÅ¾om u kojoj se nalazi instanca EC2.
* **Trenutna konfiguracija**: Ovde Ä‡e biti prikazane iste informacije koje bi bile generisane ako biste izvrÅ¡ili API poziv describe ili list putem AWS CLI-ja. AWS Config koristi iste API pozive da bi dobio iste informacije.
* **Povezani dogaÄ‘aji**: Ovo se odnosi na AWS CloudTrail. Ovde Ä‡e biti prikazan **ID dogaÄ‘aja AWS CloudTrail-a koji je povezan sa promenom koja je pokrenula kreiranje ovog CI-ja**. Za svaku promenu koja je napravljena na resursu, kreira se novi CI. Kao rezultat toga, biÄ‡e kreirani razliÄiti ID-jevi dogaÄ‘aja CloudTrail-a.

**Istorija konfiguracije**: MoguÄ‡e je dobiti istoriju konfiguracije resursa zahvaljujuÄ‡i konfiguracionim stavkama. Istorija konfiguracije se isporuÄuje svakih 6 sati i sadrÅ¾i sve CI-jeve za odreÄ‘eni tip resursa.

**Tokovi konfiguracije**: Konfiguracione stavke se Å¡alju na SNS temu kako bi se omoguÄ‡ila analiza podataka.

**Snimci konfiguracije**: Konfiguracione stavke se koriste za kreiranje trenutnog snimka svih podrÅ¾anih resursa.

**S3 se koristi za skladiÅ¡tenje** datoteka istorije konfiguracije i svih snimaka konfiguracije vaÅ¡ih podataka unutar jednog kantiÄara, koji je definisan unutar konfiguracionog snimaÄa. Ako imate viÅ¡e AWS naloga, moÅ¾da Ä‡ete Å¾eleti da agregirate datoteke istorije konfiguracije u isti S3 kantiÄar za svoj primarni nalog. MeÄ‘utim, moraÄ‡ete da dodelite prava za pisanje ovom servisnom principu, config.amazonaws.com, i vaÅ¡im sekundarnim nalozima sa pravom pisanja u S3 kantiÄar u vaÅ¡em primarnom nalogu.

### Funkcionisanje

* Kada napravite promene, na primer u kontrolnoj listi pristupa sigurnosnoj grupi ili kanti â€”> pokreÄ‡e se kao dogaÄ‘aj koji AWS Config prepoznaje
* Sve se Äuva u S3 kantiÄaru
* Zavisno od podeÅ¡avanja, Äim se neÅ¡to promeni, moÅ¾e pokrenuti lambda funkciju ILI zakazati lambda funkciju da periodiÄno pregleda AWS Config podeÅ¡avanja
* Lambda vraÄ‡a povratne informacije Config-u
* Ako je pravilo prekrÅ¡eno, Config pokreÄ‡e SNS

![](<../../../../.gitbook/assets/image (46).png>)

### Pravila konfiguracije

Pravila konfiguracije su odliÄan naÄin da vam pomognu da **primenite odreÄ‘ene provere usaglaÅ¡enosti** **i kontrole na svoje resurse**, i omoguÄ‡avaju vam da usvojite idealnu specifikaciju implementacije za svaki od vaÅ¡ih tipova resursa. Svako pravilo **je suÅ¡tinski lambda funkcija** koja se, kada se pozove, procenjuje resurs i izvrÅ¡ava neku jednostavnu logiku kako bi se odredio rezultat usaglaÅ¡enosti sa pravilom. **Svaki put kada se napravi promena** na jednom od vaÅ¡ih podrÅ¾anih resursa, **AWS Config Ä‡e proveriti usaglaÅ¡enost sa svim pravilima konfiguracije koja ste postavili**.\
AWS ima nekoliko **unapred definisanih pravila** koja spadaju pod sigurnosni kiÅ¡obran i spremna su za upotrebu. Na primer, Rds-storage-encrypted. Ovo proverava da li je enkripcija skladiÅ¡tenja aktivirana za vaÅ¡e RDS baze podataka. Encrypted-volumes. Ovo proverava da li su enkriptovani bilo koji EBS volumeni koji imaju priloÅ¾eno stanje.

* **AWS Managed pravila**: Skup unapred definisanih pravila koja pokrivaju mnoge najbolje prakse, pa je uvek vredno pregledati ova pravila pre nego Å¡to postavite svoja, jer postoji Å¡ansa da pravilo veÄ‡ postoji.
* **PrilagoÄ‘ena pravila**: MoÅ¾ete kreirati svoja pravila kako
