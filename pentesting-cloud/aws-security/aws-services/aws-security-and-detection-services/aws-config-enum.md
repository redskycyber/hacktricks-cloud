# AWS - Konfiguracija Enum

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## AWS Konfiguracija

AWS Config **snima promene resursa**, tako da se svaka promena resursa podrÅ¾anog od strane Config-a moÅ¾e zabeleÅ¾iti, Å¡to Ä‡e **zabeleÅ¾iti Å¡ta se promenilo zajedno sa drugim korisnim metapodacima, sve smeÅ¡teno u datoteku poznatu kao konfiguraciona stavka**, CI. Ova usluga je **specifiÄna za region**.

Konfiguraciona stavka ili **CI** kako je poznata, kljuÄna je komponenta AWS Config-a. Sastoji se od JSON datoteke koja **drÅ¾i informacije o konfiguraciji, informacije o odnosima i druge metapodatke kao trenutni prikaz podrÅ¾anog resursa**. Sve informacije koje AWS Config moÅ¾e zabeleÅ¾iti za resurs su zabeleÅ¾ene unutar CI-ja. CI se kreira **svaki put** kada se podrÅ¾ani resurs promeni na bilo koji naÄin. Pored zabeleÅ¾enih detalja o pogoÄ‘enom resursu, AWS Config Ä‡e takoÄ‘e zabeleÅ¾iti CI-jeve za sve direktno povezane resurse kako bi se osiguralo da promena nije uticala na te resurse.

* **Metapodaci**: SadrÅ¾i detalje o samoj konfiguracionoj stavci. ID verzije i ID konfiguracije, koji jedinstveno identifikuju CI. Ostale informacije mogu ukljuÄivati MD5Hash koji vam omoguÄ‡ava poreÄ‘enje drugih veÄ‡ zabeleÅ¾enih CI-jeva protiv istog resursa.
* **Atributi**: Ovde se drÅ¾e zajedniÄke **informacije o atributima protiv stvarnog resursa**. U okviru ove sekcije, takoÄ‘e imamo jedinstveni ID resursa, i sve oznake kljuÄnih vrednosti koje su povezane sa resursom. TakoÄ‘e je naveden tip resursa. Na primer, ako je ovo CI za instancu EC2, navedeni tipovi resursa mogu biti mreÅ¾ni interfejs ili elastiÄna IP adresa za tu instancu EC2.
* **Odnosi**: Ovde se drÅ¾e informacije o bilo kojem povezanom **odnosu koji resurs moÅ¾e imati**. Dakle, u ovoj sekciji bi se prikazao jasan opis bilo kog odnosa sa drugim resursima koje ovaj resurs ima. Na primer, ako je CI za instancu EC2, sekcija odnosa moÅ¾e prikazati povezanost sa VPC-om zajedno sa podmreÅ¾om u kojoj se nalazi instanca EC2.
* **Trenutna konfiguracija**: PrikazaÄ‡e iste informacije koje bi bile generisane ako biste izvrÅ¡ili API poziv za opis ili listu putem AWS CLI-ja. AWS Config koristi iste API pozive da bi dobio iste informacije.
* **Povezani dogaÄ‘aji**: Odnosi se na AWS CloudTrail. PrikazaÄ‡e **ID dogaÄ‘aja AWS CloudTrail-a koji je povezan sa promenom koja je pokrenula kreiranje ovog CI-ja**. Za svaku promenu napravljenu protiv resursa kreira se novi CI. Kao rezultat toga, biÄ‡e kreirani razliÄiti ID-ovi dogaÄ‘aja CloudTrail-a.

**Istorija konfiguracije**: MoguÄ‡e je dobiti istoriju konfiguracije resursa zahvaljujuÄ‡i konfiguracionim stavkama. Istorija konfiguracije se isporuÄuje svakih 6 sati i sadrÅ¾i sve CI-jeve za odreÄ‘eni tip resursa.

**Tokovi konfiguracije**: Konfiguracione stavke se Å¡alju na SNS temu kako bi se omoguÄ‡ila analiza podataka.

**Snapshotovi konfiguracije**: Konfiguracione stavke se koriste za kreiranje trenutnog snimka svih podrÅ¾anih resursa.

**S3 se koristi za skladiÅ¡tenje** datoteka istorije konfiguracije i svih snimaka konfiguracije vaÅ¡ih podataka unutar jedne kante, koja je definisana unutar snimaÄa konfiguracije. Ako imate viÅ¡e AWS naloga, moÅ¾da Ä‡ete Å¾eleti da agregirate datoteke istorije konfiguracije u istu S3 kantu za vaÅ¡ primarni nalog. MeÄ‘utim, moraÄ‡ete da odobrite pristup za pisanje ovom servisnom principu, config.amazonaws.com, i vaÅ¡im sekundarnim nalozima sa pristupom za pisanje u S3 kantu u vaÅ¡em primarnom nalogu.

### Funkcionisanje

* Kada napravite promene, na primer u kontrolnoj listi pristupa sigurnosnoj grupi ili kanti â€”> pokreÄ‡e se kao dogaÄ‘aj koji prepoznaje AWS Config
* Sve se Äuva u S3 kanti
* Zavisno od postavke, Äim se neÅ¡to promeni, to bi moglo pokrenuti lambda funkciju ILI zakazati lambda funkciju da periodiÄno pregleda postavke AWS Config-a
* Lambda vraÄ‡a povratnu informaciju Config-u
* Ako je pravilo prekrÅ¡eno, Config pokreÄ‡e SNS

![](<../../../../.gitbook/assets/image (126).png>)

### Pravila konfiguracije

Pravila konfiguracije su odliÄan naÄin da vam pomognu **sprovedete odreÄ‘ene provere usaglaÅ¡enosti** **i kontrole preko vaÅ¡ih resursa**, i omoguÄ‡avaju vam da usvojite idealnu specifikaciju implementacije za svaku vrstu resursa. Svako pravilo **je u osnovi lambda funkcija** koja kada se pozove procenjuje resurs i sprovodi neku jednostavnu logiku kako bi odredila usaglaÅ¡enost sa pravilom. **Svaki put kada se napravi promena** na jednom od vaÅ¡ih podrÅ¾anih resursa, **AWS Config Ä‡e proveriti usaglaÅ¡enost sa svim pravilima konfiguracije koje imate**.\
AWS ima nekoliko **unapred definisanih pravila** koja spadaju pod sigurnosni kiÅ¡obran i spremna su za upotrebu. Na primer, Rds-storage-encrypted. Ovo proverava da li je enkripcija skladiÅ¡ta aktivirana za vaÅ¡e RDS baze podataka. Encrypted-volumes. Ovo proverava da li su enkriptovani bilo koji EBS volumeni koji imaju priloÅ¾eno stanje.

* **AWS Upravljana pravila**: Set unapred definisanih pravila koja pokrivaju mnoge najbolje prakse, pa je uvek vredno pregledati ova pravila pre nego Å¡to postavite svoja jer postoji Å¡ansa da pravilo veÄ‡ postoji.
* **PrilagoÄ‘ena pravila**: MoÅ¾ete kreirati svoja pravila da proverite specifiÄne prilagoÄ‘ene konfiguracije.

Limit od 50 pravila konfiguracije po regionu pre nego Å¡to morate kontaktirati AWS za poveÄ‡anje.\
Nesaglasni rezultati NISU izbrisani.

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite **vaÅ¡u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
