# AWS - Konfiguracja Enum

<details>

<summary><strong>Dowiedz siÄ™, jak hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## AWS Config

AWS Config **rejestruje zmiany zasobÃ³w**, wiÄ™c kaÅ¼da zmiana w zasobie obsÅ‚ugiwanym przez Config moÅ¼e byÄ‡ zarejestrowana, co **zapisuje, co siÄ™ zmieniÅ‚o wraz z innymi przydatnymi metadanymi, wszystko przechowywane w pliku znanych jako element konfiguracji**, CI.
Ta usÅ‚uga jest **specyficzna dla regionu**.

Element konfiguracji lub **CI**, jak jest znany, jest kluczowym elementem AWS Config. SkÅ‚ada siÄ™ on z pliku JSON, ktÃ³ry **zawiera informacje o konfiguracji, informacje o relacjach i inne metadane jako widok migawki w punkcie w czasie obsÅ‚ugiwanego zasobu**. Wszystkie informacje, ktÃ³re AWS Config moÅ¼e zarejestrowaÄ‡ dla zasobu, sÄ… rejestrowane w CI. CI jest tworzony **za kaÅ¼dym razem**, gdy obsÅ‚ugiwany zasÃ³b ma wprowadzonÄ… zmianÄ™ w swojej konfiguracji w dowolny sposÃ³b. OprÃ³cz rejestrowania szczegÃ³Å‚Ã³w dotyczÄ…cych dotkniÄ™tego zasobu, AWS Config zarejestruje rÃ³wnieÅ¼ CI dla wszystkich bezpoÅ›rednio powiÄ…zanych zasobÃ³w, aby upewniÄ‡ siÄ™, Å¼e zmiana nie wpÅ‚ynÄ™Å‚a rÃ³wnieÅ¼ na te zasoby.

* **Metadane**: Zawiera szczegÃ³Å‚y dotyczÄ…ce samego elementu konfiguracji. Identyfikator wersji i identyfikator konfiguracji, ktÃ³re jednoznacznie identyfikujÄ… CI. Inne informacje mogÄ… obejmowaÄ‡ skrÃ³t MD5Hash, ktÃ³ry umoÅ¼liwia porÃ³wnanie innych juÅ¼ zarejestrowanych CI dla tego samego zasobu.
* **Atrybuty**: Zawiera wspÃ³lne **informacje o atrybutach dotyczÄ…cych rzeczywistego zasobu**. W tej sekcji znajduje siÄ™ rÃ³wnieÅ¼ unikalny identyfikator zasobu oraz wszelkie tagi klucz-wartoÅ›Ä‡ powiÄ…zane z zasobem. Wymieniony jest rÃ³wnieÅ¼ typ zasobu. Na przykÅ‚ad, jeÅ›li byÅ‚ to CI dla instancji EC2, wymienione mogÄ… byÄ‡ typy zasobÃ³w, takie jak interfejs sieciowy lub adres IP elastyczny dla tej instancji EC2.
* **Relacje**: Zawiera informacje o dowolnych powiÄ…zanych **relacjach, jakie zasÃ³b moÅ¼e mieÄ‡**. W tej sekcji zostanie wyÅ›wietlone jasne opisanie kaÅ¼dej relacji z innymi zasobami, jakie ma ten zasÃ³b. Na przykÅ‚ad, jeÅ›li CI dotyczyÅ‚ instancji EC2, sekcja relacji moÅ¼e pokazywaÄ‡ poÅ‚Ä…czenie z VPC oraz podsieÄ‡, w ktÃ³rej znajduje siÄ™ instancja EC2.
* **BieÅ¼Ä…ca konfiguracja**: WyÅ›wietli te same informacje, ktÃ³re byÅ‚yby generowane, gdybyÅ› wykonaÅ‚ wywoÅ‚anie API describe lub list za pomocÄ… AWS CLI. AWS Config uÅ¼ywa tych samych wywoÅ‚aÅ„ API, aby uzyskaÄ‡ te same informacje.
* **PowiÄ…zane zdarzenia**: Dotyczy to AWS CloudTrail. WyÅ›wietli **ID zdarzenia AWS CloudTrail, ktÃ³re jest zwiÄ…zane ze zmianÄ…, ktÃ³ra spowodowaÅ‚a utworzenie tego CI**. Dla kaÅ¼dej zmiany wprowadzonej w zasobie tworzony jest nowy CI. W rezultacie bÄ™dÄ… tworzone rÃ³Å¼ne identyfikatory zdarzeÅ„ CloudTrail.

**Historia konfiguracji**: DziÄ™ki elementom konfiguracji moÅ¼na uzyskaÄ‡ historiÄ™ konfiguracji zasobÃ³w. Historia konfiguracji jest dostarczana co 6 godzin i zawiera wszystkie CI dla okreÅ›lonego typu zasobu.

**Strumienie konfiguracji**: Elementy konfiguracji sÄ… wysyÅ‚ane do tematu SNS, aby umoÅ¼liwiÄ‡ analizÄ™ danych.

**Migawki konfiguracji**: Elementy konfiguracji sÄ… uÅ¼ywane do utworzenia migawki w punkcie w czasie wszystkich obsÅ‚ugiwanych zasobÃ³w.

**S3 jest uÅ¼ywane do przechowywania** plikÃ³w historii konfiguracji i migawek konfiguracji Twoich danych w jednym kubeÅ‚ku, ktÃ³ry jest zdefiniowany w rejestratorze konfiguracji. JeÅ›li masz wiele kont AWS, moÅ¼esz chcieÄ‡ agregowaÄ‡ pliki historii konfiguracji do tego samego kubeÅ‚ka S3 dla swojego gÅ‚Ã³wnego konta. Jednak bÄ™dziesz musiaÅ‚ udzieliÄ‡ dostÄ™pu do zapisu dla tej usÅ‚ugi, config.amazonaws.com, oraz Twoim kontom podrzÄ™dnym z dostÄ™pem do zapisu do kubeÅ‚ka S3 w Twoim gÅ‚Ã³wnym koncie.

### Funkcjonowanie

* Gdy dokonujesz zmian, na przykÅ‚ad w grupie zabezpieczeÅ„ lub liÅ›cie kontroli dostÄ™pu do kubeÅ‚ka â€”> wywoÅ‚uje to zdarzenie, ktÃ³re jest wykrywane przez AWS Config
* Wszystko jest przechowywane w kubeÅ‚ku S3
* W zaleÅ¼noÅ›ci od konfiguracji, gdy coÅ› siÄ™ zmienia, moÅ¼e to spowodowaÄ‡ uruchomienie funkcji lambda LUB zaplanowanie funkcji lambda do okresowego przeglÄ…dania ustawieÅ„ AWS Config
* Funkcja lambda przekazuje informacje zwrotne do Config
* JeÅ›li reguÅ‚a zostaÅ‚a naruszona, Config uruchamia SNS

![](<../../../../.gitbook/assets/image (46).png>)

### ReguÅ‚y konfiguracji

ReguÅ‚y konfiguracji sÄ… doskonaÅ‚ym sposobem **na wymuszanie okreÅ›lonych sprawdzeÅ„ zgodnoÅ›ci** **i kontroli dla Twoich zasobÃ³w**, pozwalajÄ…c na przyjÄ™cie idealnej specyfikacji wdroÅ¼enia dla kaÅ¼dego typu zasobu. KaÅ¼da reguÅ‚a **to w zasadzie funkcja lambda**, ktÃ³ra po wywoÅ‚aniu ocenia zasÃ³b i wykonuje prostÄ… logikÄ™ w celu okreÅ›lenia zgodnoÅ›ci z reguÅ‚Ä…. **Za kaÅ¼dym razem, gdy dokonana zostaje zmiana** w jednym z obsÅ‚ugiwanych zasobÃ³w, **AWS Config sprawdzi zgodnoÅ›Ä‡ z reguÅ‚ami konfiguracji, ktÃ³re masz ustawione**.\
AWS ma wiele **predefiniowanych reguÅ‚**, ktÃ³re wpisujÄ… siÄ™ w ramy bezpieczeÅ„stwa i sÄ… gotowe do uÅ¼ycia. Na przykÅ‚ad, Rds-storage-encrypted. Sprawdza, czy szyfrowanie magazynu jest aktywowane dla instancji bazy danych RDS. Encrypted-volumes. Sprawdza, czy jakiekolwiek woluminy EBS, ktÃ³re majÄ… stan podÅ‚Ä…czony, sÄ… zaszyfrowane.

* **ZarzÄ…dzane reguÅ‚y AWS**: Zestaw predefiniowanych reguÅ‚, ktÃ³re obejmujÄ… wiele najlepszych praktyk, wiÄ™c zawsze warto najpierw przeglÄ…dnÄ…Ä‡ te reguÅ‚y, zanim utworzysz wÅ‚asne, poniewaÅ¼ istnieje szansa, Å¼e reguÅ‚a juÅ¼ istnieje.
* **WÅ‚asne reguÅ‚y**: MoÅ¼esz tworzyÄ‡ wÅ‚asne reguÅ‚y, aby sprawdzaÄ‡ okreÅ›lone niestandardowe konfiguracje.

Limit 50 reguÅ‚ konfiguracji na region
