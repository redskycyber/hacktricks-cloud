# AWS - Macie Enum

<details>

<summary><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

# Macie

Amazon Macie, bir AWS hesabÄ± iÃ§indeki verileri otomatik olarak tespit etmek, sÄ±nÄ±flandÄ±rmak ve tanÄ±mlamak iÃ§in tasarlanmÄ±ÅŸ bir hizmet olarak Ã¶ne Ã§Ä±kar. Makine Ã¶ÄŸrenimini kullanarak verileri sÃ¼rekli olarak izler ve analiz eder, Ã¶ncelikli olarak bulut izi etkinlik verilerini ve kullanÄ±cÄ± davranÄ±ÅŸ kalÄ±plarÄ±nÄ± inceleyerek olaÄŸandÄ±ÅŸÄ± veya ÅŸÃ¼pheli faaliyetleri tespit eder ve uyarÄ±r.

Amazon Macie'nin Temel Ã–zellikleri:

1. **Etkin Veri Ä°ncelemesi**: AWS hesabÄ±nda Ã§eÅŸitli eylemler gerÃ§ekleÅŸtiÄŸinde verileri etkin olarak incelemek iÃ§in makine Ã¶ÄŸrenimini kullanÄ±r.
2. **Anormallik Tespiti**: DÃ¼zensiz faaliyetleri veya eriÅŸim desenlerini tanÄ±mlar, potansiyel veri maruziyeti risklerini azaltmak iÃ§in uyarÄ±lar oluÅŸturur.
3. **SÃ¼rekli Ä°zleme**: Amazon S3'te yeni verileri otomatik olarak izler ve tespit eder, zamanla veri eriÅŸim desenlerine uyum saÄŸlamak iÃ§in makine Ã¶ÄŸrenimi ve yapay zeka kullanÄ±r.
4. **DoÄŸal Dil Ä°ÅŸleme ile Veri SÄ±nÄ±flandÄ±rma**: FarklÄ± veri tÃ¼rlerini sÄ±nÄ±flandÄ±rmak ve yorumlamak iÃ§in doÄŸal dil iÅŸleme (NLP) kullanÄ±r, bulgularÄ± Ã¶nceliklendirmek iÃ§in risk puanlarÄ± atar.
5. **GÃ¼venlik Ä°zleme**: API anahtarlarÄ±, gizli anahtarlar ve kiÅŸisel bilgiler de dahil olmak Ã¼zere gÃ¼venlik aÃ§Ä±sÄ±ndan hassas verileri tanÄ±mlar, veri sÄ±zÄ±ntÄ±larÄ±nÄ± Ã¶nlemeye yardÄ±mcÄ± olur.

Amazon Macie, bir **bÃ¶lgesel hizmet**tir ve iÅŸlevselliÄŸi iÃ§in 'AWSMacieServiceCustomerSetupRole' IAM RolÃ¼ ve etkinleÅŸtirilmiÅŸ bir AWS CloudTrail gerektirir.

## UyarÄ± Sistemi

Macie, uyarÄ±larÄ± Ã¶nceden tanÄ±mlanmÄ±ÅŸ kategorilere ayÄ±rÄ±r, Ã¶rneÄŸin:

- Anonim eriÅŸim
- Veri uyumluluÄŸu
- Kimlik Bilgisi KaybÄ±
- Yetki yÃ¼kseltme
- Fidye yazÄ±lÄ±mÄ±
- ÅÃ¼pheli eriÅŸim, vb.

Bu uyarÄ±lar etkili yanÄ±t ve Ã§Ã¶zÃ¼m iÃ§in detaylÄ± aÃ§Ä±klamalar ve sonuÃ§ ayrÄ±ntÄ±larÄ± saÄŸlar.

## GÃ¶sterge Tablosu Ã–zellikleri

GÃ¶sterge tablosu, verileri aÅŸaÄŸÄ±daki bÃ¶lÃ¼mlere ayÄ±rÄ±r:

- S3 Nesneleri (zaman aralÄ±ÄŸÄ±na, ACL'ye, PII'ye gÃ¶re)
- YÃ¼ksek riskli CloudTrail olaylarÄ±/kullanÄ±cÄ±lar
- Faaliyet Yerleri
- CloudTrail kullanÄ±cÄ± kimlik tÃ¼rleri ve daha fazlasÄ±.

## KullanÄ±cÄ± SÄ±nÄ±flandÄ±rmasÄ±

KullanÄ±cÄ±lar, API Ã§aÄŸrÄ±larÄ±nÄ±n risk seviyesine gÃ¶re sÄ±nÄ±flandÄ±rÄ±lÄ±r:

- **Platin**: YÃ¼ksek riskli API Ã§aÄŸrÄ±larÄ±, genellikle yÃ¶netici ayrÄ±calÄ±klarÄ±yla.
- **AltÄ±n**: AltyapÄ±yla ilgili API Ã§aÄŸrÄ±larÄ±.
- **GÃ¼mÃ¼ÅŸ**: Orta riskli API Ã§aÄŸrÄ±larÄ±.
- **Bronz**: DÃ¼ÅŸÃ¼k riskli API Ã§aÄŸrÄ±larÄ±.

## Kimlik TÃ¼rleri

Kimlik tÃ¼rleri, KÃ¶k, IAM kullanÄ±cÄ±sÄ±, VarsayÄ±lan Rol, Federasyon KullanÄ±cÄ±sÄ±, AWS HesabÄ± ve AWS Hizmeti olmak Ã¼zere isteklerin kaynaÄŸÄ±nÄ± belirtir.

## Veri SÄ±nÄ±flandÄ±rma

Veri sÄ±nÄ±flandÄ±rmasÄ± ÅŸunlarÄ± kapsar:

- Ä°Ã§erik TÃ¼rÃ¼: AlgÄ±lanan iÃ§erik tÃ¼rÃ¼ne gÃ¶re.
- Dosya UzantÄ±sÄ±: Dosya uzantÄ±sÄ±na gÃ¶re.
- Tema: Dosyalar iÃ§indeki anahtar kelimelere gÃ¶re kategorize edilir.
- Regex: Belirli regex desenlerine gÃ¶re kategorize edilir.

Bu kategoriler arasÄ±nda en yÃ¼ksek risk, dosyanÄ±n nihai risk seviyesini belirler.

## AraÅŸtÄ±rma ve Analiz

Amazon Macie'nin araÅŸtÄ±rma iÅŸlevi, derinlemesine analiz iÃ§in tÃ¼m Macie verileri Ã¼zerinde Ã¶zel sorgular yapmayÄ± saÄŸlar. Filtreler arasÄ±nda CloudTrail Verileri, S3 Bucket Ã¶zellikleri ve S3 Nesneleri bulunur. AyrÄ±ca, Amazon Macie'yi paylaÅŸmak iÃ§in diÄŸer hesaplarÄ± davet etmeyi destekler, iÅŸbirliÄŸi iÃ§inde veri yÃ¶netimi ve gÃ¼venlik izleme saÄŸlar.


## NumaralandÄ±rma
```
# Get buckets
aws macie2 describe-buckets

# Org config
aws macie2 describe-organization-configuration

# Get admin account (if any)
aws macie2 get-administrator-account
aws macie2 list-organization-admin-accounts # Run from the management account of the org

# Get macie account members (run this form the admin account)
aws macie2 list-members

# Check if automated sensitive data discovey is enabled
aws macie2 get-automated-discovery-configuration

# Get findings
aws macie2 list-findings
aws macie2 get-findings --finding-ids <ids>
aws macie2 list-findings-filters
aws macie2 get -findings-filters --id <id>

# Get allow lists
aws macie2 list-allow-lists
aws macie2 get-allow-list --id <id>

# Get different info
aws macie2 list-classification-jobs
aws macie2 list-classification-scopes
aws macie2 list-custom-data-identifiers
```
### Son AÅŸama SaldÄ±rÄ±

{% hint style="success" %}
Bir saldÄ±rganÄ±n perspektifinden, bu hizmet saldÄ±rganÄ± tespit etmek iÃ§in deÄŸil, depolanan dosyalardaki hassas bilgileri tespit etmek iÃ§in yapÄ±lmÄ±ÅŸtÄ±r. Bu nedenle, bu hizmet bir saldÄ±rganÄ±n kovada hassas bilgi bulmasÄ±na **yardÄ±mcÄ± olabilir**.\
Ancak, bir saldÄ±rgan da belki de kurbanÄ±n uyarÄ±larÄ± almasÄ±nÄ± engellemek ve bu bilgileri daha kolay Ã§almak iÃ§in bu hizmeti engellemekle ilgilenebilir.
{% endhint %}

TODO: PR'lar bekleniyor!

# Referanslar
* [https://cloudacademy.com/blog/introducing-aws-security-hub/](https://cloudacademy.com/blog/introducing-aws-security-hub/)

<details>

<summary><strong><a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong>!</summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da** takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
