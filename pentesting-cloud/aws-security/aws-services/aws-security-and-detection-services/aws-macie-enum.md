# AWS - Enumeraci贸n de Macie

<details>

<summary><strong>隆Apoya a HackTricks y obt茅n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **煤ltima versi贸n de PEASS o descargar HackTricks en PDF** 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de exclusivos [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆gueme** en **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PR a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github.

</details>

## Macie

La funci贸n principal del servicio es proporcionar un m茅todo autom谩tico de **detecci贸n, identificaci贸n y clasificaci贸n de datos** que se almacenan en su cuenta de AWS.

El servicio est谩 respaldado por **aprendizaje autom谩tico**, lo que permite que sus datos sean revisados activamente a medida que se realizan diferentes acciones dentro de su cuenta de AWS. El aprendizaje autom谩tico puede detectar patrones de acceso y **comportamiento del usuario** analizando los datos de eventos de **cloud trail** para **alertar contra cualquier actividad inusual o irregular**. Cualquier hallazgo realizado por Amazon Macie se presenta en un panel que puede activar alertas, lo que le permite resolver r谩pidamente cualquier posible amenaza de exposici贸n o compromiso de sus datos.

Amazon Macie monitorea y detecta autom谩ticamente y de manera continua **nuevos datos que se almacenan en Amazon S3**. Utilizando las capacidades de aprendizaje autom谩tico e inteligencia artificial, este servicio tiene la capacidad de familiarizarse con el tiempo, los patrones de acceso a los datos.\
Amazon Macie tambi茅n utiliza m茅todos de procesamiento de lenguaje natural para **clasificar e interpretar diferentes tipos y contenidos de datos**. El PNL utiliza principios de ciencias de la computaci贸n y ling眉铆stica computacional para analizar las interacciones entre las computadoras y el lenguaje humano. En particular, c贸mo programar computadoras para comprender y descifrar datos de lenguaje. El **servicio puede asignar autom谩ticamente valores comerciales a los datos que se eval煤an en forma de puntaje de riesgo**. Esto permite que Amazon Macie ordene los hallazgos en funci贸n de la prioridad, lo que le permite centrarse en las alertas m谩s cr铆ticas primero. Adem谩s de esto, Amazon Macie tambi茅n tiene la ventaja adicional de poder **monitorear y descubrir cambios de seguridad que rigen sus datos**. Adem谩s, identifica datos espec铆ficos centrados en la seguridad, como claves de acceso que se encuentran dentro de un bucket de S3.

Este monitoreo de seguridad protector y proactivo permite que Amazon Macie **identifique datos cr铆ticos, sensibles y enfocados en la seguridad, como claves de API, claves secretas, adem谩s de datos de PII (informaci贸n de identificaci贸n personal) y PHI**.

Esto es 煤til para evitar fugas de datos ya que Macie detectar谩 si est谩 exponiendo informaci贸n de personas en Internet.

Es un servicio **regional**.

Requiere la existencia del rol IAM 'AWSMacieServiceCustomerSetupRole' y necesita que AWS CloudTrail est茅 habilitado.

Categor铆as de alertas predefinidas:

* Acceso anonimizado
* Cumplimiento de configuraci贸n
* P茅rdida de credenciales
* Cumplimiento de datos
* Alojamiento de archivos
* Enumeraci贸n de identidad
* P茅rdida de informaci贸n
* Anomal铆a de ubicaci贸n
* Permisos abiertos
* Escalada de privilegios
* Ransomware
* Disrupci贸n del servicio
* Acceso sospechoso

El **resumen de alertas** proporciona informaci贸n detallada para permitirle responder adecuadamente. Tiene una descripci贸n que proporciona un nivel m谩s profundo de comprensi贸n de por qu茅 se gener贸. Tambi茅n tiene un desglose de los resultados.

El usuario tiene la posibilidad de crear nuevas alertas personalizadas.

**Categorizaci贸n del panel**: 

* Objetos S3 para el rango de tiempo seleccionado
* Objetos S3
* Objetos S3 por PII - Informaci贸n de identificaci贸n personal
* Objetos S3 por ACL
* Eventos de CloudTrail de alto riesgo y usuarios asociados
* Errores de CloudTrail de alto riesgo y usuarios asociados
* Ubicaci贸n de actividad
* Eventos de CloudTrail
* ISP de actividad
* Tipos de identidad de usuario de CloudTrail

**Categor铆as de usuario**: Macie categoriza a los usuarios en las siguientes categor铆as:

* **Platinum**: Usuarios o roles considerados que realizan llamadas API de alto riesgo. A menudo tienen privilegios de administrador. Debe monitorearlos bastante bien en caso de que sean comprometidos.
* **Gold**: Usuarios o roles con historial de llamadas a API relacionadas con cambios de infraestructura. Tambi茅n debe monitorearlos.
* **Silver**: Usuarios o roles que realizan llamadas API de nivel de riesgo medio.
* **Bronze**: Usuarios o roles que utilizan el nivel m谩s bajo de riesgo basado en llamadas API.

**Tipos de identidad**:

* Root: Solicitud realizada por el usuario ra铆z
* Usuario IAM: Solicitud realizada por el usuario IAM
* Rol asumido: Solicitud realizada por credenciales temporales asumidas (API AssumeRole para STS)
* Usuario federado: Solicitud realizada utilizando credenciales temporales (API GetFederationToken para STS)
* Cuenta de AWS: Solicitud realizada por una cuenta de AWS diferente
* Servicio de AWS: Solicitud realizada por un servicio de AWS

**Clasificaci贸n de datos**: existen 4 clasificaciones de archivos:

* Tipo de contenido: lista archivos basados en el tipo de contenido detectado. El riesgo dado se determina por el tipo de contenido detectado.
* Extensi贸n de archivo: lo mismo que el tipo de contenido pero basado en la extensi贸n
* Tema: categoriza en funci贸n de una serie de palabras clave detectadas dentro de los archivos
* Regex: categor铆as basadas en expresiones regulares espec铆ficas

El riesgo final de un archivo ser谩 el riesgo m谩s alto encontrado entre esas 4 categor铆as.

La funci贸n de investigaci贸n permite crear sus propias consultas nuevamente en todos los datos de Amazon Macie y realizar un an谩lisis detallado de los datos. Puede filtrar los resultados en funci贸n de: datos de CloudTrail, propiedades de bucket de S3 y objetos de S3.

Es posible invitar a otras cuentas a Amazon Macie para que varias cuentas compartan Amazon Macie.

<details>

<summary><strong>隆Apoya a HackTricks y obt茅n beneficios!</strong></summary>

* Si quieres ver a tu **empresa anunciada en HackTricks** o si quieres acceder a la **煤ltima versi贸n de PEASS o descargar HackTricks en PDF** 隆Consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Obt茅n el [**oficial PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Descubre [**The PEASS Family**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de exclusivos [**NFTs**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆gueme** en **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm).
* **Comparte tus trucos de hacking enviando PR a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github.

</details>