# AWS - CloudWatch Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ì—ì„œ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

## CloudWatch

**CloudWatch**ëŠ” ë¡œê·¸/ë©”íŠ¸ë¦­/ì´ë²¤íŠ¸ í˜•íƒœë¡œ ëª¨ë‹ˆí„°ë§ ë° ìš´ì˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ AWS ë¦¬ì†ŒìŠ¤, ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì„œë¹„ìŠ¤ì˜ **í†µí•©ëœ ë·°**ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\
CloudWatch ë¡œê·¸ ì´ë²¤íŠ¸ëŠ” ê° ë¡œê·¸ ë¼ì¸ë§ˆë‹¤ **256KBì˜ í¬ê¸° ì œí•œ**ì´ ìˆìŠµë‹ˆë‹¤.\
ê³ í•´ìƒë„ ì•ŒëŒì„ ì„¤ì •í•˜ê³  ë¡œê·¸ì™€ ë©”íŠ¸ë¦­ì„ **ì‹œê°í™”**í•˜ê³  **ìë™ ì¡°ì¹˜**ë¥¼ ì·¨í•˜ë©° ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìµœì í™”í•˜ê¸° ìœ„í•œ í†µì°°ë ¥ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, CloudTrailì˜ ë¡œê·¸ë¥¼ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë‹ˆí„°ë§ë˜ëŠ” ì´ë²¤íŠ¸:

* ë³´ì•ˆ ê·¸ë£¹ ë° NACL ë³€ê²½
* EC2 ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘, ì¤‘ì§€, ì¬ë¶€íŒ… ë° ì¢…ë£Œ
* IAM ë° S3 ë‚´ì—ì„œ ë³´ì•ˆ ì •ì±… ë³€ê²½
* AWS Management Consoleì— ëŒ€í•œ ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œë„
* ì¸ì¦ì— ì‹¤íŒ¨í•œ API í˜¸ì¶œ
* CloudWatchì—ì„œ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” í•„í„°: [https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html)

### CloudWatch Logs <a href="#cloudwatch-logs" id="cloudwatch-logs"></a>

AWS ì„œë¹„ìŠ¤(í¬í•¨ëœ CloudTrail) ë° ì•±/ì‹œìŠ¤í…œ(CloudWatch AgentëŠ” í˜¸ìŠ¤íŠ¸ì— ì„¤ì¹˜ë  ìˆ˜ ìˆìŒ)ì—ì„œ ë¡œê·¸ë¥¼ **ì§‘ê³„ ë° ëª¨ë‹ˆí„°ë§**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¡œê·¸ëŠ” **ë¡œê·¸ ê·¸ë£¹ ì„¤ì •ì— ë”°ë¼ ë¬´ê¸°í•œìœ¼ë¡œ ì €ì¥**ë  ìˆ˜ ìˆìœ¼ë©° ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ìš”ì†Œ**:

| **ë¡œê·¸ ê·¸ë£¹**            | ë™ì¼í•œ ë³´ì¡´, ëª¨ë‹ˆí„°ë§ ë° ì•¡ì„¸ìŠ¤ ì œì–´ ì„¤ì •ì„ ê³µìœ í•˜ëŠ” **ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ì˜ ì»¬ë ‰ì…˜** |
| ------------------------ | -------------------------------------------------------------------- |
| **ë¡œê·¸ ìŠ¤íŠ¸ë¦¼**           | **ë™ì¼í•œ ì†ŒìŠ¤**ë¥¼ ê³µìœ í•˜ëŠ” **ë¡œê·¸ ì´ë²¤íŠ¸ì˜ ì‹œí€€ìŠ¤**                   |
| **êµ¬ë… í•„í„°** | íŠ¹ì • ë¡œê·¸ ê·¸ë£¹ì—ì„œ ì´ë²¤íŠ¸ì™€ ì¼ì¹˜í•˜ëŠ” **í•„í„° íŒ¨í„´ì„ ì •ì˜**í•˜ê³ , Kinesis Data Firehose ìŠ¤íŠ¸ë¦¼, Kinesis ìŠ¤íŠ¸ë¦¼ ë˜ëŠ” Lambda í•¨ìˆ˜ë¡œ ë³´ëƒ…ë‹ˆë‹¤. |

### CloudWatch ëª¨ë‹ˆí„°ë§ ë° ì´ë²¤íŠ¸

CloudWatch **ê¸°ë³¸**ì€ ë°ì´í„°ë¥¼ **5ë¶„ë§ˆë‹¤ ì§‘ê³„**í•©ë‹ˆë‹¤(**ìì„¸í•œ** ëª¨ë“œëŠ” **1ë¶„ë§ˆë‹¤** ì§‘ê³„). ì§‘ê³„ í›„, ì•ŒëŒì˜ ì„ê³„ê°’ì„ í™•ì¸í•˜ì—¬ íŠ¸ë¦¬ê±°í•´ì•¼ í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\
ì´ ê²½ìš°, CloudWatchëŠ” ì´ë²¤íŠ¸ë¥¼ ë³´ë‚´ê³  ì¼ë¶€ ìë™ ì¡°ì¹˜ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(AWS ëŒë‹¤ í•¨ìˆ˜, SNS í† í”½, SQS í, Kinesis ìŠ¤íŠ¸ë¦¼).

### ì—ì´ì „íŠ¸ ì„¤ì¹˜

ê¸°ê³„/ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì—ì´ì „íŠ¸ë¥¼ ì„¤ì¹˜í•˜ì—¬ ë¡œê·¸ë¥¼ ìë™ìœ¼ë¡œ CloudWatchë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* **ì—­í• **ì„ **ìƒì„±**í•˜ê³  CloudWatchê°€ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  AWS ì‹œìŠ¤í…œ ê´€ë¦¬ì SSMê³¼ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” **ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°**í•©ë‹ˆë‹¤(CloudWatchAgentAdminPolicy ë° AmazonEC2RoleforSSM).
* EC2 ì¸ìŠ¤í„´ìŠ¤ì— **ì—ì´ì „íŠ¸**ë¥¼ **ë‹¤ìš´ë¡œë“œ**í•˜ê³  **ì„¤ì¹˜**í•©ë‹ˆë‹¤ ([https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip](https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip)). EC2 ë‚´ë¶€ì—ì„œ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ AWS ì‹œìŠ¤í…œ ê´€ë¦¬ìë¥¼ ì‚¬ìš©í•˜ì—¬ íŒ¨í‚¤ì§€ AWS-ConfigureAWSPackageë¥¼ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* CloudWatch ì—ì´ì „íŠ¸ë¥¼ **êµ¬ì„±**í•˜ê³  **ì‹œì‘**í•©ë‹ˆë‹¤.

ë¡œê·¸ ê·¸ë£¹ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ìŠ¤íŠ¸ë¦¼ì´ ìˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¼ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ì´ë²¤íŠ¸ê°€ ìˆìœ¼ë©° ê° ìŠ¤íŠ¸ë¦¼ ë‚´ì—ì„œ ì´ë²¤íŠ¸ëŠ” ìˆœì„œëŒ€ë¡œ ë³´ì¥ë©ë‹ˆë‹¤.

## ë™ì‘

### ì—´ê±°
```bash
# Dashboards
aws cloudwatch list-dashboards
aws cloudwatch get-dashboard --dashboard-name <dashboard_name>

# Alarms
aws cloudwatch describe-alarms
aws cloudwatch describe-alarm-history
aws cloudwatch describe-alarms-for-metric --metric-name <metric_name> --namespace <namespace>
aws cloudwatch describe-alarms-for-metric --metric-name IncomingLogEvents --namespace AWS/Logs

# Anomaly Detections
aws cloudwatch describe-anomaly-detectors
aws cloudwatch describe-insight-rules

# Logs
aws logs tail "<log_group_name>" --follow
aws logs get-log-events --log-group-name "<log_group_name>" --log-stream-name "<log_stream_name>" --output text > <output_file>

# Events enumeration
aws events list-rules
aws events describe-rule --name <name>
aws events list-targets-by-rule --rule <name>
aws events list-archives
aws events describe-archive --archive-name <name>
aws events list-connections
aws events describe-connection --name <name>
aws events list-endpoints
aws events describe-endpoint --name <name>
aws events list-event-sources
aws events describe-event-source --name <name>
aws events list-replays
aws events list-api-destinations
aws events list-event-buses
```
## ì°¸ê³  ìë£Œ

* [https://cloudsecdocs.com/aws/services/logging/cloudwatch/](https://cloudsecdocs.com/aws/services/logging/cloudwatch/#general-info)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
