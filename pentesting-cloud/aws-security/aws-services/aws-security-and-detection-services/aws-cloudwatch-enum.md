# AWS - CloudWatch Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* Hacking hilelerinizi [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.

</details>

## CloudWatch

**CloudWatch**, AWS kaynaklarÄ±, uygulamalar ve hizmetlerin birleÅŸik bir gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ saÄŸlayan gÃ¼nlÃ¼kler/metriklere/olaylara dayalÄ± izleme ve iÅŸletme verileri toplar.\
CloudWatch GÃ¼nlÃ¼k OlayÄ±, her gÃ¼nlÃ¼k satÄ±rÄ±nda 256KB'lÄ±k bir boyut sÄ±nÄ±rlamasÄ±na sahiptir.\
YÃ¼ksek Ã§Ã¶zÃ¼nÃ¼rlÃ¼klÃ¼ alarmlar ayarlayabilir, gÃ¼nlÃ¼kleri ve metrikleri yan yana gÃ¶rselleÅŸtirebilir, otomatik eylemler alabilir, sorunlarÄ± gidermeye yardÄ±mcÄ± olabilir ve uygulamalarÄ± optimize etmek iÃ§in iÃ§gÃ¶rÃ¼ler keÅŸfedebilirsiniz.

Ã–rneÄŸin, CloudTrail'den gÃ¼nlÃ¼kleri izleyebilirsiniz. Ä°zlenen olaylar:

* GÃ¼venlik GruplarÄ± ve NACL'lerdeki DeÄŸiÅŸiklikler
* EC2 Ã¶rneklerinin BaÅŸlatÄ±lmasÄ±, DurdurulmasÄ±, Yeniden BaÅŸlatÄ±lmasÄ± ve SonlandÄ±rÄ±lmasÄ±
* IAM ve S3 iÃ§indeki GÃ¼venlik PolitikalarÄ±ndaki DeÄŸiÅŸiklikler
* AWS YÃ¶netim Konsolu'na baÅŸarÄ±sÄ±z giriÅŸ denemeleri
* BaÅŸarÄ±sÄ±z yetkilendirme ile sonuÃ§lanan API Ã§aÄŸrÄ±larÄ±
* Cloudwatch'da arama yapmak iÃ§in filtreler: [https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html)

### CloudWatch GÃ¼nlÃ¼kleri <a href="#cloudwatch-logs" id="cloudwatch-logs"></a>

Uygulamalardan ve sistemlerden (CloudTrail dahil) AWS hizmetlerinden ve uygulamalardan/sistemlerden gÃ¼nlÃ¼kleri birleÅŸtirmenize ve izlemenize olanak tanÄ±r (CloudWatch AjanÄ± bir ana bilgisayara yÃ¼klenebilir). GÃ¼nlÃ¼kler sÃ¼resiz olarak saklanabilir (GÃ¼nlÃ¼k Grubu ayarlarÄ±na baÄŸlÄ± olarak) ve dÄ±ÅŸa aktarÄ±labilir.

**Ã–ÄŸeler**:

| **GÃ¼nlÃ¼k Grubu**         | AynÄ± saklama, izleme ve eriÅŸim kontrol ayarlarÄ±nÄ± paylaÅŸan bir dizi gÃ¼nlÃ¼k akÄ±ÅŸÄ±                                                                                   |
| ------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **GÃ¼nlÃ¼k AkÄ±ÅŸÄ±**         | AynÄ± kaynaÄŸÄ± paylaÅŸan bir dizi **gÃ¼nlÃ¼k olayÄ±**                                                                                                              |
| **Abonelik Filtreleri**  | Belirli bir gÃ¼nlÃ¼k grubundaki olaylarÄ± eÅŸleÅŸtiren bir **filtre deseni** tanÄ±mlar ve bunlarÄ± Kinesis Data Firehose akÄ±ÅŸÄ±na, Kinesis akÄ±ÅŸÄ±na veya bir Lambda iÅŸlevine gÃ¶nderir |

### CloudWatch Ä°zleme ve Olaylar

CloudWatch **temel** verileri **her 5 dakikada bir birleÅŸtirir** (ayrÄ±ntÄ±lÄ± olanÄ± **her 1 dakikada bir** yapar). BirleÅŸtirme iÅŸleminden sonra, alarmlarÄ±n eÅŸik deÄŸerlerini kontrol eder ve gerektiÄŸinde bir alarm tetiklemesi yapar.\
Bu durumda, CloudWatch bir olay gÃ¶ndermek ve bazÄ± otomatik eylemler gerÃ§ekleÅŸtirmek iÃ§in hazÄ±rlanabilir (AWS lambda iÅŸlevleri, SNS konularÄ±, SQS kuyruklarÄ±, Kinesis AkÄ±ÅŸlarÄ±)

### Ajan Kurulumu

Makinelerin/konteynerlarÄ±n iÃ§ine ajanlar kurarak gÃ¼nlÃ¼kleri otomatik olarak CloudWatch'a gÃ¶nderebilirsiniz.

* Ä°zinlerine sahip bir rol oluÅŸturun ve bunu Ã¶rneÄŸe ekleyin, bÃ¶ylece CloudWatch, Ã¶rneklerden veri toplamak ve AWS sistem yÃ¶neticisi SSM ile etkileÅŸimde bulunmanÄ±n yanÄ± sÄ±ra veri toplamak iÃ§in izin alabilir (CloudWatchAgentAdminPolicy & AmazonEC2RoleforSSM)
* EC2 Ã¶rneÄŸine **agenti indirin** ve **kurun** ([https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip](https://s3.amazonaws.com/amazoncloudwatch-agent/linux/amd64/latest/AmazonCloudWatchAgent.zip)). EC2 iÃ§inden indirebilir veya AWS Sistem YÃ¶neticisi'ni kullanarak otomatik olarak yÃ¼kleyebilirsiniz, AWS-ConfigureAWSPackage paketini seÃ§erek
* CloudWatch AjanÄ±nÄ± **yapÄ±landÄ±rÄ±n** ve **baÅŸlatÄ±n**

Bir gÃ¼nlÃ¼k grubunda birÃ§ok akÄ±ÅŸ bulunur. Bir akÄ±ÅŸta birÃ§ok olay bulunur. Ve her akÄ±ÅŸÄ±n iÃ§indeki olaylarÄ±n sÄ±rayla olduÄŸu garanti edilir.

## Eylemler

### SÄ±ralama
```bash
# Dashboards
aws cloudwatch list-dashboards
aws cloudwatch get-dashboard --dashboard-name <dashboard_name>

# Alarms
aws cloudwatch describe-alarms
aws cloudwatch describe-alarm-history
aws cloudwatch describe-alarms-for-metric --metric-name <metric_name> --namespace <namespace>
aws cloudwatch describe-alarms-for-metric --metric-name IncomingLogEvents --namespace AWS/Logs

# Anomaly Detections
aws cloudwatch describe-anomaly-detectors
aws cloudwatch describe-insight-rules

# Logs
aws logs tail "<log_group_name>" --follow
aws logs get-log-events --log-group-name "<log_group_name>" --log-stream-name "<log_stream_name>" --output text > <output_file>

# Events enumeration
aws events list-rules
aws events describe-rule --name <name>
aws events list-targets-by-rule --rule <name>
aws events list-archives
aws events describe-archive --archive-name <name>
aws events list-connections
aws events describe-connection --name <name>
aws events list-endpoints
aws events describe-endpoint --name <name>
aws events list-event-sources
aws events describe-event-source --name <name>
aws events list-replays
aws events list-api-destinations
aws events list-event-buses
```
## Referanslar

* [https://cloudsecdocs.com/aws/services/logging/cloudwatch/](https://cloudsecdocs.com/aws/services/logging/cloudwatch/#general-info)

<details>

<summary><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerimizden oluÅŸan PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da takip edin.**
* Hacking hilelerinizi **HackTricks** ve **HackTricks Cloud** github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
