# AWS - EMR Enum

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## EMR

Usuga Elastic MapReduce (EMR) AWS, poczwszy od wersji 4.8.0, wprowadzia funkcj **konfiguracji zabezpiecze**, kt贸ra zwiksza ochron danych, umo偶liwiajc u偶ytkownikom okrelanie ustawie szyfrowania dla danych w spoczynku i w trakcie przesyania w klastrach EMR, kt贸re s skalowalnymi grupami instancji EC2 przeznaczonymi do przetwarzania du偶ych framework贸w danych, takich jak Apache Hadoop i Spark.

G贸wne cechy to:

- **Domylne szyfrowanie klastra**: Domylnie dane w spoczynku w klastrze nie s szyfrowane. Jednak wczenie szyfrowania umo偶liwia dostp do kilku funkcji:
- **Linux Unified Key Setup**: Szyfruje woluminy klastra EBS. U偶ytkownicy mog wybra AWS Key Management Service (KMS) lub dostawc niestandardowego klucza.
- **Szyfrowanie HDFS Open-Source**: Oferuje dwie opcje szyfrowania dla Hadoopa:
- Bezpieczne Hadoop RPC (Remote Procedure Call), ustawione na prywatno, wykorzystujce prost warstw zabezpiecze uwierzytelniania.
- Szyfrowanie transferu blok贸w HDFS, ustawione na true, wykorzystuje algorytm AES-256.

- **Szyfrowanie w trakcie przesyania**: Skupia si na zabezpieczaniu danych podczas przesyania. Opcje obejmuj:
- **Transport Layer Security (TLS) Open Source**: Szyfrowanie mo偶na wczy, wybierajc dostawc certyfikat贸w:
- **PEM**: Wymaga rcznego tworzenia i pakowania certyfikat贸w PEM do pliku zip, odwoujcego si do kubeka S3.
- **Niestandardowe**: Wymaga dodania niestandardowej klasy Javy jako dostawcy certyfikat贸w dostarczajcej artefakty szyfrowania.

Po zintegrowaniu dostawcy certyfikat贸w TLS do konfiguracji zabezpiecze, mo偶na aktywowa nastpujce funkcje szyfrowania zale偶nie od wersji EMR:

- **Hadoop**:
- Mo偶e zmniejszy szyfrowanie shuffle za pomoc TLS.
- Bezpieczne Hadoop RPC z prost warstw zabezpiecze uwierzytelniania i transfer blok贸w HDFS z AES-256 s aktywowane z szyfrowaniem w spoczynku.

- **Presto** (wersja EMR 5.6.0+):
- Komunikacja wewntrzna midzy wzami Presto jest zabezpieczona za pomoc SSL i TLS.

- **Tez Shuffle Handler**:
- Wykorzystuje TLS do szyfrowania.

- **Spark**:
- Wykorzystuje TLS dla protokou Akka.
- Wykorzystuje prost warstw zabezpiecze uwierzytelniania i 3DES dla usugi transferu blok贸w.
- Zewntrzna usuga shuffle jest zabezpieczona za pomoc prostego protokou uwierzytelniania.

Te funkcje cznie poprawiaj postaw bezpieczestwa klastr贸w EMR, zwaszcza jeli chodzi o ochron danych podczas przechowywania i przesyania.
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

# Odnoniki
* [https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/](https://cloudacademy.com/course/domain-three-designing-secure-applications-and-architectures/elastic-mapreduce-emr-encryption-1/)

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
