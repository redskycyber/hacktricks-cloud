# AWS - Enumeraci贸n de EMR

<details>

<summary><strong>Aprende hacking en AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆gueme** en **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## EMR

EMR es un servicio gestionado por AWS y consiste en un **cluster de instancias EC2 altamente escalable** para procesar y ejecutar frameworks de big data como Apache Hadoop y Spark.

Desde la versi贸n 4.8.0 de EMR en adelante, tenemos la capacidad de crear una **configuraci贸n de seguridad** especificando diferentes ajustes sobre **c贸mo gestionar la encriptaci贸n de tus datos dentro de tus clusters**. Puedes encriptar tus datos en reposo, datos en tr谩nsito, o si es necesario, ambos juntos. Lo mejor de estas configuraciones de seguridad es que no son realmente parte de tus clusters EC2.

Un punto clave de EMR es que **por defecto, las instancias dentro de un cluster no encriptan los datos en reposo**. Una vez habilitado, est谩n disponibles las siguientes caracter铆sticas.

* **Configuraci贸n Unificada de Claves de Linux:** Los vol煤menes de clusters EBS pueden ser encriptados usando este m茅todo donde puedes especificar AWS **KMS** como tu proveedor de gesti贸n de claves, o usar un proveedor de claves personalizado.
* **Encriptaci贸n de HDFS de c贸digo abierto:** Esto proporciona dos opciones de encriptaci贸n de Hadoop. RPC de Hadoop seguro que se configurar铆a para privacidad que usa capa de seguridad de autenticaci贸n simple, y encriptaci贸n de datos de transferencia de bloques de HDFS que se configurar铆a en verdadero para usar el algoritmo AES-256.

Desde una perspectiva de encriptaci贸n en tr谩nsito, podr铆as habilitar **caracter铆sticas de encriptaci贸n de seguridad de la capa de transporte de c贸digo abierto** y seleccionar un tipo de proveedor de certificados que puede ser PEM donde necesitar谩s crear manualmente certificados PEM, agruparlos en un archivo zip y luego referenciar el archivo zip en S3 o personalizado donde a帽adir铆as un proveedor de certificados personalizado como una clase Java que proporciona artefactos de encriptaci贸n.

Una vez que el proveedor de certificados TLS ha sido configurado en el archivo de configuraci贸n de seguridad, se pueden habilitar las siguientes aplicaciones espec铆ficas de caracter铆sticas de encriptaci贸n que variar谩n dependiendo de tu versi贸n de EMR.

* Hadoop podr铆a reducir la mezcla encriptada que usa TLS. Tanto RPC de Hadoop seguro que usa Capa de Seguridad de Autenticaci贸n Simple, y encriptaci贸n de datos de transferencia de bloques de HDFS que usa AES-256, ambos se activan cuando la encriptaci贸n en reposo est谩 habilitada en la configuraci贸n de seguridad.
* Presto: Al usar la versi贸n 5.6.0 de EMR y posteriores, cualquier comunicaci贸n interna entre nodos de Presto usar谩 SSL y TLS.
* El Manejador de Mezcla de Tez usa TLS.
* Spark: El protocolo Akka usa TLS. El Servicio de Transferencia de Bloques usa Capa de Seguridad de Autenticaci贸n Simple y 3DES. El servicio de mezcla externo usa la Capa de Seguridad de Autenticaci贸n Simple.

### Enumeraci贸n
```bash
aws emr list-clusters
aws emr describe-cluster --cluster-id <id>
aws emr list-instances --cluster-id <id>
aws emr list-instance-fleets --cluster-id <id>
aws emr list-steps --cluster-id <id>
aws emr list-notebook-executions
aws emr list-security-configurations
aws emr list-studios #Get studio URLs
```
### Privesc

{% content-ref url="../aws-privilege-escalation/aws-emr-privesc.md" %}
[aws-emr-privesc.md](../aws-privilege-escalation/aws-emr-privesc.md)
{% endcontent-ref %}

<details>

<summary><strong>Aprende hacking en AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF**, consulta los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de [**NFTs exclusivos**](https://opensea.io/collection/the-peass-family)
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **sigue** a **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de GitHub** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
