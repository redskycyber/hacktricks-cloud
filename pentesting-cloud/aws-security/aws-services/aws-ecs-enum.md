# AWS - ECS Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ì—ì„œ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— **PRì„ ì œì¶œí•˜ì—¬** ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>

## ECS

### ê¸°ë³¸ ì •ë³´

Amazon **Elastic Container Services**(ECS)ëŠ” **í´ë¼ìš°ë“œì—ì„œ ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í˜¸ìŠ¤íŒ…**í•˜ê¸° ìœ„í•œ í”Œë«í¼ì„ ì œê³µí•©ë‹ˆë‹¤. ECSì—ëŠ” **EC2** ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ê³¼ **ì„œë²„ë¦¬ìŠ¤** ì˜µì…˜ì¸ **Fargate** ë‘ ê°€ì§€ **ë°°í¬** ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ëŠ” **í´ë¼ìš°ë“œì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ë§¤ìš° ì‰½ê³  í¸ë¦¬í•˜ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤**.

ECSëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ë™í•©ë‹ˆë‹¤: **í´ëŸ¬ìŠ¤í„°**, **ì„œë¹„ìŠ¤**, **íƒœìŠ¤í¬ ì •ì˜**.

* **í´ëŸ¬ìŠ¤í„°**ëŠ” í´ë¼ìš°ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ **ì»¨í…Œì´ë„ˆ ê·¸ë£¹**ì…ë‹ˆë‹¤. ì´ì „ì— ì–¸ê¸‰í•œ ëŒ€ë¡œ, ì»¨í…Œì´ë„ˆì—ëŠ” EC2ì™€ Fargate ë‘ ê°€ì§€ ì‹¤í–‰ ìœ í˜•ì´ ìˆìŠµë‹ˆë‹¤. AWSëŠ” EC2 ì‹¤í–‰ ìœ í˜•ì„ "Amazon EC2 ì¸ìŠ¤í„´ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒ"ìœ¼ë¡œ ì •ì˜í•˜ê³ , FargateëŠ” "ë°±ì—”ë“œ ì¸í”„ë¼ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³  ê´€ë¦¬í•˜ì§€ ì•Šê³  ì»¨í…Œì´ë„ˆí™”ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒ"ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤.
* **ì„œë¹„ìŠ¤**ëŠ” í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ìƒì„±ë˜ë©° **íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰**í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì •ì˜ ë‚´ì—ì„œ **ì‹¤í–‰í•  íƒœìŠ¤í¬ ìˆ˜, ìë™ ìŠ¤ì¼€ì¼ë§, ìš©ëŸ‰ ì œê³µì(Fargate/EC2/ì™¸ë¶€)**, **VPC, ì„œë¸Œë„·, ë³´ì•ˆ ê·¸ë£¹**ê³¼ ê°™ì€ **ë„¤íŠ¸ì›Œí‚¹** ì •ë³´ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
* **2 ì¢…ë¥˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆìŠµë‹ˆë‹¤**:
* **ì„œë¹„ìŠ¤**: ì¤‘ë‹¨ ë° ì¬ì‹œì‘í•  ìˆ˜ ìˆëŠ” ì¥ê¸° ì‹¤í–‰ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” íƒœìŠ¤í¬ ê·¸ë£¹ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
* **íƒœìŠ¤í¬**: ì‹¤í–‰ë˜ê³  ì¢…ë£Œë˜ëŠ” ë…ë¦½ì ì¸ ì‘ì—…ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¼ê´„ ì‘ì—…ì…ë‹ˆë‹¤.
* ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¤‘ì—ëŠ” **2 ì¢…ë¥˜ì˜ ì„œë¹„ìŠ¤ ìŠ¤ì¼€ì¤„ëŸ¬**ê°€ ìˆìŠµë‹ˆë‹¤:
* [**REPLICA**](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs\_services.html): ë³µì œ ìŠ¤ì¼€ì¤„ë§ ì „ëµì€ í´ëŸ¬ìŠ¤í„° ì „ì²´ì— ì›í•˜ëŠ” ìˆ˜ì˜ íƒœìŠ¤í¬ë¥¼ ë°°ì¹˜í•˜ê³  ìœ ì§€í•©ë‹ˆë‹¤. ì–´ë–¤ ì´ìœ ë¡œ ì¸í•´ íƒœìŠ¤í¬ê°€ ì¢…ë£Œë˜ë©´ ë™ì¼í•œ ë…¸ë“œ ë˜ëŠ” ë‹¤ë¥¸ ë…¸ë“œì—ì„œ ìƒˆë¡œìš´ íƒœìŠ¤í¬ê°€ ì‹œì‘ë©ë‹ˆë‹¤.
* [**DAEMON**](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs\_services.html): í•„ìš”í•œ ìš”êµ¬ ì‚¬í•­ì„ ê°–ì¶˜ ê° í™œì„± ì»¨í…Œì´ë„ˆ ì¸ìŠ¤í„´ìŠ¤ì— ì •í™•íˆ í•˜ë‚˜ì˜ íƒœìŠ¤í¬ë¥¼ ë°°í¬í•©ë‹ˆë‹¤. ì›í•˜ëŠ” íƒœìŠ¤í¬ ìˆ˜, íƒœìŠ¤í¬ ë°°ì¹˜ ì „ëµ, ì„œë¹„ìŠ¤ ìë™ ìŠ¤ì¼€ì¼ë§ ì •ì±…ì„ ì§€ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
* **íƒœìŠ¤í¬ ì •ì˜**ëŠ” **ì–´ë–¤ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰**ë˜ê³  ì»¨í…Œì´ë„ˆì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ë§¤ê°œë³€ìˆ˜(í˜¸ìŠ¤íŠ¸ì™€ì˜ **í¬íŠ¸ ë§¤í•‘**, **í™˜ê²½ ë³€ìˆ˜**, Docker **ì§„ì…ì ** ë“±)ê°€ êµ¬ì„±ë  ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.
* **ë¯¼ê°í•œ ì •ë³´ë¥¼ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”**!

### íƒœìŠ¤í¬ ì •ì˜ì—ì„œ ë¯¼ê°í•œ ë°ì´í„°

íƒœìŠ¤í¬ ì •ì˜ëŠ” ECSì—ì„œ ì‹¤í–‰ë  ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. íƒœìŠ¤í¬ ì •ì˜ëŠ” ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ê¸° ë•Œë¬¸ì— ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

PacuëŠ” ECSë¥¼ ì—´ê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(list-clusters, list-container-instances, list-services, list-task-definitions) ë˜í•œ íƒœìŠ¤í¬ ì •ì˜ë¥¼ ë¤í”„í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### ì—´ê±°
```bash
# Clusters info
aws ecs list-clusters
aws ecs describe-clusters --clusters <cluster>

# Container instances
## An Amazon ECS container instance is an Amazon EC2 instance that is running the Amazon ECS container agent and has been registered into an Amazon ECS cluster.
aws ecs list-container-instances --cluster <cluster>
aws ecs describe-container-instances --cluster <cluster> --container-instances <container_instance_arn>

# Services info
aws ecs list-services --cluster <cluster>
aws ecs describe-services --cluster <cluster> --services <services>
aws ecs describe-task-sets --cluster <cluster> --service <service>

# Task definitions
aws ecs list-task-definition-families
aws ecs list-task-definitions
aws ecs list-tasks --cluster <cluster>
aws ecs describe-tasks --cluster <cluster> --tasks <tasks>
## Look for env vars and secrets used from the task definition
aws ecs describe-task-definition --task-definition <TASK_NAME>:<VERSION>
```
### ì¸ì¦ë˜ì§€ ì•Šì€ ì•¡ì„¸ìŠ¤

{% content-ref url="../aws-unauthenticated-enum-access/aws-ecs-unauthenticated-enum.md" %}
[aws-ecs-unauthenticated-enum.md](../aws-unauthenticated-enum-access/aws-ecs-unauthenticated-enum.md)
{% endcontent-ref %}

### ê¶Œí•œ ìƒìŠ¹

ë‹¤ìŒ í˜ì´ì§€ì—ì„œëŠ” **ECS ê¶Œí•œì„ ì•…ìš©í•˜ì—¬ ê¶Œí•œì„ ìƒìŠ¹**í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="../aws-privilege-escalation/aws-ecs-privesc.md" %}
[aws-ecs-privesc.md](../aws-privilege-escalation/aws-ecs-privesc.md)
{% endcontent-ref %}

### í›„ë°˜ ì‘ì—…

{% content-ref url="../aws-post-exploitation/aws-ecs-post-exploitation.md" %}
[aws-ecs-post-exploitation.md](../aws-post-exploitation/aws-ecs-post-exploitation.md)
{% endcontent-ref %}

### ì§€ì†ì„±

{% content-ref url="../aws-persistence/aws-ecs-persistence.md" %}
[aws-ecs-persistence.md](../aws-persistence/aws-ecs-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œí•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family)ì¸ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ë¥¼** íŒ”ë¡œìš°í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ì—¬ëŸ¬ë¶„ì˜ í•´í‚¹ ê¸°ìˆ ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
