# AWS - DynamoDB Enum

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* ã‚‚ã— **HackTricks ã§ä¼šç¤¾ã®åºƒå‘Šã‚’è¦‹ãŸã„**å ´åˆã‚„ã€**PEASS ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„**å ´åˆã€ã¾ãŸã¯ **HackTricks ã‚’ PDF ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼ã® PEASS & HackTricks ã‚¹ãƒ¯ãƒƒã‚°**](https://peass.creator-spring.com) ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) ã‚’è¦‹ã¤ã‘ã¦ã€ç‹¬å çš„ãª [**NFT**](https://opensea.io/collection/the-peass-family) ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç™ºè¦‹ã—ã¾ã—ã‚‡ã†
* ğŸ’¬ [**Discord ã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f) ã¾ãŸã¯ [**telegram ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass) ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm) ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¾ã—ã‚‡ã†
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€PR ã‚’** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ã¨** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã«æå‡ºã—ã¦ãã ã•ã„**

</details>

## DynamoDB

### åŸºæœ¬æƒ…å ±

Amazon DynamoDB ã¯ã€**å®Œå…¨ã«ç®¡ç†ã•ã‚ŒãŸã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã€ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼å‹ã® NoSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**ã§ã‚ã‚Šã€ã©ã®ã‚¹ã‚±ãƒ¼ãƒ«ã§ã‚‚é«˜æ€§èƒ½ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚DynamoDB ã«ã¯ã€çµ„ã¿è¾¼ã¿ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ç¶™ç¶šçš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€è‡ªå‹•çš„ãªãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

DynamoDB ã§ã¯ã€DB ã‚’ä½œæˆã™ã‚‹ã®ã§ã¯ãªãã€**ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ**ã—ã¾ã™ã€‚å„ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ã€**ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼**ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸»ã‚­ãƒ¼ã®ä¸€éƒ¨ã§ã‚ã‚Šã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã‚¢ã‚¤ãƒ†ãƒ ã‚’å–å¾—ã—ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨å¯ç”¨æ€§ã®ãŸã‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ›ã‚¹ãƒˆé–“ã§å‰²ã‚Šå½“ã¦ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹**ãƒãƒƒã‚·ãƒ¥å€¤**ã§ã™ã€‚ã¾ãŸã€**ã‚½ãƒ¼ãƒˆã‚­ãƒ¼**ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

### æš—å·åŒ–

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€DynamoDB ã¯ **Amazon DynamoDB ã«æ‰€å±ã™ã‚‹ KMS ã‚­ãƒ¼**ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚AWS ç®¡ç†ã‚­ãƒ¼ã§ã¯ãªãã€å°‘ãªãã¨ã‚‚ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«æ‰€å±ã™ã‚‹ AWS ç®¡ç†ã‚­ãƒ¼ã§ã™ã€‚

<figure><img src="https://lh4.googleusercontent.com/JjtNS7aA-_GRMgZb4v93jWEQJi6DQdUPq0FEpzZPdeyCeNoG05p0NJiV9Zs-ULs_-Tfjmx0W1ZgsE2Ui2ljo7D-1a87Xny-gpLVQO0XmXdFoph9ci1RepbVNwaCe9oPruEZSEDxGTxF5dIv6pW1WpT6kWA=s2048" alt=""><figcaption></figcaption></figure>

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ S3 ã¸ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’**ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**ã—ãŸã‚Šã€**è¦æ±‚**ã«å¿œã˜ã¦ä½œæˆã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ã•ã‚‰ã«ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦ **ãƒã‚¤ãƒ³ãƒˆã‚¤ãƒ³ã‚¿ã‚¤ãƒ ãƒªã‚«ãƒãƒªï¼ˆPITRï¼‰ã‚’æœ‰åŠ¹åŒ–**ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã‚¤ãƒ³ã‚¿ã‚¤ãƒ ãƒªã‚«ãƒãƒªã¯ã€**35 æ—¥é–“**ã®é–“ã€DynamoDB ãƒ‡ãƒ¼ã‚¿ã®é€£ç¶šçš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æä¾›ã—ã€èª¤ã£ãŸæ›¸ãè¾¼ã¿ã‚„å‰Šé™¤æ“ä½œã«å¯¾ã—ã¦ä¿è­·ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

ã¾ãŸã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ **S3 ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ãŒã€ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ **PITR ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹å¿…è¦**ãŒã‚ã‚Šã¾ã™ã€‚

### GUI

[DynamoDB Local](https://aws.amazon.com/blogs/aws/dynamodb-local-for-desktop-development/)ã€[dynalite](https://github.com/mhart/dynalite)ã€[localstack](https://github.com/localstack/localstack) ãªã©ã®ãƒ­ãƒ¼ã‚«ãƒ« Dynamo ã‚µãƒ¼ãƒ“ã‚¹ç”¨ã® GUI ãŒã‚ã‚Šã¾ã™ã€‚ä¾¿åˆ©ãªå ´åˆãŒã‚ã‚Šã¾ã™: [https://github.com/aaronshaf/dynamodb-admin](https://github.com/aaronshaf/dynamodb-admin)

### åˆ—æŒ™åŒ–
```bash
# Tables
aws dynamodb list-tables
aws dynamodb describe-table --table-name <t_name> #Get metadata info
## The primary key and sort key will appear inside the KeySchema field

#Check if point in time recovery is enabled
aws dynamodb describe-continuous-backups \
--table-name tablename

# Backups
aws dynamodb list-backups
aws dynamodb describe-backup --backup-arn <arn>
aws dynamodb describe-continuous-backups --table-name <t_name>

# Global tables
aws dynamodb list-global-tables
aws dynamodb describe-global-table --global-table-name <name>

# Exports
aws dynamodb list-exports
aws dynamodb describe-export --export-arn <arn>

# Misc
aws dynamodb describe-endpoints #Dynamodb endpoints
```
### éèªè¨¼ã‚¢ã‚¯ã‚»ã‚¹

{% content-ref url="../../aws-unauthenticated-enum-access/aws-dynamodb-unauthenticated-access.md" %}
[aws-dynamodb-unauthenticated-access.md](../../aws-unauthenticated-enum-access/aws-dynamodb-unauthenticated-access.md)
{% endcontent-ref %}

### ç‰¹æ¨©æ˜‡æ ¼

{% content-ref url="../../aws-privilege-escalation/aws-dynamodb-privesc.md" %}
[aws-dynamodb-privesc.md](../../aws-privilege-escalation/aws-dynamodb-privesc.md)
{% endcontent-ref %}

### æ”»æ’ƒå¾Œã®å‡¦ç†

{% content-ref url="../../aws-post-exploitation/aws-dynamodb-post-exploitation.md" %}
[aws-dynamodb-post-exploitation.md](../../aws-post-exploitation/aws-dynamodb-post-exploitation.md)
{% endcontent-ref %}

### æ°¸ç¶šåŒ–

{% content-ref url="../../aws-persistence/aws-dynamodb-persistence.md" %}
[aws-dynamodb-persistence.md](../../aws-persistence/aws-dynamodb-persistence.md)
{% endcontent-ref %}

## DynamoDBã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³

### SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³

**SQLæ§‹æ–‡**ã‚’ä½¿ç”¨ã—ã¦DynamoDBãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ä¸€èˆ¬çš„ãª**SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã‚‚å¯èƒ½**ã§ã™ã€‚

{% embed url="https://book.hacktricks.xyz/pentesting-web/sql-injection" %}

### NoSQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³

DynamoDBã§ã¯ã€ä¸€èˆ¬çš„ãªNoSQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã¨åŒæ§˜ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã•ã¾ã–ã¾ãª**æ¡ä»¶**ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«**è¤‡æ•°ã®æ¡ä»¶ã‚’é€£çµ**ã§ãã‚‹å ´åˆã€éš ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã‚Šï¼ˆã¾ãŸã¯ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã‚’ãƒ€ãƒ³ãƒ—ã—ãŸã‚Šï¼‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\
DynamoDBã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹æ¡ä»¶ã¯ã“ã¡ã‚‰ã§ç¢ºèªã§ãã¾ã™ï¼š[https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API\_Condition.html](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API\_Condition.html)ã€‚ãƒ‡ãƒ¼ã‚¿ãŒ**`query`**ã¾ãŸã¯**`scan`**ã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹å ´åˆã€**ç•°ãªã‚‹æ¡ä»¶**ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚

æ¯”è¼ƒã®å®Ÿè¡Œæ–¹æ³•ã‚’**å¤‰æ›´**ã—ãŸã‚Šã€æ–°ã—ã„æ¯”è¼ƒã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šå¤šãã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
# Comparators to dump the database
"NE": "a123" #Get everything that doesn't equal "a123"
"NOT_CONTAINS": "a123" #What you think
"GT": " " #All strings are greater than a space
```
{% embed url="https://book.hacktricks.xyz/pentesting-web/nosql-injection" %}

### Raw Json injection

**DynamoDB**ã¯ã€DBå†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã«**Json**ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å…¥ã‚Œã¾ã™ã€‚é€ä¿¡ã•ã‚ŒãŸjsonã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ›¸ãè¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸå ´åˆã€DBã®ãƒ€ãƒ³ãƒ—ã€ã™ã¹ã¦ã®å†…å®¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãŸã¨ãˆã°ã€æ¬¡ã®ã‚ˆã†ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã™ã‚‹å ´åˆï¼š

{% code overflow="wrap" %}
```bash
'{"Id": {"ComparisonOperator": "EQ","AttributeValueList": [{"N": "' + user_input + '"}]}}'
```
{% endcode %}

æ”»æ’ƒè€…ã¯æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ã‚’æ³¨å…¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

`1000"}],"ComparisonOperator": "GT","AttributeValueList": [{"N": "0`

IDãŒ1000ã§ã‚ã‚Šã€0ã‚ˆã‚Šã‚‚å¤§ãã„Idæ–‡å­—åˆ—ã‚’æŒã¤ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã«ã€"EQ"æ¡ä»¶ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

### :property Injection

ä¸€éƒ¨ã®SDKã§ã¯ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã†ãŸã‚ã«æ–‡å­—åˆ—ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

{% code overflow="wrap" %}
```java
new ScanSpec().withProjectionExpression("UserName").withFilterExpression(user_input+" = :username and Password = :password").withValueMap(valueMap)
```
{% endcode %}

DynamoDBã§ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹éš›ã«ã€**ãƒ•ã‚£ãƒ«ã‚¿å¼**ã§å±æ€§ã®å€¤ã‚’**ç½®æ›**ã™ã‚‹ãŸã‚ã«æ¤œç´¢ã™ã‚‹å ´åˆã€ãƒˆãƒ¼ã‚¯ãƒ³ã¯**`:`**æ–‡å­—ã§å§‹ã¾ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã€å®Ÿè¡Œæ™‚ã«å®Ÿéš›ã®**å±æ€§å€¤ã«ç½®ãæ›ãˆ**ã‚‰ã‚Œã¾ã™ã€‚

ã—ãŸãŒã£ã¦ã€å‰è¿°ã®ã‚ˆã†ãªãƒ­ã‚°ã‚¤ãƒ³ã¯æ¬¡ã®ã‚ˆã†ã«ãƒã‚¤ãƒ‘ã‚¹ã§ãã¾ã™:
```bash
:username = :username or :username
# This will generate the query:
# :username = :username or :username = :username and Password = :password
# which is always true
```
<details>

<summary><strong>Support HackTricks ã¨ç‰¹å…¸ã‚’å—ã‘å–ã‚‹ï¼</strong></summary>

* **HackTricks ã§ä¼šç¤¾ã‚’å®£ä¼ã—ãŸã„**å ´åˆã‚„ã€**æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® PEASS ã‚’å…¥æ‰‹ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼ã® PEASS & HackTricks ã‚°ãƒƒã‚º**](https://peass.creator-spring.com) ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) ã‚’è¦‹ã¤ã‘ã¦ã€ç‹¬å çš„ãª [**NFT**](https://opensea.io/collection/the-peass-family) ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¥½ã—ã¿ã¾ã—ã‚‡ã†
* ğŸ’¬ [**Discord ã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f) ã¾ãŸã¯ [**Telegram ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass) ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm) ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¾ã—ã‚‡ã†ã€‚
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€** [**HackTricks**](https://github.com/carlospolop/hacktricks) ã¨ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªã« PR ã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>
