# AWS - StaÅ‚a trwaÅ‚oÅ›Ä‡ STS

<details>

<summary><strong>Dowiedz siÄ™, jak hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## STS

Aby uzyskaÄ‡ wiÄ™cej informacji, przejdÅº do:

{% content-ref url="../aws-services/aws-sts-enum.md" %}
[aws-sts-enum.md](../aws-services/aws-sts-enum.md)
{% endcontent-ref %}

### Token roli zaÅ‚oÅ¼ycielskiej

Tymczasowe tokeny nie mogÄ… byÄ‡ wyÅ›wietlane na liÅ›cie, wiÄ™c utrzymanie aktywnego tymczasowego tokenu jest sposobem na utrzymanie trwaÅ‚oÅ›ci.

<pre class="language-bash"><code class="lang-bash">aws sts get-session-token --duration-seconds 129600

# Z MFA
aws sts get-session-token \
--serial-number &#x3C;nazwa-urzÄ…dzenia-mfa> \
--token-code &#x3C;kod-z-tokena>

# Nazwa urzÄ…dzenia sprzÄ™towego to zazwyczaj numer z tyÅ‚u urzÄ…dzenia, na przykÅ‚ad GAHT12345678
<strong># Nazwa urzÄ…dzenia SMS to ARN w AWS, na przykÅ‚ad arn:aws:iam::123456789012:sms-mfa/nazwa-uÅ¼ytkownika
</strong># Nazwa urzÄ…dzenia wirtualnego to ARN w AWS, na przykÅ‚ad arn:aws:iam::123456789012:mfa/nazwa-uÅ¼ytkownika
</code></pre>

### ÅaÅ„cuch roli

[**ÅaÅ„cuch roli to uznana funkcja AWS**](https://docs.aws.amazon.com/IAM/latest/UserGuide/id\_roles\_terms-and-concepts.html#Role%20chaining), czÄ™sto wykorzystywana do utrzymania trwaÅ‚oÅ›ci w ukryciu. Polega na moÅ¼liwoÅ›ci **przyjÄ™cia roli, ktÃ³ra nastÄ™pnie przyjmuje innÄ…**, potencjalnie powracajÄ…c do poczÄ…tkowej roli w **cykliczny sposÃ³b**. Za kaÅ¼dym razem, gdy rola jest przyjmowana, pole wygaÅ›niÄ™cia poÅ›wiadczeÅ„ jest odÅ›wieÅ¼ane. W rezultacie, jeÅ›li dwie role sÄ… skonfigurowane do wzajemnego przyjmowania siebie, taka konfiguracja pozwala na wieczyste odnawianie poÅ›wiadczeÅ„.

MoÅ¼esz uÅ¼yÄ‡ tego [**narzÄ™dzia**](https://github.com/hotnops/AWSRoleJuggler/), aby kontynuowaÄ‡ Å‚aÅ„cuchowanie rÃ³l:
```bash
./aws_role_juggler.py -h
usage: aws_role_juggler.py [-h] [-r ROLE_LIST [ROLE_LIST ...]]

optional arguments:
-h, --help            show this help message and exit
-r ROLE_LIST [ROLE_LIST ...], --role-list ROLE_LIST [ROLE_LIST ...]
```
<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do repozytoriÃ³w** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na GitHubie.

</details>
