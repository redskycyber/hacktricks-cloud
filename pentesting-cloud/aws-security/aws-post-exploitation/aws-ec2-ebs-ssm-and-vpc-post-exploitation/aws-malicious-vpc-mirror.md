# AWS - Espejo malicioso de VPC

<details>

<summary><strong>Aprende hacking en AWS desde cero hasta experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipo Rojo de AWS de HackTricks)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n el [**swag oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

**Consulta** [**https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws**](https://rhinosecuritylabs.com/aws/abusing-vpc-traffic-mirroring-in-aws) **para m치s detalles sobre el ataque!**

La inspecci칩n pasiva de la red en un entorno en la nube ha sido **desafiante**, requiriendo cambios de configuraci칩n importantes para monitorear el tr치fico de red. Sin embargo, AWS ha introducido una nueva caracter칤stica llamada "**VPC Traffic Mirroring**" para simplificar este proceso. Con VPC Traffic Mirroring, el tr치fico de red dentro de las VPC puede ser **duplicado** sin instalar ning칰n software en las instancias mismas. Este tr치fico duplicado puede ser enviado a un sistema de detecci칩n de intrusiones en la red (IDS) para su **an치lisis**.

Para abordar la necesidad de **implementaci칩n automatizada** de la infraestructura necesaria para reflejar y exfiltrar el tr치fico de la VPC, hemos desarrollado un script de prueba de concepto llamado "**malmirror**". Este script puede ser utilizado con **credenciales de AWS comprometidas** para configurar el reflejo para todas las instancias de EC2 admitidas en una VPC objetivo. Es importante tener en cuenta que el reflejo de tr치fico de VPC solo es compatible con las instancias de EC2 alimentadas por el sistema Nitro de AWS, y el objetivo de espejo de VPC debe estar dentro de la misma VPC que los hosts reflejados.

El **impacto** del reflejo malicioso del tr치fico de VPC puede ser significativo, ya que permite a los atacantes acceder a **informaci칩n sensible** transmitida dentro de las VPC. La **probabilidad** de dicho reflejo malicioso es alta, considerando la presencia de **tr치fico en texto claro** que fluye a trav칠s de las VPC. Muchas empresas utilizan protocolos en texto claro dentro de sus redes internas por razones de **rendimiento**, asumiendo que los ataques tradicionales de intermediarios no son posibles.

Para obtener m치s informaci칩n y acceder al [**script malmirror**](https://github.com/RhinoSecurityLabs/Cloud-Security-Research/tree/master/AWS/malmirror), se puede encontrar en nuestro **repositorio de GitHub**. El script automatiza y agiliza el proceso, haci칠ndolo **r치pido, simple y repetible** para fines de investigaci칩n ofensiva.

<details>

<summary><strong>Aprende hacking en AWS desde cero hasta experto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Experto en Equipo Rojo de AWS de HackTricks)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si deseas ver tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** Consulta los [**PLANES DE SUSCRIPCI칍N**](https://github.com/sponsors/carlospolop)!
* Obt칠n el [**swag oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci칩n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **칔nete al** 游눫 [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s칤guenos** en **Twitter** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
