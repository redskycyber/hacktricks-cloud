# AWS - CodeBuildæœªç»èº«ä»½éªŒè¯è®¿é—®

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWSçº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Šå…³æ³¨æˆ‘ä»¬ ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## CodeBuild

æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æ­¤é¡µé¢ï¼š

{% content-ref url="../aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### buildspec.yml

å¦‚æœæ‚¨å…¥ä¾µäº†åŒ…å«åä¸º**`buildspec.yml`**çš„æ–‡ä»¶çš„å­˜å‚¨åº“çš„å†™è®¿é—®æƒé™ï¼Œæ‚¨å¯ä»¥**åé—¨**æ­¤æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æŒ‡å®šäº†å°†åœ¨CodeBuildé¡¹ç›®å†…æ‰§è¡Œçš„**å‘½ä»¤**ï¼Œå¹¶çªƒå–ç§˜å¯†ï¼Œå…¥ä¾µæ‰€åšçš„äº‹æƒ…ï¼Œä»¥åŠå…¥ä¾µ**CodeBuild IAMè§’è‰²å‡­æ®**ã€‚

è¯·æ³¨æ„ï¼Œå³ä½¿æ²¡æœ‰**`buildspec.yml`**æ–‡ä»¶ï¼Œä½†æ‚¨çŸ¥é“æ­£åœ¨ä½¿ç”¨Codebuildï¼ˆæˆ–å…¶ä»–CI/CDï¼‰ï¼Œ**ä¿®æ”¹ä¸€äº›å°†è¦æ‰§è¡Œçš„åˆæ³•ä»£ç **ä¹Ÿå¯ä»¥è®©æ‚¨ä¾‹å¦‚è·å–åå‘shellã€‚

æœ‰å…³ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æœ‰å…³å¦‚ä½•æ”»å‡»Github Actionsçš„é¡µé¢ï¼ˆç±»ä¼¼äºæ­¤ï¼‰ï¼š

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

## åœ¨AWS CodeBuildä¸­æ‰˜ç®¡çš„GitHub Actionsè¿è¡Œç¨‹åº <a href="#action-runner" id="action-runner"></a>

æ­£å¦‚[**æ–‡æ¡£ä¸­æŒ‡å‡ºçš„**](https://docs.aws.amazon.com/codebuild/latest/userguide/action-runner.html)ï¼Œå¯ä»¥é…ç½®**CodeBuild**åœ¨è§¦å‘Githubå­˜å‚¨åº“å†…çš„å·¥ä½œæµæ—¶è¿è¡Œ**è‡ªæ‰˜ç®¡çš„Github actions**ã€‚è¿™å¯ä»¥é€šè¿‡æ£€æŸ¥CodeBuildé¡¹ç›®é…ç½®æ¥æ£€æµ‹ï¼Œå› ä¸º**`äº‹ä»¶ç±»å‹`**éœ€è¦åŒ…å«ï¼š**`WORKFLOW_JOB_QUEUED`**ï¼Œåœ¨Githubå·¥ä½œæµä¸­ï¼Œå®ƒå°†é€‰æ‹©ä¸€ä¸ª**è‡ªæ‰˜ç®¡**çš„è¿è¡Œç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```bash
runs-on: codebuild-<project-name>-${{ github.run_id }}-${{ github.run_attempt }}
```
è¿™ç§Github Actionså’ŒAWSä¹‹é—´çš„æ–°å…³ç³»ä¸ºä»Githubå…¥ä¾µAWSæä¾›äº†å¦ä¸€ç§æ–¹å¼ï¼Œå› ä¸ºGithubä¸­çš„ä»£ç å°†åœ¨é™„æœ‰IAMè§’è‰²çš„CodeBuildé¡¹ç›®ä¸­è¿è¡Œã€‚

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
