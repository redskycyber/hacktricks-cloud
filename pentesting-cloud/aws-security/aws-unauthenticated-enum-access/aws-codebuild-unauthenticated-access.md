# AWS - CodeBuild Unauthenticated Access

<details>

<summary><strong>htARTE (HackTricks AWS Red Team ì „ë¬¸ê°€)</strong>ì—ì„œ <strong>AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ìš°ì„¸ìš”</strong>!</summary>

ë‹¤ë¥¸ HackTricks ì§€ì› ë°©ë²•:

- **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜ PDFë¡œ HackTricksë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¶ë‹¤ë©´** [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
- [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
- **ğŸ’¬ [Discord ê·¸ë£¹](https://discord.gg/hRep4RUj7f)** ë˜ëŠ” [í…”ë ˆê·¸ë¨ ê·¸ë£¹](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
- **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

## CodeBuild

ìì„¸í•œ ì •ë³´ëŠ” ì´ í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="../aws-services/aws-codebuild-enum.md" %}
[aws-codebuild-enum.md](../aws-services/aws-codebuild-enum.md)
{% endcontent-ref %}

### buildspec.yml

ë§Œì•½ **`buildspec.yml`**ì´ë¼ëŠ” íŒŒì¼ì„ í¬í•¨í•˜ëŠ” ì €ì¥ì†Œì— ì“°ê¸° ì•¡ì„¸ìŠ¤ë¥¼ ì¹¨í•´í•œë‹¤ë©´, **CodeBuild í”„ë¡œì íŠ¸ ë‚´ì—ì„œ ì‹¤í–‰ë  ëª…ë ¹ì–´ë¥¼ ì§€ì •í•˜ëŠ”** ì´ íŒŒì¼ì„ **ë°±ë„ì–´**í•  ìˆ˜ ìˆìœ¼ë©°, ë¹„ë°€ì„ ìœ ì¶œí•˜ê±°ë‚˜ ìˆ˜í–‰ ì¤‘ì¸ ì‘ì—…ì„ ì¹¨í•´í•˜ê±°ë‚˜ **CodeBuild IAM ì—­í•  ìê²© ì¦ëª…ì„ ì¹¨í•´**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`buildspec.yml` íŒŒì¼ì´ ì—†ë”ë¼ë„ Codebuildê°€ ì‚¬ìš© ì¤‘ì´ë¼ëŠ” ê²ƒì„ ì•Œê³  ìˆë‹¤ë©´ (ë˜ëŠ” ë‹¤ë¥¸ CI/CDì¸ ê²½ìš°) **ì‹¤í–‰ë  í•©ë²•ì ì¸ ì½”ë“œë¥¼ ìˆ˜ì •**í•˜ì—¬ ì˜ˆë¥¼ ë“¤ì–´ ì—­ì‰˜ì„ ì–»ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ê´€ë ¨ ì •ë³´ë¥¼ ì–»ìœ¼ë ¤ë©´ ì´ì™€ ìœ ì‚¬í•œ Github Actions ê³µê²©ì— ëŒ€í•œ í˜ì´ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="../../../pentesting-ci-cd/github-security/abusing-github-actions/" %}
[abusing-github-actions](../../../pentesting-ci-cd/github-security/abusing-github-actions/)
{% endcontent-ref %}

## AWS CodeBuildì—ì„œ Self-hosted GitHub Actions ëŸ¬ë„ˆ <a href="#action-runner" id="action-runner"></a>

[**ë¬¸ì„œì—ì„œ ì–¸ê¸‰ëœ ëŒ€ë¡œ**](https://docs.aws.amazon.com/codebuild/latest/userguide/action-runner.html), **CodeBuild**ë¥¼ êµ¬ì„±í•˜ì—¬ **Github ë ˆí¬ì§€í† ë¦¬ ë‚´ì—ì„œ ì›Œí¬í”Œë¡œê°€ íŠ¸ë¦¬ê±°ë  ë•Œ** **self-hosted Github actions**ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” CodeBuild í”„ë¡œì íŠ¸ êµ¬ì„±ì„ í™•ì¸í•˜ì—¬ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ **`Event type`**ì´ **`WORKFLOW_JOB_QUEUED`**ë¥¼ í¬í•¨í•´ì•¼ í•˜ë©° Github ì›Œí¬í”Œë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ **self-hosted** ëŸ¬ë„ˆë¥¼ ì„ íƒí•  ê²ƒì…ë‹ˆë‹¤:
```bash
runs-on: codebuild-<project-name>-${{ github.run_id }}-${{ github.run_attempt }}
```
ì´ì œ Github Actionsì™€ AWS ê°„ì˜ ìƒˆë¡œìš´ ê´€ê³„ëŠ” Githubì˜ ì½”ë“œê°€ IAM ì—­í• ì´ ë¶€ì—¬ëœ CodeBuild í”„ë¡œì íŠ¸ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ Githubì—ì„œ AWSë¥¼ compromiseí•  ìˆ˜ ìˆëŠ” ë˜ ë‹¤ë¥¸ ë°©ë²•ì„ ë§Œë“­ë‹ˆë‹¤.

<details>

<summary><strong>ì œë¡œë¶€í„° íˆì–´ë¡œê°€ ë˜ëŠ” AWS í•´í‚¹ì„ ë°°ìš°ì„¸ìš”</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜** **PDF í˜•ì‹ì˜ HackTricksë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê¸¸ ì›í•œë‹¤ë©´** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks êµ¿ì¦ˆ**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì´ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**ë¥¼ íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œë¡œ PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>
