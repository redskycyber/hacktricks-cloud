# AWS - Cognito YetkilendirilmemiÅŸ Enum

<details>

<summary><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## YetkilendirilmemiÅŸ Cognito

Cognito, geliÅŸtiricilere **uygulama kullanÄ±cÄ±larÄ±na AWS hizmetlerine eriÅŸim izni verme** imkanÄ± saÄŸlayan bir AWS hizmetidir. GeliÅŸtiriciler, uygulamalarÄ±nda **kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lara IAM rolleri** verebilirler (potansiyel olarak insanlar sadece kaydolabilecek) ve ayrÄ±ca **yetkilendirilmemiÅŸ kullanÄ±cÄ±lara IAM rolÃ¼** verebilirler.

Cognito hakkÄ±nda temel bilgiler iÃ§in:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Pentesting ve enumarasyon iÃ§in Pacu modÃ¼lleri

[Pacu](https://github.com/RhinoSecurityLabs/pacu), AWS istismar Ã§erÃ§evesi, artÄ±k bir hesaptaki tÃ¼m Cognito varlÄ±klarÄ±nÄ±n enumarasyonunu otomatikleÅŸtiren "cognito__enum" ve "cognito__attack" modÃ¼llerini iÃ§erir ve zayÄ±f yapÄ±landÄ±rmalarÄ±, eriÅŸim kontrolÃ¼ iÃ§in kullanÄ±lan kullanÄ±cÄ± Ã¶zniteliklerini vb. belirler ve ayrÄ±ca deÄŸiÅŸtirilebilir Ã¶zel Ã¶zniteliklere dayalÄ± kullanÄ±cÄ± oluÅŸturmayÄ± (MFA desteÄŸi de dahil) ve ayrÄ±ca kullanÄ±labilir kimlik havuzu kimlik bilgilerini, id token'larÄ±nda devralÄ±nabilir rolleri otomatikleÅŸtirir.

ModÃ¼llerin iÅŸlevlerinin aÃ§Ä±klamasÄ± iÃ§in [blog yazÄ±sÄ±nÄ±n](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2) 2. bÃ¶lÃ¼mÃ¼ne bakÄ±n. Kurulum talimatlarÄ± iÃ§in ana [Pacu](https://github.com/RhinoSecurityLabs/pacu) sayfasÄ±na bakÄ±n.

### KullanÄ±m

Belirli bir kimlik havuzu ve kullanÄ±cÄ± havuzu istemcisine karÅŸÄ± kullanÄ±cÄ± oluÅŸturma ve tÃ¼m ayrÄ±calÄ±k yÃ¼kseltme vektÃ¶rlerini denemek iÃ§in Ã¶rnek cognito__attack kullanÄ±mÄ±:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Mevcut AWS hesabÄ±nda gÃ¶rÃ¼lebilen tÃ¼m kullanÄ±cÄ± havuzlarÄ±, kullanÄ±cÄ± havuzu istemcileri, kimlik havuzlarÄ±, kullanÄ±cÄ±lar vb. bilgileri toplamak iÃ§in Ã¶rnek cognito__enum kullanÄ±mÄ±:
```bash
Pacu (new:test) > run cognito__enum
```
### Kimlik Havuzu KimliÄŸi

Kimlik HavuzlarÄ±, sadece **Kimlik Havuzu KimliÄŸini bilen kimlik doÄŸrulanmamÄ±ÅŸ kullanÄ±cÄ±lara** IAM rolleri verebilir (bu oldukÃ§a yaygÄ±n olarak **bulunabilir**). Bu bilgiye sahip bir saldÄ±rgan, bu IAM rolÃ¼ne **eriÅŸmeyi deneyebilir** ve onu istismar edebilir.\
AyrÄ±ca, IAM rolleri, Kimlik Havuzuna eriÅŸen **kimlik doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ±lara da atanabilir**. Bir saldÄ±rgan, bir kullanÄ±cÄ±yÄ± **kaydetme** yeteneÄŸine sahipse veya kimlik havuzunda kullanÄ±lan **kimlik saÄŸlayÄ±cÄ±ya zaten eriÅŸimi varsa**, kimlik doÄŸrulanmÄ±ÅŸ kullanÄ±cÄ±lara verilen **IAM rolÃ¼ne eriÅŸebilir** ve ayrÄ±calÄ±klarÄ±nÄ± kÃ¶tÃ¼ye kullanabilir.

[**Bunu nasÄ±l yapacaÄŸÄ±nÄ±zÄ± buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-identity-pools.md).

### KullanÄ±cÄ± Havuzu KimliÄŸi

VarsayÄ±lan olarak, Cognito yeni bir kullanÄ±cÄ± **kaydetmeye izin verir**. Bir kullanÄ±cÄ±yÄ± kaydedebilmek, size **altta yatan uygulamaya eriÅŸim** veya Cognito KullanÄ±cÄ± Havuzu'nu kimlik saÄŸlayÄ±cÄ± olarak kabul eden bir Kimlik Havuzunun **kimlik doÄŸrulama IAM eriÅŸim rolÃ¼ne eriÅŸim** saÄŸlayabilir. [**Bunu nasÄ±l yapacaÄŸÄ±nÄ±zÄ± buradan kontrol edin**](../aws-services/aws-cognito-enum/cognito-user-pools.md#registration).

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin, Ã¶zel [**NFT'lerimizi**](https://opensea.io/collection/the-peass-family) gÃ¶rÃ¼n
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'Ä± takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
