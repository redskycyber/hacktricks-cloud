# DO - Kubernetes (DOKS)

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## Osnovne informacije

### DigitalOcean Kubernetes (DOKS)

DOKS je upravljana Kubernetes usluga koju nudi DigitalOcean. Usluga je dizajnirana za **implementaciju i upravljanje Kubernetes klasterima na DigitalOcean platformi**. Klju캜ni aspekti DOKS-a uklju캜uju:

1. **Lako upravljanje**: Zahtev za postavljanje i odr쬬vanje osnovne infrastrukture je eliminisan, 코to pojednostavljuje upravljanje Kubernetes klasterima.
2. **Korisni캜ki prijateljski interfejs**: Pru쬬 intuitivan interfejs koji olak코ava kreiranje i administraciju klastera.
3. **Integracija sa DigitalOcean uslugama**: Bez problema se integri코e sa drugim uslugama koje pru쬬 DigitalOcean, kao 코to su Load Balanceri i Block Storage.
4. **Automatsko a쬿riranje i nadogradnja**: Usluga uklju캜uje automatsko a쬿riranje i nadogradnju klastera kako bi bili a쬿rirani. 

### Veza
```bash
# Generate kubeconfig from doctl
doctl kubernetes cluster kubeconfig save <cluster-id>

# Use a kubeconfig file that you can download from the console
kubectl --kubeconfig=/<pathtodirectory>/k8s-1-25-4-do-0-ams3-1670939911166-kubeconfig.yaml get nodes
```
### Enumeracija

#### Identifikacija klastera Kubernetes

Da biste zapo캜eli testiranje penetracije na klasteru DigitalOcean Kubernetes (DOKS), prvo morate identifikovati IP adresu klastera. Mo쬰te to uraditi na nekoliko na캜ina:

1. **DigitalOcean API**: Koristite DigitalOcean API da biste dobili informacije o klasteru, uklju캜uju캖i IP adresu.

2. **DNS rezolucija**: Ako znate ime klastera, mo쬰te koristiti DNS rezoluciju da biste dobili IP adresu. Na primer, ako je ime klastera `my-cluster`, mo쬰te koristiti komandu `nslookup my-cluster` da biste dobili IP adresu.

3. **Port skeniranje**: Mo쬰te koristiti alat za skeniranje portova kao 코to je Nmap da biste prona코li otvorene portove na IP adresi klastera. Na primer, mo쬰te koristiti komandu `nmap -p- <IP_adresa>` da biste skenirali sve portove na odre캠enoj IP adresi.

#### Identifikacija servisa

Nakon 코to identifikujete IP adresu klastera, slede캖i korak je identifikacija servisa koji se izvr코avaju na klasteru. Mo쬰te koristiti alate kao 코to su `kube-hunter` ili `kube-scan` da biste prona코li servise koji su izlo쬰ni na klasteru.

#### Skupljanje informacija o servisima

Kada identifikujete servise koji su izlo쬰ni na klasteru, slede캖i korak je skupljanje informacija o tim servisima. Mo쬰te koristiti alate kao 코to su `kubectl` ili `kube-apiserver` da biste dobili informacije o servisima, kao 코to su verzija, konfiguracija i privilegije.

#### Identifikacija ranjivosti

Nakon 코to skupite informacije o servisima, slede캖i korak je identifikacija potencijalnih ranjivosti. Mo쬰te koristiti alate kao 코to su `kube-bench` ili `kube-hunter` da biste prona코li ranjivosti u konfiguraciji klastera.

#### Identifikacija privilegija

Kona캜no, trebali biste identifikovati privilegije koje su dodeljene servisima na klasteru. Mo쬰te koristiti alate kao 코to su `kubectl` ili `kube-apiserver` da biste dobili informacije o privilegijama servisa, kao 코to su dozvole za 캜itanje, pisanje ili izvr코avanje.
```bash
# Get clusters
doctl kubernetes cluster list

# Get node pool of cluster (number of nodes)
doctl kubernetes cluster node-pool list <cluster-id>

# Get DO resources used by the cluster
doctl kubernetes cluster list-associated-resources <cluster-id>
```
<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRETPLATU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitter-u** 游냕 [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
