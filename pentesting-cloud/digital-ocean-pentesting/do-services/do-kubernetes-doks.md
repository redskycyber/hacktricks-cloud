# DO - Kubernetes (DOKS)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>λ¥Ό ν†µν•΄ AWS ν•΄ν‚Ήμ„ μ²μλ¶€ν„° μ „λ¬Έκ°€κΉμ§€ λ°°μ›λ³΄μ„Έμ”<strong>!</strong></summary>

HackTricksλ¥Ό μ§€μ›ν•λ” λ‹¤λ¥Έ λ°©λ²•:

* **νμ‚¬λ¥Ό HackTricksμ—μ„ κ΄‘κ³ ν•κ±°λ‚ HackTricksλ¥Ό PDFλ΅ λ‹¤μ΄λ΅λ“**ν•λ ¤λ©΄ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)λ¥Ό ν™•μΈν•μ„Έμ”!
* [**κ³µμ‹ PEASS & HackTricks μ¤μ›¨κ·Έ**](https://peass.creator-spring.com)λ¥Ό μ–»μΌμ„Έμ”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)λ¥Ό λ°κ²¬ν•μ„Έμ”. λ…μ μ μΈ [**NFTs**](https://opensea.io/collection/the-peass-family) μ»¬λ ‰μ…μ…λ‹λ‹¤.
* π’¬ [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**ν…”λ κ·Έλ¨ κ·Έλ£Ή**](https://t.me/peass)μ— **μ°Έμ—¬**ν•κ±°λ‚ **Twitter** π¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)λ¥Ό **ν”λ΅μ°**ν•μ„Έμ”.
* **HackTricks**μ™€ **HackTricks Cloud** github μ €μ¥μ†μ— PRμ„ μ μ¶ν•μ—¬ **ν•΄ν‚Ή νΈλ¦­μ„ κ³µμ **ν•μ„Έμ”.

</details>

## κΈ°λ³Έ μ •λ³΄

### DigitalOcean Kubernetes (DOKS)

DOKSλ” DigitalOceanμ—μ„ μ κ³µν•λ” κ΄€λ¦¬ν• Kubernetes μ„λΉ„μ¤μ…λ‹λ‹¤. μ΄ μ„λΉ„μ¤λ” DigitalOcean ν”λ«νΌμ—μ„ Kubernetes ν΄λ¬μ¤ν„°λ¥Ό **λ°°ν¬ν•κ³  κ΄€λ¦¬**ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤. DOKSμ μ£Όμ” νΉμ§•μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

1. **κ΄€λ¦¬μ μ©μ΄μ„±**: κΈ°λ° μΈν”„λΌμ μ„¤μ •κ³Ό μ μ§€ κ΄€λ¦¬ μ”κµ¬ μ‚¬ν•­μ΄ μ κ±°λμ–΄ Kubernetes ν΄λ¬μ¤ν„°μ κ΄€λ¦¬κ°€ κ°„μ†ν™”λ©λ‹λ‹¤.
2. **μ‚¬μ©μ μΉν™”μ  μΈν„°νμ΄μ¤**: μ§κ΄€μ μΈ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•μ—¬ ν΄λ¬μ¤ν„°μ μƒμ„±κ³Ό κ΄€λ¦¬λ¥Ό μ©μ΄ν•κ² ν•©λ‹λ‹¤.
3. **DigitalOcean μ„λΉ„μ¤μ™€μ ν†µν•©**: λ΅λ“ λ°Έλ°μ„ λ° λΈ”λ΅ μ¤ν† λ¦¬μ§€μ™€ κ°™μ€ DigitalOceanμ—μ„ μ κ³µν•λ” λ‹¤λ¥Έ μ„λΉ„μ¤μ™€ μ›ν™ν•κ² ν†µν•©λ©λ‹λ‹¤.
4. **μλ™ μ—…λ°μ΄νΈ λ° μ—…κ·Έλ μ΄λ“**: ν΄λ¬μ¤ν„°μ μλ™ μ—…λ°μ΄νΈ λ° μ—…κ·Έλ μ΄λ“κ°€ ν¬ν•¨λμ–΄ μµμ‹  μƒνƒλ¥Ό μ μ§€ν•©λ‹λ‹¤.


### μ—°κ²°
```bash
# Generate kubeconfig from doctl
doctl kubernetes cluster kubeconfig save <cluster-id>

# Use a kubeconfig file that you can download from the console
kubectl --kubeconfig=/<pathtodirectory>/k8s-1-25-4-do-0-ams3-1670939911166-kubeconfig.yaml get nodes
```
### μ—΄κ±°

#### 1. ν΄λ¬μ¤ν„° μ •λ³΄ μμ§‘

- `kubectl` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ ν΄λ¬μ¤ν„° μ •λ³΄λ¥Ό μμ§‘ν•  μ μμµλ‹λ‹¤.
- `kubectl cluster-info` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ ν΄λ¬μ¤ν„°μ μ •λ³΄λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
- `kubectl get nodes` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ ν΄λ¬μ¤ν„°μ λ…Έλ“ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
- `kubectl get pods --all-namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ νλ“ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

#### 2. μ„λΉ„μ¤ λ° λ„¤μ„μ¤νμ΄μ¤ μ—΄κ±°

- `kubectl get services --all-namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ μ„λΉ„μ¤ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
- `kubectl get namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ ν΄λ¬μ¤ν„°μ λ„¤μ„μ¤νμ΄μ¤ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

#### 3. RBAC μ—΄κ±°

- `kubectl get roles --all-namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ λ΅¤ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
- `kubectl get rolebindings --all-namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ λ΅¤λ°”μΈλ”© λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

#### 4. μ¤ν† λ¦¬μ§€ μ—΄κ±°

- `kubectl get pv --all-namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ μκµ¬ λ³Όλ¥¨ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
- `kubectl get pvc --all-namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ μκµ¬ λ³Όλ¥¨ ν΄λ μ„ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

#### 5. μ‹ν¬λ¦Ώ μ—΄κ±°

- `kubectl get secrets --all-namespaces` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ μ‹ν¬λ¦Ώ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

#### 6. μ»¨ν…μ΄λ„ μ΄λ―Έμ§€ μ—΄κ±°

- `kubectl get pods --all-namespaces -o jsonpath="{..image}" | tr -s '[[:space:]]' '\n' | sort | uniq -c` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤μ„μ¤νμ΄μ¤μ μ»¨ν…μ΄λ„ μ΄λ―Έμ§€ λ©λ΅μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.
```bash
# Get clusters
doctl kubernetes cluster list

# Get node pool of cluster (number of nodes)
doctl kubernetes cluster node-pool list <cluster-id>

# Get DO resources used by the cluster
doctl kubernetes cluster list-associated-resources <cluster-id>
```
<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>λ¥Ό ν†µν•΄ AWS ν•΄ν‚Ήμ„ μ²μλ¶€ν„° μ „λ¬Έκ°€κΉμ§€ λ°°μ›λ³΄μ„Έμ”<strong>!</strong></summary>

HackTricksλ¥Ό μ§€μ›ν•λ” λ‹¤λ¥Έ λ°©λ²•:

* **νμ‚¬λ¥Ό HackTricksμ—μ„ κ΄‘κ³ ν•κ±°λ‚ HackTricksλ¥Ό PDFλ΅ λ‹¤μ΄λ΅λ“**ν•λ ¤λ©΄ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)λ¥Ό ν™•μΈν•μ„Έμ”!
* [**κ³µμ‹ PEASS & HackTricks μ¤μ›¨κ·Έ**](https://peass.creator-spring.com)λ¥Ό μ–»μΌμ„Έμ”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)λ¥Ό λ°κ²¬ν•μ„Έμ”. λ…μ μ μΈ [**NFTs**](https://opensea.io/collection/the-peass-family) μ»¬λ ‰μ…μ…λ‹λ‹¤.
* π’¬ [**Discord κ·Έλ£Ή**](https://discord.gg/hRep4RUj7f) λλ” [**ν…”λ κ·Έλ¨ κ·Έλ£Ή**](https://t.me/peass)μ— **μ°Έμ—¬**ν•κ±°λ‚ **Twitter** π¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)λ¥Ό **ν”λ΅μ°**ν•μ„Έμ”.
* **Hacking νΈλ¦­μ„ κ³µμ ν•λ ¤λ©΄** [**HackTricks**](https://github.com/carlospolop/hacktricks) λ° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github μ €μ¥μ†μ— PRμ„ μ μ¶ν•μ„Έμ”.

</details>
