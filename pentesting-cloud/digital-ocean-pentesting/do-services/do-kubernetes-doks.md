# DO - Kubernetes (DOKS)

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

### DigitalOcean Kubernetes (DOKS)

DOKS to zarzÄ…dzana usÅ‚uga Kubernetes oferowana przez DigitalOcean. UsÅ‚uga ta jest zaprojektowana do **wdroÅ¼enia i zarzÄ…dzania klastrami Kubernetes na platformie DigitalOcean**. Kluczowe aspekty DOKS obejmujÄ…:

1. **ÅatwoÅ›Ä‡ zarzÄ…dzania**: Eliminuje siÄ™ koniecznoÅ›Ä‡ konfigurowania i utrzymywania infrastruktury podstawowej, upraszczajÄ…c zarzÄ…dzanie klastrami Kubernetes.
2. **Przyjazny interfejs uÅ¼ytkownika**: Zapewnia intuicyjny interfejs, ktÃ³ry uÅ‚atwia tworzenie i administrowanie klastrami.
3. **Integracja z usÅ‚ugami DigitalOcean**: Bezproblemowo integruje siÄ™ z innymi usÅ‚ugami oferowanymi przez DigitalOcean, takimi jak Load Balancers i Block Storage.
4. **Automatyczne aktualizacje i uaktualnienia**: UsÅ‚uga obejmuje automatyczne aktualizowanie i uaktualnianie klastrÃ³w, aby zapewniÄ‡, Å¼e sÄ… one aktualne.


### PoÅ‚Ä…czenie
```bash
# Generate kubeconfig from doctl
doctl kubernetes cluster kubeconfig save <cluster-id>

# Use a kubeconfig file that you can download from the console
kubectl --kubeconfig=/<pathtodirectory>/k8s-1-25-4-do-0-ams3-1670939911166-kubeconfig.yaml get nodes
```
### Wyliczanie

#### Wykrywanie klastra Kubernetes

Aby rozpoczÄ…Ä‡ test penetracyjny klastra Kubernetes w DigitalOcean, pierwszym krokiem jest wykrycie istniejÄ…cego klastra. MoÅ¼na to zrobiÄ‡, sprawdzajÄ…c dostÄ™pne usÅ‚ugi w DigitalOcean lub korzystajÄ…c z narzÄ™dzi do skanowania sieci, takich jak Nmap.

##### Sprawdzanie dostÄ™pnych usÅ‚ug w DigitalOcean

MoÅ¼na sprawdziÄ‡ dostÄ™pne usÅ‚ugi w DigitalOcean, aby znaleÅºÄ‡ informacje o klastrze Kubernetes. MoÅ¼na to zrobiÄ‡, korzystajÄ…c z interfejsu uÅ¼ytkownika DigitalOcean lub za pomocÄ… API DigitalOcean.

##### Skanowanie sieci za pomocÄ… Nmap

Innym sposobem na wykrycie klastra Kubernetes jest skanowanie sieci za pomocÄ… narzÄ™dzia Nmap. MoÅ¼na to zrobiÄ‡, skanujÄ…c adresy IP w zakresie, ktÃ³ry jest przypisany do klastra Kubernetes.

#### Wykrywanie wyciekÃ³w informacji

Po wykryciu klastra Kubernetes, kolejnym krokiem jest wykrycie potencjalnych wyciekÃ³w informacji. MoÅ¼na to zrobiÄ‡, sprawdzajÄ…c publicznie dostÄ™pne zasoby klastra, takie jak serwisy, podstrony, pliki konfiguracyjne itp.

##### PrzeglÄ…danie publicznie dostÄ™pnych zasobÃ³w

MoÅ¼na przeglÄ…daÄ‡ publicznie dostÄ™pne zasoby klastra Kubernetes, takie jak serwisy, podstrony, pliki konfiguracyjne itp., aby znaleÅºÄ‡ potencjalne wycieki informacji. MoÅ¼na to zrobiÄ‡, korzystajÄ…c z przeglÄ…darki internetowej lub narzÄ™dzi do przeglÄ…dania zasobÃ³w, takich jak dirb czy gobuster.

##### Analiza plikÃ³w konfiguracyjnych

Pliki konfiguracyjne klastra Kubernetes mogÄ… zawieraÄ‡ poufne informacje, takie jak hasÅ‚a, klucze API itp. MoÅ¼na przeprowadziÄ‡ analizÄ™ tych plikÃ³w, aby znaleÅºÄ‡ potencjalne wycieki informacji. MoÅ¼na to zrobiÄ‡, korzystajÄ…c z narzÄ™dzi do analizy plikÃ³w, takich jak grep czy awk.

#### Wykrywanie podatnoÅ›ci

Po wykryciu klastra Kubernetes i potencjalnych wyciekÃ³w informacji, kolejnym krokiem jest wykrycie podatnoÅ›ci. MoÅ¼na to zrobiÄ‡, przeprowadzajÄ…c skanowanie podatnoÅ›ci klastra Kubernetes za pomocÄ… narzÄ™dzi do skanowania podatnoÅ›ci, takich jak kube-hunter czy kube-bench.

##### Skanowanie podatnoÅ›ci za pomocÄ… kube-hunter

NarzÄ™dzie kube-hunter jest specjalnie zaprojektowane do skanowania podatnoÅ›ci klastra Kubernetes. MoÅ¼na je uÅ¼yÄ‡ do przeprowadzenia skanowania podatnoÅ›ci klastra Kubernetes i znalezienia potencjalnych luk w zabezpieczeniach.

##### Skanowanie podatnoÅ›ci za pomocÄ… kube-bench

NarzÄ™dzie kube-bench jest innym narzÄ™dziem do skanowania podatnoÅ›ci klastra Kubernetes. MoÅ¼na je uÅ¼yÄ‡ do przeprowadzenia skanowania podatnoÅ›ci klastra Kubernetes i sprawdzenia, czy klastr speÅ‚nia zalecane standardy bezpieczeÅ„stwa.
```bash
# Get clusters
doctl kubernetes cluster list

# Get node pool of cluster (number of nodes)
doctl kubernetes cluster node-pool list <cluster-id>

# Get DO resources used by the cluster
doctl kubernetes cluster list-associated-resources <cluster-id>
```
<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytoriÃ³w github.

</details>
