# DO - Rejestr kontener贸w

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCYJNY**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

DigitalOcean Container Registry to usuga dostarczana przez DigitalOcean, kt贸ra **pozwala przechowywa i zarzdza obrazami Docker**. Jest to **prywatny** rejestr, co oznacza, 偶e obrazy przechowywane w nim s dostpne tylko dla Ciebie i u偶ytkownik贸w, kt贸rym udzielisz dostpu. Pozwala to na bezpieczne przechowywanie i zarzdzanie obrazami Docker oraz ich wykorzystywanie do wdra偶ania kontener贸w w DigitalOcean lub w dowolnym innym rodowisku obsugujcym Docker.

Podczas tworzenia Rejestru Kontener贸w mo偶liwe jest **utworzenie tajemnicy z dostpem do pobierania obraz贸w (odczytu) we wszystkich przestrzeniach nazw** klastr贸w Kubernetes.

### Poczenie
```bash
# Using doctl
doctl registry login

# Using docker (You need an API token, use it as username and as password)
docker login registry.digitalocean.com
Username: <paste-api-token>
Password: <paste-api-token>
```
### Wyliczanie

#### Wyliczanie kontener贸w

Aby rozpocz proces testowania penetracyjnego kontener贸w w DigitalOcean Container Registry, mo偶emy zastosowa nastpujce techniki wyliczania:

1. **Przeszukiwanie DNS**: Mo偶emy przeszuka rekordy DNS, takie jak rekordy A, CNAME i TXT, aby znale藕 informacje o kontenerach i ich adresach IP.

2. **Przeszukiwanie subdomen**: Mo偶emy przeszuka subdomeny, takie jak `registry.example.com`, aby znale藕 kontenery w DigitalOcean Container Registry.

3. **Przeszukiwanie API**: Mo偶emy przeszuka publiczne interfejsy API, takie jak `https://registry.example.com/v2/_catalog`, aby uzyska list dostpnych kontener贸w.

4. **Przeszukiwanie metadanych**: Mo偶emy przeszuka metadane kontener贸w, takie jak etykiety, opisy i tagi, aby uzyska wicej informacji o nich.

5. **Przeszukiwanie repozytori贸w**: Mo偶emy przeszuka repozytoria kontener贸w, takie jak `https://registry.example.com/v2/<repository>/tags/list`, aby uzyska list tag贸w dla danego repozytorium.

6. **Przeszukiwanie historii zmian**: Mo偶emy przeszuka histori zmian kontener贸w, tak jak `https://registry.example.com/v2/<repository>/manifests/<tag>`, aby uzyska informacje o zmianach w danym kontenerze.

#### Wyliczanie uprawnie

Podczas testowania penetracyjnego kontener贸w w DigitalOcean Container Registry, mo偶emy r贸wnie偶 przeprowadzi wyliczanie uprawnie, aby zidentyfikowa potencjalne luki w zabezpieczeniach. Oto kilka technik, kt贸re mo偶emy zastosowa:

1. **Przeszukiwanie publicznych repozytori贸w**: Mo偶emy przeszuka publiczne repozytoria kontener贸w, takie jak `https://registry.example.com/v2/_catalog`, aby znale藕 repozytoria, kt贸re s publicznie dostpne i mog zawiera poufne informacje.

2. **Przeszukiwanie prywatnych repozytori贸w**: Mo偶emy przeszuka prywatne repozytoria kontener贸w, takie jak `https://registry.example.com/v2/_catalog`, aby znale藕 repozytoria, kt贸re s dostpne tylko dla uprawnionych u偶ytkownik贸w, ale mog mie sabe zabezpieczenia.

3. **Przeszukiwanie uprawnie**: Mo偶emy przeszuka uprawnienia kontener贸w, takie jak role, grupy i u偶ytkownicy, aby znale藕 potencjalne luki w zabezpieczeniach.

4. **Przeszukiwanie uwierzytelniania**: Mo偶emy przeszuka metody uwierzytelniania, takie jak klucze API, tokeny i hasa, aby znale藕 sabe lub niewaciwie skonfigurowane metody uwierzytelniania.

5. **Przeszukiwanie log贸w**: Mo偶emy przeszuka logi kontener贸w, takie jak logi uwierzytelniania i logi dostpu, aby znale藕 podejrzane aktywnoci lub pr贸by nieautoryzowanego dostpu.

6. **Przeszukiwanie podatnoci**: Mo偶emy przeszuka podatnoci zwizane z kontenerami, takie jak znane luki w zabezpieczeniach w oprogramowaniu kontener贸w, aby znale藕 potencjalne zagro偶enia.
```bash
# Get creds to access the registry from the API
doctl registry docker-config

# List
doctl registry repository list-v2
```
<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) repozytori贸w github.

</details>
