# DO - ç½‘ç»œ

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥**åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>

### åŸŸå
```bash
doctl compute domain list
doctl compute domain records list <domain>
# You can also create records
```
### ä¿ç•™IPåœ°å€

DigitalOceanä½¿ç”¨ä¸€äº›ä¿ç•™IPåœ°å€ï¼Œè¿™äº›åœ°å€ä¸èƒ½åˆ†é…ç»™ç”¨æˆ·çš„Dropletsã€‚è¿™äº›ä¿ç•™IPåœ°å€ç”¨äºç‰¹å®šçš„ç½‘ç»œåŠŸèƒ½å’ŒæœåŠ¡ã€‚ä»¥ä¸‹æ˜¯DigitalOceanä¿ç•™IPåœ°å€çš„åˆ—è¡¨ï¼š

- `10.0.0.0/8`ï¼šè¿™ä¸ªIPåœ°å€èŒƒå›´ç”¨äºç§æœ‰ç½‘ç»œåŠŸèƒ½ã€‚
- `169.254.0.0/16`ï¼šè¿™ä¸ªIPåœ°å€èŒƒå›´ç”¨äºè‡ªåŠ¨é…ç½®ï¼ˆä¾‹å¦‚DHCPï¼‰å’Œæœ¬åœ°é“¾æ¥ï¼ˆä¾‹å¦‚IPv4æœ¬åœ°é“¾æ¥åœ°å€ï¼‰ã€‚
- `192.0.2.0/24`ï¼šè¿™ä¸ªIPåœ°å€èŒƒå›´ç”¨äºæ–‡æ¡£å’Œç¤ºä¾‹ç›®çš„ã€‚
- `198.51.100.0/24`ï¼šè¿™ä¸ªIPåœ°å€èŒƒå›´ç”¨äºæ–‡æ¡£å’Œç¤ºä¾‹ç›®çš„ã€‚
- `203.0.113.0/24`ï¼šè¿™ä¸ªIPåœ°å€èŒƒå›´ç”¨äºæ–‡æ¡£å’Œç¤ºä¾‹ç›®çš„ã€‚

è¯·æ³¨æ„ï¼Œè¿™äº›ä¿ç•™IPåœ°å€ä¸èƒ½ç”¨äºæ‚¨çš„Dropletsï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¢«DigitalOceanç”¨äºç‰¹å®šçš„ç½‘ç»œåŠŸèƒ½å’ŒæœåŠ¡ã€‚
```bash
doctl compute reserved-ip list
doctl compute reserved-ip-action unassign <ip>
```
### è´Ÿè½½å‡è¡¡å™¨

Load balancers distribute incoming network traffic across multiple servers to ensure efficient utilization of resources and improve the availability and scalability of applications. In DigitalOcean, load balancers are used to distribute traffic to backend Droplets.

è´Ÿè½½å‡è¡¡å™¨å°†ä¼ å…¥çš„ç½‘ç»œæµé‡åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œä»¥ç¡®ä¿èµ„æºçš„é«˜æ•ˆåˆ©ç”¨ï¼Œå¹¶æé«˜åº”ç”¨ç¨‹åºçš„å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚åœ¨DigitalOceanä¸­ï¼Œè´Ÿè½½å‡è¡¡å™¨ç”¨äºå°†æµé‡åˆ†å‘åˆ°åç«¯çš„Dropletsä¸Šã€‚

DigitalOcean provides two types of load balancers: 

DigitalOceanæä¾›ä¸¤ç§ç±»å‹çš„è´Ÿè½½å‡è¡¡å™¨ï¼š

1. **Standard Load Balancers**: These load balancers are designed for HTTP/HTTPS traffic and support session persistence, SSL termination, and health checks. They operate at the transport layer (Layer 4) and distribute traffic based on IP addresses and ports.

   **æ ‡å‡†è´Ÿè½½å‡è¡¡å™¨**ï¼šè¿™äº›è´Ÿè½½å‡è¡¡å™¨ä¸“ä¸ºHTTP/HTTPSæµé‡è®¾è®¡ï¼Œæ”¯æŒä¼šè¯ä¿æŒã€SSLç»ˆæ­¢å’Œå¥åº·æ£€æŸ¥ã€‚å®ƒä»¬åœ¨ä¼ è¾“å±‚ï¼ˆç¬¬4å±‚ï¼‰æ“ä½œï¼Œå¹¶æ ¹æ®IPåœ°å€å’Œç«¯å£åˆ†å‘æµé‡ã€‚

2. **Managed Databases Load Balancers**: These load balancers are specifically designed for distributing traffic to managed databases. They operate at the application layer (Layer 7) and distribute traffic based on domain names and paths.

   **æ‰˜ç®¡æ•°æ®åº“è´Ÿè½½å‡è¡¡å™¨**ï¼šè¿™äº›è´Ÿè½½å‡è¡¡å™¨ä¸“é—¨ç”¨äºå°†æµé‡åˆ†å‘åˆ°æ‰˜ç®¡æ•°æ®åº“ã€‚å®ƒä»¬åœ¨åº”ç”¨å±‚ï¼ˆç¬¬7å±‚ï¼‰æ“ä½œï¼Œå¹¶æ ¹æ®åŸŸåå’Œè·¯å¾„åˆ†å‘æµé‡ã€‚

To configure a load balancer in DigitalOcean, you need to define the forwarding rules, health checks, and SSL settings. Once configured, the load balancer will distribute incoming traffic to the backend Droplets based on the defined rules.

è¦åœ¨DigitalOceanä¸­é…ç½®è´Ÿè½½å‡è¡¡å™¨ï¼Œæ‚¨éœ€è¦å®šä¹‰è½¬å‘è§„åˆ™ã€å¥åº·æ£€æŸ¥å’ŒSSLè®¾ç½®ã€‚é…ç½®å®Œæˆåï¼Œè´Ÿè½½å‡è¡¡å™¨å°†æ ¹æ®å®šä¹‰çš„è§„åˆ™å°†ä¼ å…¥çš„æµé‡åˆ†å‘åˆ°åç«¯çš„Dropletsä¸Šã€‚
```bash
doctl compute load-balancer list
doctl compute load-balancer remove-droplets <id> --droplet-ids 12,33
doctl compute load-balancer add-forwarding-rules <id> --forwarding-rules entry_protocol:tcp,entry_port:3306,...
```
### VPC

è™šæ‹Ÿç§æœ‰äº‘ï¼ˆVPCï¼‰æ˜¯ä¸€ç§åœ¨äº‘ç¯å¢ƒä¸­åˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿç½‘ç»œçš„æœåŠ¡ã€‚VPCå…è®¸æ‚¨åœ¨äº‘ä¸­åˆ’åˆ†é€»è¾‘éš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥åœ¨å…¶ä¸­éƒ¨ç½²å’Œç®¡ç†äº‘èµ„æºã€‚é€šè¿‡ä½¿ç”¨VPCï¼Œæ‚¨å¯ä»¥æ§åˆ¶ç½‘ç»œçš„IPåœ°å€èŒƒå›´ã€å­ç½‘ã€è·¯ç”±è¡¨å’Œç½‘ç»œè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ï¼Œä»¥åŠä¸å…¶ä»–VPCä¹‹é—´çš„è¿æ¥ã€‚

#### VPCç½‘ç»œé…ç½®

åœ¨DigitalOceanä¸­ï¼ŒVPCç½‘ç»œé…ç½®ç”±ä»¥ä¸‹ç»„ä»¶ç»„æˆï¼š

- **VPC**ï¼šä¸€ä¸ªé€»è¾‘éš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œç”¨äºæ‰˜ç®¡æ‚¨çš„äº‘èµ„æºã€‚
- **å­ç½‘**ï¼šVPCä¸­çš„ä¸€ä¸ªIPåœ°å€èŒƒå›´ï¼Œç”¨äºåˆ’åˆ†ç½‘ç»œã€‚
- **è·¯ç”±è¡¨**ï¼šå®šä¹‰VPCä¸­æ•°æ®åŒ…çš„æµåŠ¨æ–¹å¼ã€‚
- **ç½‘ç»œè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰**ï¼šç”¨äºæ§åˆ¶è¿›å‡ºVPCçš„ç½‘ç»œæµé‡ã€‚
- **ç½‘å…³**ï¼šç”¨äºè¿æ¥VPCä¸å…¶ä»–ç½‘ç»œã€‚

#### VPCç½‘ç»œå®‰å…¨

ä¸ºäº†ç¡®ä¿VPCç½‘ç»œçš„å®‰å…¨æ€§ï¼Œæ‚¨å¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š

- **ç½‘ç»œéš”ç¦»**ï¼šä½¿ç”¨VPCå°†ä¸åŒçš„äº‘èµ„æºéš”ç¦»å¼€æ¥ï¼Œä»¥é˜²æ­¢æœªç»æˆæƒçš„è®¿é—®ã€‚
- **è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰**ï¼šé…ç½®ACLä»¥é™åˆ¶è¿›å‡ºVPCçš„ç½‘ç»œæµé‡ã€‚
- **å®‰å…¨ç»„**ï¼šåœ¨VPCä¸­çš„èµ„æºä¸Šé…ç½®å®‰å…¨ç»„ï¼Œä»¥æ§åˆ¶è¿›å‡ºèµ„æºçš„ç½‘ç»œæµé‡ã€‚
- **VPNè¿æ¥**ï¼šé€šè¿‡VPNè¿æ¥å°†æœ¬åœ°ç½‘ç»œä¸VPCç½‘ç»œå®‰å…¨åœ°è¿æ¥èµ·æ¥ã€‚

#### VPCç½‘ç»œæ‰«æ

ä¸ºäº†å‘ç°å’Œä¿®å¤æ½œåœ¨çš„å®‰å…¨æ¼æ´ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç½‘ç»œæ‰«æå·¥å…·å¯¹VPCç½‘ç»œè¿›è¡Œæ‰«æã€‚è¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨è¯†åˆ«ç½‘ç»œä¸­çš„æ¼æ´å’Œå¼±ç‚¹ï¼Œå¹¶é‡‡å–ç›¸åº”çš„æªæ–½åŠ ä»¥ä¿®å¤ã€‚

#### VPCç½‘ç»œç›‘æ§

ç›‘æ§VPCç½‘ç»œçš„æ´»åŠ¨å’Œæ€§èƒ½æ˜¯ç¡®ä¿ç½‘ç»œå®‰å…¨å’Œé«˜æ•ˆè¿è¡Œçš„å…³é”®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ç›‘æ§å·¥å…·æ¥è·Ÿè¸ªç½‘ç»œæµé‡ã€å¸¦å®½ä½¿ç”¨æƒ…å†µå’Œè¿æ¥çŠ¶æ€ï¼Œä»¥åŠæ£€æµ‹ä»»ä½•å¼‚å¸¸æ´»åŠ¨ã€‚

#### VPCç½‘ç»œæœ€ä½³å®è·µ

ä»¥ä¸‹æ˜¯ä¸€äº›VPCç½‘ç»œçš„æœ€ä½³å®è·µï¼š

- **ç½‘ç»œè§„åˆ’**ï¼šåœ¨åˆ›å»ºVPCä¹‹å‰ï¼Œä»”ç»†è§„åˆ’ç½‘ç»œçš„IPåœ°å€èŒƒå›´å’Œå­ç½‘åˆ’åˆ†ã€‚
- **å®‰å…¨æ€§**ï¼šä½¿ç”¨ACLã€å®‰å…¨ç»„å’ŒVPNè¿æ¥æ¥ç¡®ä¿VPCç½‘ç»œçš„å®‰å…¨æ€§ã€‚
- **ç›‘æ§**ï¼šå®šæœŸç›‘æ§VPCç½‘ç»œçš„æ´»åŠ¨å’Œæ€§èƒ½ã€‚
- **å¤‡ä»½å’Œæ¢å¤**ï¼šå®šæœŸå¤‡ä»½VPCç½‘ç»œçš„é…ç½®å’Œæ•°æ®ï¼Œå¹¶ç¡®ä¿æœ‰æ¢å¤è®¡åˆ’ã€‚

é€šè¿‡éµå¾ªè¿™äº›æœ€ä½³å®è·µï¼Œæ‚¨å¯ä»¥å»ºç«‹ä¸€ä¸ªå®‰å…¨ã€é«˜æ•ˆçš„VPCç½‘ç»œï¼Œå¹¶ä¿æŠ¤æ‚¨çš„äº‘èµ„æºå…å—æ½œåœ¨çš„å®‰å…¨å¨èƒã€‚
```
doctl vpcs list
```
### é˜²ç«å¢™

{% hint style="danger" %}
é»˜è®¤æƒ…å†µä¸‹ï¼Œ**Dropletsï¼ˆè™šæ‹Ÿæœºï¼‰æ˜¯æ²¡æœ‰é˜²ç«å¢™çš„**ï¼ˆä¸åƒå…¶ä»–äº‘å¹³å°å¦‚AWSæˆ–GCPï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨å¸Œæœ›DOä¿æŠ¤Dropletçš„ç«¯å£ï¼Œæ‚¨éœ€è¦**åˆ›å»ºå¹¶é™„åŠ é˜²ç«å¢™**ã€‚
{% endhint %}
```bash
doctl compute firewall list
doctl compute firewall list-by-droplet <droplet-id>
doctl compute firewall remove-droplets <fw-id> --droplet-ids <droplet-id>
```
<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„å…¬å¸åœ¨ HackTricks ä¸­è¢«å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®æœ€æ–°ç‰ˆæœ¬çš„ PEASS æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å¾—[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
