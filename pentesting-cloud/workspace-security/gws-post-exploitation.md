# GWS - Post Explotaci贸n

<details>

<summary><strong>Aprende hacking en AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆gueme** en **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Escalada de Privilegios en Google Groups

Por defecto en Workspace un **grupo** puede ser **accedido libremente** por cualquier miembro de la organizaci贸n.\
Workspace tambi茅n permite **otorgar permisos a grupos** (incluso permisos de GCP), as铆 que si se pueden unir a grupos y estos tienen permisos adicionales, un atacante podr铆a **abusar de ese camino para escalar privilegios**.

Potencialmente necesitas acceso a la consola para unirte a grupos que permiten ser unidos por cualquiera en la org. Revisa la informaci贸n de los grupos en [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups).

### Acceder a la Informaci贸n de Correo de los Grupos

Si lograste **comprometer una sesi贸n de usuario de Google**, desde [**https://groups.google.com/all-groups**](https://groups.google.com/all-groups) puedes ver el historial de correos enviados a los grupos de correo de los que el usuario es miembro, y podr铆as encontrar **credenciales** u otros **datos sensibles**.

## Pivoteo entre GCP y GWS

{% content-ref url="../gcp-security/gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](../gcp-security/gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## Takeout - Descargar Todo lo que Google Sabe sobre una Cuenta

Si tienes una **sesi贸n dentro de la cuenta de Google de la v铆ctima** puedes descargar todo lo que Google guarda sobre esa cuenta desde [**https://takeout.google.com**](https://takeout.google.com/u/1/?pageId=none)

## Vault - Descargar Todos los Datos de Workspace de los Usuarios

Si una organizaci贸n tiene **Google Vault habilitado**, podr铆as ser capaz de acceder a [**https://vault.google.com**](https://vault.google.com/u/1/) y **descargar** toda la **informaci贸n**.

## Descarga de Contactos

Desde [**https://contacts.google.com**](https://contacts.google.com/u/1/?hl=es\&tab=mC) puedes descargar todos los **contactos** del usuario.

## Cloudsearch

En [**https://cloudsearch.google.com/**](https://cloudsearch.google.com) puedes simplemente buscar **a trav茅s de todo el contenido de Workspace** (correo, drive, sitios...) al que un usuario tiene acceso. Ideal para **encontrar r谩pidamente informaci贸n sensible**.

## Google Chat

En [**https://mail.google.com/chat**](https://mail.google.com/chat) puedes acceder a un **Chat de Google**, y podr铆as encontrar informaci贸n sensible en las conversaciones (si las hay).

## Miner铆a en Google Drive

Al **compartir** un documento puedes **especificar** las **personas** que pueden acceder a 茅l una por una, **compartirlo** con tu **empresa entera** (**o** con algunos **grupos** espec铆ficos) **generando un enlace**.

Al compartir un documento, en la configuraci贸n avanzada tambi茅n puedes **permitir que las personas busquen** este archivo (por **defecto** esto est谩 **deshabilitado**). Sin embargo, es importante notar que una vez que los usuarios ven un documento, este se vuelve buscable por ellos.

Por simplicidad, la mayor铆a de las personas generar谩 y compartir谩 un enlace en lugar de a帽adir una por una las personas que pueden acceder al documento.

Algunas formas propuestas para encontrar todos los documentos:

* Buscar en chat interno, foros...
* **Rastrear** documentos **conocidos** buscando **referencias** a otros documentos. Puedes hacer esto dentro de un App Script con [**PaperChaser**](https://github.com/mandatoryprogrammer/PaperChaser)

## **Keep Notes**

En [**https://keep.google.com/**](https://keep.google.com) puedes acceder a las notas del usuario, **informaci贸n** **sensible** podr铆a estar guardada aqu铆.

### Modificar App Scripts

En [**https://script.google.com/**](https://script.google.com/) puedes encontrar los APP Scripts del usuario.

## **Administrar Workspace**

En [**https://admin.google.com**/](https://admin.google.com), podr铆as ser capaz de modificar la configuraci贸n de Workspace de toda la organizaci贸n si tienes suficientes permisos.

Tambi茅n puedes encontrar correos electr贸nicos buscando a trav茅s de todas las facturas del usuario en [**https://admin.google.com/ac/emaillogsearch**](https://admin.google.com/ac/emaillogsearch)

## Referencias

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hacking G Suite: El Poder de la Magia Oscura de Apps Script
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch y Beau Bullock - OK Google, 驴C贸mo Hago Red Team en GSuite?

<details>

<summary><strong>Aprende hacking en AWS de cero a h茅roe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Otras formas de apoyar a HackTricks:

* Si quieres ver a tu **empresa anunciada en HackTricks** o **descargar HackTricks en PDF** revisa los [**PLANES DE SUSCRIPCIN**](https://github.com/sponsors/carlospolop)!
* Consigue el [**merchandising oficial de PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubre [**La Familia PEASS**](https://opensea.io/collection/the-peass-family), nuestra colecci贸n de [**NFTs**](https://opensea.io/collection/the-peass-family) exclusivos
* **nete al**  [**grupo de Discord**](https://discord.gg/hRep4RUj7f) o al [**grupo de telegram**](https://t.me/peass) o **s铆gueme** en **Twitter**  [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Comparte tus trucos de hacking enviando PRs a los repositorios de github de** [**HackTricks**](https://github.com/carlospolop/hacktricks) y [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
