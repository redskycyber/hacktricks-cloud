# GWS - WytrwaÅ‚oÅ›Ä‡

<details>

<summary><strong>Nauka hakowania AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Kup [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** mnie na **Twitterze** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) na GitHubie.

</details>

{% hint style="danger" %}
Wszystkie dziaÅ‚ania wymienione w tej sekcji, ktÃ³re zmieniajÄ… ustawienia, spowodujÄ… **alert bezpieczeÅ„stwa na e-mail i nawet powiadomienie push na dowolne zsynchronizowane urzÄ…dzenie mobilne** z kontem.
{% endhint %}

## **WytrwaÅ‚oÅ›Ä‡ w Gmailu**

* MoÅ¼esz utworzyÄ‡ **filtry, aby ukryÄ‡** powiadomienia o bezpieczeÅ„stwie od Google
* `from: (no-reply@accounts.google.com) "Security Alert"`
* To uniemoÅ¼liwi dotarcie e-maili z powiadomieniami o bezpieczeÅ„stwie do skrzynki e-mailowej (ale nie uniemoÅ¼liwi powiadomieÅ„ push na urzÄ…dzenie mobilne)

<details>

<summary>Kroki do utworzenia filtra w Gmailu</summary>

(Instrukcje z [**tutaj**](https://support.google.com/mail/answer/6579))

1. OtwÃ³rz [Gmail](https://mail.google.com/).
2. W polu wyszukiwania na gÃ³rze kliknij PokaÅ¼ opcje wyszukiwania ![photos tune](https://lh3.googleusercontent.com/cD6YR_YvqXqNKxrWn2NAWkV6tjJtg8vfvqijKT1_9zVCrl2sAx9jROKhLqiHo2ZDYTE=w36) .
3. WprowadÅº kryteria wyszukiwania. JeÅ›li chcesz sprawdziÄ‡, czy wyszukiwanie dziaÅ‚a poprawnie, zobacz, jakie e-maile siÄ™ pojawiajÄ…, klikajÄ…c **Szukaj**.&#x20;
4. Na dole okna wyszukiwania kliknij **UtwÃ³rz filtr**.
5. Wybierz, co chcesz, aby filtr robiÅ‚.
6. Kliknij **UtwÃ³rz filtr**.

SprawdÅº swoje obecne filtry (aby je usunÄ…Ä‡) w [https://mail.google.com/mail/u/0/#settings/filters](https://mail.google.com/mail/u/0/#settings/filters)

</details>

<figure><img src="../../.gitbook/assets/image (331).png" alt=""><figcaption></figcaption></figure>

* UtwÃ³rz **adres przekierowania do przekazywania wraÅ¼liwych informacji** (lub wszystkiego) - Wymagane jest rÄ™czne dostÄ™p.
* UtwÃ³rz adres przekierowania w [https://mail.google.com/mail/u/2/#settings/fwdandpop](https://mail.google.com/mail/u/2/#settings/fwdandpop)
* Adres odbiorczy bÄ™dzie musiaÅ‚ to potwierdziÄ‡
* NastÄ™pnie ustaw przekazywanie wszystkich e-maili, zachowujÄ…c kopiÄ™ (pamiÄ™taj, aby kliknÄ…Ä‡ Zapisz zmiany):

<figure><img src="../../.gitbook/assets/image (332).png" alt=""><figcaption></figcaption></figure>

MoÅ¼liwe jest rÃ³wnieÅ¼ tworzenie filtrÃ³w i przekazywanie tylko okreÅ›lonych e-maili na inny adres e-mail.

## HasÅ‚a aplikacji

JeÅ›li udaÅ‚o ci siÄ™ **skompromitowaÄ‡ sesjÄ™ uÅ¼ytkownika Google** i uÅ¼ytkownik miaÅ‚ **2FA**, moÅ¼esz **wygenerowaÄ‡** [**hasÅ‚o aplikacji**](https://support.google.com/accounts/answer/185833?hl=en) (zajrzyj pod link, aby zobaczyÄ‡ kroki). ZauwaÅ¼, Å¼e **HasÅ‚a aplikacji nie sÄ… juÅ¼ zalecane przez Google i sÄ… odwoÅ‚ywane**, gdy uÅ¼ytkownik **zmienia hasÅ‚o do konta Google.**

**Nawet jeÅ›li masz otwartÄ… sesjÄ™, bÄ™dziesz musiaÅ‚ znaÄ‡ hasÅ‚o uÅ¼ytkownika, aby utworzyÄ‡ hasÅ‚o aplikacji.**

{% hint style="info" %}
HasÅ‚a aplikacji moÅ¼na **uÅ¼ywaÄ‡ tylko z kontami, na ktÃ³rych wÅ‚Ä…czona jest weryfikacja dwuetapowa**.
{% endhint %}

## Zmiana 2-FA i podobne

MoÅ¼liwe jest rÃ³wnieÅ¼ **wyÅ‚Ä…czenie 2-FA lub zarejestrowanie nowego urzÄ…dzenia** (lub numeru telefonu) na tej stronie [**https://myaccount.google.com/security**](https://myaccount.google.com/security)**.**\
**MoÅ¼liwe jest rÃ³wnieÅ¼ generowanie kluczy dostÄ™pu (dodawanie wÅ‚asnego urzÄ…dzenia), zmiana hasÅ‚a, dodawanie numerÃ³w telefonÃ³w do weryfikacji telefonÃ³w i odzyskiwania, zmiana e-maila odzyskiwania oraz zmiana pytaÅ„ zabezpieczajÄ…cych).**

{% hint style="danger" %}
Aby **zapobiec dotarciu powiadomieÅ„ push o bezpieczeÅ„stwie** do telefonu uÅ¼ytkownika, moÅ¼esz **wylogowaÄ‡ jego smartfon** (choÄ‡ byÅ‚oby to dziwne), poniewaÅ¼ nie moÅ¼esz zalogowaÄ‡ go ponownie stÄ…d.

MoÅ¼liwe jest rÃ³wnieÅ¼ **lokalizowanie urzÄ…dzenia.**
{% endhint %}

**Nawet jeÅ›li masz otwartÄ… sesjÄ™, bÄ™dziesz musiaÅ‚ znaÄ‡ hasÅ‚o uÅ¼ytkownika, aby zmieniÄ‡ te ustawienia.**

## WytrwaÅ‚oÅ›Ä‡ za pomocÄ… aplikacji OAuth

JeÅ›li **skompromitowaÅ‚eÅ› konto uÅ¼ytkownika**, moÅ¼esz po prostu **zaakceptowaÄ‡** udzielenie wszystkich moÅ¼liwych uprawnieÅ„ **aplikacji OAuth**. Jedynym problemem jest to, Å¼e Workspace moÅ¼e byÄ‡ skonfigurowane, aby **nie zezwalaÄ‡ na niezweryfikowane zewnÄ™trzne i/lub wewnÄ™trzne aplikacje OAuth.**\
Jest doÅ›Ä‡ powszechne, Å¼e Organizacje Workspace domyÅ›lnie nie ufajÄ… zewnÄ™trznym aplikacjom OAuth, ale ufajÄ… wewnÄ™trznym, wiÄ™c jeÅ›li masz **wystarczajÄ…ce uprawnienia do wygenerowania nowej aplikacji OAuth** wewnÄ…trz organizacji i aplikacje zewnÄ™trzne sÄ… niedozwolone, wygeneruj jÄ… i **uÅ¼yj tej nowej wewnÄ™trznej aplikacji OAuth do utrzymania wytrwaÅ‚oÅ›ci**.

SprawdÅº nastÄ™pujÄ…cÄ… stronÄ™, aby uzyskaÄ‡ wiÄ™cej informacji na temat aplikacji OAuth:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

## WytrwaÅ‚oÅ›Ä‡ poprzez delegacjÄ™

MoÅ¼esz po prostu **delegowaÄ‡ konto** do innego konta kontrolowanego przez atakujÄ…cego (jeÅ›li masz na to zezwolenie). W Organizacjach Workspace ta opcja musi byÄ‡ **wÅ‚Ä…czona**. MoÅ¼e byÄ‡ wyÅ‚Ä…czona dla wszystkich, wÅ‚Ä…czona dla niektÃ³rych uÅ¼ytkownikÃ³w/grup lub dla wszystkich (zazwyczaj jest wÅ‚Ä…czona tylko dla niektÃ³rych uÅ¼ytkownikÃ³w/grup lub caÅ‚kowicie wyÅ‚Ä…czona).

<details>

<summary>JeÅ›li jesteÅ› administratorem Workspace, sprawdÅº to, aby wÅ‚Ä…czyÄ‡ funkcjÄ™</summary>

(Informacje [skopiowane z dokumentacji](https://support.google.com/a/answer/7223765))

Jako administrator dla swojej organizacji (na przykÅ‚ad twojej pracy lub szkoÅ‚y), kontrolujesz, czy uÅ¼ytkownicy mogÄ… delegowaÄ‡ dostÄ™p do swojego konta Gmail. MoÅ¼esz pozwoliÄ‡ wszystkim na opcjÄ™ delegowania swojego konta. Lub pozwÃ³l tylko osobom z okreÅ›lonych dziaÅ‚Ã³w skonfigurowaÄ‡ delegacjÄ™. Na przykÅ‚ad, moÅ¼esz:

* DodaÄ‡ asystenta administracyjnego jako delegata do swojego konta Gmail, aby mÃ³gÅ‚ czytaÄ‡ i wysyÅ‚aÄ‡ e-maile w twoim imieniu.&#x20;
* DodaÄ‡ grupÄ™, takÄ… jak dziaÅ‚ sprzedaÅ¼y, w Grupach jako delegata, aby daÄ‡ wszystkim dostÄ™p do jednego konta Gmail.

UÅ¼ytkownicy mogÄ… delegowaÄ‡ dostÄ™p tylko do innego uÅ¼ytkownika w tej samej organizacji, niezaleÅ¼nie od ich domeny lub jednostki organizacyjnej.

### Limity i ograniczenia delegacji&#x20;

* Opcja **Zezwalaj uÅ¼ytkownikom na udzielanie dostÄ™pu do swojej skrzynki pocztowej grupie Google**: Aby skorzystaÄ‡ z tej opcji, musi byÄ‡ wÅ‚Ä…czona dla OU konta delegowanego i dla OU kaÅ¼dego czÅ‚onka grupy. CzÅ‚onkowie grupy naleÅ¼Ä…cy do OU, w ktÃ³rym ta opcja nie jest wÅ‚Ä…czona, nie mogÄ… uzyskaÄ‡ dostÄ™pu do konta delegowanego.
* W typowym uÅ¼yciu, 40 uÅ¼ytkownikÃ³w delegowanych moÅ¼e uzyskaÄ‡ dostÄ™p do konta Gmail jednoczeÅ›nie. PowyÅ¼ejprzeciÄ™tnego uÅ¼ycia przez jednego lub wiÄ™cej delegatÃ³w moÅ¼e to ograniczyÄ‡ liczbÄ™.
* Procesy automatyczne, ktÃ³re czÄ™sto uzyskujÄ… dostÄ™p do Gmaila, mogÄ… rÃ³wnieÅ¼ zmniejszyÄ‡ liczbÄ™ delegatÃ³w, ktÃ³rzy mogÄ… uzyskaÄ‡ dostÄ™p do konta jednoczeÅ›nie. Procesy te obejmujÄ… interfejsy API lub rozszerzenia przeglÄ…darki, ktÃ³re czÄ™sto uzyskujÄ… dostÄ™p do Gmaila.
* Jedno konto Gmail obsÅ‚uguje do 1 000 unikalnych delegatÃ³w. Grupa w Grupach liczy siÄ™ jako jeden delegat wobec limitu.
* Delegacja nie zwiÄ™ksza limitÃ³w konta Gmail. Konta Gmail z uÅ¼ytkownikami delegowanymi majÄ… standardowe limity i zasady konta Gmail. Aby uzyskaÄ‡ szczegÃ³Å‚y, odwiedÅº [Limity i zasady Gmaila](https://support.google.com/a/topic/28609).
### Krok 1: WÅ‚Ä…cz delegowanie Gmail dla swoich uÅ¼ytkownikÃ³w&#x20;

**Zanim zaczniesz:** Aby zastosowaÄ‡ ustawienie dla okreÅ›lonych uÅ¼ytkownikÃ³w, umieÅ›Ä‡ ich konta w [jednostce organizacyjnej](https://support.google.com/a/topic/1227584).

1. [Zaloguj siÄ™](https://admin.google.com/) do swojej [konsoli administratora Google](https://support.google.com/a/answer/182076).

Zaloguj siÄ™ za pomocÄ… konta _administratora_, a nie swojego bieÅ¼Ä…cego konta CarlosPolop@gmail.com
2. W konsoli administratora przejdÅº do Menu ![](https://storage.googleapis.com/support-kms-prod/JxKYG9DqcsormHflJJ8Z8bHuyVI5YheC0lAp)![a nastÄ™pnie](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)![](https://storage.googleapis.com/support-kms-prod/ocGtUSENh4QebLpvZcmLcNRZyaTBcolMRSyl) **Aplikacje**![a nastÄ™pnie](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Google Workspace**![a nastÄ™pnie](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Gmail**![a nastÄ™pnie](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Ustawienia uÅ¼ytkownika**.
3. Aby zastosowaÄ‡ ustawienie dla wszystkich, pozostaw wybranÄ… najwyÅ¼szÄ… jednostkÄ™ organizacyjnÄ…. W przeciwnym razie wybierz podrzÄ™dnÄ… [jednostkÄ™ organizacyjnÄ…](https://support.google.com/a/topic/1227584).
4. Kliknij **Delegowanie poczty**.
5. Zaznacz pole **PozwÃ³l uÅ¼ytkownikom delegowaÄ‡ dostÄ™p do swojej skrzynki pocztowej innym uÅ¼ytkownikom w domenie**.
6. (Opcjonalnie) Aby umoÅ¼liwiÄ‡ uÅ¼ytkownikom okreÅ›lenie, jakie informacje o nadawcy sÄ… zawarte w delegowanych wiadomoÅ›ciach wysyÅ‚anych z ich konta, zaznacz pole **Zezwalaj uÅ¼ytkownikom na dostosowanie tego ustawienia**.
7. Wybierz opcjÄ™ dla domyÅ›lnych informacji o nadawcy zawartych w wiadomoÅ›ciach wysyÅ‚anych przez delegatÃ³w:&#x20;
* **PokaÅ¼ wÅ‚aÅ›ciciela konta i delegata, ktÃ³ry wysÅ‚aÅ‚ e-mail**â€”WiadomoÅ›ci zawierajÄ… adresy e-mail wÅ‚aÅ›ciciela konta Gmail i delegata.
* **PokaÅ¼ tylko wÅ‚aÅ›ciciela konta**â€”WiadomoÅ›ci zawierajÄ… adres e-mail tylko wÅ‚aÅ›ciciela konta Gmail. Adres e-mail delegata nie jest uwzglÄ™dniony.
8. (Opcjonalnie) Aby umoÅ¼liwiÄ‡ uÅ¼ytkownikom dodanie grupy w Grupach jako delegata, zaznacz pole **Zezwalaj uÅ¼ytkownikom na udzielenie dostÄ™pu do swojej skrzynki pocztowej grupie Google**.
9. Kliknij **Zapisz**. JeÅ›li skonfigurowaÅ‚eÅ› jednostkÄ™ organizacyjnÄ… podrzÄ™dnÄ…, moÅ¼esz **Odziedzicz** lub **ZastÄ…p** ustawienia jednostki organizacyjnej nadrzÄ™dnej.
10. (Opcjonalnie) Aby wÅ‚Ä…czyÄ‡ delegowanie Gmail dla innych jednostek organizacyjnych, powtÃ³rz kroki 3â€“9.

Zmiany mogÄ… zajÄ…Ä‡ do 24 godzin, ale zazwyczaj zachodzÄ… szybciej. [Dowiedz siÄ™ wiÄ™cej](https://support.google.com/a/answer/7514107)

### Krok 2: UmoÅ¼liw uÅ¼ytkownikom ustawienie delegatÃ³w dla swoich kont

Po wÅ‚Ä…czeniu delegowania, twoi uÅ¼ytkownicy przechodzÄ… do ustawieÅ„ Gmail, aby przypisaÄ‡ delegatÃ³w. Delegaci mogÄ… wtedy czytaÄ‡, wysyÅ‚aÄ‡ i odbieraÄ‡ wiadomoÅ›ci w imieniu uÅ¼ytkownika. &#x20;

Aby uzyskaÄ‡ szczegÃ³Å‚y, skieruj uÅ¼ytkownikÃ³w do [Delegowanie i wspÃ³Å‚praca w e-mailach](https://support.google.com/a/users/answer/138350).

</details>
* **Podziel siÄ™ swoimi sztuczkami hakowania, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) **i** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **na githubie.**
