# GWS - Upornost

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** me na **Twitteru** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

{% hint style="danger" %}
Sve radnje navedene u ovom odeljku koje menjaju postavke Ä‡e generisati **bezbednosno upozorenje putem e-poÅ¡te i Äak obaveÅ¡tenje za guranje na bilo koji sinhronizovani mobilni ureÄ‘aj** sa nalogom.
{% endhint %}

## **Upornost u Gmail-u**

* MoÅ¾ete kreirati **filtere da sakrijete** bezbednosna obaveÅ¡tenja od Google-a
* `from: (no-reply@accounts.google.com) "Security Alert"`
* Ovo Ä‡e spreÄiti bezbednosne e-poruke da stignu na e-poÅ¡tu (ali neÄ‡e spreÄiti obaveÅ¡tenja za guranje na mobilni ureÄ‘aj)

<details>

<summary>Koraci za kreiranje Gmail filtera</summary>

(Instrukcije sa [**ovde**](https://support.google.com/mail/answer/6579))

1. Otvorite [Gmail](https://mail.google.com/).
2. U polju za pretragu na vrhu, kliknite na Prikaz opcija pretrage ![photos tune](https://lh3.googleusercontent.com/cD6YR_YvqXqNKxrWn2NAWkV6tjJtg8vfvqijKT1_9zVCrl2sAx9jROKhLqiHo2ZDYTE=w36) .
3. Unesite svoje kriterijume pretrage. Ako Å¾elite da proverite da li je pretraga uspela, vidite koje e-poruke se pojavljuju klikom na **Pretraga**.&#x20;
4. Na dnu prozora pretrage, kliknite na **Kreiraj filter**.
5. Izaberite Å¡ta Å¾elite da filter uradi.
6. Kliknite na **Kreiraj filter**.

Proverite svoje trenutne filtere (za brisanje) na [https://mail.google.com/mail/u/0/#settings/filters](https://mail.google.com/mail/u/0/#settings/filters)

</details>

<figure><img src="../../.gitbook/assets/image (331).png" alt=""><figcaption></figcaption></figure>

* Kreirajte **adresu za prosleÄ‘ivanje da prosledite osetljive informacije** (ili sve) - Potreban je ruÄni pristup.
* Kreirajte adresu za prosleÄ‘ivanje na [https://mail.google.com/mail/u/2/#settings/fwdandpop](https://mail.google.com/mail/u/2/#settings/fwdandpop)
* Adresa primaoca Ä‡e morati da potvrdi ovo
* Zatim, postavite da prosleÄ‘ujete sve e-poruke ÄuvajuÄ‡i kopiju (ne zaboravite da kliknete na saÄuvaj promene):

<figure><img src="../../.gitbook/assets/image (332).png" alt=""><figcaption></figcaption></figure>

TakoÄ‘e je moguÄ‡e kreirati filtere i proslediti samo odreÄ‘ene e-poruke na drugu e-adresu.

## Lozinke aplikacija

Ako ste uspeli da **kompromitujete sesiju korisnika Google-a** i korisnik je imao **2FA**, moÅ¾ete **generisati** [**lozinku aplikacije**](https://support.google.com/accounts/answer/185833?hl=en) (pratite link da vidite korake). Imajte na umu da **Google viÅ¡e ne preporuÄuje lozinke aplikacija i one se poniÅ¡tavaju** kada korisnik **promeni lozinku svog Google naloga.**

**ÄŒak i ako imate otvorenu sesiju, moraÄ‡ete znati lozinku korisnika da biste kreirali lozinku aplikacije.**

{% hint style="info" %}
Lozinke aplikacija mogu se **koristiti samo sa nalozima koji imaju ukljuÄenu dvostepenu verifikaciju**.
{% endhint %}

## Promena 2-FA i sliÄno

TakoÄ‘e je moguÄ‡e **iskljuÄiti 2-FA ili upisati novi ureÄ‘aj** (ili broj telefona) na ovoj stranici [**https://myaccount.google.com/security**](https://myaccount.google.com/security)**.**\
**TakoÄ‘e je moguÄ‡e generisati Å¡ifre (dodati svoj ureÄ‘aj), promeniti lozinku, dodati mobilne brojeve za verifikaciju telefona i oporavak, promeniti e-poÅ¡tu za oporavak i promeniti sigurnosna pitanja).**

{% hint style="danger" %}
Da biste **spreÄili bezbednosna obaveÅ¡tenja za guranje** da stignu na telefon korisnika, moÅ¾ete ga **odjaviti sa svog pametnog telefona** (iako bi to bilo Äudno) jer ga ne moÅ¾ete ponovo prijaviti sa ove stranice.

TakoÄ‘e je moguÄ‡e **locirati ureÄ‘aj.**
{% endhint %}

**ÄŒak i ako imate otvorenu sesiju, moraÄ‡ete znati lozinku korisnika da biste promenili ove postavke.**

## Upornost putem OAuth aplikacija

Ako ste **kompromitovali nalog korisnika,** moÅ¾ete jednostavno **prihvatiti** da dodelite sve moguÄ‡e dozvole **OAuth aplikaciji**. Jedini problem je Å¡to Workspace moÅ¾e biti konfigurisan da **ne dozvoljava neodobrene spoljne i/ili interne OAuth aplikacije.**\
PriliÄno je uobiÄajeno da organizacije Workspace-a ne veruju podrazumevano spoljnim OAuth aplikacijama, ali veruju internim, pa ako imate **dovoljno dozvola da generiÅ¡ete novu OAuth aplikaciju** unutar organizacije i spoljne aplikacije su zabranjene, generiÅ¡ite je i **koristite tu novu internu OAuth aplikaciju za odrÅ¾avanje upornosti**.

Proverite sledeÄ‡u stranicu za viÅ¡e informacija o OAuth aplikacijama:

{% content-ref url="gws-google-platforms-phishing/" %}
[gws-google-platforms-phishing](gws-google-platforms-phishing/)
{% endcontent-ref %}

## Upornost putem delegacije

MoÅ¾ete jednostavno **delegirati nalog** drugom nalogu koji kontroliÅ¡e napadaÄ (ako vam je dozvoljeno da to uradite). U Workspace **organizacijama** ova opcija mora biti **omoguÄ‡ena**. MoÅ¾e biti onemoguÄ‡ena za sve, omoguÄ‡ena za neke korisnike/grupe ili za sve (obiÄno je omoguÄ‡ena samo za neke korisnike/grupe ili potpuno onemoguÄ‡ena).

<details>

<summary>Ako ste administrator Workspace-a, proverite ovo da omoguÄ‡ite funkciju</summary>

(Informacije [kopirane sa dokumenata](https://support.google.com/a/answer/7223765))

Kao administrator za vaÅ¡u organizaciju (na primer, vaÅ¡ posao ili Å¡kola), kontroliÅ¡ete da li korisnici mogu delegirati pristup svom Gmail nalogu. MoÅ¾ete dozvoliti svima da imaju opciju da delegiraju svoj nalog. Ili, dozvoliti samo ljudima u odreÄ‘enim odeljenjima da postave delegaciju. Na primer, moÅ¾ete:

* Dodati administrativnog asistenta kao delegata na vaÅ¡ Gmail nalog tako da mogu Äitati i slati e-poÅ¡tu u vaÅ¡e ime.&#x20;
* Dodati grupu, poput vaÅ¡eg odeljenja prodaje, u Grupe kao delegata da svima omoguÄ‡ite pristup jednom Gmail nalogu.

Korisnici mogu delegirati pristup samo drugom korisniku u istoj organizaciji, bez obzira na njihov domen ili organizacionu jedinicu.

### OgraniÄenja i restrikcije delegacije&#x20;

* **Dozvoli korisnicima da dodele pristup svojoj poÅ¡tanskoj sanduÄiÄ‡u Google grupi** opcija: Da biste koristili ovu opciju, mora biti omoguÄ‡ena za OU delegiranog naloga i za OU svakog Älana grupe. ÄŒlanovi grupe koji pripadaju OU-u bez ove opcije omoguÄ‡ene ne mogu pristupiti delegiranom nalogu.
* Sa tipiÄnom upotrebom, 40 delegiranih korisnika moÅ¾e pristupiti Gmail nalogu istovremeno. Upotreba iznad proseka od strane jednog ili viÅ¡e delegata moÅ¾e smanjiti ovaj broj.&#x20;
* Automatizovani procesi koji Äesto pristupaju Gmailu takoÄ‘e mogu smanjiti broj delegata koji mogu pristupiti nalogu istovremeno. Ovi procesi ukljuÄuju API-je ili proÅ¡irenja pregledaÄa koji Äesto pristupaju Gmailu.
* Jedan Gmail nalog podrÅ¾ava do 1.000 jedinstvenih delegata. Grupa u Grupama se raÄuna kao jedan delegat prema limitu.
* Delegacija ne poveÄ‡ava limite za Gmail nalog. Gmail nalozi sa delegiranim korisnicima imaju standardne Gmail nalog limite i politike. Za detalje, posetite [Gmail limite i politike](https://support.google.com/a/topic/28609).
### Korak 1: UkljuÄivanje Gmail delegacije za vaÅ¡e korisnike&#x20;

**Pre nego Å¡to poÄnete:** Da biste primenili podeÅ¡avanje za odreÄ‘ene korisnike, stavite njihove naloge u [organizacionu jedinicu](https://support.google.com/a/topic/1227584).

1. [Prijavite se](https://admin.google.com/) na svoj [Google Admin konzolu](https://support.google.com/a/answer/182076).

Prijavite se koristeÄ‡i _administrator nalog_, a ne vaÅ¡ trenutni nalog CarlosPolop@gmail.com
2. U Admin konzoli, idite na Meni ![](https://storage.googleapis.com/support-kms-prod/JxKYG9DqcsormHflJJ8Z8bHuyVI5YheC0lAp)![a zatim](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)![](https://storage.googleapis.com/support-kms-prod/ocGtUSENh4QebLpvZcmLcNRZyaTBcolMRSyl) **Aplikacije**![a zatim](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Google Workspace**![a zatim](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**Gmail**![a zatim](https://storage.googleapis.com/support-kms-prod/Th2Tx0uwPMOhsMPn7nRXMUo3vs6J0pto2DTn)**PodeÅ¡avanja korisnika**.
3. Da biste primenili podeÅ¡avanje za sve, ostavite izabranu gornju organizacionu jedinicu. InaÄe, izaberite podreÄ‘enu [organizacionu jedinicu](https://support.google.com/a/topic/1227584).
4. Kliknite na **Delegacija poÅ¡te**.
5. OznaÄite polje **Dozvoli korisnicima da delegiraju pristup svojoj poÅ¡tanskoj sanduÄiÄ‡i drugim korisnicima u domenu**.
6. (Opciono) Da biste omoguÄ‡ili korisnicima da specificiraju koje informacije o poÅ¡iljaocu su ukljuÄene u delegirane poruke poslate sa njihovog naloga, oznaÄite polje **Dozvoli korisnicima da prilagode ovo podeÅ¡avanje**.
7. Izaberite opciju za podrazumevane informacije o poÅ¡iljaocu koje su ukljuÄene u porukama poslatim od strane delegata:&#x20;
* **PrikaÅ¾i vlasnika naloga i delegata koji je poslao email**â€”Poruke ukljuÄuju email adrese vlasnika Gmail naloga i delegata.
* **PrikaÅ¾i samo vlasnika naloga**â€”Poruke ukljuÄuju email adresu samo vlasnika Gmail naloga. Email adresa delegata nije ukljuÄena.
8. (Opciono) Da biste omoguÄ‡ili korisnicima da dodaju grupu u Grupama kao delegata, oznaÄite polje **Dozvoli korisnicima da dodele pristup svojoj poÅ¡tanskoj sanduÄiÄ‡i Google grupi**.
9. Kliknite na **SaÄuvaj**. Ako ste konfigurisali podreÄ‘enu organizacionu jedinicu, moÅ¾da Ä‡ete moÄ‡i da **Nasledite** ili **PrepiÅ¡ete** podeÅ¡avanja roditeljske organizacione jedinice.
10. (Opciono) Da biste ukljuÄili Gmail delegaciju za druge organizacione jedinice, ponovite korake 3â€“9.

Promene mogu potrajati do 24 sata, ali obiÄno se deÅ¡avaju brÅ¾e. [Saznajte viÅ¡e](https://support.google.com/a/answer/7514107)

### Korak 2: Neka korisnici podeÅ¡e delegacije za svoje naloge

Nakon Å¡to ukljuÄite delegaciju, vaÅ¡i korisnici idu u svoja Gmail podeÅ¡avanja da dodele delegatima. Delegati mogu Äitati, slati i primati poruke u ime korisnika. &#x20;

Za detalje, uputite korisnike na [Delegiranje i saradnju putem emaila](https://support.google.com/a/users/answer/138350).

</details>

<details>

<summary>Od obiÄnog korisnika, proverite ovde uputstva kako da pokuÅ¡ate da delegirate pristup</summary>

(Informacije kopirane [**iz dokumenata**](https://support.google.com/mail/answer/138350))

MoÅ¾ete dodati do 10 delegata.

Ako koristite Gmail putem svog posla, Å¡kole ili druge organizacije:

* MoÅ¾ete dodati do 1000 delegata unutar vaÅ¡e organizacije.
* Pri tipiÄnoj upotrebi, 40 delegata moÅ¾e pristupiti Gmail nalogu istovremeno.&#x20;
* Ako koristite automatizovane procese, kao Å¡to su API-ji ili ekstenzije pregledaÄa, nekoliko delegata moÅ¾e pristupiti Gmail nalogu istovremeno.

1. Na svom raÄunaru, otvorite [Gmail](https://mail.google.com/). Ne moÅ¾ete dodati delegate iz Gmail aplikacije.
2. U gornjem desnom uglu, kliknite na PodeÅ¡avanja ![PodeÅ¡avanja](https://lh3.googleusercontent.com/p3J-ZSPOLtuBBR\_ofWTFDfdgAYQgi8mR5c76ie8XQ2wjegk7-yyU5zdRVHKybQgUlQ=w36-h36) ![a zatim](https://lh3.googleusercontent.com/3\_l97rr0GvhSP2XV5OoCkV2ZDTIisAOczrSdzNCBxhIKWrjXjHucxNwocghoUa39gw=w36-h36) **PrikaÅ¾i sva podeÅ¡avanja**.
3. Kliknite na karticu **Nalozi i uvoz** ili **Nalozi**.
4. U odeljku "Dodeli pristup svom nalogu", kliknite na **Dodaj drugi nalog**. Ako koristite Gmail putem svog posla ili Å¡kole, vaÅ¡a organizacija moÅ¾e ograniÄiti delegiranje emaila. Ako ne vidite ovo podeÅ¡avanje, kontaktirajte svog administratora.
* Ako ne vidite Dodeli pristup svom nalogu, onda je ograniÄeno.
5. Unesite email adresu osobe koju Å¾elite dodati. Ako koristite Gmail putem svog posla, Å¡kole ili druge organizacije, i ako vaÅ¡ administrator to dozvoljava, moÅ¾ete uneti email adresu grupe. Ova grupa mora imati istu domenu kao vaÅ¡a organizacija. Spoljni Älanovi grupe su odbijeni pristup delegaciji. \
\
**VaÅ¾no:** Ako je nalog koji delegirate novi nalog ili je lozinka resetovana, Administrator mora iskljuÄiti zahtev za promenu lozinke kada se prvi put prijavite.

* [Saznajte kako Administrator moÅ¾e kreirati korisnika](https://support.google.com/a/answer/33310).
* [Saznajte kako Administrator moÅ¾e resetovati lozinke](https://support.google.com/a/answer/33319).

6\. Kliknite na **SledeÄ‡i korak** ![a zatim](https://lh3.googleusercontent.com/QbWcYKta5vh\_4-OgUeFmK-JOB0YgLLoGh69P478nE6mKdfpWQniiBabjF7FVoCVXI0g=h36) **PoÅ¡alji email za dodelu pristupa**.

Osoba koju ste dodali Ä‡e dobiti email sa zahtevom za potvrdu. Poziv istiÄe nakon nedelju dana.

Ako ste dodali grupu, svi Älanovi grupe postaÄ‡e delegati bez potrebe za potvrdom.&#x20;

Napomena: MoÅ¾e potrajati do 24 sata da delegacija poÄne da se primenjuje.

</details>

## Upornost putem Android aplikacije

Ako imate **sesiju unutar Å¾rtvinog Google naloga** moÅ¾ete pretraÅ¾iti **Play prodavnicu** i moÅ¾da moÄ‡i **instalirati malver** koji ste veÄ‡ otpremili u prodavnicu direktno **na telefon** kako biste odrÅ¾ali upornost i pristupili Å¾rtvinom telefonu.

## **Upornost putem** Skripti aplikacije

MoÅ¾ete kreirati **trigere zasnovane na vremenu** u Skriptama aplikacije, tako da ako korisnik prihvati Skript aplikaciju, ona Ä‡e biti **pokrenuta** Äak i **bez pristupa korisnika**. Za viÅ¡e informacija o tome kako to uraditi proverite:

{% content-ref url="gws-google-platforms-phishing/gws-app-scripts.md" %}
[gws-app-scripts.md](gws-google-platforms-phishing/gws-app-scripts.md)
{% endcontent-ref %}

## Reference

* [https://www.youtube-nocookie.com/embed/6AsVUS79gLw](https://www.youtube-nocookie.com/embed/6AsVUS79gLw) - Matthew Bryant - Hakovanje G Suite: MoÄ‡ Dark Apps Script Magije
* [https://www.youtube.com/watch?v=KTVHLolz6cE](https://www.youtube.com/watch?v=KTVHLolz6cE) - Mike Felch i Beau Bullock - OK Google, Kako da Red Timujete GSuite?

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** Proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume. 

</details>
