# Az - SertifikayÄ± GeÃ§ir

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## SertifikayÄ± GeÃ§ir (Azure)

Azure'a katÄ±lan makinelerde, **NegoEx** kimlik doÄŸrulama mekanizmasÄ±nÄ± destekleyen her iki makine de **gereken kullanÄ±cÄ± iÃ§in Azure AD CA tarafÄ±ndan verilmiÅŸ sertifikalarÄ± kullanarak** bir makineden diÄŸerine kimlik doÄŸrulamak mÃ¼mkÃ¼ndÃ¼r.

Ã‡ok basitleÅŸtirilmiÅŸ bir ÅŸekilde:

* BaÄŸlantÄ±yÄ± baÅŸlatan makine (istemci), **Azure AD'den bir kullanÄ±cÄ± iÃ§in bir sertifika** almasÄ± gerekmektedir.
* Ä°stemci, PRT ve diÄŸer detaylarÄ± iÃ§eren bir JSON Web Token (JWT) baÅŸlÄ±ÄŸÄ± oluÅŸturur, tÃ¼retilmiÅŸ anahtar kullanarak (oturum anahtarÄ± ve gÃ¼venlik baÄŸlamÄ±nÄ± kullanarak) imzalar ve **Azure AD'ye gÃ¶nderir**.
* Azure AD, istemci oturum anahtarÄ± ve gÃ¼venlik baÄŸlamÄ±nÄ± kullanarak JWT imzasÄ±nÄ± doÄŸrular, PRT'nin geÃ§erliliÄŸini kontrol eder ve **sertifika ile yanÄ±t verir**.

Bu senaryoda ve [**PRT'yi GeÃ§ir**](pass-the-prt.md) saldÄ±rÄ±sÄ± iÃ§in gereken tÃ¼m bilgileri ele geÃ§irdikten sonra:

* KullanÄ±cÄ± adÄ±
* KiracÄ± KimliÄŸi
* PRT
* GÃ¼venlik baÄŸlamÄ±
* TÃ¼retilmiÅŸ Anahtar

KullanÄ±cÄ± iÃ§in **P2P sertifikasÄ± talep etmek mÃ¼mkÃ¼ndÃ¼r** [**PrtToCert**](https://github.com/morRubin/PrtToCert)**** aracÄ±yla:

{% code overflow="wrap" %}
```bash
RequestCert.py [-h] --tenantId TENANTID --prt PRT --userName USERNAME --hexCtx HEXCTX --hexDerivedKey HEXDERIVEDKEY [--passPhrase PASSPHRASE]
```
{% endcode %}

Sertifikalar PRT ile aynÄ± sÃ¼reye sahip olacak. SertifikayÄ± kullanmak iÃ§in [**AzureADJoinedMachinePTC**](https://github.com/morRubin/AzureADJoinedMachinePTC) adlÄ± python aracÄ±nÄ± kullanabilirsiniz. Bu araÃ§, uzak makineye **kimlik doÄŸrulama** yapacak, **PSEXEC** Ã§alÄ±ÅŸtÄ±racak ve **kurban makinede bir CMD aÃ§acak**. Bu bize Mimikatz'i tekrar kullanarak baÅŸka bir kullanÄ±cÄ±nÄ±n PRT'sini elde etme imkanÄ± saÄŸlayacak.
```bash
Main.py [-h] --usercert USERCERT --certpass CERTPASS --remoteip REMOTEIP
```
## Referanslar

* Pass the Certificate'nin nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ± hakkÄ±nda daha fazla bilgi iÃ§in orijinal yazÄ±ya gÃ¶z atÄ±n: [https://medium.com/@mor2464/azure-ad-pass-the-certificate-d0c5de624597](https://medium.com/@mor2464/azure-ad-pass-the-certificate-d0c5de624597)

<details>

<summary><strong>AWS hackleme konusunda sÄ±fÄ±rdan kahramana dÃ¶nÃ¼ÅŸmek iÃ§in</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>'Ä± Ã¶ÄŸrenin!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** isterseniz [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da takip edin.**
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
