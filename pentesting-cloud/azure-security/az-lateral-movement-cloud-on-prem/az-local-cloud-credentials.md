# Az - Lokalne dane uwierzytelniajce w chmurze

<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy **reklam swojej firmy w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Lokalne przechowywanie token贸w i uwzgldnienie bezpieczestwa

### Azure CLI (Command-Line Interface)

Tokeny i dane uwierzytelniajce s przechowywane lokalnie przez Azure CLI, co rodzi obawy dotyczce bezpieczestwa:

1. **Tokeny dostpu**: Przechowywane w postaci tekstu w pliku `accessTokens.json` znajdujcym si w lokalizacji `C:\Users\<nazwa_u偶ytkownika>\.Azure`.
2. **Informacje o subskrypcji**: `azureProfile.json`, w tym samym katalogu, przechowuje szczeg贸y subskrypcji.
3. **Pliki dziennika**: Folder `ErrorRecords` wewntrz `.azure` mo偶e zawiera dzienniki z ujawnionymi danymi uwierzytelniajcymi, takimi jak:
- Wykonane polecenia z osadzonymi danymi uwierzytelniajcymi.
- Adresy URL uzyskane za pomoc token贸w, potencjalnie ujawniajce poufne informacje.

### Azure PowerShell

Azure PowerShell r贸wnie偶 przechowuje tokeny i dane uwierzytelniajce, do kt贸rych mo偶na uzyska dostp lokalnie:

1. **Tokeny dostpu**: `TokenCache.dat`, znajdujcy si w lokalizacji `C:\Users\<nazwa_u偶ytkownika>\.Azure`, przechowuje tokeny dostpu w postaci tekstu.
2. **Tajne klucze usugi g贸wnej**: S one przechowywane w postaci niezaszyfrowanej w pliku `AzureRmContext.json`.
3. **Funkcja zapisywania token贸w**: U偶ytkownicy maj mo偶liwo trwaego zapisywania token贸w za pomoc polecenia `Save-AzContext`, kt贸re nale偶y u偶ywa ostro偶nie, aby zapobiec nieautoryzowanemu dostpowi.

## Automatyczne narzdzia do ich znalezienia

* [**Winpeas**](https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS/winPEASexe)
* [**Get-AzurePasswords.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/AzureRM/Get-AzurePasswords.ps1)

## Zalecenia dotyczce bezpieczestwa

Biorc pod uwag przechowywanie poufnych danych w postaci tekstu, wa偶ne jest zabezpieczenie tych plik贸w i katalog贸w poprzez:
- Ograniczenie praw dostpu do tych plik贸w.
- Regularne monitorowanie i audytowanie tych katalog贸w pod ktem nieautoryzowanego dostpu lub nieoczekiwanych zmian.
- Wykorzystanie szyfrowania dla poufnych plik贸w, jeli to mo偶liwe.
- Edukowanie u偶ytkownik贸w na temat ryzyka i najlepszych praktyk dotyczcych obsugi takich poufnych informacji.


<details>

<summary><strong>Naucz si hakowa AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy **reklam swojej firmy w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
