# Az AD Connect - æ··åˆèº«ä»½

<details>

<summary><strong>ä»é›¶åˆ°è‹±é›„å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œé€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## åŸºæœ¬ä¿¡æ¯

**æœ¬åœ°AD** å¯ä»¥ä½¿ç”¨ **Azure AD Connect** é€šè¿‡ä»¥ä¸‹**æ–¹æ³•**ä¸Azure AD **é›†æˆ**ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½è¢«æ»¥ç”¨æ¥ä»æœ¬åœ°ADå±å®³**äº‘ç«¯ï¼Œåä¹‹äº¦ç„¶ï¼ˆ**æˆ–ä¸¤è€…å…¼æœ‰ï¼‰ã€‚æ¯ç§æ–¹æ³•éƒ½æ”¯æŒå•ç‚¹ç™»å½•(SSO)ï¼š

* **å¯†ç å“ˆå¸ŒåŒæ­¥(PHS)**ï¼šå¯ä»¥ä»ADä¸­æå–ç‰¹æƒç”¨æˆ·çš„æ˜æ–‡å¯†ç ï¼Œç”šè‡³æ˜¯å…·æœ‰å¯¹AzureADé«˜æƒé™çš„è‡ªåŠ¨ç”Ÿæˆç”¨æˆ·çš„å‡­æ®ã€‚

{% content-ref url="phs-password-hash-sync.md" %}
[phs-password-hash-sync.md](phs-password-hash-sync.md)
{% endcontent-ref %}

* **é€ä¼ èº«ä»½éªŒè¯(PTA)**ï¼šå¯ä»¥å±å®³åœ¨æœ¬åœ°ADä¸­è¿è¡Œçš„ä»£ç†ï¼Œä»¥éªŒè¯å°è¯•è¿æ¥åˆ°Azureçš„æ‰€æœ‰ç”¨æˆ·å¯†ç ï¼ˆæœ¬åœ° -> äº‘ï¼‰ï¼Œä¹Ÿå¯ä»¥æ³¨å†Œæ–°çš„ä»£ç†åœ¨æ–°çš„åœ°ç‚¹éªŒè¯èº«ä»½ï¼ˆäº‘ -> æœ¬åœ°ï¼‰ã€‚

{% content-ref url="pta-pass-through-authentication.md" %}
[pta-pass-through-authentication.md](pta-pass-through-authentication.md)
{% endcontent-ref %}

* **è”åˆèº«ä»½éªŒè¯**ï¼šçªƒå–ç”¨äºç­¾åSAMLçš„ç§é’¥ï¼Œæ‚¨å°†èƒ½å¤Ÿå†’å……æœ¬åœ°å’Œäº‘ç«¯èº«ä»½ã€‚

{% content-ref url="federation.md" %}
[federation.md](federation.md)
{% endcontent-ref %}

* **æ— ç¼SSO**ï¼šçªƒå–è‡ªåŠ¨åˆ›å»ºçš„ç”¨æˆ·**AZUREADSSOACC**çš„å¯†ç ï¼Œè¯¥å¯†ç ç”¨äºç­¾ç½²kerberosé“¶ç¥¨ä»¥è®¿é—®AzureADï¼Œå¹¶åœ¨äº‘ä¸­å†’å……ä»»ä½•ç”¨æˆ·ã€‚

{% content-ref url="seamless-sso.md" %}
[seamless-sso.md](seamless-sso.md)
{% endcontent-ref %}

* **äº‘Kerberosä¿¡ä»»**ï¼šé€šè¿‡ä¿®æ”¹AzureADä¸­ç”¨æˆ·çš„ç”¨æˆ·åå’ŒSIDï¼Œç„¶åè¯·æ±‚AzureADçš„TGTsï¼Œä»å…¨å±€ç®¡ç†å‘˜å˜ä¸ºæœ¬åœ°åŸŸç®¡ç†å‘˜å†’å……ç”¨æˆ·ã€‚

{% content-ref url="az-cloud-kerberos-trust.md" %}
[az-cloud-kerberos-trust.md](az-cloud-kerberos-trust.md)
{% endcontent-ref %}

å¯¹äºæ¯ç§æ–¹æ³•ï¼Œè‡³å°‘å®Œæˆäº†**ç”¨æˆ·åŒæ­¥**ï¼Œå¹¶åœ¨**æœ¬åœ°AD**ä¸Šåˆ›å»ºäº†ä¸€ä¸ªåä¸º**`MSOL_<installationidentifier>`**çš„è´¦æˆ·ã€‚

æ­¤å¤–ï¼Œ**PHS** å’Œ **PTA** éƒ½**æ”¯æŒ** **æ— ç¼SSO**ï¼Œä»¥ä¾¿è‡ªåŠ¨**åœ¨åŠ å…¥æœ¬åœ°åŸŸçš„Azure ADè®¡ç®—æœº**ä¸­ç™»å½•ã€‚

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…äº†**Azure AD Connect**ï¼Œè¯¥å‘½ä»¤æ¥è‡ª**Azure AD Connectå®‰è£…æ—¶é»˜è®¤å®‰è£…**çš„AzureADConnectHealthSyncæ¨¡å—ï¼š
```powershell
Get-ADSyncConnector
```
<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ç›´è‡³æˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWSçº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨å¸Œæœ›åœ¨**HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Š**æˆ–**ä»¥PDFæ ¼å¼ä¸‹è½½HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f)æˆ–[**telegramç¾¤ç»„**](https://t.me/peass)æˆ–åœ¨**Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“**æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**ã€‚

</details>
