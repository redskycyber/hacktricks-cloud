# Az AD Connect - ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§AWSã®ãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**PEASSãƒ•ã‚¡ãƒŸãƒªãƒ¼**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã§**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã™ã‚‹ã€‚

</details>

## åŸºæœ¬æƒ…å ±

**ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹AD**ã¯ã€ä»¥ä¸‹ã®**æ–¹æ³•**ã‚’ä½¿ç”¨ã—ã¦Azure ADã¨**çµ±åˆ**ã•ã‚Œã€**ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ADã‹ã‚‰ã‚¯ãƒ©ã‚¦ãƒ‰ã¸ã€ã¾ãŸã¯ãã®é€†ï¼ˆ**ã¾ãŸã¯ä¸¡æ–¹ï¼‰ã®ä¾µå®³ã«æ‚ªç”¨ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å„æ–¹æ³•ã¯ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³(SSO)ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

* **Password Hash Sync (PHS)**: ADã‹ã‚‰ç‰¹æ¨©ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªã‚¢ãƒ†ã‚­ã‚¹ãƒˆã§æŠ½å‡ºã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€AzureADã«å¯¾ã™ã‚‹é«˜ã„æ¨©é™ã‚’æŒã¤è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³‡æ ¼æƒ…å ±ã‚‚å«ã¾ã‚Œã¾ã™ã€‚

{% content-ref url="phs-password-hash-sync.md" %}
[phs-password-hash-sync.md](phs-password-hash-sync.md)
{% endcontent-ref %}

* **Pass-Through Authentication (PTA)**: ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ADã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä¾µå®³ã—ã€Azureã«æ¥ç¶šã—ã‚ˆã†ã¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã™ã¹ã¦ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚Šã€æ–°ã—ã„å ´æ‰€ã§èªè¨¼ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã«æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ -> ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ï¼‰ã€‚

{% content-ref url="pta-pass-through-authentication.md" %}
[pta-pass-through-authentication.md](pta-pass-through-authentication.md)
{% endcontent-ref %}

* **ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: SAMLã«ç½²åã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ç§˜å¯†éµã‚’ç›—ã¿ã€ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ã¨ã‚¯ãƒ©ã‚¦ãƒ‰ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å½è£…ã—ã¾ã™ã€‚

{% content-ref url="federation.md" %}
[federation.md](federation.md)
{% endcontent-ref %}

* **Seamless SSO:** ã‚±ãƒ«ãƒ™ãƒ­ã‚¹ã®ã‚·ãƒ«ãƒãƒ¼ãƒã‚±ãƒƒãƒˆã«ç½²åã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼**AZUREADSSOACC**ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç›—ã¿ã€ã‚¯ãƒ©ã‚¦ãƒ‰å†…ã®ä»»æ„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚Šã™ã¾ã™ã€‚

{% content-ref url="seamless-sso.md" %}
[seamless-sso.md](seamless-sso.md)
{% endcontent-ref %}

* **Cloud Kerberos Trust**: AzureADã§ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨SIDã‚’å¤‰æ›´ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å½è£…ã—ã€Global Adminã‹ã‚‰ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ã®Domain Adminã«ãªã‚Šã™ã¾ã—ã¦AzureADã«TGTã‚’è¦æ±‚ã—ã¾ã™ã€‚

{% content-ref url="az-cloud-kerberos-trust.md" %}
[az-cloud-kerberos-trust.md](az-cloud-kerberos-trust.md)
{% endcontent-ref %}

å„æ–¹æ³•ã«ã¤ã„ã¦ã€å°‘ãªãã¨ã‚‚**ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæœŸãŒè¡Œã‚ã‚Œ**ã€**ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹AD**ã«**`MSOL_<installationidentifier>`**ã¨ã„ã†åå‰ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚

ã•ã‚‰ã«ã€**PHS**ã¨**PTA**ã¯ã€**ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³ã«å‚åŠ ã—ã¦ã„ã‚‹Azure AD**ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã§è‡ªå‹•çš„ã«**ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã™ã‚‹**ãŸã‚ã®**Seamless SSO**ã‚’**ã‚µãƒãƒ¼ãƒˆ**ã—ã¦ã„ã¾ã™ã€‚

**Azure AD Connect**ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã¯ã€**Azure AD Connect**ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹**AzureADConnectHealthSyncãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã§ãã¾ã™ï¼š
```powershell
Get-ADSyncConnector
```
<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„å ´åˆ**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„å ´åˆ**ã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’**å…±æœ‰ã™ã‚‹**ã€‚

</details>
