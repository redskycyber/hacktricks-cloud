# Azure æ¸—é€æµ‹è¯•

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS çº¢é˜Ÿä¸“å®¶ï¼‰</strong></a><strong>ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨ HackTricks ä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½ PDF ç‰ˆæœ¬çš„ HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[NFT](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)** ä¸Šå…³æ³¨æˆ‘ä»¬**ã€‚
* é€šè¿‡å‘ [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) çš„ GitHub ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>

## æˆ‘ä»åœ¨æ„å»º Azure æ–¹æ³•è®º

## åŸºæœ¬ä¿¡æ¯

{% content-ref url="az-basic-information.md" %}
[az-basic-information.md](az-basic-information.md)
{% endcontent-ref %}

## Azure æ¸—é€æµ‹è¯•å‘˜/çº¢é˜Ÿæ–¹æ³•è®º

è¦å®¡è®¡ AZURE ç¯å¢ƒï¼Œéå¸¸é‡è¦çš„æ˜¯è¦äº†è§£ï¼šæ­£åœ¨ä½¿ç”¨å“ªäº›**æœåŠ¡**ï¼Œæ­£åœ¨**æš´éœ²**ä»€ä¹ˆï¼Œè°æœ‰**è®¿é—®æƒé™**ï¼Œä»¥åŠå†…éƒ¨ Azure æœåŠ¡å’Œ**å¤–éƒ¨æœåŠ¡**å¦‚ä½•è¿æ¥ã€‚

ä»çº¢é˜Ÿçš„è§’åº¦æ¥çœ‹ï¼Œ**å…¥ä¾µ Azure ç¯å¢ƒçš„ç¬¬ä¸€æ­¥**æ˜¯è®¾æ³•è·å–ä¸€äº› Azure AD çš„**å‡­æ®**ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›è·å–å‡­æ®çš„æ–¹æ³•ï¼š

* åœ¨ githubï¼ˆæˆ–ç±»ä¼¼ç½‘ç«™ï¼‰ä¸­çš„**æ³„æ¼** - OSINT
* **ç¤¾ä¼š**å·¥ç¨‹
* **å¯†ç **é‡ç”¨ï¼ˆå¯†ç æ³„æ¼ï¼‰
* Azure æ‰˜ç®¡åº”ç”¨ç¨‹åºä¸­çš„æ¼æ´
* å…·æœ‰è®¿é—®å…ƒæ•°æ®ç«¯ç‚¹çš„[**æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ **](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf)
* **æœ¬åœ°æ–‡ä»¶è¯»å–**
* `/home/USERNAME/.azure`
* `C:\Users\USERNAME\.azure`
* åœ¨ 2022 å¹´ 1 æœˆä¹‹å‰çš„ `az cli` ç‰ˆæœ¬ 2.30 ä¹‹å‰çš„ **`accessTokens.json`** æ–‡ä»¶ä»¥**æ˜æ–‡**å½¢å¼å­˜å‚¨**è®¿é—®ä»¤ç‰Œ**
* **`azureProfile.json`** æ–‡ä»¶åŒ…å«æœ‰å…³å·²ç™»å½•ç”¨æˆ·çš„**ä¿¡æ¯**
* **`az logout`** ä¼šç§»é™¤ä»¤ç‰Œã€‚
* æ—§ç‰ˆæœ¬çš„ **`Az PowerShell`** ä»¥**æ˜æ–‡**å½¢å¼åœ¨ **`TokenCache.dat`** ä¸­å­˜å‚¨**è®¿é—®ä»¤ç‰Œ**ã€‚å®ƒè¿˜ä»¥**æ˜æ–‡**å½¢å¼åœ¨ **`AzureRmContext.json`** ä¸­å­˜å‚¨ **ServicePrincipalSecret**ã€‚Cmdlet **`Save-AzContext`** å¯ç”¨äº**å­˜å‚¨** **ä»¤ç‰Œ**ã€‚\
ä½¿ç”¨ `Disconnect-AzAccount` æ¥ç§»é™¤å®ƒä»¬ã€‚
* ç¬¬ä¸‰æ–¹**é­åˆ°å…¥ä¾µ**
* **å†…éƒ¨**å‘˜å·¥
* [**å¸¸è§é’“é±¼**](https://book.hacktricks.xyz/generic-methodologies-and-resources/phishing-methodology)ï¼ˆå‡­æ®æˆ– Oauth åº”ç”¨ç¨‹åºï¼‰
* [è®¾å¤‡ä»£ç è®¤è¯é’“é±¼](az-unauthenticated-enum-and-initial-entry/az-device-code-authentication-phishing.md)
* [Azure **å¯†ç å–·æ´’**](az-unauthenticated-enum-and-initial-entry/az-password-spraying.md)

å³ä½¿æ‚¨**å°šæœªå…¥ä¾µ**æ‚¨æ”»å‡»çš„ Azure ç§Ÿæˆ·å†…çš„ä»»ä½•ç”¨æˆ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä»ä¸­**æ”¶é›†ä¸€äº›ä¿¡æ¯**ï¼š

{% content-ref url="az-unauthenticated-enum-and-initial-entry/" %}
[az-unauthenticated-enum-and-initial-entry](az-unauthenticated-enum-and-initial-entry/)
{% endcontent-ref %}

{% hint style="info" %}
åœ¨æˆåŠŸè·å–å‡­æ®åï¼Œæ‚¨éœ€è¦çŸ¥é“è¿™äº›å‡­æ®å±äº**è°**ï¼Œä»¥åŠä»–ä»¬æœ‰**è®¿é—®æƒé™**ï¼Œå› æ­¤æ‚¨éœ€è¦æ‰§è¡Œä¸€äº›åŸºæœ¬æšä¸¾ï¼š
{% endhint %}

## åŸºæœ¬æšä¸¾

{% hint style="info" %}
è¯·è®°ä½ï¼Œæšä¸¾ä¸­æœ€**åµé—¹**çš„éƒ¨åˆ†æ˜¯**ç™»å½•**ï¼Œè€Œä¸æ˜¯æšä¸¾æœ¬èº«ã€‚
{% endhint %}

### SSRF

å¦‚æœåœ¨ Azure ä¸­çš„æŸå°æœºå™¨ä¸Šå‘ç° SSRFï¼Œè¯·æŸ¥çœ‹æ­¤é¡µé¢è·å–æŠ€å·§ï¼š

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf" %}

### ç»•è¿‡ç™»å½•æ¡ä»¶

<figure><img src="../../.gitbook/assets/image (1) (2) (2).png" alt=""><figcaption></figcaption></figure>

åœ¨æ‚¨æ‹¥æœ‰ä¸€äº›æœ‰æ•ˆå‡­æ®ä½†æ— æ³•ç™»å½•çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å­˜åœ¨ä»¥ä¸‹å¸¸è§ä¿æŠ¤æªæ–½ï¼š

* **IP ç™½åå•** -- æ‚¨éœ€è¦å…¥ä¾µä¸€ä¸ªæœ‰æ•ˆçš„ IP
* **åœ°ç†é™åˆ¶** -- æ‰¾å‡ºç”¨æˆ·æ‰€åœ¨åœ°æˆ–å…¬å¸åŠå…¬å®¤æ‰€åœ¨åœ°ï¼Œå¹¶è·å–ç›¸åŒåŸå¸‚ï¼ˆæˆ–è‡³å°‘åŒä¸€å›½å®¶ï¼‰çš„ IP
* **æµè§ˆå™¨** -- å¯èƒ½åªå…è®¸ç‰¹å®šæ“ä½œç³»ç»Ÿï¼ˆWindowsã€Linuxã€Macã€Androidã€iOSï¼‰çš„æµè§ˆå™¨ã€‚æ‰¾å‡ºå—å®³è€…/å…¬å¸ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿã€‚
* æ‚¨è¿˜å¯ä»¥å°è¯•**å…¥ä¾µæœåŠ¡ä¸»ä½“å‡­æ®**ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸å—é™è¾ƒå°‘ï¼Œå…¶ç™»å½•å—åˆ°è¾ƒå°‘å®¡æŸ¥

ç»•è¿‡åï¼Œæ‚¨å¯èƒ½èƒ½å¤Ÿå›åˆ°åˆå§‹è®¾ç½®ï¼Œå¹¶ä»ç„¶å…·æœ‰è®¿é—®æƒé™ã€‚

### å­åŸŸæ¥ç®¡

* [https://godiego.co/posts/STO-Azure/](https://godiego.co/posts/STO-Azure/)

### Whoami

{% hint style="danger" %}
å­¦ä¹ å¦‚ä½•åœ¨ [**Az - AzureAD**](az-azuread/) éƒ¨åˆ†ä¸­å®‰è£… az cliã€AzureAD å’Œ Az PowerShellã€‚
{% endhint %}

æ‚¨éœ€è¦äº†è§£çš„ç¬¬ä¸€ä»¶äº‹æ˜¯**æ‚¨æ˜¯è°**ï¼ˆæ‚¨åœ¨å“ªä¸ªç¯å¢ƒä¸­ï¼‰ï¼š

{% tabs %}
{% tab title="az cli" %}
```bash
az account list
az account tenant list # Current tenant info
az account subscription list # Current subscription info
az ad signed-in-user show # Current signed-in user
az ad signed-in-user list-owned-objects # Get owned objects by current user
az account management-group list #Not allowed by default
```
{% endtab %}

{% tab title="AzureAD" %}

## AzureAD

### Enumeration

1. **User Enumeration**: Use tools like `Azure AD Connect` to enumerate users in the Azure AD tenant.

2. **Group Enumeration**: Enumerate groups in the Azure AD tenant using tools like `Azure AD PowerShell`.

3. **Application Enumeration**: Identify applications registered in Azure AD using tools like `Azure Portal` or `Azure AD PowerShell`.

### Exploitation

1. **Password Spraying**: Perform password spraying attacks against Azure AD accounts using tools like `CrackMapExec`.

2. **Phishing**: Conduct phishing campaigns to steal Azure AD credentials.

3. **Brute Force**: Use tools like `Hydra` to perform brute force attacks against Azure AD accounts.

### Post-Exploitation

1. **Token Impersonation**: Use stolen tokens to impersonate users and access resources.

2. **Data Exfiltration**: Extract sensitive data from Azure AD using tools like `BloodHound`.

3. **Persistence**: Establish persistence in Azure AD by creating backdoors or adding rogue applications.

### Mitigation

1. **Multi-Factor Authentication (MFA)**: Enforce MFA for all Azure AD accounts to prevent unauthorized access.

2. **Regular Security Audits**: Conduct regular security audits to identify and address vulnerabilities in Azure AD.

3. **Least Privilege**: Implement the principle of least privilege to restrict access to sensitive resources in Azure AD.

{% endtab %}
```powershell
#Get the current session state
Get-AzureADCurrentSessionInfo
#Get details of the current tenant
Get-AzureADTenantDetail
```
{% endtab %}

{% tab title="Az PowerShell" %} 

## Az PowerShell

### Connect to Azure

To connect to Azure using Az PowerShell, you can use the following command:

```bash
Connect-AzAccount
```

This command will prompt you to enter your Azure credentials in a pop-up window.

### List Azure Subscriptions

To list all the Azure subscriptions associated with your account, you can use the following command:

```bash
Get-AzSubscription
```

This command will display a list of all the Azure subscriptions along with details such as SubscriptionName, SubscriptionId, and TenantId.

### Select Azure Subscription

To select a specific Azure subscription to work with, you can use the following command:

```bash
Select-AzSubscription -SubscriptionId <SubscriptionId>
```

Replace `<SubscriptionId>` with the ID of the subscription you want to select.

### List Azure Resources

To list all the Azure resources within a subscription, you can use the following command:

```bash
Get-AzResource
```

This command will display a list of all the Azure resources along with details such as ResourceName, ResourceType, and ResourceGroupName.

### Get Azure Resource Details

To get detailed information about a specific Azure resource, you can use the following command:

```bash
Get-AzResource -ResourceGroupName <ResourceGroupName> -ResourceName <ResourceName>
```

Replace `<ResourceGroupName>` with the name of the resource group and `<ResourceName>` with the name of the resource you want to get details for.

### Summary

Az PowerShell provides a powerful way to interact with Azure resources and perform various operations such as listing subscriptions, selecting subscriptions, listing resources, and getting resource details.

{% endtab %}
```powershell
# Get the information about the current context (Account, Tenant, Subscription etc.)
Get-AzContext
# List all available contexts
Get-AzContext -ListAvailable
# Enumerate subscriptions accessible by the current user
Get-AzSubscription
#Get Resource group
Get-AzResourceGroup
# Enumerate all resources visible to the current user
Get-AzResource
# Enumerate all Azure RBAC role assignments
Get-AzRoleAssignment # For all users
Get-AzRoleAssignment -SignInName test@corp.onmicrosoft.com # For current user
```
{% endtab %}
{% endtabs %}

{% hint style="danger" %}
**`Get-AzResource`**æ˜¯æšä¸¾ Azure ä¸­æœ€é‡è¦çš„å‘½ä»¤ä¹‹ä¸€ï¼Œä½¿ç”¨ Az PowerShell å¯ä»¥è®©æ‚¨äº†è§£å½“å‰ç”¨æˆ·å¯ä»¥çœ‹åˆ°çš„èµ„æºã€‚

æ‚¨ä¹Ÿå¯ä»¥åœ¨**Web æ§åˆ¶å°**ä¸­è·å–ç›¸åŒçš„ä¿¡æ¯ï¼Œè½¬åˆ° [https://portal.azure.com/#view/HubsExtension/BrowseAll](https://portal.azure.com/#view/HubsExtension/BrowseAll) æˆ–æœç´¢"All resources"ã€‚
{% endhint %}

### AzureAD æšä¸¾

é»˜è®¤æƒ…å†µä¸‹ï¼Œä»»ä½•ç”¨æˆ·éƒ½åº”è¯¥æœ‰è¶³å¤Ÿçš„æƒé™æ¥æšä¸¾ç”¨æˆ·ã€ç»„ã€è§’è‰²ã€æœåŠ¡ä¸»ä½“ç­‰å†…å®¹ï¼ˆè¯·æŸ¥çœ‹[é»˜è®¤ AzureAD æƒé™](az-basic-information.md#default-user-permissions)ï¼‰ã€‚\
æ‚¨å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ä¸€ä¸ªæŒ‡å—ï¼š

{% content-ref url="az-azuread/" %}
[az-azuread](az-azuread/)
{% endcontent-ref %}

{% hint style="info" %}
ç°åœ¨æ‚¨å·²ç»**è·å–äº†æœ‰å…³æ‚¨çš„å‡­æ®çš„ä¸€äº›ä¿¡æ¯**ï¼ˆå¦‚æœæ‚¨æ˜¯çº¢é˜Ÿï¼Œå¸Œæœ›æ‚¨**å°šæœªè¢«å‘ç°**ï¼‰ã€‚ç°åœ¨æ˜¯æ—¶å€™å¼„æ¸…æ¥šç¯å¢ƒä¸­æ­£åœ¨ä½¿ç”¨å“ªäº›æœåŠ¡äº†ã€‚\
åœ¨ä»¥ä¸‹éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ä¸€äº›**æšä¸¾ä¸€äº›å¸¸è§æœåŠ¡çš„æ–¹æ³•**ã€‚
{% endhint %}

## æœåŠ¡ä¸»ä½“å’Œè®¿é—®ç­–ç•¥

Azure æœåŠ¡å¯ä»¥å…·æœ‰ç³»ç»Ÿæ ‡è¯†ï¼ˆæœåŠ¡æœ¬èº«ï¼‰æˆ–ä½¿ç”¨ç”¨æˆ·åˆ†é…çš„æ‰˜ç®¡æ ‡è¯†ã€‚æ­¤æ ‡è¯†å¯ä»¥å…·æœ‰è®¿é—®ç­–ç•¥ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥è®¿é—® KeyVault ä»¥è¯»å–å¯†ç ã€‚è¿™äº›è®¿é—®ç­–ç•¥åº”è¯¥å—åˆ°é™åˆ¶ï¼ˆæœ€å°æƒé™åŸåˆ™ï¼‰ï¼Œä½†å¯èƒ½å…·æœ‰æ¯”æ‰€éœ€æƒé™æ›´å¤šçš„æƒé™ã€‚é€šå¸¸ï¼Œåº”ç”¨æœåŠ¡å°†ä½¿ç”¨ KeyVault æ¥æ£€ç´¢å¯†ç å’Œè¯ä¹¦ã€‚

å› æ­¤ï¼Œæ¢ç´¢è¿™äº›æ ‡è¯†æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚

## åº”ç”¨æœåŠ¡ SCM

Kudu æ§åˆ¶å°å¯ç”¨äºç™»å½•åˆ°åº”ç”¨æœåŠ¡çš„â€œå®¹å™¨â€ã€‚

## Webshell

ä½¿ç”¨ portal.azure.com å¹¶é€‰æ‹© shellï¼Œæˆ–ä½¿ç”¨ shell.azure.comï¼Œè·å– bash æˆ– powershellã€‚æ­¤ shell çš„â€œç£ç›˜â€å­˜å‚¨ä¸ºå­˜å‚¨å¸æˆ·ä¸­çš„æ˜ åƒæ–‡ä»¶ã€‚

## Azure DevOps

Azure DevOps ä¸ Azure æ˜¯åˆ†å¼€çš„ã€‚å®ƒå…·æœ‰å­˜å‚¨åº“ã€ç®¡é“ï¼ˆyaml æˆ–å‘å¸ƒï¼‰ã€çœ‹æ¿ã€wiki ç­‰ã€‚å˜é‡ç»„ç”¨äºå­˜å‚¨å˜é‡å€¼å’Œå¯†ç ã€‚

## è‡ªåŠ¨åŒ–ä¾¦å¯Ÿå·¥å…·

### [**ROADRecon**](https://github.com/dirkjanm/ROADtools)
```powershell
cd ROADTools
pipenv shell
roadrecon auth -u test@corp.onmicrosoft.com -p "Welcome2022!"
roadrecon gather
roadrecon gui
```
### [Monkey365](https://github.com/silverhack/monkey365)

{% code overflow="wrap" %}
```powershell
Import-Module monkey365
Get-Help Invoke-Monkey365
Get-Help Invoke-Monkey365 -Detailed
Invoke-Monkey365 -IncludeAzureActiveDirectory -ExportTo HTML -Verbose -Debug -InformationAction Continue
Invoke-Monkey365 - Instance Azure -Analysis All -ExportTo HTML
```
{% endcode %}

### [**Stormspotter**](https://github.com/Azure/Stormspotter)
```powershell
# Start Backend
cd stormspotter\backend\
pipenv shell
python ssbackend.pyz

# Start Front-end
cd stormspotter\frontend\dist\spa\
quasar.cmd serve -p 9091 --history

# Run Stormcollector
cd stormspotter\stormcollector\
pipenv shell
az login -u test@corp.onmicrosoft.com -p Welcome2022!
python stormspotter\stormcollector\sscollector.pyz cli
# This will generate a .zip file to upload in the frontend (127.0.0.1:9091)
```
### [**AzureHound**](https://github.com/BloodHoundAD/AzureHound)
```powershell
# You need to use the Az PowerShell and Azure AD modules:
$passwd = ConvertTo-SecureString "Welcome2022!" -AsPlainText -Force
$creds = New-Object System.Management.Automation.PSCredential ("test@corp.onmicrosoft.com", $passwd)
Connect-AzAccount -Credential $creds

Import-Module AzureAD\AzureAD.psd1
Connect-AzureAD -Credential $creds

# Launch AzureHound
. AzureHound\AzureHound.ps1
Invoke-AzureHound -Verbose

# Simple queries
## All Azure Users
MATCH (n:AZUser) return n.name
## All Azure Applications
MATCH (n:AZApp) return n.objectid
## All Azure Devices
MATCH (n:AZDevice) return n.name
## All Azure Groups
MATCH (n:AZGroup) return n.name
## All Azure Key Vaults
MATCH (n:AZKeyVault) return n.name
## All Azure Resource Groups
MATCH (n:AZResourceGroup) return n.name
## All Azure Service Principals
MATCH (n:AZServicePrincipal) return n.objectid
## All Azure Virtual Machines
MATCH (n:AZVM) return n.name
## All Principals with the â€˜Contributorâ€™ role
MATCH p = (n)-[r:AZContributor]->(g) RETURN p

# Advanced queries
## Get Global Admins
MATCH p =(n)-[r:AZGlobalAdmin*1..]->(m) RETURN p
## Owners of Azure Groups
MATCH p = (n)-[r:AZOwns]->(g:AZGroup) RETURN p
## All Azure Users and their Groups
MATCH p=(m:AZUser)-[r:MemberOf]->(n) WHERE NOT m.objectid CONTAINS 'S-1-5' RETURN p
## Privileged Service Principals
MATCH p = (g:AZServicePrincipal)-[r]->(n) RETURN p
## Owners of Azure Applications
MATCH p = (n)-[r:AZOwns]->(g:AZApp) RETURN p
## Paths to VMs
MATCH p = (n)-[r]->(g: AZVM) RETURN p
## Paths to KeyVault
MATCH p = (n)-[r]->(g:AZKeyVault) RETURN p
## Paths to Azure Resource Group
MATCH p = (n)-[r]->(g:AZResourceGroup) RETURN p
## On-Prem users with edges to Azure
MATCH  p=(m:User)-[r:AZResetPassword|AZOwns|AZUserAccessAdministrator|AZContributor|AZAddMembers|AZGlobalAdmin|AZVMContributor|AZOwnsAZAvereContributor]->(n) WHERE m.objectid CONTAINS 'S-1-5-21' RETURN p
## All Azure AD Groups that are synchronized with On-Premise AD
MATCH (n:Group) WHERE n.objectid CONTAINS 'S-1-5' AND n.azsyncid IS NOT NULL RETURN n
```
### [Azucar](https://github.com/nccgroup/azucar)
```bash
# You should use an account with at least read-permission on the assets you want to access
git clone https://github.com/nccgroup/azucar.git
PS> Get-ChildItem -Recurse c:\Azucar_V10 | Unblock-File

PS> .\Azucar.ps1 -AuthMode UseCachedCredentials -Verbose -WriteLog -Debug -ExportTo PRINT
PS> .\Azucar.ps1 -ExportTo CSV,JSON,XML,EXCEL -AuthMode Certificate_Credentials -Certificate C:\AzucarTest\server.pfx -ApplicationId 00000000-0000-0000-0000-000000000000 -TenantID 00000000-0000-0000-0000-000000000000
PS> .\Azucar.ps1 -ExportTo CSV,JSON,XML,EXCEL -AuthMode Certificate_Credentials -Certificate C:\AzucarTest\server.pfx -CertFilePassword MySuperP@ssw0rd! -ApplicationId 00000000-0000-0000-0000-000000000000 -TenantID 00000000-0000-0000-0000-000000000000

# resolve the TenantID for an specific username
PS> .\Azucar.ps1 -ResolveTenantUserName user@company.com
```
### [**MicroBurst**](https://github.com/NetSPI/MicroBurst)
```
Import-Module .\MicroBurst.psm1
Import-Module .\Get-AzureDomainInfo.ps1
Get-AzureDomainInfo -folder MicroBurst -Verbose
```
### [**PowerZure**](https://github.com/hausec/PowerZure)
```powershell
Connect-AzAccount
ipmo C:\Path\To\Powerzure.psd1
Get-AzureTarget

# Reader
$ Get-Runbook, Get-AllUsers, Get-Apps, Get-Resources, Get-WebApps, Get-WebAppDetails

# Contributor
$ Execute-Command -OS Windows -VM Win10Test -ResourceGroup Test-RG -Command "whoami"
$ Execute-MSBuild -VM Win10Test  -ResourceGroup Test-RG -File "build.xml"
$ Get-AllSecrets # AllAppSecrets, AllKeyVaultContents
$ Get-AvailableVMDisks, Get-VMDisk # Download a virtual machine's disk

# Owner
$ Set-Role -Role Contributor -User test@contoso.com -Resource Win10VMTest

# Administrator
$ Create-Backdoor, Execute-Backdoor
```
<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸ºä¸“å®¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

å…¶ä»–æ”¯æŒHackTricksçš„æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³çœ‹åˆ°æ‚¨çš„**å…¬å¸åœ¨HackTricksä¸­åšå¹¿å‘Š**æˆ–**ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)!
* è·å–[**å®˜æ–¹PEASS & HackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* æ¢ç´¢[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFTs**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤**](https://discord.gg/hRep4RUj7f) æˆ– [**ç”µæŠ¥ç¾¤**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘ä»¬çš„**Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ã€‚**
* é€šè¿‡å‘[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
