# Az - Dinamik Gruplar Privilege YÃ¼kseltme

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## Temel Bilgiler

**Dinamik gruplar**, yapÄ±landÄ±rÄ±lmÄ±ÅŸ bir dizi **kurala** sahip olan gruplardÄ±r ve kurallara uyan **kullanÄ±cÄ±lar veya cihazlar** gruplara eklenir. Bir kullanÄ±cÄ± veya cihaz **Ã¶zelliÄŸi** deÄŸiÅŸtirildiÄŸinde, dinamik kurallar **yeniden kontrol edilir**. Ve bir **yeni kural** oluÅŸturulduÄŸunda, tÃ¼m cihazlar ve kullanÄ±cÄ±lar **kontrol edilir**.

Dinamik gruplara **Azure RBAC rolleri atanabilir**, ancak dinamik gruplara **AzureAD rolleri eklemek mÃ¼mkÃ¼n deÄŸildir**.

Bu Ã¶zellik iÃ§in Azure AD premium P1 lisansÄ± gereklidir.

## Privilege YÃ¼kseltme

VarsayÄ±lan olarak, herhangi bir kullanÄ±cÄ± Azure AD'de misafirleri davet edebilir, bu nedenle, bir dinamik grup **kuralÄ±**, yeni bir **misafirde** **ayarlanabilen** **Ã¶zelliklere** dayalÄ± olarak kullanÄ±cÄ±lara **izinler** veriyorsa, bu Ã¶zelliklere sahip bir misafir oluÅŸturmak ve **ayrÄ±calÄ±klarÄ± yÃ¼kseltmek mÃ¼mkÃ¼ndÃ¼r**. Bir misafirin kendi profilini yÃ¶netmesi ve bu Ã¶zellikleri deÄŸiÅŸtirmesi de mÃ¼mkÃ¼ndÃ¼r.

Dinamik Ã¼yeliÄŸe izin veren gruplarÄ± alÄ±n: `Get-AzureADMSGroup | ?{$_.GroupTypes -eq 'DynamicMembership'}`

### Ã–rnek

* **Kural Ã¶rneÄŸi**: `(user.otherMails -any (_ -contains "tester")) -and (user.userType -eq "guest")`
* **Kural aÃ§Ä±klamasÄ±**: 'tester' dizesi iÃ§eren bir ikincil e-postaya sahip herhangi bir Misafir kullanÄ±cÄ± gruplara eklenecektir.

1. **Azure Active Directory**'ye gidin -> **KullanÄ±cÄ±lar** ve **`Ã–nizlemeyi bÄ±rakmak iÃ§in buraya tÄ±klayÄ±n`** Ã¼zerine **tÄ±klayÄ±n**
2. **`Yeni misafir kullanÄ±cÄ±sÄ±`** Ã¼zerine tÄ±klayÄ±n ve bir e-posta **davetiyesi gÃ¶nderin**
3. Davet gÃ¶nderildiÄŸi anda, kullanÄ±cÄ±nÄ±n profili Azure AD'ye **eklenecektir**. KullanÄ±cÄ±nÄ±n profilini aÃ§Ä±n ve **Davet kabul edildi** altÄ±nda **(yÃ¶net) Ã¼zerine tÄ±klayÄ±n**.
* ![](<../../../.gitbook/assets/image (87) (1).png>)
4. **`Daveti tekrar gÃ¶nderilsin mi?`**'i **Evet** olarak deÄŸiÅŸtirin ve bir davet URL'si alacaksÄ±nÄ±z:
* ![](<../../../.gitbook/assets/image (11) (1) (2) (1).png>)
5. **URL'yi** kopyalayÄ±n ve **aÃ§Ä±n**, davet edilen kullanÄ±cÄ± olarak **giriÅŸ yapÄ±n** ve daveti **kabul edin**
6. KullanÄ±cÄ± olarak giriÅŸ yapÄ±n ve ikincil e-postayÄ± ayarlayÄ±n

{% code overflow="wrap" %}
```powershell
# GiriÅŸ yap
$password = ConvertTo-SecureString 'ÅŸifre' - AsPlainText -Force
$creds = New-Object
System.Management.Automation.PSCredential('externaltester@somedomain.onmicrosoft.com', $Password)
Connect-AzureAD -Credential $creds -TenantId <saldÄ±rÄ±lan_domainin_tenant_id>

# OtherMails ayarÄ±nÄ± deÄŸiÅŸtir
Set-AzureADUser -ObjectId <OBJECT-ID> -OtherMails <KullanÄ±cÄ±AdÄ±>@<TENANT_AD>.onmicrosoft.com -Verbose
```
{% endcode %}



## Referanslar

* [https://www.mnemonic.io/resources/blog/abusing-dynamic-groups-in-azure-ad-for-privilege-escalation/](https://www.mnemonic.io/resources/blog/abusing-dynamic-groups-in-azure-ad-for-privilege-escalation/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>
