# Az - ACR

<details>

<summary><strong>ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

HackTricks ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

- **HackTricks ã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„** ã¾ãŸã¯ **HackTricks ã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„** å ´åˆã¯ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
- [**å…¬å¼PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª [**NFTs**](https://opensea.io/collection/the-peass-family) ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
- **ğŸ’¬ [Discordã‚°ãƒ«ãƒ¼ãƒ—](https://discord.gg/hRep4RUj7f)** ã«å‚åŠ ã™ã‚‹ã‹ã€[telegramã‚°ãƒ«ãƒ¼ãƒ—](https://t.me/peass) ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live) ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹
- **ãƒãƒƒã‚­ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€PRã‚’** [**HackTricks**](https://github.com/carlospolop/hacktricks) **ã¨** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«æå‡ºã—ã¦ãã ã•ã„ã€‚**

</details>

## åŸºæœ¬æƒ…å ±

Azure Container Registryï¼ˆACRï¼‰ã¯ã€Microsoft Azureã«ã‚ˆã£ã¦æä¾›ã•ã‚Œã‚‹ **Dockerã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚„ãã®ä»–ã®ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚’ä¿å­˜ãŠã‚ˆã³ç®¡ç†ã™ã‚‹** ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚ çµ±åˆé–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã€ã‚¸ã‚ªãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚„ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚¹ã‚­ãƒ£ãƒ³ãªã©ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã€è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã€Webhookã¨ãƒˆãƒªã‚¬ãƒ¼ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†é›¢ãªã©ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚ ä¸€èˆ¬çš„ãªãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹Docker CLIã‚„Kubernetesã¨é€£æºã—ã€ä»–ã®Azureã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚‚ã†ã¾ãçµ±åˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### åˆ—æŒ™

ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ—æŒ™ã™ã‚‹ã«ã¯ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆ [**Get-AzACR.ps1**](https://github.com/NetSPI/MicroBurst/blob/master/Misc/Get-AzACR.ps1) ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š

{% code overflow="wrap" %}
```bash
# List Docker images inside the registry
IEX (New-Object Net.Webclient).downloadstring("https://raw.githubusercontent.com/NetSPI/MicroBurst/master/Misc/Get-AzACR.ps1")

Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Internet Explorer\Main" -Name "DisableFirstRunCustomize" -Value 2

Get-AzACR -username <username> -password <password> -registry <corp-name>.azurecr.io
```
## Azure Container Registry (ACR)

Azure Container Registry (ACR) is a managed Docker registry service based on the open-source Docker Registry 2.0. It allows you to store and manage container images for all types of container deployments.

### Key Features:

- **Private Repositories:** ACR allows you to create private repositories to store your container images securely.
- **Role-Based Access Control (RBAC):** You can control access to your container registry using Azure RBAC.
- **Webhooks:** ACR supports webhooks to trigger events when images are pushed or deleted.
- **Geo-Replication:** You can replicate your container images across multiple Azure regions for better availability.
- **Vulnerability Scanning:** ACR integrates with Azure Security Center to scan container images for vulnerabilities.

### az acr Commands:

- `az acr create`: Create a new container registry.
- `az acr login`: Log in to a container registry.
- `az acr repository list`: List repositories in a container registry.
- `az acr build`: Build a container image using an Azure Container Registry build task.

ACR is a critical component in managing containerized applications in Azure, providing a secure and reliable way to store and deploy container images.
```bash
az acr list --output table
az acr show --name MyRegistry --resource-group MyResourceGroup
```
{% endtab %}

{% tab title="Az Powershell" %}Azure PowerShellã‚’ä½¿ç”¨ã—ã¦ã€Azure Container Registryï¼ˆACRï¼‰ã‚’ç›£æŸ»ãŠã‚ˆã³ç®¡ç†ã§ãã¾ã™ã€‚ä»¥ä¸‹ã¯ã€ACRã«é–¢é€£ã™ã‚‹ä¸€èˆ¬çš„ãªæ“ä½œã§ã™ã€‚

### ACRã¸ã®æ¥ç¶š
```powershell
Connect-AzAccount
Select-AzSubscription -SubscriptionId <SubscriptionId>
```

### ACRãƒªã‚½ãƒ¼ã‚¹ã®å–å¾—
```powershell
Get-AzContainerRegistry -ResourceGroupName <ResourceGroupName> -Name <RegistryName>
```

### ACRã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆ
```powershell
Get-AzContainerRegistryRepository -Registry <RegistryName>
```

### ACRãƒ­ã‚°ã®å–å¾—
```powershell
Get-AzContainerRegistryLog -Registry <RegistryName>
```

### ACRã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®å–å¾—
```powershell
$registry = Get-AzContainerRegistry -ResourceGroupName <ResourceGroupName> -Name <RegistryName>
$registry.Passwords
```

ã“ã‚Œã‚‰ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ACRã‚’åŠ¹æœçš„ã«ç®¡ç†ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–ã§ãã¾ã™ã€‚{% endtab %}
```powershell
# List all ACRs in your subscription
Get-AzContainerRegistry

# Get a specific ACR
Get-AzContainerRegistry -ResourceGroupName "MyResourceGroup" -Name "MyRegistry"
```
ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰ãƒ—ãƒ«ã—ã¾ã™
```bash
docker login <corp-name>.azurecr.io --username <username> --password <password>
docker pull <corp-name>.azurecr.io/<image>:<tag>
```
<details>

<summary><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚¹ãƒ¯ãƒƒã‚°**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ãã ã•ã„
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„**ã€‚**
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>
