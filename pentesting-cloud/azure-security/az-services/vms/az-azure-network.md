# Az - Azure AÄŸÄ±

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## Temel Bilgiler

Azure'daki aÄŸlar, Ã§eÅŸitli Azure hizmetleri ve kaynaklarÄ± arasÄ±ndaki **baÄŸlantÄ± ve iletiÅŸimi** saÄŸlayarak Azure'Ä±n bulut biliÅŸim platformunun ayrÄ±lmaz bir parÃ§asÄ± olarak Ã§alÄ±ÅŸÄ±r. Azure'daki aÄŸ mimarisi, yÃ¼ksek Ã¶lÃ§eklenebilirlik, gÃ¼venlik ve Ã¶zelleÅŸtirme saÄŸlamak Ã¼zere tasarlanmÄ±ÅŸtÄ±r.

Azure, Azure bulutunda **izole edilmiÅŸ aÄŸlar** oluÅŸturmanÄ±za izin veren bir **sanal aÄŸ (VNet)** saÄŸlar. Bu VNets iÃ§inde, sanal makineler, uygulamalar ve veritabanlarÄ± gibi kaynaklar gÃ¼venli bir ÅŸekilde barÄ±ndÄ±rÄ±labilir ve yÃ¶netilebilir. Azure'daki aÄŸ, hem bulut iÃ§indeki iletiÅŸimi (Azure hizmetleri arasÄ±nda) hem de harici aÄŸlara ve internete baÄŸlantÄ±yÄ± destekler.

**GÃ¼venlik**, Azure aÄŸÄ±nda kritik bir unsurdur ve verilerin korunmasÄ±, eriÅŸimin yÃ¶netimi ve uyumluluÄŸun saÄŸlanmasÄ± iÃ§in Ã§eÅŸitli araÃ§lar ve hizmetler mevcuttur. Bu gÃ¼venlik Ã¶nlemleri, trafiÄŸi ve eriÅŸimi yÃ¼ksek bir kontrol seviyesine olanak tanÄ±yan **gÃ¼venlik duvarlarÄ±**, **aÄŸ gÃ¼venlik gruplarÄ±** ve **ÅŸifreleme** yeteneklerini iÃ§erir.

Genel olarak, Azure'Ä±n aÄŸ yetenekleri, kullanÄ±cÄ±larÄ±n belirli uygulama ve iÅŸ yÃ¼kÃ¼ ihtiyaÃ§larÄ±na uygun bir aÄŸ ortamÄ± oluÅŸturmalarÄ±na olanak tanÄ±rken, gÃ¼venlik ve gÃ¼venilirlik konularÄ±na da bÃ¼yÃ¼k Ã¶nem vermektedir.

## Sanal AÄŸ (VNET) ve Alt AÄŸlar

Azure'da bir VNet, temel olarak bulutta kendi aÄŸÄ±nÄ±zÄ±n bir temsilidir. Bu, aboneliÄŸinize Ã¶zel Azure bulutunun **mantÄ±ksal bir izolasyonu**dur. Bir VNet, Azure'da sanal Ã¶zel aÄŸlarÄ± (VPN'ler) oluÅŸturmanÄ±za ve yÃ¶netmenize olanak tanÄ±r ve Sanal Makineler (VM'ler), veritabanlarÄ± ve uygulama hizmetleri gibi **Ã§eÅŸitli tÃ¼rdeki Azure kaynaklarÄ±nÄ±** barÄ±ndÄ±rmak ve yÃ¶netmek iÃ§in kullanÄ±labilir.

VNets, **IP adresi** aralÄ±klarÄ±, alt aÄŸ oluÅŸturma, rota tablolarÄ± ve aÄŸ geÃ§itleri dahil olmak Ã¼zere aÄŸ ayarlarÄ±nÄ±z Ã¼zerinde **tam kontrol saÄŸlar**.

Bir **alt aÄŸ**, VNet'inizdeki bir **IP adresi aralÄ±ÄŸÄ±dÄ±r**. Bir VNet'i, organizasyon ve gÃ¼venlik iÃ§in birden Ã§ok alt aÄŸa bÃ¶lebilirsiniz. Bir VNet'teki her alt aÄŸ, aÄŸ ve uygulama mimarinize gÃ¶re kaynaklarÄ± izole etmek ve gruplandÄ±rmak iÃ§in kullanÄ±labilir.

AyrÄ±ca, alt aÄŸlar, kaynaklarÄ±n kullanabileceÄŸi IP adreslerinin bir aralÄ±ÄŸÄ±nÄ± saÄŸlayarak VNet'inizi bir veya daha fazla alt aÄŸa **bÃ¶lmenize** olanak tanÄ±r.

### **Ã–rnek**

* Diyelim ki `MyVNet` adÄ±nda `10.0.0.0/16` IP adres aralÄ±ÄŸÄ±na sahip bir VNet'iniz var. Bu VNet iÃ§inde, web sunucularÄ±nÄ±zÄ± barÄ±ndÄ±rmak iÃ§in `Subnet-1` adÄ±nda `10.0.0.0/24` IP adres aralÄ±ÄŸÄ±na sahip bir alt aÄŸ oluÅŸturabilirsiniz. VeritabanÄ± sunucularÄ±nÄ±z iÃ§in ise `Subnet-2` adÄ±nda `10.0.1.0/24` bir aralÄ±k kullanÄ±labilir. Bu bÃ¶lÃ¼mleme, aÄŸ iÃ§inde verimli yÃ¶netim ve gÃ¼venlik kontrolleri saÄŸlar.

### SÄ±ralama

Bir Azure hesabÄ±ndaki tÃ¼m VNets ve alt aÄŸlarÄ± listelemek iÃ§in Azure Komut SatÄ±rÄ± ArayÃ¼zÃ¼ (CLI) kullanabilirsiniz. Ä°ÅŸte adÄ±mlar:

{% code overflow="wrap" %}
```bash
# List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table
```
## AÄŸ GÃ¼venlik GruplarÄ± (NSG)

Azure'da, bir **AÄŸ GÃ¼venlik Grubu (NSG)**, bir Azure Sanal AÄŸÄ± (VNet) iÃ§indeki Azure kaynaklarÄ±na gelen ve giden aÄŸ trafiÄŸini filtreleme iÅŸlevini yerine getirir. AÄŸ trafiÄŸinin akÄ±ÅŸÄ±nÄ± ayrÄ±ntÄ±lÄ± bir ÅŸekilde belirleyen bir dizi **gÃ¼venlik kuralÄ±** iÃ§erir.

NSG'nin temel Ã¶zellikleri ÅŸunlardÄ±r:

- **Trafik KontrolÃ¼**: Her NSG, Ã§eÅŸitli Azure kaynaklarÄ±yla iliÅŸkili gelen ve giden aÄŸ trafiÄŸini izin verme veya engelleme konusunda Ã¶nemli bir rol oynayan kurallar iÃ§erir.
- **Kural BileÅŸenleri**: NSG iÃ§indeki kurallar, kaynak/hedef IP adresi, port ve protokol gibi kriterlere dayanarak trafiÄŸi filtreler. Bu ayrÄ±ntÄ±lÄ± Ã¶zellik, aÄŸ trafiÄŸinin ayrÄ±ntÄ±lÄ± yÃ¶netimine olanak saÄŸlar.
- **GÃ¼venlik GeliÅŸtirmesi**: YalnÄ±zca yetkilendirilmiÅŸ trafiÄŸin Azure kaynaklarÄ±na girebileceÄŸinden veya Ã§Ä±kabileceÄŸinden emin olarak, NSG'ler aÄŸ altyapÄ±nÄ±zÄ±n gÃ¼venlik durumunu gÃ¼Ã§lendirmede Ã¶nemli bir rol oynar.

### **Ã–rnek**

* VNet'inizde bir alt aÄŸa veya belirli bir sanal makineye uygulanan `MyNSG` adÄ±nda bir NSG'niz olduÄŸunu hayal edin. AÅŸaÄŸÄ±daki gibi kurallar oluÅŸturabilirsiniz:
* Herhangi bir kaynaktan web sunucularÄ±nÄ±za HTTP trafiÄŸine (port 80) izin veren bir gelen kuralÄ±.
* Belirli bir hedef IP adres aralÄ±ÄŸÄ±na yalnÄ±zca SQL trafiÄŸine (port 1433) izin veren bir giden kuralÄ±.

### NumaralandÄ±rma

{% code overflow="wrap" %}
```bash
# List NSGs
az network nsg list --query "[].{name:name, location:location}" -o table

# Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table
```
## Azure GÃ¼venlik DuvarÄ±

Azure GÃ¼venlik DuvarÄ±, Azure Sanal AÄŸ kaynaklarÄ±nÄ±zÄ± koruyan yÃ¶netilen, bulut tabanlÄ± bir **aÄŸ gÃ¼venlik hizmetidir**. YÃ¼ksek kullanÄ±labilirlik ve Ã¶lÃ§eklenebilirlik Ã¶zelliklerine sahip tamamen durum bilincine sahip bir gÃ¼venlik duvarÄ±dÄ±r.

Azure GÃ¼venlik DuvarÄ±, **NSG'lerden daha geliÅŸmiÅŸ** Ã¶zellikler sunar, bunlar arasÄ±nda **uygulama dÃ¼zeyinde filtreleme**, aÄŸ dÃ¼zeyinde filtreleme, tehdit istihbaratÄ±na dayalÄ± filtreleme ve gÃ¼nlÃ¼kleme ve analiz iÃ§in Azure Monitor ile entegrasyon bulunur.\
Giden, gelen, konuÅŸan-konuÅŸan, VPN ve ExpressRoute trafiÄŸini filtreleyebilir. **GÃ¼venlik duvarÄ± kurallarÄ± FQDN (Tam TanÄ±mlÄ± Alan AdÄ±), IP adresleri ve portlara dayalÄ± olarak oluÅŸturulabilir**.

### Azure GÃ¼venlik DuvarÄ± ve NSG'ler ArasÄ±ndaki Farklar&#x20;

1. **Kapsam:**
* **NSG:** Alt aÄŸ veya aÄŸ arayÃ¼zÃ¼ dÃ¼zeyinde Ã§alÄ±ÅŸÄ±r. AÄŸ arayÃ¼zlerinden (NIC), sanal makinelerden veya alt aÄŸlardan gelen giden ve gelen trafiÄŸi temel dÃ¼zeyde filtrelemek iÃ§in kullanÄ±lÄ±r.
* **Azure GÃ¼venlik DuvarÄ±:** VNet dÃ¼zeyinde Ã§alÄ±ÅŸÄ±r ve daha geniÅŸ bir koruma kapsamÄ± saÄŸlar. Sanal aÄŸ kaynaklarÄ±nÄ±zÄ± gÃ¼vence altÄ±na almak ve VNet'e giren ve Ã§Ä±kan trafiÄŸi yÃ¶netmek iÃ§in tasarlanmÄ±ÅŸtÄ±r.
2. **Yetenekler:**
* **NSG:** IP adresi, port ve protokole dayalÄ± temel filtreleme yetenekleri sunar. Uygulama dÃ¼zeyinde denetim veya tehdit istihbaratÄ± gibi geliÅŸmiÅŸ Ã¶zellikleri desteklemez.
* **Azure GÃ¼venlik DuvarÄ±:** Uygulama dÃ¼zeyinde (Katman 7) trafiÄŸi filtreleme, tehdit istihbaratÄ±na dayalÄ± filtreleme, aÄŸ trafiÄŸi filtreleme ve daha fazlasÄ± gibi geliÅŸmiÅŸ Ã¶zellikler sunar. AyrÄ±ca birden fazla genel IP adresini destekler.
3. **KullanÄ±m SenaryolarÄ±:**
* **NSG:** Temel aÄŸ dÃ¼zeyinde trafiÄŸi filtrelemek iÃ§in uygundur.
* **Azure GÃ¼venlik DuvarÄ±:** Uygulama dÃ¼zeyinde kontrol, gÃ¼nlÃ¼kleme ve tehdit istihbaratÄ±nÄ±n gerektiÄŸi daha karmaÅŸÄ±k filtreleme senaryolarÄ± iÃ§in uygundur.
4. **YÃ¶netim ve Ä°zleme:**
* **NSG:** Temel dÃ¼zeyde gÃ¼nlÃ¼kleme ve Azure Monitor ile entegrasyon sunar.
* **Azure GÃ¼venlik DuvarÄ±:** Trafik doÄŸasÄ±nÄ± ve desenini anlamak iÃ§in Ã¶nemli olan geliÅŸmiÅŸ gÃ¼nlÃ¼kleme ve analitik yetenekleri Azure Monitor aracÄ±lÄ±ÄŸÄ±yla saÄŸlar.

### NumaralandÄ±rma

{% code overflow="wrap" %}
```bash
# List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

# Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table
```
## AÄŸ Sanal CihazÄ± (NVA)

Azure'da bir AÄŸ Sanal CihazÄ± (NVA), bir sanal aÄŸ iÃ§inde **aÄŸ iÅŸlevlerini gerÃ§ekleÅŸtiren bir sanal cihazdÄ±r**. NVA'lar genellikle Azure'da **doÄŸal olarak mevcut olmayan aÄŸ iÅŸlevleri** iÃ§in veya daha fazla Ã¶zelleÅŸtirme gerektiÄŸinde kullanÄ±lÄ±r. Temelde, aÄŸ uygulamalarÄ± veya hizmetleri Ã§alÄ±ÅŸtÄ±ran sanal makinelerdir, Ã¶rneÄŸin gÃ¼venlik duvarlarÄ±, WAN optimizasyonlarÄ± veya yÃ¼k dengeleyicileri gibi.

NVAs, karmaÅŸÄ±k yÃ¶nlendirme, **gÃ¼venlik** ve **aÄŸ trafiÄŸi yÃ¶netimi** gÃ¶revleri iÃ§in kullanÄ±lÄ±r. Azure **Marketplace** Ã¼zerinden daÄŸÄ±tÄ±labilirler, burada birÃ§ok Ã¼Ã§Ã¼ncÃ¼ taraf satÄ±cÄ±, cihazlarÄ±nÄ± Azure ortamlarÄ±na entegre etmeye hazÄ±r olarak sunar.

### **Ã–rnek**

* Bir kuruluÅŸ, Ã¶zelleÅŸtirilmiÅŸ bir gÃ¼venlik duvarÄ± Ã§Ã¶zÃ¼mÃ¼ oluÅŸturmak iÃ§in Azure'da bir NVA daÄŸÄ±tabilir. Bu NVA, geliÅŸmiÅŸ Ã¶zellikler sunan bir **Ã¼Ã§Ã¼ncÃ¼ taraf gÃ¼venlik duvarÄ± yazÄ±lÄ±mÄ±** Ã§alÄ±ÅŸtÄ±rabilir, Ã¶rneÄŸin sÄ±zma tespiti, paket incelemesi veya VPN baÄŸlantÄ±sÄ±. NVA, Ã¼zerinden geÃ§en trafiÄŸi denetlemek ve filtrelemek iÃ§in yapÄ±landÄ±rÄ±labilir, bÃ¶ylece kuruluÅŸun politikalarÄ±na uygun olarak geliÅŸmiÅŸ gÃ¼venlik Ã¶nlemleri saÄŸlanÄ±r.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# Usually NVAs are named or tagged in a way to distinguish them from other VMs
az vm list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# For a specific VM identified as an NVA, list its network interfaces
az vm nic list --vm-name <VMName> --resource-group <ResourceGroupName> --query "[].{id:id}" -o table
```
## Azure YÃ¶nlendirme TablolarÄ± ve KullanÄ±cÄ± TanÄ±mlÄ± YÃ¶nlendirmeler (UDR)

**Azure YÃ¶nlendirme TablolarÄ±**, Microsoft Azure iÃ§indeki **Azure Sanal AÄŸlar (VNets)** iÃ§indeki **aÄŸ trafiÄŸi yÃ¶nlendirmesini kontrol etmeye olanak saÄŸlayan bir Ã¶zelliktir**. Temel olarak, VNets iÃ§indeki alt aÄŸlar arasÄ±nda, VNets arasÄ±nda veya harici aÄŸlara nasÄ±l **paketlerin yÃ¶nlendirileceÄŸini** tanÄ±mlar. Her yÃ¶nlendirme tablosu, hedef IP adreslerine gÃ¶re paketlerin nasÄ±l yÃ¶nlendirileceÄŸini belirleyen kurallar kÃ¼mesi olan yÃ¶nlendirmeleri iÃ§erir.

Azure'da **KullanÄ±cÄ± TanÄ±mlÄ± YÃ¶nlendirmeler (UDR)**, Azure YÃ¶nlendirme TablolarÄ± iÃ§inde oluÅŸturduÄŸunuz **Ã¶zel yÃ¶nlendirmelerdir** ve Azure Sanal AÄŸlar (VNets) arasÄ±nda ve harici baÄŸlantÄ±larda **aÄŸ trafiÄŸinin akÄ±ÅŸÄ±nÄ± kontrol etmek** iÃ§in kullanÄ±lÄ±r. UDR'ler, belirli gereksinimlerinize gÃ¶re aÄŸ trafiÄŸini yÃ¶nlendirmenize olanak saÄŸlar ve Azure'Ä±n varsayÄ±lan yÃ¶nlendirme kararlarÄ±nÄ± geÃ§ersiz kÄ±lar.

Bu yÃ¶nlendirmeler, aÄŸ trafiÄŸini **sanal bir cihaz Ã¼zerinden yÃ¶nlendirmeniz**, gÃ¼venlik veya politika uyumluluÄŸu iÃ§in belirli bir yol belirlemeniz veya yerindeki aÄŸlarla entegrasyon yapmanÄ±z gereken senaryolarda Ã¶zellikle kullanÄ±ÅŸlÄ±dÄ±r.

### **Ã–rnek**

* Bir VNet iÃ§indeki alt aÄŸlar arasÄ±ndaki trafiÄŸi denetlemek iÃ§in bir AÄŸ Sanal CihazÄ± (NVA) daÄŸÄ±ttÄ±ÄŸÄ±nÄ±zÄ± varsayalÄ±m. Bir alt aÄŸdan diÄŸer bir alt aÄŸa giden tÃ¼m trafiÄŸi NVA Ã¼zerinden yÃ¶nlendiren bir UDR oluÅŸturabilirsiniz. Bu UDR, trafiÄŸin hedefine ulaÅŸmadan Ã¶nce NVA tarafÄ±ndan gÃ¼venlik amaÃ§lÄ± denetlenmesini saÄŸlar.

### **SÄ±ralama**

{% code overflow="wrap" %}
```bash
# List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List UDRs for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table
```
{% endcode %}

## Azure Ã–zel BaÄŸlantÄ±

Azure Ã–zel BaÄŸlantÄ±, Azure'da bir hizmete Ã¶zel eriÅŸimi saÄŸlayarak, Azure sanal aÄŸÄ±nÄ±z (VNet) ile hizmet arasÄ±ndaki trafiÄŸin tamamen Microsoft'un Azure omurga aÄŸÄ± iÃ§inde seyahat etmesini saÄŸlayan bir hizmettir. Bu ÅŸekilde hizmeti VNet'inize getirir. Bu yapÄ±, verilerin genel internete maruz kalmadan gÃ¼venli bir ÅŸekilde iletilmesini saÄŸlayarak gÃ¼venliÄŸi artÄ±rÄ±r.

Ã–zel BaÄŸlantÄ±, Azure Depolama, Azure SQL VeritabanÄ± ve Ã–zel BaÄŸlantÄ± aracÄ±lÄ±ÄŸÄ±yla paylaÅŸÄ±lan Ã¶zel hizmetler gibi Ã§eÅŸitli Azure hizmetleriyle kullanÄ±labilir. Kendi VNet'inizden veya farklÄ± Azure aboneliklerinden hizmetleri tÃ¼ketmek iÃ§in gÃ¼venli bir yol saÄŸlar.

{% hint style="danger" %}
Ã–zel uÃ§ noktalara NSG'ler uygulanmaz, bu da Ã–zel BaÄŸlantÄ± iÃ§eren bir alt aÄŸa NSG atamanÄ±n hiÃ§bir etkisi olmadÄ±ÄŸÄ± anlamÄ±na gelir.
{% endhint %}

### **Ã–rnek**

* VNet'inizden gÃ¼venli bir ÅŸekilde eriÅŸmek istediÄŸiniz bir **Azure SQL VeritabanÄ±** olduÄŸunu dÃ¼ÅŸÃ¼nÃ¼n. Normalde, bu genel internet Ã¼zerinden geÃ§meyi gerektirebilir. Ã–zel BaÄŸlantÄ± ile, Azure SQL VeritabanÄ± hizmetine doÄŸrudan baÄŸlanan bir **Ã¶zel uÃ§ nokta** oluÅŸturabilirsiniz. Bu uÃ§ nokta, veritabanÄ±nÄ± kendi VNet'inizin bir parÃ§asÄ± gibi gÃ¶rÃ¼nmesini saÄŸlar ve Ã¶zel bir IP adresi aracÄ±lÄ±ÄŸÄ±yla eriÅŸilebilir hale getirir, bÃ¶ylece gÃ¼venli ve Ã¶zel eriÅŸim saÄŸlanÄ±r.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# List Private Link Services
z network private-link-service list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List Private Endpoints
az network private-endpoint list --query "[].{name:name, location:location, resourceGroup:resourceGroup, privateLinkServiceConnections:privateLinkServiceConnections}" -o table
```
{% endcode %}

## Azure Hizmet UÃ§ NoktalarÄ±

Azure Hizmet UÃ§ NoktalarÄ±, sanal aÄŸ Ã¶zel adres alanÄ±nÄ±zÄ± ve VNet'in kimliÄŸini doÄŸrudan bir baÄŸlantÄ± Ã¼zerinden Azure hizmetlerine geniÅŸletir. Hizmet uÃ§ noktalarÄ±nÄ± etkinleÅŸtirerek, **VNet'teki kaynaklar Azure Depolama ve Azure SQL VeritabanÄ± gibi Azure hizmetlerine gÃ¼venli bir ÅŸekilde baÄŸlanabilir**. Bu, VNet'ten Azure hizmetine olan trafiÄŸin Azure aÄŸÄ± iÃ§inde kalmasÄ±nÄ± saÄŸlayarak daha gÃ¼venli ve gÃ¼venilir bir yol saÄŸlar.

### **Ã–rnek**

* Ã–rneÄŸin, bir **Azure Depolama** hesabÄ± varsayÄ±lan olarak genel internet Ã¼zerinden eriÅŸilebilir. VNet'iniz iÃ§inde Azure Depolama iÃ§in bir **hizmet uÃ§ noktasÄ± etkinleÅŸtirerek**, yalnÄ±zca VNet'inizden gelen trafiÄŸin depolama hesabÄ±na eriÅŸebilmesini saÄŸlayabilirsiniz. Depolama hesabÄ± gÃ¼venlik duvarÄ± daha sonra yalnÄ±zca VNet'inizden gelen trafiÄŸi kabul etmek Ã¼zere yapÄ±landÄ±rÄ±labilir.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# List Virtual Networks with Service Endpoints
az network vnet list --query "[].{name:name, location:location, serviceEndpoints:serviceEndpoints}" -o table

# List Subnets with Service Endpoints
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, serviceEndpoints:serviceEndpoints}" -o table
```
{% endcode %}

### Hizmet UÃ§ NoktalarÄ± ve Ã–zel BaÄŸlantÄ±lar ArasÄ±ndaki Farklar

Microsoft, [**dokÃ¼mantasyonda**](https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services#compare-private-endpoints-and-service-endpoints) Ã–zel BaÄŸlantÄ±larÄ± Ã¶nermektedir:

<figure><img src="../../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

**Hizmet UÃ§ NoktalarÄ±:**

* VNet'ten Azure hizmetine olan trafiÄŸin iletimi, genel interneti atlayarak Microsoft Azure omurga aÄŸÄ± Ã¼zerinden gerÃ§ekleÅŸir.
* UÃ§ nokta, Azure hizmetine doÄŸrudan bir baÄŸlantÄ±dÄ±r ve VNet iÃ§inde hizmet iÃ§in Ã¶zel bir IP saÄŸlamaz.
* Hizmet, VNet dÄ±ÅŸÄ±ndan hala genel uÃ§ noktasÄ± Ã¼zerinden eriÅŸilebilir, ancak hizmet gÃ¼venlik duvarÄ±nÄ± bu tÃ¼r trafiÄŸi engellemek iÃ§in yapÄ±landÄ±rmazsanÄ±z.
* Alt aÄŸ ile Azure hizmeti arasÄ±nda bir bir-bir iliÅŸkisi vardÄ±r.
* Ã–zel BaÄŸlantÄ±lardan daha ucuzdur.

**Ã–zel BaÄŸlantÄ±lar:**

* Ã–zel BaÄŸlantÄ±, Azure hizmetlerini VNet'inize Ã¶zel bir uÃ§ nokta aracÄ±lÄ±ÄŸÄ±yla eÅŸler.
* Azure hizmetine bu Ã¶zel IP adresi kullanÄ±larak eriÅŸilir ve hizmet, aÄŸÄ±nÄ±zÄ±n bir parÃ§asÄ±ymÄ±ÅŸ gibi gÃ¶rÃ¼nÃ¼r.
* Ã–zel BaÄŸlantÄ± ile baÄŸlantÄ±lÄ± hizmetlere yalnÄ±zca VNet'inizden veya baÄŸlÄ± aÄŸlardan eriÅŸilebilir; hizmete genel internet eriÅŸimi yoktur.
* Azure hizmetlerine veya Azure'da barÄ±ndÄ±rÄ±lan kendi hizmetlerinize gÃ¼venli bir baÄŸlantÄ± saÄŸlar ve baÅŸkalarÄ± tarafÄ±ndan paylaÅŸÄ±lan hizmetlere baÄŸlantÄ± saÄŸlar.
* Ã–zel bir uÃ§ nokta aracÄ±lÄ±ÄŸÄ±yla VNet'inizde daha geniÅŸ bir eriÅŸim kontrolÃ¼ saÄŸlar, hizmet uÃ§ noktasÄ± dÃ¼zeyindeki daha geniÅŸ eriÅŸim kontrolÃ¼ne kÄ±yasla.

Ã–zetlemek gerekirse, Hizmet UÃ§ NoktalarÄ± ve Ã–zel BaÄŸlantÄ±lar, Azure hizmetlerine gÃ¼venli baÄŸlantÄ± saÄŸlasa da, **Ã–zel BaÄŸlantÄ±lar, hizmetlere genel internete maruz kalmadan Ã¶zel olarak eriÅŸilmesini saÄŸlayarak daha yÃ¼ksek bir izolasyon ve gÃ¼venlik dÃ¼zeyi sunar**. Ã–te yandan, Hizmet UÃ§ NoktalarÄ±, VNet'te Ã¶zel bir IP gerektirmeyen basit ve gÃ¼venli eriÅŸim gerektiren genel durumlar iÃ§in daha kolay kurulur.

## Azure Front Door (AFD) ve AFD WAF

**Azure Front Door**, kÃ¼resel web uygulamalarÄ±nÄ±zÄ±n **hÄ±zlÄ± teslimatÄ±** iÃ§in Ã¶lÃ§eklenebilir ve gÃ¼venli bir giriÅŸ noktasÄ±dÄ±r. **KÃ¼resel yÃ¼k dengeleme, site hÄ±zlandÄ±rma, SSL kaldÄ±rma ve Web Uygulama GÃ¼venlik DuvarÄ± (WAF)** gibi Ã§eÅŸitli hizmetleri tek bir hizmette birleÅŸtirir. Azure Front Door, kullanÄ±cÄ±ya en yakÄ±n kenar konumuna dayalÄ± akÄ±llÄ± yÃ¶nlendirme saÄŸlayarak optimal performans ve gÃ¼venilirlik saÄŸlar. AyrÄ±ca, URL tabanlÄ± yÃ¶nlendirme, Ã§oklu site barÄ±ndÄ±rma, oturum baÄŸÄ±mlÄ±lÄ±ÄŸÄ± ve uygulama katmanÄ± gÃ¼venliÄŸi sunar.

**Azure Front Door WAF**, arka uÃ§ kodunu deÄŸiÅŸtirmeden web uygulamalarÄ±nÄ± **web tabanlÄ± saldÄ±rÄ±lara karÅŸÄ± korumak** iÃ§in tasarlanmÄ±ÅŸtÄ±r. SQL enjeksiyonu, cross-site scripting ve diÄŸer yaygÄ±n saldÄ±rÄ±lara karÅŸÄ± koruma saÄŸlamak iÃ§in Ã¶zel kurallar ve yÃ¶netilen kural setleri iÃ§erir.

### **Ã–rnek**

* TÃ¼m dÃ¼nyada kullanÄ±cÄ±larÄ± olan kÃ¼resel bir daÄŸÄ±tÄ±ma sahip bir uygulamanÄ±z olduÄŸunu hayal edin. Azure Front Door'u kullanarak kullanÄ±cÄ± isteklerini uygulamanÄ±zÄ± barÄ±ndÄ±ran en yakÄ±n bÃ¶lgesel veri merkezine yÃ¶nlendirebilir, bÃ¶ylece gecikmeyi azaltabilir, kullanÄ±cÄ± deneyimini iyileÅŸtirebilir ve **WAF yetenekleriyle web saldÄ±rÄ±larÄ±na karÅŸÄ± savunma saÄŸlayabilirsiniz**. Belirli bir bÃ¶lge kesinti yaÅŸarsa, Azure Front Door trafikleri otomatik olarak en iyi sonraki konuma yÃ¶nlendirebilir ve yÃ¼ksek kullanÄ±labilirlik saÄŸlar.

### SÄ±ralama
```bash
# List Azure Front Door Instances
az network front-door list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List Front Door WAF Policies
az network front-door waf-policy list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table
```
{% endcode %}

## Azure Uygulama AÄŸÄ± ve Azure Uygulama AÄŸÄ± WAF

Azure Uygulama AÄŸÄ±, **web** uygulamalarÄ±nÄ±za yÃ¶nelik trafiÄŸi yÃ¶netmenizi saÄŸlayan bir **web trafiÄŸi yÃ¼k dengeleyicisidir**. Hizmet olarak bir Uygulama DaÄŸÄ±tÄ±m Denetleyicisi (ADC) olarak **Katman 7 yÃ¼k dengeleme, SSL sonlandÄ±rma ve web uygulama gÃ¼venlik duvarÄ± (WAF) yetenekleri** sunar. Ana Ã¶zellikler arasÄ±nda URL tabanlÄ± yÃ¶nlendirme, Ã§erez tabanlÄ± oturum baÄŸÄ±mlÄ±lÄ±ÄŸÄ± ve karmaÅŸÄ±k yÃ¼k dengeleme yeteneklerine ihtiyaÃ§ duyan kÃ¼resel yÃ¶nlendirme ve yol tabanlÄ± yÃ¶nlendirme gibi uygulamalar iÃ§in Ã¶nemli olan gÃ¼venli soket katmanÄ± (SSL) dÄ±ÅŸa aktarma bulunur.

### Ã–rnek

* FarklÄ± iÅŸlevler iÃ§in birden fazla alt alan adÄ± iÃ§eren bir e-ticaret web sitesine sahip olduÄŸunuzu dÃ¼ÅŸÃ¼nÃ¼n, Ã¶rneÄŸin kullanÄ±cÄ± hesaplarÄ± ve Ã¶deme iÅŸleme. Azure Uygulama AÄŸÄ±, trafiÄŸi **URL yoluna gÃ¶re uygun web sunucularÄ±na yÃ¶nlendirebilir**. Ã–rneÄŸin, `example.com/accounts` adresine yÃ¶nelik trafiÄŸi kullanÄ±cÄ± hesaplarÄ± hizmetine yÃ¶nlendirebilir ve `example.com/pay` adresine yÃ¶nelik trafiÄŸi Ã¶deme iÅŸleme hizmetine yÃ¶nlendirebilir.\
Ve **WAF yeteneklerini kullanarak web sitenizi saldÄ±rÄ±lardan koruyabilirsiniz.**

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# List the Web Application Firewall configurations for your Application Gateways
az network application-gateway waf-config list --gateway-name <AppGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, firewallMode:firewallMode, ruleSetType:ruleSetType, ruleSetVersion:ruleSetVersion}" -o table
```
{% endcode %}

## Azure Hub, Spoke ve VNet Peering

**VNet Peering**, Azure'da farklÄ± Sanal AÄŸlarÄ±n (VNet) doÄŸrudan ve sorunsuz bir ÅŸekilde baÄŸlanmasÄ±nÄ± saÄŸlayan bir aÄŸ Ã¶zelliÄŸidir. VNet peering sayesinde, bir VNet'teki kaynaklar, baÅŸka bir VNet'teki kaynaklarla Ã¶zel IP adresleri kullanarak iletiÅŸim kurabilirler, sanki aynÄ± aÄŸda gibi.\
**VNet Peering, bir on-prem aÄŸ ile de kullanÄ±labilir**, site-to-site VPN veya Azure ExpressRoute kurarak.

**Azure Hub ve Spoke**, Azure'da aÄŸ trafiÄŸini yÃ¶netmek ve dÃ¼zenlemek iÃ§in kullanÄ±lan bir aÄŸ topolojisidir. **"Hub", farklÄ± "spoke"lar arasÄ±nda trafiÄŸi kontrol eden ve yÃ¶nlendiren merkezi bir noktadÄ±r**. Hub genellikle aÄŸ sanal cihazlarÄ± (NVA'lar), Azure VPN Gateway, Azure Firewall veya Azure Bastion gibi paylaÅŸÄ±lan hizmetleri iÃ§erir. **"Spoke"lar, iÅŸ yÃ¼klerini barÄ±ndÄ±ran ve VNet peering kullanarak hub'a baÄŸlanan VNets'tir**, bÃ¶ylece farklÄ± VNets'teki birden Ã§ok iÅŸ yÃ¼kÃ¼, hub iÃ§indeki paylaÅŸÄ±lan hizmetleri kullanabilir. Bu model, birden Ã§ok VNets'teki iÅŸ yÃ¼klerinin kullanabileceÄŸi ortak hizmetleri merkezileÅŸtirerek temiz bir aÄŸ dÃ¼zeni saÄŸlar ve karmaÅŸÄ±klÄ±ÄŸÄ± azaltÄ±r.

{% hint style="danger" %}
**Azure'da VNET eÅŸleme geÃ§iÅŸli deÄŸildir**, yani eÄŸer spoke 1 spoke 2'ye baÄŸlÄ±ysa ve spoke 2 spoke 3'e baÄŸlÄ±ysa, spoke 1 doÄŸrudan spoke 3 ile iletiÅŸim kuramaz.
{% endhint %}

### Ã–rnekler

* SatÄ±ÅŸ, Ä°K ve GeliÅŸtirme gibi ayrÄ± departmanlara sahip bir ÅŸirketi dÃ¼ÅŸÃ¼nÃ¼n, **her biri kendi VNet'ine (spoke'larÄ±na) sahip**. Bu VNets, merkezi bir veritabanÄ±, bir gÃ¼venlik duvarÄ± ve bir internet aÄŸÄ± gibi **paylaÅŸÄ±lan kaynaklara eriÅŸim gerektirir**, bu kaynaklar **baÅŸka bir VNet'te (hub) bulunur**. Hub ve Spoke modelini kullanarak, her departman, paylaÅŸÄ±lan kaynaklara hub VNet Ã¼zerinden gÃ¼venli bir ÅŸekilde baÄŸlanabilir, bu kaynaklarÄ± halka aÃ§Ä±k internete maruz bÄ±rakmadan veya karmaÅŸÄ±k bir aÄŸ yapÄ±sÄ± oluÅŸturmadan kullanabilir.
```bash
# List all VNets in your subscription
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List VNet peering connections for a given VNet
az network vnet peering list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, peeringState:peeringState, remoteVnetId:remoteVnetId}" -o table

# List Shared Resources (e.g., Azure Firewall) in the Hub
az network firewall list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table
```
{% endcode %}

## Site-to-Site VPN

Azure'da bir Site-to-Site VPN, **yerindeki aÄŸÄ±nÄ±zÄ± Azure Sanal AÄŸÄ± (VNet) ile baÄŸlantÄ±landÄ±rmanÄ±za olanak tanÄ±r**, bÃ¶ylece Azure iÃ§indeki VM'ler gibi kaynaklar yerel aÄŸÄ±nÄ±zda gibi gÃ¶rÃ¼nÃ¼r. Bu baÄŸlantÄ±, iki aÄŸ arasÄ±nda trafiÄŸi ÅŸifreleyen bir **VPN aÄŸ geÃ§idi aracÄ±lÄ±ÄŸÄ±yla kurulur**.

### **Ã–rnek**

* New York'ta ana ofisi bulunan bir iÅŸletmenin, sanallaÅŸtÄ±rÄ±lmÄ±ÅŸ iÅŸ yÃ¼klerini barÄ±ndÄ±ran Azure'daki VNet'ine gÃ¼venli bir ÅŸekilde baÄŸlanmasÄ± gereken bir yerinde veri merkezi vardÄ±r. **Site-to-Site VPN kurarak, ÅŸirket yerindeki sunucular ile Azure VM'leri arasÄ±nda ÅŸifreli baÄŸlantÄ±yÄ± saÄŸlayabilir**, bÃ¶ylece kaynaklar her iki ortamda da aynÄ± yerel aÄŸda gibi gÃ¼venli bir ÅŸekilde eriÅŸilebilir.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# List VPN Gateways
az network vnet-gateway list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List VPN Connections
az network vpn-connection list --gateway-name <VpnGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, connectionType:connectionType, connectionStatus:connectionStatus}" -o table
```
## Azure ExpressRoute

Azure ExpressRoute, on-premiz altyapÄ±nÄ±z ile Azure veri merkezleri arasÄ±nda **Ã¶zel, adanmÄ±ÅŸ, yÃ¼ksek hÄ±zlÄ± bir baÄŸlantÄ± saÄŸlayan bir hizmettir**. Bu baÄŸlantÄ±, bir baÄŸlantÄ± saÄŸlayÄ±cÄ± aracÄ±lÄ±ÄŸÄ±yla gerÃ§ekleÅŸtirilir ve tipik internet baÄŸlantÄ±larÄ±na gÃ¶re daha gÃ¼venilirlik, daha hÄ±zlÄ± hÄ±zlar, daha dÃ¼ÅŸÃ¼k gecikmeler ve daha yÃ¼ksek gÃ¼venlik sunarak genel interneti atlar.

### **Ã–rnek**

* Bir Ã§ok uluslu ÅŸirket, yÃ¼ksek veri hacmi ve yÃ¼ksek verimlilik ihtiyacÄ± nedeniyle Azure hizmetlerine **sÃ¼rekli ve gÃ¼venilir bir baÄŸlantÄ±ya ihtiyaÃ§ duyar**. Åirket, bÃ¼yÃ¼k Ã¶lÃ§ekli veri transferlerini, gÃ¼nlÃ¼k yedeklemeleri ve gerÃ§ek zamanlÄ± veri analitiÄŸi gibi iÅŸlemleri, artÄ±rÄ±lmÄ±ÅŸ gizlilik ve hÄ±z ile gerÃ§ekleÅŸtirmek iÃ§in on-premiz veri merkezini Azure'a doÄŸrudan baÄŸlamak iÃ§in Azure ExpressRoute'u tercih eder.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# List ExpressRoute Circuits
az network express-route list --query "[].{name:name, location:location, resourceGroup:resourceGroup, serviceProviderName:serviceProviderName, peeringLocation:peeringLocation}" -o table
```
{% endcode %}

<details>

<summary><strong>AWS hackleme becerilerini sÄ±fÄ±rdan kahraman seviyesine Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* **Hacking hilelerinizi HackTricks** ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
