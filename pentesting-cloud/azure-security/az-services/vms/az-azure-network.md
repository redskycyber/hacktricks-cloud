# Az - Azure AÄŸÄ±

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na(https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nleri**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi**]'ni(https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'ler**]'imiz(https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)** takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## Temel Bilgiler

Azure'daki aÄŸlar, Ã§eÅŸitli Azure hizmetleri ve kaynaklarÄ± arasÄ±ndaki **baÄŸlantÄ± ve iletiÅŸimi saÄŸlayan** bulut biliÅŸim platformunun ayrÄ±lmaz bir parÃ§asÄ± olarak iÅŸlev gÃ¶rÃ¼r. Azure'daki aÄŸ mimarisi, yÃ¼ksek Ã¶lÃ§eklenebilirlik, gÃ¼venlik ve Ã¶zelleÅŸtirilebilirlik saÄŸlamak Ã¼zere tasarlanmÄ±ÅŸtÄ±r.

Temelde, Azure, kullanÄ±cÄ±larÄ±n Azure bulutu iÃ§inde **izole edilmiÅŸ aÄŸlar** oluÅŸturmalarÄ±na izin veren bir **sanal aÄŸ (VNet)** saÄŸlar. Bu VNet'ler iÃ§inde sanal makineler, uygulamalar ve veritabanlarÄ± gibi kaynaklar gÃ¼venli bir ÅŸekilde barÄ±ndÄ±rÄ±lÄ±p yÃ¶netilebilir. Azure'daki aÄŸ, hem bulut iÃ§indeki iletiÅŸimi (Azure hizmetleri arasÄ±nda) hem de harici aÄŸlara ve internete baÄŸlantÄ±yÄ± destekler.

**GÃ¼venlik**, Azure aÄŸÄ±nÄ±n kritik bir yÃ¶nÃ¼dÃ¼r ve verileri korumak, eriÅŸimi yÃ¶netmek ve uyumluluÄŸu saÄŸlamak iÃ§in Ã§eÅŸitli araÃ§lar ve hizmetler mevcuttur. Bu gÃ¼venlik Ã¶nlemleri arasÄ±nda **gÃ¼venlik duvarlarÄ±**, **aÄŸ gÃ¼venlik gruplarÄ±** ve **ÅŸifreleme** yetenekleri bulunur, bu da trafiÄŸi ve eriÅŸimi yÃ¼ksek bir kontrol seviyesine olanak tanÄ±r.

Genel olarak, Azure'Ä±n aÄŸ yetenekleri, kullanÄ±cÄ±larÄ±n belirli uygulama ve iÅŸ yÃ¼kÃ¼ ihtiyaÃ§larÄ±na uygun bir aÄŸ ortamÄ± oluÅŸturmalarÄ±na olanak tanÄ±yacak ÅŸekilde esneklik sunacak ÅŸekilde tasarlanmÄ±ÅŸ olup gÃ¼venlik ve gÃ¼venilirlik Ã¼zerinde gÃ¼Ã§lÃ¼ bir vurgu yapmaktadÄ±r.

## Sanal AÄŸ (VNET) ve Alt AÄŸlar

Azure'daki bir VNet, bulutta kendi aÄŸÄ±nÄ±zÄ±n bir temsilidir. Bu, **aboneliÄŸinize Ã¶zel Azure bulutunda** bir **mantÄ±ksal izolasyon** saÄŸlar. Bir VNet, Azure'da sanal Ã¶zel aÄŸlar (VPN'ler) oluÅŸturmanÄ±za ve yÃ¶netmenize olanak tanÄ±r ve Sanal Makineler (VM'ler), veritabanlarÄ± ve uygulama hizmetleri gibi **Ã§eÅŸitli tÃ¼rdeki Azure kaynaklarÄ±nÄ± barÄ±ndÄ±rmak ve yÃ¶netmek iÃ§in kullanÄ±labilir**.

VNets, **IP adresi** aralÄ±klarÄ±, alt aÄŸ oluÅŸturma, yÃ¶nlendirme tablolarÄ± ve aÄŸ geÃ§itleri dahil olmak Ã¼zere **aÄŸ ayarlarÄ±nÄ±z Ã¼zerinde tam kontrol saÄŸlar**.

Bir **alt aÄŸ**, VNet'inizdeki bir **IP adresi aralÄ±ÄŸÄ±dÄ±r**. Bir VNet'i gÃ¼venlik ve organizasyon iÃ§in birden fazla alt aÄŸa bÃ¶lebilirsiniz. Bir VNet'teki her alt aÄŸ, kaynaklarÄ± aÄŸ ve uygulama mimarinize gÃ¶re izole etmek ve gruplamak iÃ§in kullanÄ±labilir.

AyrÄ±ca, alt aÄŸlar, kaynaklarÄ±n kullanabileceÄŸi IP adreslerini saÄŸlayarak VNet'inizi bir veya daha fazla alt aÄŸa **bÃ¶lmeye** olanak tanÄ±r.

### **Ã–rnek**

* Diyelim ki `MyVNet` adÄ±nda bir VNet'iniz var ve IP adres aralÄ±ÄŸÄ± `10.0.0.0/16`. Bu VNet iÃ§inde, diyelim ki web sunucularÄ±nÄ± barÄ±ndÄ±rmak iÃ§in `Subnet-1` adÄ±nda bir alt aÄŸ oluÅŸturabilirsiniz, IP adres aralÄ±ÄŸÄ± `10.0.0.0/24`. VeritabanÄ± sunucularÄ±nÄ±z iÃ§in kullanÄ±labilecek `Subnet-2` adÄ±nda baÅŸka bir alt aÄŸ, IP adres aralÄ±ÄŸÄ± `10.0.1.0/24` olabilir. Bu segmentasyon, aÄŸ iÃ§inde verimli yÃ¶netim ve gÃ¼venlik kontrollerine olanak tanÄ±r.

### NumaralandÄ±rma

Bir Azure hesabÄ±ndaki tÃ¼m VNets ve alt aÄŸlarÄ± listelemek iÃ§in Azure Komut SatÄ±rÄ± ArayÃ¼zÃ¼ (CLI) kullanabilirsiniz. Ä°ÅŸte adÄ±mlar:

{% code overflow="wrap" %}
```bash
# List VNets
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List subnets of a VNet
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, addressPrefix:addressPrefix}" -o table
```
{% endcode %}

## AÄŸ GÃ¼venlik GruplarÄ± (NSG)

Azure'da **AÄŸ GÃ¼venlik Grubu (NSG)**, bir Azure Sanal AÄŸÄ± (VNet) iÃ§indeki Azure kaynaklarÄ±na gelen ve giden aÄŸ trafiÄŸini filtreleme temel iÅŸlevini yerine getirir. AÄŸ trafiÄŸinin akÄ±ÅŸÄ±nÄ± titizlikle belirleyen bir dizi **gÃ¼venlik kuralÄ±nÄ±** iÃ§erir.

NSG'nin temel yÃ¶nleri ÅŸunlardÄ±r:

* **Trafik KontrolÃ¼**: Her NSG, Ã§eÅŸitli Azure kaynaklarÄ±yla iliÅŸkili gelen ve giden aÄŸ trafiÄŸini izin verme veya engelleme konusunda Ã¶nemli olan kurallarÄ± iÃ§erir.
* **Kural BileÅŸenleri**: Bir NSG iÃ§indeki kurallar son derece belirleyicidir ve kaynak/hedef IP adresi, baÄŸlantÄ± noktasÄ± ve protokol gibi kriterlere gÃ¶re trafiÄŸi filtreler. Bu belirleyicilik, aÄŸ trafiÄŸinin ayrÄ±ntÄ±lÄ± yÃ¶netimine olanak tanÄ±r.
* **GÃ¼venlik ArtÄ±rÄ±mÄ±**: YalnÄ±zca yetkili trafiÄŸin Azure kaynaklarÄ±nÄ±za giriÅŸ yapmasÄ±na veya Ã§Ä±kÄ±ÅŸ yapmasÄ±na izin vererek, NSG'ler aÄŸ altyapÄ±nÄ±zÄ±n gÃ¼venlik durumunu gÃ¼Ã§lendirmede Ã¶nemli bir rol oynar.

### **Ã–rnek**

* Bir VNet iÃ§indeki bir alt aÄŸa veya belirli bir sanal makineye uygulanan `MyNSG` adÄ±nda bir NSG'niz olduÄŸunu hayal edin. Åu tÃ¼r kurallar oluÅŸturabilirsiniz:
* Herhangi bir kaynaktan web sunucularÄ±nÄ±za (port 80) gelen HTTP trafiÄŸine izin veren bir gelen kural.
* Belirli bir hedef IP adresi aralÄ±ÄŸÄ±na yalnÄ±zca SQL trafiÄŸine (port 1433) izin veren bir giden kural.

### NumaralandÄ±rma

{% code overflow="wrap" %}
```bash
# List NSGs
az network nsg list --query "[].{name:name, location:location}" -o table

# Get NSG rules
az network nsg rule list --nsg-name <NSGName> --resource-group <ResourceGroupName> --query "[].{name:name, priority:priority, direction:direction, access:access, protocol:protocol, sourceAddressPrefix:sourceAddressPrefix, destinationAddressPrefix:destinationAddressPrefix, sourcePortRange:sourcePortRange, destinationPortRange:destinationPortRange}" -o table
```
{% endcode %}

## Azure GÃ¼venlik DuvarÄ±

Azure GÃ¼venlik DuvarÄ±, Azure Sanal AÄŸ kaynaklarÄ±nÄ± koruyan yÃ¶netilen, bulut tabanlÄ± bir **aÄŸ gÃ¼venliÄŸi hizmetidir**. Dahili yÃ¼ksek kullanÄ±labilirlik ve Ã¶lÃ§eklenebilirlik Ã¶zelliklerine sahip tam stateful bir gÃ¼venlik duvarÄ± hizmetidir.

Azure GÃ¼venlik DuvarÄ±, **NSG'lerden daha geliÅŸmiÅŸ** Ã¶zellikler sunar, bunlar arasÄ±nda **uygulama dÃ¼zeyinde filtreleme**, aÄŸ dÃ¼zeyinde filtreleme, tehdit istihbaratÄ±na dayalÄ± filtreleme ve gÃ¼nlÃ¼kleme ve analiz iÃ§in Azure Monitor ile entegrasyon bulunur.\
DÄ±ÅŸa doÄŸru, iÃ§eriye doÄŸru, konuÅŸan-arasÄ±nda, VPN ve ExpressRoute trafiÄŸini filtreleyebilir. **GÃ¼venlik duvarÄ± kurallarÄ± FQDN (Tam TanÄ±mlÄ± Alan AdÄ±), IP adresleri ve portlara dayalÄ± olarak oluÅŸturulabilir**.

### Azure GÃ¼venlik DuvarÄ± ve NSG'ler ArasÄ±ndaki Farklar

1. **Kapsam:**
* **NSG:** Alt aÄŸ veya aÄŸ arayÃ¼zÃ¼ seviyesinde Ã§alÄ±ÅŸÄ±r. AÄŸ arayÃ¼zlerinden (NIC), sanal makinelerden veya alt aÄŸlardan gelen giden ve giden trafiÄŸi temel filtreleme amacÄ±yla saÄŸlar.
* **Azure GÃ¼venlik DuvarÄ±:** VNet seviyesinde Ã§alÄ±ÅŸÄ±r, daha geniÅŸ bir koruma kapsamÄ± saÄŸlar. Sanal aÄŸ kaynaklarÄ±nÄ±zÄ± gÃ¼vence altÄ±na almak ve VNet'e giren ve Ã§Ä±kan trafiÄŸi yÃ¶netmek iÃ§in tasarlanmÄ±ÅŸtÄ±r.
2. **Yetenekler:**
* **NSG:** IP adresine, porta ve protokole dayalÄ± temel filtreleme yetenekleri saÄŸlar. Uygulama dÃ¼zeyinde inceleme veya tehdit istihbaratÄ± gibi geliÅŸmiÅŸ Ã¶zellikleri desteklemez.
* **Azure GÃ¼venlik DuvarÄ±:** Uygulama dÃ¼zeyinde (Katman 7) trafiÄŸi filtreleme, tehdit istihbaratÄ±na dayalÄ± filtreleme, aÄŸ trafiÄŸi filtreleme ve daha fazlasÄ± gibi geliÅŸmiÅŸ Ã¶zellikler sunar. AyrÄ±ca birden fazla genel IP adresini destekler.
3. **KullanÄ±m SenaryolarÄ±:**
* **NSG:** Temel aÄŸ dÃ¼zeyinde trafiÄŸi filtrelemek iÃ§in idealdir.
* **Azure GÃ¼venlik DuvarÄ±:** Uygulama dÃ¼zeyinde kontrol, gÃ¼nlÃ¼kleme ve tehdit istihbaratÄ±nÄ±n gerektiÄŸi daha karmaÅŸÄ±k filtreleme senaryolarÄ± iÃ§in uygundur.
4. **YÃ¶netim ve Ä°zleme:**
* **NSG:** Temel gÃ¼nlÃ¼kleme ve Azure Monitor ile entegrasyon sunar.
* **Azure GÃ¼venlik DuvarÄ±:** Trafik doÄŸasÄ±nÄ± ve desenini anlamak iÃ§in gerekli olan geliÅŸmiÅŸ gÃ¼nlÃ¼kleme ve analiz yetenekleri saÄŸlar. Bu, Azure Monitor aracÄ±lÄ±ÄŸÄ±yla gerÃ§ekleÅŸtirilir.

### NumaralandÄ±rma

{% code overflow="wrap" %}
```bash
# List Azure Firewalls
az network firewall list --query "[].{name:name, location:location, subnet:subnet, publicIp:publicIp}" -o table

# Get network rules of a firewall
az network firewall network-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get application rules of a firewall
az network firewall application-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table

# Get nat rules of a firewall
az network firewall nat-rule collection list --firewall-name <FirewallName> --resource-group <ResourceGroupName> --query "[].{name:name, rules:rules}" -o table
```
{% endcode %}

## AÄŸ Sanal CihazÄ± (NVA)

Bir AÄŸ Sanal CihazÄ± (**NVA**) Azure'da bir sanal aÄŸ iÃ§inde **aÄŸ iÅŸlevlerini gerÃ§ekleÅŸtiren sanal bir cihazdÄ±r**. NVAlar genellikle Azure'da **doÄŸal olarak mevcut olmayan aÄŸ iÅŸlevleri** iÃ§in veya daha fazla Ã¶zelleÅŸtirme gerektiÄŸinde kullanÄ±lÄ±r. Temelde **aÄŸ uygulamalarÄ±nÄ± veya hizmetlerini Ã§alÄ±ÅŸtÄ±ran VM'lerdir**, Ã¶rneÄŸin gÃ¼venlik duvarlarÄ±, WAN optimize ediciler veya yÃ¼k dengeleyiciler gibi.

NVAlar karmaÅŸÄ±k yÃ¶nlendirme, **gÃ¼venlik** ve **aÄŸ trafiÄŸi yÃ¶netimi** gÃ¶revleri iÃ§in kullanÄ±lÄ±r. Azure **Marketplace** Ã¼zerinden daÄŸÄ±tÄ±labilirler, burada birÃ§ok Ã¼Ã§Ã¼ncÃ¼ taraf satÄ±cÄ±, Azure ortamlarÄ±na entegre edilmeye hazÄ±r cihazlarÄ±nÄ± sunar.

### **Ã–rnek**

* Bir kuruluÅŸ, Ã¶zelleÅŸtirilmiÅŸ bir gÃ¼venlik duvarÄ± Ã§Ã¶zÃ¼mÃ¼ oluÅŸturmak iÃ§in Azure'da bir NVA daÄŸÄ±tabilir. Bu NVA, geliÅŸmiÅŸ Ã¶zellikler sunan bir **Ã¼Ã§Ã¼ncÃ¼ taraf gÃ¼venlik duvarÄ± yazÄ±lÄ±mÄ±nÄ±** Ã§alÄ±ÅŸtÄ±rabilir, Ã¶rneÄŸin sÄ±zma tespiti, paket incelemesi veya VPN baÄŸlantÄ±sÄ±. NVA, Ã¼zerinden geÃ§en trafiÄŸi incelemek ve filtrelemek Ã¼zere yapÄ±landÄ±rÄ±labilir, bÃ¶ylece kuruluÅŸun politikalarÄ±na uygun olarak geliÅŸmiÅŸ gÃ¼venlik Ã¶nlemlerinin uygulandÄ±ÄŸÄ±ndan emin olunabilir.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# Usually NVAs are named or tagged in a way to distinguish them from other VMs
az vm list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# For a specific VM identified as an NVA, list its network interfaces
az vm nic list --vm-name <VMName> --resource-group <ResourceGroupName> --query "[].{id:id}" -o table
```
## Azure YÃ¶nlendirme TablolarÄ± ve KullanÄ±cÄ± TanÄ±mlÄ± YÃ¶nlendirmeler (UDR)

**Azure YÃ¶nlendirme TablolarÄ±**, Microsoft Azure iÃ§inde **Azure Sanal AÄŸlarÄ± (VNets)** iÃ§inde **aÄŸ trafiÄŸi yÃ¶nlendirmesinin kontrolÃ¼nÃ¼** saÄŸlayan bir Ã¶zelliktir. Temelde, bunlar VNets iÃ§inde alt aÄŸlar arasÄ±nda, VNets arasÄ±nda veya harici aÄŸlara nasÄ±l **iletilmesi gerektiÄŸini tanÄ±mlar**. Her yÃ¶nlendirme tablosu, hedef IP adreslerine gÃ¶re paketlerin nasÄ±l yÃ¶nlendirileceÄŸini belirten kurallar kÃ¼mesi olan yÃ¶nlendirmeler iÃ§erir.

**Azure'daki KullanÄ±cÄ± TanÄ±mlÄ± YÃ¶nlendirmeler (UDR)**, Azure YÃ¶nlendirme TablolarÄ± iÃ§inde **oluÅŸturduÄŸunuz Ã¶zel yÃ¶nlendirmelerdir** ve Azure Sanal AÄŸlarÄ± (VNets) arasÄ±nda ve iÃ§indeki aÄŸ trafiÄŸinin akÄ±ÅŸÄ±nÄ± kontrol etmek ve harici baÄŸlantÄ±lara yÃ¶nlendirmek iÃ§in kullanÄ±lÄ±r. UDR'ler, aÄŸ trafiÄŸini belirli gereksinimlerinize gÃ¶re yÃ¶nlendirmenize olanak tanÄ±r ve Azure'Ä±n varsayÄ±lan yÃ¶nlendirme kararlarÄ±nÄ± geÃ§ersiz kÄ±labilir.

Bu yÃ¶nlendirmeler, aÄŸ trafiÄŸini **sanal bir cihaz Ã¼zerinden yÃ¶nlendirmeniz gereken senaryolarda**, gÃ¼venlik veya politika uyumluluÄŸu iÃ§in belirli bir yol zorunlu olduÄŸunda veya yerindeki aÄŸlarla entegre olmanÄ±z gerektiÄŸinde Ã¶zellikle yararlÄ±dÄ±r.

### **Ã–rnek**

* Diyelim ki bir AÄŸ Sanal CihazÄ± (NVA) daÄŸÄ±tmÄ±ÅŸsÄ±nÄ±z ve bir VNet iÃ§indeki alt aÄŸlar arasÄ±ndaki trafiÄŸi incelemek iÃ§in kullanÄ±yorsunuz. Bir UDR oluÅŸturabilir ve bu UDR ile bir alt aÄŸdan diÄŸerine giden tÃ¼m trafiÄŸin NVA Ã¼zerinden gitmesini saÄŸlayabilirsiniz. Bu UDR, trafiÄŸin hedefine ulaÅŸmadan Ã¶nce NVA'nÄ±n gÃ¼venlik amaÃ§larÄ± iÃ§in trafiÄŸi incelemesini saÄŸlar.

### **NumaralandÄ±rma**
```bash
# List Route Tables
az network route-table list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List UDRs for a table
az network route-table route list --route-table-name <RouteTableName> --resource-group <ResourceGroupName> --query "[].{name:name, addressPrefix:addressPrefix, nextHopType:nextHopType, nextHopIpAddress:nextHopIpAddress}" -o table
```
## Azure Ã–zel BaÄŸlantÄ±

Azure Ã–zel BaÄŸlantÄ±, Azure'da **Azure hizmetlerine Ã¶zel eriÅŸimi saÄŸlayan bir hizmettir** ve **Azure sanal aÄŸÄ±nÄ±z (VNet) ile hizmet arasÄ±ndaki trafiÄŸin tamamen Microsoft'un Azure omurga aÄŸÄ± iÃ§inde seyahat etmesini saÄŸlayarak** hizmeti etkili bir ÅŸekilde VNet'inize getirir. Bu kurulum, verilerin genel internete aÃ§Ä±k olmamasÄ±yla gÃ¼venliÄŸi artÄ±rÄ±r.

Ã–zel BaÄŸlantÄ±, Azure Depolama, Azure SQL VeritabanÄ± ve Ã–zel BaÄŸlantÄ± aracÄ±lÄ±ÄŸÄ±yla paylaÅŸÄ±lan Ã¶zel hizmetler gibi Ã§eÅŸitli Azure hizmetleri ile kullanÄ±labilir. Kendi VNet'inizden veya farklÄ± Azure aboneliklerinden hizmetleri tÃ¼ketmek iÃ§in gÃ¼venli bir yol saÄŸlar.

{% hint style="danger" %}
Ã–zel uÃ§ noktalara NSG'ler uygulanmaz, bu aÃ§Ä±kÃ§a, Ã–zel BaÄŸlantÄ± iÃ§eren bir alt aÄŸa NSG'nin iliÅŸkilendirilmesinin herhangi bir etkisinin olmayacaÄŸÄ± anlamÄ±na gelir.
{% endhint %}

### **Ã–rnek**

* **Azure SQL VeritabanÄ±na gÃ¼venli bir ÅŸekilde VNet'inizden eriÅŸmek istediÄŸiniz bir senaryoyu dÃ¼ÅŸÃ¼nÃ¼n**. Normalde, bu genel internet Ã¼zerinden geÃ§iÅŸi iÃ§erebilir. Ã–zel BaÄŸlantÄ± ile, Azure SQL VeritabanÄ± hizmetine doÄŸrudan baÄŸlanan bir **Ã¶zel uÃ§ nokta oluÅŸturabilirsiniz**. Bu uÃ§ nokta, veritabanÄ±nÄ± kendi VNet'inizin bir parÃ§asÄ± gibi gÃ¶sterir, Ã¶zel bir IP adresi aracÄ±lÄ±ÄŸÄ±yla eriÅŸilebilir hale getirir ve bÃ¶ylece gÃ¼venli ve Ã¶zel eriÅŸimi saÄŸlar.

### **NumaralandÄ±rma**
```bash
# List Private Link Services
z network private-link-service list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List Private Endpoints
az network private-endpoint list --query "[].{name:name, location:location, resourceGroup:resourceGroup, privateLinkServiceConnections:privateLinkServiceConnections}" -o table
```
{% endcode %}

## Azure Hizmet NoktalarÄ±

Azure Hizmet NoktalarÄ±, sanal aÄŸ Ã¶zel adres alanÄ±nÄ±zÄ± ve VNet'in kimliÄŸini doÄŸrudan bir baÄŸlantÄ± Ã¼zerinden Azure hizmetlerine geniÅŸletir. Hizmet noktalarÄ±nÄ± etkinleÅŸtirerek, **VNet'teki kaynaklar**, Azure Depolama ve Azure SQL VeritabanÄ± gibi Azure hizmetlerine Azure'nin ana aÄŸÄ± Ã¼zerinden gÃ¼venli bir ÅŸekilde baÄŸlanabilir. Bu, **VNet'ten Azure hizmetine olan trafiÄŸin Azure aÄŸÄ± iÃ§inde kalmasÄ±nÄ± saÄŸlayarak**, daha gÃ¼venli ve gÃ¼venilir bir yol saÄŸlar.

### **Ã–rnek**

* Ã–rneÄŸin, bir **Azure Depolama** hesabÄ± varsayÄ±lan olarak genel internet Ã¼zerinden eriÅŸilebilirdir. **VNet'iniz iÃ§inde Azure Depolama iÃ§in bir hizmet noktasÄ±nÄ± etkinleÅŸtirerek**, yalnÄ±zca VNet'inizden gelen trafiÄŸin depolama hesabÄ±na eriÅŸebileceÄŸinden emin olabilirsiniz. Depolama hesabÄ± gÃ¼venlik duvarÄ± daha sonra yalnÄ±zca VNet'inizden gelen trafiÄŸi kabul etmek Ã¼zere yapÄ±landÄ±rÄ±labilir.

### **NumaralandÄ±rma**
```bash
# List Virtual Networks with Service Endpoints
az network vnet list --query "[].{name:name, location:location, serviceEndpoints:serviceEndpoints}" -o table

# List Subnets with Service Endpoints
az network vnet subnet list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, serviceEndpoints:serviceEndpoints}" -o table
```
{% endcode %}

### Hizmet NoktalarÄ± ve Ã–zel BaÄŸlantÄ±lar ArasÄ±ndaki Farklar

Microsoft, [**belgelerde**](https://learn.microsoft.com/en-us/azure/virtual-network/vnet-integration-for-azure-services#compare-private-endpoints-and-service-endpoints) Ã–zel BaÄŸlantÄ±larÄ± kullanmayÄ± Ã¶nerir:\\

<figure><img src="../../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

**Hizmet NoktalarÄ±:**

* VNet'ten Azure hizmetine trafik, genel interneti atlayarak Microsoft Azure omurga aÄŸÄ± Ã¼zerinden geÃ§er.
* Nokta, Azure hizmetine doÄŸrudan bir baÄŸlantÄ±dÄ±r ve VNet iÃ§inde hizmet iÃ§in Ã¶zel bir IP saÄŸlamaz.
* Hizmet kendisi, VNet dÄ±ÅŸÄ±ndan genel uÃ§ noktasÄ± Ã¼zerinden hala eriÅŸilebilir, hizmet duvarÄ±nÄ±zÄ± bÃ¶yle bir trafiÄŸi engellemek iÃ§in yapÄ±landÄ±rmadÄ±kÃ§a.
* Alt aÄŸ ile Azure hizmeti arasÄ±nda birbirine karÅŸÄ±lÄ±k gelen bir iliÅŸki vardÄ±r.
* Ã–zel BaÄŸlantÄ±lardan daha ucuzdur.

**Ã–zel BaÄŸlantÄ±lar:**

* Ã–zel BaÄŸlantÄ±, Azure hizmetlerini VNet'inize Ã¶zel bir IP adresine sahip bir aÄŸ arayÃ¼zÃ¼ olan Ã¶zel bir uÃ§ nokta aracÄ±lÄ±ÄŸÄ±yla eÅŸler.
* Azure hizmetine bu Ã¶zel IP adresi kullanÄ±larak eriÅŸilir, bÃ¶ylece hizmetin aÄŸÄ±nÄ±zÄ±n bir parÃ§asÄ± gibi gÃ¶rÃ¼nmesi saÄŸlanÄ±r.
* Ã–zel BaÄŸlantÄ± aracÄ±lÄ±ÄŸÄ±yla baÄŸlanan hizmetlere yalnÄ±zca VNet'inizden veya baÄŸlÄ± aÄŸlardan eriÅŸilebilir; hizmete genel internet eriÅŸimi yoktur.
* Azure hizmetlerine veya Azure'da barÄ±ndÄ±rÄ±lan kendi hizmetlerinize gÃ¼venli bir baÄŸlantÄ± saÄŸlar, ayrÄ±ca diÄŸerlerinin paylaÅŸtÄ±ÄŸÄ± hizmetlere baÄŸlantÄ± saÄŸlar.
* Ã–zel bir VNet'teki Ã¶zel bir uÃ§ nokta aracÄ±lÄ±ÄŸÄ±yla daha geniÅŸ bir alt aÄŸ dÃ¼zeyindeki hizmet noktasÄ± ile karÅŸÄ±laÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda daha ayrÄ±ntÄ±lÄ± eriÅŸim kontrolÃ¼ saÄŸlar.

Ã–zetle, Hizmet NoktalarÄ± ve Ã–zel BaÄŸlantÄ±lar her ikisi de Azure hizmetlerine gÃ¼venli baÄŸlantÄ± saÄŸlasa da, **Ã–zel BaÄŸlantÄ±lar hizmetlere genel internete maruz kalmadan Ã¶zel bir ÅŸekilde eriÅŸilmesini saÄŸlayarak daha yÃ¼ksek bir izolasyon ve gÃ¼venlik dÃ¼zeyi sunar**. Ã–te yandan, Hizmet NoktalarÄ±, VNet'te Ã¶zel bir IP'ye ihtiyaÃ§ duyulmadan basit, gÃ¼venli eriÅŸim gerektiren genel durumlar iÃ§in daha kolay kuruludur.

## Azure Front Door (AFD) & AFD WAF

**Azure Front Door**, kÃ¼resel web uygulamalarÄ±nÄ±zÄ±n **hÄ±zlÄ± teslimatÄ±** iÃ§in Ã¶lÃ§eklenebilir ve gÃ¼venli bir giriÅŸ noktasÄ±dÄ±r. **KÃ¼resel yÃ¼k dengeleme, site hÄ±zlandÄ±rma, SSL deÅŸifreleme ve Web Uygulama GÃ¼venlik DuvarÄ± (WAF)** gibi Ã§eÅŸitli hizmetleri tek bir hizmette birleÅŸtirir. Azure Front Door, kullanÄ±cÄ±ya en yakÄ±n kenar konumuna dayalÄ± akÄ±llÄ± yÃ¶nlendirme saÄŸlayarak optimal performans ve gÃ¼venilirlik saÄŸlar. AyrÄ±ca URL tabanlÄ± yÃ¶nlendirme, Ã§oklu site barÄ±ndÄ±rma, oturum baÄŸlÄ±lÄ±ÄŸÄ± ve uygulama katmanÄ± gÃ¼venliÄŸi sunar.

**Azure Front Door WAF**, arka uÃ§ kodunu deÄŸiÅŸtirmeden web uygulamalarÄ±nÄ± **web tabanlÄ± saldÄ±rÄ±lardan korumak** iÃ§in tasarlanmÄ±ÅŸtÄ±r. SQL enjeksiyonu, Ã§apraz site komut dosyasÄ± ve diÄŸer yaygÄ±n saldÄ±rÄ±lara karÅŸÄ± koruma saÄŸlamak iÃ§in Ã¶zel kurallar ve yÃ¶netilen kural setleri iÃ§erir.

### **Ã–rnek**

* DÃ¼nya Ã§apÄ±nda daÄŸÄ±tÄ±lmÄ±ÅŸ bir uygulamanÄ±zÄ±n dÃ¼ÅŸÃ¼nÃ¼n ve dÃ¼nya genelinde kullanÄ±cÄ±larÄ± olan bir uygulamanÄ±z var. Azure Front Door'u kullanarak kullanÄ±cÄ± isteklerini uygulamanÄ±zÄ± barÄ±ndÄ±ran en yakÄ±n bÃ¶lgesel veri merkezine yÃ¶nlendirebilir, bÃ¶ylece gecikmeyi azaltabilir, kullanÄ±cÄ± deneyimini iyileÅŸtirebilir ve **WAF yetenekleri ile web saldÄ±rÄ±larÄ±na karÅŸÄ± savunabilirsiniz**. Belirli bir bÃ¶lge kesinti yaÅŸarsa, Azure Front Door otomatik olarak trafiÄŸi en iyi konuma yÃ¶nlendirerek yÃ¼ksek eriÅŸilebilirlik saÄŸlar.

### NumaralandÄ±rma

{% code overflow="wrap" %}
```bash
# List Azure Front Door Instances
az network front-door list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table

# List Front Door WAF Policies
az network front-door waf-policy list --query "[].{name:name, resourceGroup:resourceGroup, location:location}" -o table
```
## Azure Uygulama AÄŸ GeÃ§idi ve Azure Uygulama AÄŸ GeÃ§idi WAF

Azure Uygulama AÄŸ GeÃ§idi, **web** uygulamalarÄ±nÄ±za yÃ¶nlendirme yapmanÄ±zÄ± saÄŸlayan bir **web trafiÄŸi yÃ¼k dengeleyicisidir**. Uygulama Teslim Denetleyicisi (ADC) iÃ§inde **Katman 7 yÃ¼k dengeleme, SSL sonlandÄ±rma ve web uygulama duvarÄ± (WAF) yetenekleri** sunar. Ana Ã¶zellikler arasÄ±nda URL tabanlÄ± yÃ¶nlendirme, Ã§erez tabanlÄ± oturum baÄŸlÄ±lÄ±ÄŸÄ± ve gÃ¼venli soket katmanÄ± (SSL) boÅŸaltma bulunur; bu Ã¶zellikler, kÃ¼resel yÃ¶nlendirme ve yol tabanlÄ± yÃ¶nlendirme gibi karmaÅŸÄ±k yÃ¼k dengeleme yeteneklerine ihtiyaÃ§ duyan uygulamalar iÃ§in Ã¶nemlidir.

### Ã–rnek

* FarklÄ± iÅŸlevler iÃ§in birden fazla alt alan adÄ± iÃ§eren bir e-ticaret web sitesine sahip olduÄŸunuzu dÃ¼ÅŸÃ¼nÃ¼n, Ã¶rneÄŸin kullanÄ±cÄ± hesaplarÄ± ve Ã¶deme iÅŸlemleri. Azure Uygulama AÄŸ GeÃ§idi, trafiÄŸi **URL yoluna gÃ¶re uygun web sunucularÄ±na yÃ¶nlendirebilir**. Ã–rneÄŸin, `example.com/accounts` adresine yÃ¶nlendirilen trafiÄŸi kullanÄ±cÄ± hesaplarÄ± servisine yÃ¶nlendirebilir ve `example.com/pay` adresine yÃ¶nlendirilen trafiÄŸi Ã¶deme iÅŸlemleri servisine yÃ¶nlendirebilir.\
Ve **WAF yeteneklerini kullanarak web sitenizi saldÄ±rÄ±lardan koruyabilirsiniz.**

### **NumaralandÄ±rma**
```bash
# List the Web Application Firewall configurations for your Application Gateways
az network application-gateway waf-config list --gateway-name <AppGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, firewallMode:firewallMode, ruleSetType:ruleSetType, ruleSetVersion:ruleSetVersion}" -o table
```
## Azure Hub, Spoke ve VNet EÅŸlemesi

**VNet EÅŸlemesi**, Azure'da bir aÄŸ Ã¶zelliÄŸidir ve **farklÄ± Sanal AÄŸlarÄ±n (VNet'lerin) doÄŸrudan ve sorunsuz bir ÅŸekilde baÄŸlanmasÄ±na izin verir**. VNet eÅŸlemesi sayesinde, bir VNet'teki kaynaklar, diÄŸer bir VNet'teki kaynaklarla Ã¶zel IP adresleri kullanarak iletiÅŸim kurabilir, **sanki aynÄ± aÄŸda gibi**.\
**VNet EÅŸlemesi ayrÄ±ca yerinde aÄŸlarla da kullanÄ±labilir**, site-to-site VPN veya Azure ExpressRoute kurarak.

**Azure Hub ve Spoke**, aÄŸ trafiÄŸini yÃ¶netmek ve dÃ¼zenlemek iÃ§in Azure'da kullanÄ±lan bir aÄŸ topolojisidir. **"Hub" farklÄ± "spoke'lar" arasÄ±nda trafiÄŸi kontrol eden ve yÃ¶nlendiren merkezi bir noktadÄ±r**. Hub genellikle aÄŸ sanal cihazlarÄ±nÄ± (NVA'lar), Azure VPN AÄŸ GeÃ§idi, Azure GÃ¼venlik DuvarÄ± veya Azure Bastion gibi paylaÅŸÄ±lan hizmetleri iÃ§erir. **"Spoke'lar" ise iÅŸ yÃ¼klerini barÄ±ndÄ±ran ve VNet eÅŸlemesi kullanarak hub'a baÄŸlanan VNets'tir**, bÃ¶ylece farklÄ± VNets'teki birden fazla iÅŸ yÃ¼kÃ¼ tarafÄ±ndan kullanÄ±labilen paylaÅŸÄ±lan hizmetlerden faydalanabilirler. Bu model, birden fazla VNet'teki iÅŸ yÃ¼klerinin kullanabileceÄŸi ortak hizmetleri merkezileÅŸtirerek karmaÅŸÄ±klÄ±ÄŸÄ± azaltarak temiz bir aÄŸ dÃ¼zeni teÅŸvik eder.

{% hint style="danger" %}
**Azure'da VNET eÅŸleme geÃ§iÅŸli deÄŸildir**, yani eÄŸer spoke 1 spoke 2'ye baÄŸlÄ±ysa ve spoke 2 spoke 3'e baÄŸlÄ±ysa, spoke 1 doÄŸrudan spoke 3 ile iletiÅŸim kuramaz.
{% endhint %}

### Ã–rnekler

* SatÄ±ÅŸ, Ä°K ve GeliÅŸtirme gibi ayrÄ± departmanlara sahip bir ÅŸirketi hayal edin, **her biri kendi VNet'ine (spoke'larÄ±na) sahip**. Bu VNets'ler, merkezi bir veritabanÄ±na, bir gÃ¼venlik duvarÄ±na ve bir internet aÄŸÄ±na eriÅŸim gerektirir, hepsi **baÅŸka bir VNet'te (hub'ta) bulunur**. Hub ve Spoke modelini kullanarak, her departman, **hub VNet Ã¼zerinden paylaÅŸÄ±lan kaynaklara gÃ¼venli bir ÅŸekilde baÄŸlanabilir ve bu kaynaklarÄ± genel internete aÃ§madan veya Ã§ok sayÄ±da baÄŸlantÄ±ya sahip karmaÅŸÄ±k bir aÄŸ yapÄ±sÄ± oluÅŸturmadan kullanabilir**.

### NumaralandÄ±rma
```bash
# List all VNets in your subscription
az network vnet list --query "[].{name:name, location:location, addressSpace:addressSpace}" -o table

# List VNet peering connections for a given VNet
az network vnet peering list --resource-group <ResourceGroupName> --vnet-name <VNetName> --query "[].{name:name, peeringState:peeringState, remoteVnetId:remoteVnetId}" -o table

# List Shared Resources (e.g., Azure Firewall) in the Hub
az network firewall list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table
```
{% endcode %}

## Site-to-Site VPN

Azure'daki Site-to-Site VPN, **yerindeki aÄŸÄ±nÄ±zÄ± Azure Sanal AÄŸÄ±'na (VNet) baÄŸlamanÄ±za olanak tanÄ±r**, bÃ¶ylece Azure'daki VM'ler gibi kaynaklar yerel aÄŸÄ±nÄ±zda gibi gÃ¶rÃ¼nÃ¼r. Bu baÄŸlantÄ±, iki aÄŸ arasÄ±ndaki trafiÄŸi ÅŸifreleyen bir **VPN aÄŸ geÃ§idi aracÄ±lÄ±ÄŸÄ±yla kurulur**.

### **Ã–rnek**

* New York'ta ana ofisi bulunan bir iÅŸletmenin, sanallaÅŸtÄ±rÄ±lmÄ±ÅŸ iÅŸ yÃ¼klerine ev sahipliÄŸi yapan Azure'daki VNet'ine gÃ¼venli bir ÅŸekilde baÄŸlanmasÄ± gereken yerinde bir veri merkezi vardÄ±r. **Site-to-Site VPN kurarak, ÅŸirket yerindeki sunucular ile Azure VM'leri arasÄ±nda ÅŸifreli baÄŸlantÄ± saÄŸlayabilir**, bÃ¶ylece kaynaklara her iki ortamda da gÃ¼venli bir ÅŸekilde eriÅŸilebilir, sanki aynÄ± yerel aÄŸda gibi. 

### **NumaralandÄ±rma**
```bash
# List VPN Gateways
az network vnet-gateway list --query "[].{name:name, location:location, resourceGroup:resourceGroup}" -o table

# List VPN Connections
az network vpn-connection list --gateway-name <VpnGatewayName> --resource-group <ResourceGroupName> --query "[].{name:name, connectionType:connectionType, connectionStatus:connectionStatus}" -o table
```
## Azure ExpressRoute

Azure ExpressRoute, on-premises altyapÄ±nÄ±z ile Azure veri merkezleri arasÄ±nda **Ã¶zel, adanmÄ±ÅŸ, yÃ¼ksek hÄ±zlÄ± bir baÄŸlantÄ± saÄŸlayan bir hizmettir**. Bu baÄŸlantÄ±, genel interneti atlayarak bir baÄŸlantÄ± saÄŸlayÄ±cÄ± aracÄ±lÄ±ÄŸÄ±yla gerÃ§ekleÅŸtirilir ve tipik internet baÄŸlantÄ±larÄ±ndan daha fazla gÃ¼venilirlik, daha hÄ±zlÄ± hÄ±zlar, daha dÃ¼ÅŸÃ¼k gecikmeler ve daha yÃ¼ksek gÃ¼venlik sunar.

### **Ã–rnek**

* Bir Ã§ok uluslu ÅŸirket, yÃ¼ksek veri hacmi ve yÃ¼ksek veri aktarÄ±m hÄ±zÄ± gereksinimleri nedeniyle Azure hizmetlerine **sÃ¼rekli ve gÃ¼venilir bir baÄŸlantÄ±ya ihtiyaÃ§ duyar**. Åirket, gÃ¼nlÃ¼k yedeklemeler ve gerÃ§ek zamanlÄ± veri analitiÄŸi gibi bÃ¼yÃ¼k Ã¶lÃ§ekli veri transferlerini, artÄ±rÄ±lmÄ±ÅŸ gizlilik ve hÄ±z ile kolaylaÅŸtÄ±rmak iÃ§in on-premises veri merkezini Azure'a doÄŸrudan baÄŸlamak iÃ§in Azure ExpressRoute'u tercih eder.

### **NumaralandÄ±rma**

{% code overflow="wrap" %}
```bash
# List ExpressRoute Circuits
az network express-route list --query "[].{name:name, location:location, resourceGroup:resourceGroup, serviceProviderName:serviceProviderName, peeringLocation:peeringLocation}" -o table
```
{% endcode %}

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmaya kadar AWS hacklemeyi Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* **KatÄ±lÄ±n** ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) veya bizi **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**'da takip edin.**
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>
