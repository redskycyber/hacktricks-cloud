# Az - Hizmetler

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)'Ä± **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## Portal

**Microsoft portal listesini** [**https://msportals.io/**](https://msportals.io/) adresinde bulabilirsiniz.

### Ham istekler

#### Powershell ile Azure API'si

**IDENTITY\_HEADER** ve **IDENTITY\_ENDPOINT** Ã¼zerinden **access\_token** alÄ±n: `system('curl "$IDENTITY_ENDPOINT?resource=https://management.azure.com/&api-version=2017-09-01" -H secret:$IDENTITY_HEADER');`.

ArdÄ±ndan Azure REST API'sini sorgulayarak **abonelik ID'si** ve daha fazlasÄ±nÄ± alÄ±n.
```powershell
$Token = 'eyJ0eX..'
$URI = 'https://management.azure.com/subscriptions?api-version=2020-01-01'
# $URI = 'https://graph.microsoft.com/v1.0/applications'
$RequestParams = @{
Method = 'GET'
Uri = $URI
Headers = @{
'Authorization' = "Bearer $Token"
}
}
(Invoke-RestMethod @RequestParams).value

# List resources and check for runCommand privileges
$URI = 'https://management.azure.com/subscriptions/b413826f-108d-4049-8c11-d52d5d388768/resources?api-version=2020-10-01'
$URI = 'https://management.azure.com/subscriptions/b413826f-108d-4049-8c11-d52d5d388768/resourceGroups/<RG-NAME>/providers/Microsoft.Compute/virtualMachines/<RESOURCE/providers/Microsoft.Authorization/permissions?apiversion=2015-07-01'
```
#### Azure API Python SÃ¼rÃ¼mÃ¼

Bu bÃ¶lÃ¼mde, Azure API'lerine Python kullanarak nasÄ±l eriÅŸileceÄŸini Ã¶ÄŸreneceksiniz. Azure API'lerini kullanarak Azure hizmetlerine programatik olarak eriÅŸebilir ve yÃ¶netebilirsiniz.

Azure API'lerine eriÅŸmek iÃ§in Azure SDK'sÄ±nÄ± kullanabilirsiniz. Azure SDK'sÄ±, Azure hizmetlerine eriÅŸmek iÃ§in kullanÄ±lan Python kÃ¼tÃ¼phanelerini iÃ§erir. Azure SDK'sÄ±nÄ± yÃ¼klemek iÃ§in aÅŸaÄŸÄ±daki adÄ±mlarÄ± izleyin:

1. Azure SDK'yÄ± yÃ¼klemek iÃ§in aÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rÄ±n:

```bash
pip install azure
```

2. Azure SDK'yÄ± projenize dahil etmek iÃ§in aÅŸaÄŸÄ±daki kodu kullanÄ±n:

```python
from azure.common.credentials import ServicePrincipalCredentials
from azure.mgmt.resource import ResourceManagementClient

# Azure kimlik bilgilerini ayarlayÄ±n
subscription_id = 'your-subscription-id'
tenant_id = 'your-tenant-id'
client_id = 'your-client-id'
client_secret = 'your-client-secret'

# Kimlik bilgileriyle oturum aÃ§Ä±n
credentials = ServicePrincipalCredentials(
    client_id=client_id,
    secret=client_secret,
    tenant=tenant_id
)

# Azure API'lerine eriÅŸmek iÃ§in bir istemci oluÅŸturun
resource_client = ResourceManagementClient(credentials, subscription_id)
```

YukarÄ±daki kod Ã¶rneÄŸinde, Azure kimlik bilgilerinizi ve abonelik kimliÄŸinizi belirtmeniz gerekmektedir. Bu bilgileri Azure Portal'dan veya Azure CLI aracÄ±lÄ±ÄŸÄ±yla alabilirsiniz.

Azure API'lerine Python kullanarak eriÅŸmek iÃ§in bu Ã¶rnek kodu kullanabilirsiniz. Bu Ã¶rnek, Azure kaynak yÃ¶netimi API'sine eriÅŸmek iÃ§in kullanÄ±lan bir istemci oluÅŸturur.
```python
IDENTITY_ENDPOINT = os.environ['IDENTITY_ENDPOINT']
IDENTITY_HEADER = os.environ['IDENTITY_HEADER']

print("[+] Management API")
cmd = 'curl "%s?resource=https://management.azure.com/&api-version=2017-09-01" -H secret:%s' % (IDENTITY_ENDPOINT, IDENTITY_HEADER)
val = os.popen(cmd).read()
print("Access Token: "+json.loads(val)["access_token"])
print("ClientID/AccountID: "+json.loads(val)["client_id"])

print("\r\n[+] Graph API")
cmd = 'curl "%s?resource=https://graph.microsoft.com/&api-version=2017-09-01" -H secret:%s' % (IDENTITY_ENDPOINT, IDENTITY_HEADER)
val = os.popen(cmd).read()
print(json.loads(val)["access_token"])
print("ClientID/AccountID: "+json.loads(val)["client_id"])
```
veya bir Python Fonksiyonu iÃ§inde:
```python
import logging, os
import azure.functions as func

def main(req: func.HttpRequest) -> func.HttpResponse:
logging.info('Python HTTP trigger function processed a request.')
IDENTITY_ENDPOINT = os.environ['IDENTITY_ENDPOINT']
IDENTITY_HEADER = os.environ['IDENTITY_HEADER']
cmd = 'curl "%s?resource=https://management.azure.com&apiversion=2017-09-01" -H secret:%s' % (IDENTITY_ENDPOINT, IDENTITY_HEADER)
val = os.popen(cmd).read()
return func.HttpResponse(val, status_code=200)
```
## Hizmet Listesi

**Bu bÃ¶lÃ¼mÃ¼n sayfalarÄ± Azure hizmetine gÃ¶re sÄ±ralanmÄ±ÅŸtÄ±r. Burada her hizmet hakkÄ±nda bilgi bulabilirsiniz (nasÄ±l Ã§alÄ±ÅŸtÄ±ÄŸÄ± ve yetenekleri) ve ayrÄ±ca her hizmetin nasÄ±l numaralandÄ±rÄ±lacaÄŸÄ±nÄ± Ã¶ÄŸrenebilirsiniz.**

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek veya HackTricks'i PDF olarak indirmek isterseniz** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin, Ã¶zel [**NFT'lerimizi**](https://opensea.io/collection/the-peass-family) gÃ¶rÃ¼n
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)'Ä± **takip edin**.
* **Hacking hilelerinizi HackTricks ve HackTricks Cloud github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
