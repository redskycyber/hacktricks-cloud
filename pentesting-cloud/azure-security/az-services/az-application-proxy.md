# Az - Proxy Aplikacji

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

[Z dokumentacji: ](https://learn.microsoft.com/en-us/entra/identity/app-proxy/application-proxy)

Proxy aplikacji Azure Active Directory zapewnia **bezpieczny zdalny dostÄ™p do aplikacji internetowych w lokalnej sieci**. Po **jednokrotnym logowaniu do Azure AD**, uÅ¼ytkownicy mogÄ… uzyskaÄ‡ dostÄ™p zarÃ³wno do **aplikacji w chmurze**, jak i **aplikacji lokalnych** za poÅ›rednictwem **zewnÄ™trznego adresu URL** lub wewnÄ™trznego portalu aplikacji.

DziaÅ‚a to w ten sposÃ³b:

<figure><img src="../../../.gitbook/assets/image (86).png" alt=""><figcaption></figcaption></figure>

1. Po tym, jak uÅ¼ytkownik uzyskaÅ‚ dostÄ™p do aplikacji za poÅ›rednictwem punktu koÅ„cowego, zostaje przekierowany do **strony logowania Azure AD**.
2. Po **pomyÅ›lnym zalogowaniu**, Azure AD wysyÅ‚a **token** na urzÄ…dzenie klienta uÅ¼ytkownika.
3. Klient wysyÅ‚a token do **usÅ‚ugi Proxy Aplikacji**, ktÃ³ra pobiera nazwÄ™ gÅ‚Ã³wnÄ… uÅ¼ytkownika (UPN) i nazwÄ™ gÅ‚Ã³wnÄ… zabezpieczeÅ„ (SPN) z tokena. **Proxy Aplikacji nastÄ™pnie wysyÅ‚a Å¼Ä…danie do konektora Proxy Aplikacji**.
4. JeÅ›li skonfigurowano jednokrotne logowanie, konektor wykonuje wszelkie **dodatkowe uwierzytelnianie** wymagane w imieniu uÅ¼ytkownika.
5. Konektor wysyÅ‚a Å¼Ä…danie do **aplikacji lokalnej**.
6. **OdpowiedÅº** jest wysyÅ‚ana przez konektor i usÅ‚ugÄ™ Proxy Aplikacji **do uÅ¼ytkownika**.

## Wyliczanie
```powershell
# Enumerate applications with application proxy configured
Get-AzureADApplication | %{try{Get-AzureADApplicationProxyApplication -ObjectId $_.ObjectID;$_.DisplayName;$_.ObjectID}catch{}}

# Get applications service principal
Get-AzureADServicePrincipal -All $true | ?{$_.DisplayName -eq "Name"}

# Use the following ps1 script from https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/scripts/powershell-display-users-group-of-app
# to find users and groups assigned to the application. Pass the ObjectID of the Service Principal to it
Get-ApplicationProxyAssignedUsersAndGroups -ObjectId <object-id>
```
## OdnoÅ›niki

* [https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/application-proxy](https://learn.microsoft.com/en-us/azure/active-directory/app-proxy/application-proxy)

<details>

<summary><strong>Naucz siÄ™ hakowaÄ‡ AWS od zera do bohatera z</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* JeÅ›li chcesz zobaczyÄ‡ swojÄ… **firmÄ™ reklamowanÄ… w HackTricks** lub **pobraÄ‡ HackTricks w formacie PDF**, sprawdÅº [**PLAN SUBSKRYPCJI**](https://github.com/sponsors/carlospolop)!
* ZdobÄ…dÅº [**oficjalne gadÅ¼ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**RodzinÄ™ PEASS**](https://opensea.io/collection/the-peass-family), naszÄ… kolekcjÄ™ ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **DoÅ‚Ä…cz do** ğŸ’¬ [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **Å›ledÅº** nas na **Twitterze** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**.**
* **Podziel siÄ™ swoimi sztuczkami hakerskimi, przesyÅ‚ajÄ…c PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
