# Pentesting Cloud Methodology

<details>

<summary><strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã™ã‚‹ã€ç§ãŸã¡ã®ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* **HackTricks**ã®[**GitHubãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>

<figure><img src="../.gitbook/assets/CLOUD-logo-letters.svg" alt=""><figcaption></figcaption></figure>

## åŸºæœ¬çš„ãªæ–¹æ³•è«–

å„ã‚¯ãƒ©ã‚¦ãƒ‰ã«ã¯ç‹¬è‡ªã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ã«ã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹éš›ã«ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ã‚¿ãƒ¼ãŒãƒã‚§ãƒƒã‚¯ã™ã¹ã**å…±é€šã®äº‹æŸ„ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™**ï¼š

* **ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒã‚§ãƒƒã‚¯**
* ã“ã‚Œã«ã‚ˆã‚Šã€ç’°å¢ƒã®**è¦æ¨¡ã‚’ç†è§£ã—**ã€ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹**ã‚µãƒ¼ãƒ“ã‚¹ã‚’æŠŠæ¡**ã§ãã¾ã™
* ã»ã¨ã‚“ã©ã®ãƒ†ã‚¹ãƒˆã‚’**è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«**ã§å®Ÿè¡Œã§ãã‚‹ãŸã‚ã€ã„ãã¤ã‹ã®**æ—©æœŸã®èª¤è¨­å®šã‚’è¦‹ã¤ã‘ã‚‹**ã®ã«ã‚‚å½¹ç«‹ã¡ã¾ã™
* **ã‚µãƒ¼ãƒ“ã‚¹åˆ—æŒ™**
* ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚’æ­£ã—ãå®Ÿæ–½ã—ã¦ã„ã‚Œã°ã€ã“ã“ã§å¤šãã®èª¤è¨­å®šã¯è¦‹ã¤ã‹ã‚‰ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã§ã¯æ¢ã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‚ã®ãŒè¦‹ã¤ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
* ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã§**æ­£ç¢ºã«ä½•ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹**ã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™
* ã“ã‚Œã¯æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«å¤§ã„ã«å½¹ç«‹ã¡ã¾ã™
* **éœ²å‡ºã—ã¦ã„ã‚‹è³‡ç”£ã®ãƒã‚§ãƒƒã‚¯**
* ã“ã‚Œã¯å‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸­ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«ä½•ã‚‰ã‹ã®å½¢ã§**æ½œåœ¨çš„ã«éœ²å‡ºã—ã¦ã„ã‚‹ã™ã¹ã¦ã‚’è¦‹ã¤ã‘å‡ºã—**ã€ã©ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã‚’æŠŠæ¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
* ã“ã“ã§ã¯ã€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã‚„ä»–ã®ãƒãƒ¼ãƒˆãŒéœ²å‡ºã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚ˆã†ãª**æ‰‹å‹•ã§éœ²å‡ºã—ãŸã‚¤ãƒ³ãƒ•ãƒ©**ã¨ã€éœ²å‡ºã™ã‚‹ã‚ˆã†ã«è¨­å®šã§ãã‚‹**ã‚¯ãƒ©ã‚¦ãƒ‰ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹**ï¼ˆDBã‚„ãƒã‚±ãƒƒãƒˆãªã©ï¼‰ã«ã¤ã„ã¦å–ã‚Šä¸Šã’ã¦ã„ã¾ã™
* æ¬¡ã«ã€ãã®ãƒªã‚½ãƒ¼ã‚¹ãŒéœ²å‡ºã—ã¦ã‚‚ã‚ˆã„ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆæ©Ÿå¯†æƒ…å ±ï¼Ÿè„†å¼±æ€§ï¼Ÿéœ²å‡ºã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã®èª¤è¨­å®šï¼Ÿï¼‰
* **æ¨©é™ã®ãƒã‚§ãƒƒã‚¯**
* ã“ã“ã§ã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰å†…ã®å„ãƒ­ãƒ¼ãƒ«/ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®**ã™ã¹ã¦ã®æ¨©é™ã‚’è¦‹ã¤ã‘å‡ºã—**ã€ãã‚Œã‚‰ãŒã©ã®ã‚ˆã†ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’æŠŠæ¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
* **å¤šãã®é«˜æ¨©é™**ï¼ˆã™ã¹ã¦ã‚’åˆ¶å¾¡ï¼‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼Ÿä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ç”Ÿæˆã•ã‚ŒãŸã‚­ãƒ¼ï¼Ÿ... ã“ã‚Œã‚‰ã®ãƒã‚§ãƒƒã‚¯ã®ã»ã¨ã‚“ã©ã¯ã€ã™ã§ã«ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã§è¡Œã‚ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™
* ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒOpenIDã‚„SAMLã€ã¾ãŸã¯ä»–ã®**ãƒ•ã‚§ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€**ã©ã®ã‚ˆã†ã«å„ãƒ­ãƒ¼ãƒ«ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã‹**ã«ã¤ã„ã¦ã®ã•ã‚‰ãªã‚‹**æƒ…å ±**ã‚’æ±‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼ˆç®¡ç†è€…ãƒ­ãƒ¼ãƒ«ãŒ1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã®ã¨100ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã®ã¨ã§ã¯åŒã˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰
* **admin**æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¦‹ã¤ã‘ã‚‹ã ã‘ã§ã¯**ååˆ†ã§ã¯ã‚ã‚Šã¾ã›ã‚“** "\*:\*"ã€‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«å¿œã˜ã¦éå¸¸ã«**ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–**ãª**ä»–ã®æ¨©é™**ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚
* ã•ã‚‰ã«ã€æ¨©é™ã‚’æ‚ªç”¨ã—ã¦ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆprivescï¼‰ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®ã“ã¨ã¯ã™ã¹ã¦è€ƒæ…®ã«å…¥ã‚Œã‚‹ã¹ãã§ã‚ã‚Šã€å¯èƒ½ãªé™ã‚Šå¤šãã®privescãƒ‘ã‚¹ã‚’å ±å‘Šã™ã‚‹ã¹ãã§ã™ã€‚
* **ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒã‚§ãƒƒã‚¯**
* ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒå†…ã§ä»–ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚„SaaSã¨ã®**ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„**ã§ã™ã€‚
* ç›£æŸ»ã—ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ã®**ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**ã«ã¤ã„ã¦ã¯ã€ãã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’(æ‚ªç”¨ã—ã¦)ä½¿ç”¨ã™ã‚‹æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹äººã‚’é€šçŸ¥ã—ã€å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®**ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ã•**ã‚’å°‹ã­ã‚‹ã¹ãã§ã™ã€‚\
ä¾‹ãˆã°ã€GCPãŒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã‚‹AWSãƒã‚±ãƒƒãƒˆã«èª°ãŒæ›¸ãè¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã‹ï¼ˆGCPãŒãã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–ã•ã‚’å°‹ã­ã‚‹ï¼‰ã€‚
* å¤–éƒ¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ç›£æŸ»ã—ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰å†…ã§ã®**ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**ã«ã¤ã„ã¦ã¯ã€ãã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤–éƒ¨ã‹ã‚‰(æ‚ªç”¨ã—ã¦)ä½¿ç”¨ã™ã‚‹æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹äººã‚’å°‹ã­ã€ãã®ãƒ‡ãƒ¼ã‚¿ãŒã©ã®ã‚ˆã†ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\
ä¾‹ãˆã°ã€ã‚µãƒ¼ãƒ“ã‚¹ãŒGCRã§ãƒ›ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€ãã®å¤‰æ›´æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹äººã‚’å°‹ã­ã€ãã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒAWSã‚¯ãƒ©ã‚¦ãƒ‰å†…ã§å®Ÿè¡Œã•ã‚ŒãŸã¨ãã«ã©ã®ã‚ˆã†ãªæ©Ÿå¯†æƒ…å ±ã¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¾—ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ãƒ„ãƒ¼ãƒ«

ç•°ãªã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹ã„ãã¤ã‹ã®ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¨ãƒªãƒ³ã‚¯ãŒç¤ºã•ã‚Œã¾ã™ã€‚

### [PurplePanda](https://github.com/carlospolop/purplepanda)

ã‚¯ãƒ©ã‚¦ãƒ‰ãŠã‚ˆã³ã‚¯ãƒ©ã‚¦ãƒ‰/SaaSé–“ã§ã®æ‚ªã„è¨­å®šã¨privescãƒ‘ã‚¹ã‚’**ç‰¹å®šã™ã‚‹ãƒ„ãƒ¼ãƒ«**ã§ã™ã€‚

{% tabs %}
{% tab title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" %}
```bash
# You need to install and run neo4j also
git clone https://github.com/carlospolop/PurplePanda
cd PurplePanda
python3 -m venv .
source bin/activate
python3 -m pip install -r requirements.txt
export PURPLEPANDA_NEO4J_URL="bolt://neo4j@localhost:7687"
export PURPLEPANDA_PWD="neo4j_pwd_4_purplepanda"
python3 main.py -h # Get help
```
{% endtab %}

{% tab title="GCP" %}
```bash
export GOOGLE_DISCOVERY=$(echo 'google:
- file_path: ""

- file_path: ""
service_account_id: "some-sa-email@sidentifier.iam.gserviceaccount.com"' | base64)

python3 main.py -a -p google #Get basic info of the account to check it's correctly configured
python3 main.py -e -p google #Enumerate the env
```
{% endtab %}
{% endtabs %}

### [Prowler](https://github.com/prowler-cloud/prowler)

**AWS, GCP & Azure** ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦ã¯ã€[https://docs.prowler.cloud/en/latest/#aws](https://docs.prowler.cloud/en/latest/#aws) ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
```bash
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
# Example
prowler aws --profile custom-profile [-M csv json json-asff html]

# Get info about checks & services
prowler <provider> --list-checks
prowler <provider> --list-services
```
### [CloudSploit](https://github.com/aquasecurity/cloudsploit)

AWSã€Azureã€Githubã€Googleã€Oracleã€Alibaba

{% tabs %}
{% tab title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" %}
```bash
# Install
git clone https://github.com/aquasecurity/cloudsploit.git
cd cloudsploit
npm install
./index.js -h
## Docker instructions in github
```
{% endtab %}

{% tab title="GCP" %}
```bash
## You need to have creds for a service account and set them in config.js file
./index.js --cloud google --config </abs/path/to/config.js>
```
{% endtab %}
{% endtabs %}

### [ScoutSuite](https://github.com/nccgroup/ScoutSuite)

AWSã€Azureã€GCPã€Alibaba Cloudã€Oracle Cloud Infrastructure

{% tabs %}
{% tab title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" %}
```bash
mkdir scout; cd scout
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help
## Using Docker: https://github.com/nccgroup/ScoutSuite/wiki/Docker-Image
```
{% endtab %}

{% tab title="GCP" %}
```bash
scout gcp --report-dir /tmp/gcp --user-account --all-projects
## use "--service-account KEY_FILE" instead of "--user-account" to use a service account

SCOUT_FOLDER_REPORT="/tmp"
for pid in $(gcloud projects list --format="value(projectId)"); do
echo "================================================"
echo "Checking $pid"
mkdir "$SCOUT_FOLDER_REPORT/$pid"
scout gcp --report-dir "$SCOUT_FOLDER_REPORT/$pid" --no-browser --user-account --project-id "$pid"
done
```
{% endtab %}
{% endtabs %}

### [Steampipe](https://github.com/turbot)

{% tabs %}
{% tab title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" %}
Steampipeã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ï¼ˆ[https://steampipe.io/downloads](https://steampipe.io/downloads)ï¼‰ã€‚ã¾ãŸã¯Brewã‚’ä½¿ç”¨ã—ã¾ã™ï¼š
```
brew tap turbot/tap
brew install steampipe
```
{% endtab %}

{% tab title="GCP" %}
```bash
# Install gcp plugin
steampipe plugin install gcp

# Use https://github.com/turbot/steampipe-mod-gcp-compliance.git
git clone https://github.com/turbot/steampipe-mod-gcp-compliance.git
cd steampipe-mod-gcp-compliance
# To run all the checks from the dashboard
steampipe dashboard
# To run all the checks from rhe cli
steampipe check all
```
<details>

<summary>ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹</summary>

ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãŸã‚ã«ã¯ã€ãƒ†ã‚¹ãƒˆã™ã‚‹ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¤ºã™`gcp.spc`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æŒ‡ç¤ºã«å¾“ã£ã¦ãã ã•ã„
```bash
FILEPATH="/tmp/gcp.spc"
rm -rf "$FILEPATH" 2>/dev/null

# Generate a json like object for each project
for pid in $(gcloud projects list --format="value(projectId)"); do
echo "connection \"gcp_$(echo -n $pid | tr "-" "_" )\" {
plugin  = \"gcp\"
project = \"$pid\"
}" >> "$FILEPATH"
done

# Generate the aggragator to call
echo 'connection "gcp_all" {
plugin      = "gcp"
type        = "aggregator"
connections = ["gcp_*"]
}' >> "$FILEPATH"

echo "Copy $FILEPATH in ~/.steampipe/config/gcp.spc if it was correctly generated"
```
</details>

**ä»–ã®GCPã‚¤ãƒ³ã‚µã‚¤ãƒˆ**ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã«ã¯ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ã®åˆ—æŒ™ã«å½¹ç«‹ã¡ã¾ã™ï¼‰ã€ä»¥ä¸‹ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„: [https://github.com/turbot/steampipe-mod-gcp-insights](https://github.com/turbot/steampipe-mod-gcp-insights)

Terraform GCPã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã«ã¯: [https://github.com/turbot/steampipe-mod-terraform-gcp-compliance](https://github.com/turbot/steampipe-mod-terraform-gcp-compliance)

Steampipeã®ãã®ä»–ã®GCPãƒ—ãƒ©ã‚°ã‚¤ãƒ³: [https://github.com/turbot?q=gcp](https://github.com/turbot?q=gcp)
{% endtab %}

{% tab title="AWS" %}
```bash
# Install aws plugin
steampipe plugin install aws

# Modify the spec indicating in "profile" the profile name to use
nano ~/.steampipe/config/aws.spc

# Get some info on how the AWS account is being used
git clone https://github.com/turbot/steampipe-mod-aws-insights.git
cd steampipe-mod-aws-insights
steampipe dashboard

# Get the services exposed to the internet
git clone https://github.com/turbot/steampipe-mod-aws-perimeter.git
cd steampipe-mod-aws-perimeter
steampipe dashboard

# Run the benchmarks
git clone https://github.com/turbot/steampipe-mod-aws-compliance
cd steampipe-mod-aws-compliance
steampipe dashboard # To see results in browser
steampipe check all --export=/tmp/output4.json
```
Terraform AWSã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã«ã¯ï¼š [https://github.com/turbot/steampipe-mod-terraform-aws-compliance](https://github.com/turbot/steampipe-mod-terraform-aws-compliance)

Steampipeã®ãã®ä»–ã®AWSãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼š [https://github.com/orgs/turbot/repositories?q=aws](https://github.com/orgs/turbot/repositories?q=aws)
{% endtab %}
{% endtabs %}

### [~~cs-suite~~](https://github.com/SecurityFTW/cs-suite)

AWSã€GCPã€Azureã€DigitalOceanã€‚\
python2.7ãŒå¿…è¦ã§ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚

### Nessus

Nessusã«ã¯_**Audit Cloud Infrastructure**_ ã‚¹ã‚­ãƒ£ãƒ³ãŒã‚ã‚Šã€AWSã€Azureã€Office 365ã€Rackspaceã€Salesforceã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚**Azure**ã§è¿½åŠ ã®è¨­å®šãŒå¿…è¦ã§ã€**Client Id**ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### [**cloudlist**](https://github.com/projectdiscovery/cloudlist)

Cloudlistã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‹ã‚‰ã‚¢ã‚»ãƒƒãƒˆï¼ˆãƒ›ã‚¹ãƒˆåã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®**ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ãƒ„ãƒ¼ãƒ«**ã§ã™ã€‚

{% tabs %}
{% tab title="Cloudlist" %}
```bash
cd /tmp
wget https://github.com/projectdiscovery/cloudlist/releases/latest/download/cloudlist_1.0.1_macOS_arm64.zip
unzip cloudlist_1.0.1_macOS_arm64.zip
chmod +x cloudlist
sudo mv cloudlist /usr/local/bin
```
{% endtab %}

{% tab title="Second Tab" %}
```bash
## For GCP it requires service account JSON credentials
cloudlist -config </path/to/config>
```
### [**cartography**](https://github.com/lyft/cartography)

Cartographyã¯ã€Neo4jãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚ˆã£ã¦é§†å‹•ã•ã‚Œã‚‹ç›´æ„Ÿçš„ãªã‚°ãƒ©ãƒ•ãƒ“ãƒ¥ãƒ¼ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£è³‡ç”£ã¨ãã‚Œã‚‰ã®é–¢ä¿‚ã‚’çµ±åˆã™ã‚‹Pythonãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

{% tabs %}
{% tab title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" %}
```bash
# Installation
docker image pull ghcr.io/lyft/cartography
docker run --platform linux/amd64 ghcr.io/lyft/cartography cartography --help
## Install a Neo4j DB version 3.5.*
```
{% endtab %}

{% tab title="GCP" %}
```bash
docker run --platform linux/amd64 \
--volume "$HOME/.config/gcloud/application_default_credentials.json:/application_default_credentials.json" \
-e GOOGLE_APPLICATION_CREDENTIALS="/application_default_credentials.json" \
-e NEO4j_PASSWORD="s3cr3t" \
ghcr.io/lyft/cartography  \
--neo4j-uri bolt://host.docker.internal:7687 \
--neo4j-password-env-var NEO4j_PASSWORD \
--neo4j-user neo4j


# It only checks for a few services inside GCP (https://lyft.github.io/cartography/modules/gcp/index.html)
## Cloud Resource Manager
## Compute
## DNS
## Storage
## Google Kubernetes Engine
### If you can run starbase or purplepanda you will get more info
```
{% endtab %}
{% endtabs %}

### [**starbase**](https://github.com/JupiterOne/starbase)

Starbaseã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã€SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãªã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã‚¢ã‚»ãƒƒãƒˆã¨é–¢ä¿‚ã‚’åé›†ã—ã€Neo4jãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«åŸºã¥ã„ãŸç›´æ„Ÿçš„ãªã‚°ãƒ©ãƒ•ãƒ“ãƒ¥ãƒ¼ã«ã¾ã¨ã‚ã¾ã™ã€‚

{% tabs %}
{% tab title="ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«" %}
```bash
# You are going to need Node version 14, so install nvm following https://tecadmin.net/install-nvm-macos-with-homebrew/
npm install --global yarn
nvm install 14
git clone https://github.com/JupiterOne/starbase.git
cd starbase
nvm use 14
yarn install
yarn starbase --help
# Configure manually config.yaml depending on the env to analyze
yarn starbase setup
yarn starbase run

# Docker
git clone https://github.com/JupiterOne/starbase.git
cd starbase
cp config.yaml.example config.yaml
# Configure manually config.yaml depending on the env to analyze
docker build --no-cache -t starbase:latest .
docker-compose run starbase setup
docker-compose run starbase run
```
{% endtab %}

{% tab title="GCP" %}
```yaml
## Config for GCP
### Check out: https://github.com/JupiterOne/graph-google-cloud/blob/main/docs/development.md
### It requires service account credentials

integrations:
-
name: graph-google-cloud
instanceId: testInstanceId
directory: ./.integrations/graph-google-cloud
gitRemoteUrl: https://github.com/JupiterOne/graph-google-cloud.git
config:
SERVICE_ACCOUNT_KEY_FILE: '{Check https://github.com/JupiterOne/graph-google-cloud/blob/main/docs/development.md#service_account_key_file-string}'
PROJECT_ID: ""
FOLDER_ID: ""
ORGANIZATION_ID: ""
CONFIGURE_ORGANIZATION_PROJECTS: false

storage:
engine: neo4j
config:
username: neo4j
password: s3cr3t
uri: bolt://localhost:7687
#Consider using host.docker.internal if from docker
```
{% endtab %}
{% endtabs %}

### [**SkyArk**](https://github.com/cyberark/SkyArk)

ã‚¹ã‚­ãƒ£ãƒ³ã•ã‚ŒãŸAWSã¾ãŸã¯Azureç’°å¢ƒã«ãŠã‘ã‚‹æœ€ã‚‚æ¨©é™ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç™ºè¦‹ã—ã¾ã™ã€‚ã“ã‚Œã«ã¯AWS Shadow Adminsã‚‚å«ã¾ã‚Œã¾ã™ã€‚Powershellã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
```powershell
Import-Module .\SkyArk.ps1 -force
Start-AzureStealth

# in the Cloud Console
IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/cyberark/SkyArk/master/AzureStealth/AzureStealth.ps1')
Scan-AzureAdmins
```
### [Cloud Brute](https://github.com/0xsha/CloudBrute)

ãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆAmazonã€Googleã€Microsoftã€DigitalOceanã€Alibabaã€Vultrã€Linodeï¼‰ä¸Šã§ã€ä¼šç¤¾ï¼ˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰ã®ã‚¤ãƒ³ãƒ•ãƒ©ã€ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚¢ãƒ—ãƒªã‚’è¦‹ã¤ã‘ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

### [CloudFox](https://github.com/BishopFox/cloudfox)

* CloudFoxã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆç¾åœ¨ã¯AWSã¨Azureã®ã¿å¯¾å¿œã€GCPã¯è¿‘æ—¥å¯¾å¿œäºˆå®šï¼‰å†…ã®æ”»æ’ƒå¯èƒ½ãªãƒ‘ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
* ã“ã‚Œã¯åˆ—æŒ™ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚Šã€æ‰‹å‹•ã®ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚’è£œå®Œã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
* ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒå†…ã§ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã¾ãŸã¯å¤‰æ›´ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### ã‚¯ãƒ©ã‚¦ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã®ã•ã‚‰ãªã‚‹ãƒªã‚¹ãƒˆ

* [https://github.com/RyanJarv/awesome-cloud-sec](https://github.com/RyanJarv/awesome-cloud-sec)

## Google

### GCP

{% content-ref url="gcp-security/" %}
[gcp-security](gcp-security/)
{% endcontent-ref %}

### Workspace

{% content-ref url="workspace-security.md" %}
[workspace-security.md](workspace-security.md)
{% endcontent-ref %}

## AWS

{% content-ref url="aws-security/" %}
[aws-security](aws-security/)
{% endcontent-ref %}

## Azure

{% content-ref url="azure-security/" %}
[azure-security](azure-security/)
{% endcontent-ref %}

### Attack Graph

[**Stormspotter**](https://github.com/Azure/Stormspotter)ã¯Azureã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³å†…ã®ãƒªã‚½ãƒ¼ã‚¹ã®ã€Œæ”»æ’ƒã‚°ãƒ©ãƒ•ã€ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ã¨ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ã‚¿ãƒ¼ã¯æ”»æ’ƒé¢ã¨ãƒ†ãƒŠãƒ³ãƒˆå†…ã®ãƒ”ãƒœãƒƒãƒˆã®æ©Ÿä¼šã‚’è¦–è¦šåŒ–ã§ãã€ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ãƒ€ãƒ¼ã¯ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œä½œæ¥­ã‚’è¿…é€Ÿã«æ–¹å‘ä»˜ã‘ã¦å„ªå…ˆé †ä½ã‚’æ±ºå®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### Office365

**Global Admin**ã¾ãŸã¯å°‘ãªãã¨ã‚‚**Global Admin Reader**ã®æ¨©é™ãŒå¿…è¦ã§ã™ï¼ˆãŸã ã—ã€Global Admin Readerã¯ã„ãã¤ã‹ã®PSãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§åˆ¶é™ãŒã‚ã‚Šã€**ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çµŒç”±**ã§æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã§å›é¿ã§ãã¾ã™ï¼‰ã€‚

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§AWSã®ãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼ã®PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã—ã¦ãã ã•ã„ã€‚
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
