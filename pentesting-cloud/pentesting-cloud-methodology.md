# äº‘æ¸—é€æµ‹è¯•æ–¹æ³•è®º

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

<figure><img src="../.gitbook/assets/CLOUD-logo-letters.svg" alt=""><figcaption></figcaption></figure>

## åŸºæœ¬æ–¹æ³•è®º

æ¯ä¸ªäº‘å¹³å°éƒ½æœ‰å…¶ç‹¬ç‰¹ä¹‹å¤„ï¼Œä½†é€šå¸¸åœ¨æµ‹è¯•äº‘ç¯å¢ƒæ—¶ï¼Œæ¸—é€æµ‹è¯•äººå‘˜åº”è¯¥æ£€æŸ¥ä»¥ä¸‹å‡ ä¸ª**å¸¸è§äº‹é¡¹**ï¼š

* **åŸºå‡†æµ‹è¯•**
* è¿™å°†å¸®åŠ©æ‚¨**äº†è§£ç¯å¢ƒçš„è§„æ¨¡**å’Œ**ä½¿ç”¨çš„æœåŠ¡**
* è¿™è¿˜å°†å…è®¸æ‚¨æ‰¾åˆ°ä¸€äº›**å¿«é€Ÿçš„é…ç½®é”™è¯¯**ï¼Œå› ä¸ºæ‚¨å¯ä»¥ä½¿ç”¨**è‡ªåŠ¨åŒ–å·¥å…·**æ‰§è¡Œå¤§éƒ¨åˆ†æµ‹è¯•
* **æœåŠ¡æšä¸¾**
* å¦‚æœæ‚¨æ­£ç¡®æ‰§è¡Œäº†åŸºå‡†æµ‹è¯•ï¼Œæ‚¨å¯èƒ½ä¸ä¼šåœ¨æ­¤å¤„æ‰¾åˆ°æ›´å¤šçš„é…ç½®é”™è¯¯ï¼Œä½†æ‚¨å¯èƒ½ä¼šå‘ç°ä¸€äº›åœ¨åŸºå‡†æµ‹è¯•ä¸­æ²¡æœ‰è¢«è€ƒè™‘çš„é”™è¯¯ã€‚
* è¿™å°†ä½¿æ‚¨äº†è§£äº‘ç¯å¢ƒä¸­**ç¡®åˆ‡ä½¿ç”¨çš„å†…å®¹**
* è¿™å°†åœ¨æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸­éå¸¸æœ‰å¸®åŠ©
* **æ£€æŸ¥å…¬å¼€çš„èµ„äº§**
* è¿™å¯ä»¥åœ¨å‰ä¸€èŠ‚ä¸­å®Œæˆï¼Œæ‚¨éœ€è¦**æ‰¾å‡ºæ‰€æœ‰å¯èƒ½å…¬å¼€çš„**ä¸äº’è”ç½‘æœ‰å…³çš„å†…å®¹ä»¥åŠå¦‚ä½•è®¿é—®å®ƒä»¬ã€‚
* åœ¨è¿™é‡Œï¼Œæˆ‘æŒ‡çš„æ˜¯**æ‰‹åŠ¨å…¬å¼€çš„åŸºç¡€è®¾æ–½**ï¼Œä¾‹å¦‚å…·æœ‰ Web é¡µé¢æˆ–å…¶ä»–ç«¯å£æš´éœ²çš„å®ä¾‹ï¼Œä»¥åŠå…¶ä»–**å¯ä»¥é…ç½®ä¸ºå…¬å¼€çš„äº‘æ‰˜ç®¡æœåŠ¡**ï¼ˆä¾‹å¦‚æ•°æ®åº“æˆ–å­˜å‚¨æ¡¶ï¼‰
* ç„¶åï¼Œæ‚¨åº”è¯¥æ£€æŸ¥**è¯¥èµ„æºæ˜¯å¦å¯ä»¥å…¬å¼€**ï¼ˆåŒ…å«æœºå¯†ä¿¡æ¯ï¼Ÿæ¼æ´ï¼Ÿå…¬å¼€æœåŠ¡ä¸­çš„é…ç½®é”™è¯¯ï¼Ÿï¼‰
* **æ£€æŸ¥æƒé™**
* åœ¨è¿™é‡Œï¼Œæ‚¨åº”è¯¥**æ‰¾å‡ºäº‘ç¯å¢ƒä¸­æ¯ä¸ªè§’è‰²/ç”¨æˆ·çš„æ‰€æœ‰æƒé™**ä»¥åŠå®ƒä»¬çš„ä½¿ç”¨æ–¹å¼
* å¤ªå¤š**é«˜æƒé™**ï¼ˆæ§åˆ¶ä¸€åˆ‡ï¼‰çš„å¸æˆ·ï¼Ÿç”Ÿæˆçš„å¯†é’¥æœªä½¿ç”¨ï¼Ÿ... è¿™äº›æ£€æŸ¥ä¸­çš„å¤§å¤šæ•°åº”è¯¥å·²ç»åœ¨åŸºå‡†æµ‹è¯•ä¸­å®Œæˆ
* å¦‚æœå®¢æˆ·ä½¿ç”¨çš„æ˜¯ OpenIDã€SAML æˆ–å…¶ä»–**è”åˆèº«ä»½éªŒè¯**ï¼Œæ‚¨å¯èƒ½éœ€è¦å‘ä»–ä»¬è¯¢é—®æœ‰å…³**æ¯ä¸ªè§’è‰²åˆ†é…æ–¹å¼çš„è¯¦ç»†ä¿¡æ¯**ï¼ˆå°†ç®¡ç†å‘˜è§’è‰²åˆ†é…ç»™ 1 ä¸ªç”¨æˆ·ä¸åˆ†é…ç»™ 100 ä¸ªç”¨æˆ·æ˜¯ä¸åŒçš„ï¼‰
* ä»…ä»…æ‰¾åˆ°å…·æœ‰**ç®¡ç†å‘˜**æƒé™çš„ç”¨æˆ·æ˜¯**ä¸å¤Ÿçš„**ã€‚æ ¹æ®ä½¿ç”¨çš„æœåŠ¡ï¼Œè¿˜æœ‰å¾ˆå¤š**å…¶ä»–æƒé™**å¯èƒ½éå¸¸**æ•æ„Ÿ**ã€‚
* æ­¤å¤–ï¼Œè¿˜æœ‰**æ½œåœ¨çš„æƒé™æå‡**æ–¹æ³•å¯ä»¥è·Ÿè¿›ã€‚æ‰€æœ‰è¿™äº›äº‹æƒ…éƒ½åº”è¯¥è€ƒè™‘åœ¨å†…ï¼Œå¹¶ä¸”åº”è¯¥æŠ¥å‘Šå°½å¯èƒ½å¤šçš„**æƒé™æå‡è·¯å¾„**ã€‚
* **æ£€æŸ¥é›†æˆ**
* å¾ˆå¯èƒ½åœ¨äº‘ç¯å¢ƒä¸­ä½¿ç”¨äº†**ä¸å…¶ä»–äº‘æˆ– SaaS çš„é›†æˆ**ã€‚
* å¯¹äºæ‚¨æ­£åœ¨å®¡è®¡çš„äº‘ä¸å…¶ä»–å¹³å°çš„**é›†æˆ**ï¼Œæ‚¨åº”è¯¥é€šçŸ¥**è°æœ‰æƒè®¿é—®ï¼ˆæ»¥ç”¨ï¼‰è¯¥é›†æˆ**ï¼Œå¹¶è¯¢é—®æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„**æ•æ„Ÿç¨‹åº¦**ã€‚\
ä¾‹å¦‚ï¼Œè°å¯ä»¥åœ¨ GCP æ­£åœ¨ä»ä¸­è·å–æ•°æ®çš„ AWS å­˜å‚¨æ¡¶ä¸­å†™å…¥æ•°æ®ï¼ˆè¯¢é—® GCP å¤„ç†è¯¥æ•°æ®æ—¶æ“ä½œçš„æ•æ„Ÿç¨‹åº¦ï¼‰ã€‚
* å¯¹äºä»å¤–éƒ¨å¹³å°**é›†æˆåˆ°æ‚¨æ­£åœ¨å®¡è®¡çš„äº‘**çš„é›†æˆï¼Œæ‚¨åº”è¯¥è¯¢é—®**è°æœ‰å¤–éƒ¨è®¿é—®æƒé™æ¥ï¼ˆæ»¥ç”¨ï¼‰è¯¥é›†æˆ**ï¼Œå¹¶æ£€æŸ¥è¯¥æ•°æ®çš„ä½¿ç”¨æ–¹å¼ã€‚\
ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡ä½¿ç”¨åœ¨ GCR æ‰˜ç®¡çš„ Docker é•œåƒï¼Œæ‚¨åº”è¯¥è¯¢é—®è°æœ‰æƒä¿®æ”¹è¯¥é•œåƒä»¥åŠåœ¨ AWS äº‘ä¸­æ‰§è¡Œè¯¥é•œåƒæ—¶å°†è·å¾—å“ªäº›æ•æ„Ÿä¿¡æ¯å’Œè®¿é—®æƒé™ã€‚

## å¤šäº‘å·¥å…·

æœ‰å‡ ä¸ªå·¥å…·å¯ç”¨äºæµ‹è¯•ä¸åŒçš„äº‘ç¯å¢ƒã€‚å®‰è£…æ­¥éª¤å’Œé“¾æ¥å°†åœ¨æœ¬èŠ‚ä¸­æŒ‡ç¤ºã€‚

### [PurplePanda](https://github.com/carlospolop/purplepanda)

è¿™æ˜¯ä¸€ä¸ªç”¨äº**è¯†åˆ«äº‘ç¯å¢ƒå’Œè·¨äº‘/SaaS ä¸­çš„é”™è¯¯é…ç½®å’Œæƒé™æå‡è·¯å¾„çš„å·¥å…·**ã€‚

{% tabs %}
{% tab title="å®‰è£…" %}
```bash
# You need to install and run neo4j also
git clone https://github.com/carlospolop/PurplePanda
cd PurplePanda
python3 -m venv .
source bin/activate
python3 -m pip install -r requirements.txt
export PURPLEPANDA_NEO4J_URL="bolt://neo4j@localhost:7687"
export PURPLEPANDA_PWD="neo4j_pwd_4_purplepanda"
python3 main.py -h # Get help
```
{% endtab %}

{% tab title="GCP" %}GCPï¼ˆGoogle Cloud Platformï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„äº‘è®¡ç®—å¹³å°ï¼Œæä¾›äº†å„ç§äº‘æœåŠ¡å’Œå·¥å…·ï¼ŒåŒ…æ‹¬è®¡ç®—ã€å­˜å‚¨ã€æ•°æ®åº“ã€ç½‘ç»œå’Œäººå·¥æ™ºèƒ½ç­‰ã€‚åœ¨è¿›è¡Œäº‘æ¸—é€æµ‹è¯•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

1. ä¿¡æ¯æ”¶é›†ï¼šæ”¶é›†ç›®æ ‡GCPå®ä¾‹çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ã€åŸŸåã€å­åŸŸåç­‰ã€‚

2. æ¼æ´æ‰«æï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å¯¹ç›®æ ‡GCPå®ä¾‹è¿›è¡Œæ¼æ´æ‰«æï¼Œå‘ç°å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚

3. è®¤è¯å’Œæˆæƒæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œå°è¯•ç»•è¿‡æˆ–åˆ©ç”¨å¼±ç‚¹è·å–æœªæˆæƒçš„è®¿é—®æƒé™ã€‚

4. é…ç½®å®¡è®¡ï¼šå®¡æŸ¥ç›®æ ‡GCPå®ä¾‹çš„é…ç½®ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å®‰å…¨çš„è®¾ç½®æˆ–é…ç½®é”™è¯¯ã€‚

5. Webåº”ç”¨ç¨‹åºæµ‹è¯•ï¼šå¯¹ç›®æ ‡GCPå®ä¾‹ä¸­çš„Webåº”ç”¨ç¨‹åºè¿›è¡Œå®‰å…¨æµ‹è¯•ï¼ŒåŒ…æ‹¬æ³¨å…¥æ”»å‡»ã€è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰æ”»å‡»ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»ç­‰ã€‚

6. æ•°æ®åº“æµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„æ•°æ®åº“å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬SQLæ³¨å…¥æ”»å‡»ã€æœªæˆæƒè®¿é—®ç­‰ã€‚

7. ç½‘ç»œæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„ç½‘ç»œå®‰å…¨æ€§ï¼ŒåŒ…æ‹¬ç«¯å£æ‰«æã€æœåŠ¡è¯†åˆ«ã€æ¼æ´åˆ©ç”¨ç­‰ã€‚

8. ç¤¾ä¼šå·¥ç¨‹å­¦æµ‹è¯•ï¼šé€šè¿‡æ¨¡æ‹Ÿæ”»å‡»è€…çš„ç¤¾ä¼šå·¥ç¨‹å­¦æŠ€æœ¯ï¼Œæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„äººå‘˜å®‰å…¨æ„è¯†å’Œååº”ã€‚

9. æ¼æ´åˆ©ç”¨ï¼šåˆ©ç”¨å·²å‘ç°çš„æ¼æ´ï¼Œè·å–ç›®æ ‡GCPå®ä¾‹çš„æ•æ„Ÿä¿¡æ¯æˆ–æ§åˆ¶æƒé™ã€‚

10. æŠ¥å‘Šç¼–å†™ï¼šæ ¹æ®æµ‹è¯•ç»“æœç¼–å†™è¯¦ç»†çš„æ¸—é€æµ‹è¯•æŠ¥å‘Šï¼ŒåŒ…æ‹¬å‘ç°çš„æ¼æ´ã€é£é™©è¯„ä¼°å’Œå»ºè®®çš„ä¿®å¤æªæ–½ã€‚

ä»¥ä¸Šæ˜¯åœ¨è¿›è¡ŒGCPäº‘æ¸—é€æµ‹è¯•æ—¶å¸¸ç”¨çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œè¿˜å¯ä»¥ç»“åˆå…¶ä»–æŠ€æœ¯å’Œå·¥å…·è¿›è¡Œæ›´æ·±å…¥çš„æµ‹è¯•å’Œæ”»å‡»ã€‚{% endtab %}
```bash
export GOOGLE_DISCOVERY=$(echo 'google:
- file_path: ""

- file_path: ""
service_account_id: "some-sa-email@sidentifier.iam.gserviceaccount.com"' | base64)

python3 main.py -a -p google #Get basic info of the account to check it's correctly configured
python3 main.py -e -p google #Enumerate the env
```
{% endtab %}
{% endtabs %}

### [Prowler](https://github.com/prowler-cloud/prowler)

å®ƒæ”¯æŒ **AWS, GCP & Azure**ã€‚æŸ¥çœ‹å¦‚ä½•é…ç½®æ¯ä¸ªæä¾›å•†çš„æ–¹æ³•åœ¨[https://docs.prowler.cloud/en/latest/#aws](https://docs.prowler.cloud/en/latest/#aws)ã€‚
```bash
# Install
pip install prowler
prowler -v

# Run
prowler <provider>
# Example
prowler aws --profile custom-profile [-M csv json json-asff html]

# Get info about checks & services
prowler <provider> --list-checks
prowler <provider> --list-services
```
### [CloudSploit](https://github.com/aquasecurity/cloudsploit)

AWS, Azure, Github, Google, Oracle, Alibaba

{% tabs %}
{% tab title="å®‰è£…" %}
```bash
# Install
git clone https://github.com/aquasecurity/cloudsploit.git
cd cloudsploit
npm install
./index.js -h
## Docker instructions in github
```
{% endtab %}

{% tab title="GCP" %}GCPï¼ˆGoogle Cloud Platformï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„äº‘è®¡ç®—å¹³å°ï¼Œæä¾›äº†å„ç§äº‘æœåŠ¡å’Œå·¥å…·ï¼ŒåŒ…æ‹¬è®¡ç®—ã€å­˜å‚¨ã€æ•°æ®åº“ã€ç½‘ç»œå’Œäººå·¥æ™ºèƒ½ç­‰ã€‚åœ¨è¿›è¡Œäº‘æ¸—é€æµ‹è¯•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

1. ä¿¡æ¯æ”¶é›†ï¼šæ”¶é›†ç›®æ ‡GCPå®ä¾‹çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ã€åŸŸåã€å­åŸŸåç­‰ã€‚

2. æ¼æ´æ‰«æï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å¯¹ç›®æ ‡GCPå®ä¾‹è¿›è¡Œæ¼æ´æ‰«æï¼Œå‘ç°å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚

3. è®¤è¯å’Œæˆæƒæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œå°è¯•ç»•è¿‡æˆ–åˆ©ç”¨å¼±ç‚¹è·å–æœªæˆæƒçš„è®¿é—®æƒé™ã€‚

4. é…ç½®å®¡è®¡ï¼šå®¡æŸ¥ç›®æ ‡GCPå®ä¾‹çš„é…ç½®ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å®‰å…¨çš„è®¾ç½®æˆ–é…ç½®é”™è¯¯ã€‚

5. Webåº”ç”¨ç¨‹åºæµ‹è¯•ï¼šå¯¹ç›®æ ‡GCPå®ä¾‹ä¸­çš„Webåº”ç”¨ç¨‹åºè¿›è¡Œå®‰å…¨æµ‹è¯•ï¼ŒåŒ…æ‹¬æ³¨å…¥æ”»å‡»ã€è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰æ”»å‡»ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»ç­‰ã€‚

6. æ•°æ®åº“æµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„æ•°æ®åº“å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬SQLæ³¨å…¥æ”»å‡»ã€æœªæˆæƒè®¿é—®ç­‰ã€‚

7. ç½‘ç»œæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„ç½‘ç»œå®‰å…¨æ€§ï¼ŒåŒ…æ‹¬ç«¯å£æ‰«æã€æœåŠ¡è¯†åˆ«ã€æ¼æ´åˆ©ç”¨ç­‰ã€‚

8. ç¤¾ä¼šå·¥ç¨‹å­¦æµ‹è¯•ï¼šé€šè¿‡æ¨¡æ‹Ÿæ”»å‡»è€…çš„ç¤¾ä¼šå·¥ç¨‹å­¦æŠ€æœ¯ï¼Œæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„äººå‘˜å®‰å…¨æ„è¯†å’Œååº”ã€‚

9. æ¼æ´åˆ©ç”¨ï¼šåˆ©ç”¨å·²å‘ç°çš„æ¼æ´ï¼Œè·å–ç›®æ ‡GCPå®ä¾‹çš„æ•æ„Ÿä¿¡æ¯æˆ–æ§åˆ¶æƒé™ã€‚

10. æŠ¥å‘Šç¼–å†™ï¼šæ ¹æ®æµ‹è¯•ç»“æœç¼–å†™è¯¦ç»†çš„æ¸—é€æµ‹è¯•æŠ¥å‘Šï¼ŒåŒ…æ‹¬å‘ç°çš„æ¼æ´ã€é£é™©è¯„ä¼°å’Œå»ºè®®çš„ä¿®å¤æªæ–½ã€‚

ä»¥ä¸Šæ˜¯åœ¨è¿›è¡ŒGCPäº‘æ¸—é€æµ‹è¯•æ—¶å¸¸ç”¨çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œè¿˜å¯ä»¥ç»“åˆå…¶ä»–æŠ€æœ¯å’Œå·¥å…·è¿›è¡Œæ›´æ·±å…¥çš„æµ‹è¯•å’Œæ”»å‡»ã€‚{% endtab %}
```bash
## You need to have creds for a service account and set them in config.js file
./index.js --cloud google --config </abs/path/to/config.js>
```
{% endtab %}
{% endtabs %}

### [ScoutSuite](https://github.com/nccgroup/ScoutSuite)

AWS, Azure, GCP, Alibaba Cloud, Oracle Cloud Infrastructure

{% tabs %}
{% tab title="å®‰è£…" %}
```bash
mkdir scout; cd scout
virtualenv -p python3 venv
source venv/bin/activate
pip install scoutsuite
scout --help
## Using Docker: https://github.com/nccgroup/ScoutSuite/wiki/Docker-Image
```
{% endtab %}

{% tab title="GCP" %}GCPï¼ˆGoogle Cloud Platformï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„äº‘è®¡ç®—å¹³å°ï¼Œæä¾›äº†å„ç§äº‘æœåŠ¡å’Œå·¥å…·ï¼ŒåŒ…æ‹¬è®¡ç®—ã€å­˜å‚¨ã€æ•°æ®åº“ã€ç½‘ç»œå’Œäººå·¥æ™ºèƒ½ç­‰ã€‚åœ¨è¿›è¡Œäº‘æ¸—é€æµ‹è¯•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

1. ä¿¡æ¯æ”¶é›†ï¼šæ”¶é›†æœ‰å…³ç›®æ ‡GCPç¯å¢ƒçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­åŸŸåã€IPåœ°å€ã€å¼€æ”¾ç«¯å£å’ŒæœåŠ¡ç‰ˆæœ¬ç­‰ã€‚

2. è®¤è¯å’Œæˆæƒæµ‹è¯•ï¼šæµ‹è¯•GCPç¯å¢ƒä¸­çš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼ŒåŒ…æ‹¬å¼±å¯†ç ã€é»˜è®¤å‡­è¯å’Œæƒé™é…ç½®ç­‰ã€‚

3. æ¼æ´æ‰«æï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å¯¹GCPç¯å¢ƒè¿›è¡Œæ¼æ´æ‰«æï¼Œå‘ç°å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚

4. é…ç½®å®¡è®¡ï¼šå®¡è®¡GCPç¯å¢ƒçš„é…ç½®ï¼ŒåŒ…æ‹¬å®‰å…¨ç»„ã€ç½‘ç»œè®¾ç½®å’Œè®¿é—®æ§åˆ¶ç­‰ï¼Œä»¥ç¡®ä¿å…¶ç¬¦åˆæœ€ä½³å®‰å…¨å®è·µã€‚

5. Webåº”ç”¨ç¨‹åºæµ‹è¯•ï¼šå¯¹GCPç¯å¢ƒä¸­çš„Webåº”ç”¨ç¨‹åºè¿›è¡Œæ¸—é€æµ‹è¯•ï¼ŒåŒ…æ‹¬æ³¨å…¥æ”»å‡»ã€è·¨ç«™è„šæœ¬å’Œè·¨ç«™è¯·æ±‚ä¼ªé€ ç­‰ã€‚

6. æ•°æ®åº“æµ‹è¯•ï¼šæµ‹è¯•GCPç¯å¢ƒä¸­çš„æ•°æ®åº“å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬SQLæ³¨å…¥å’Œæœªæˆæƒè®¿é—®ç­‰ã€‚

7. æ¼æ´åˆ©ç”¨ï¼šåˆ©ç”¨å·²å‘ç°çš„æ¼æ´ï¼Œè·å–å¯¹GCPç¯å¢ƒçš„æœªæˆæƒè®¿é—®æˆ–ææƒæƒé™ã€‚

8. ç¤¾ä¼šå·¥ç¨‹å­¦æµ‹è¯•ï¼šé€šè¿‡ç¤¾ä¼šå·¥ç¨‹å­¦æ‰‹æ®µæµ‹è¯•GCPç¯å¢ƒä¸­çš„äººå‘˜å®‰å…¨æ„è¯†å’Œè¡Œä¸ºã€‚

9. æ¼æ´æŠ¥å‘Šï¼šç¼–å†™è¯¦ç»†çš„æ¼æ´æŠ¥å‘Šï¼ŒåŒ…æ‹¬å‘ç°çš„æ¼æ´ã€é£é™©è¯„ä¼°å’Œå»ºè®®çš„ä¿®å¤æªæ–½ã€‚

10. æ¼æ´ä¿®å¤éªŒè¯ï¼šéªŒè¯GCPç¯å¢ƒä¸­å·²ä¿®å¤çš„æ¼æ´ï¼Œç¡®ä¿ä¿®å¤æªæ–½æœ‰æ•ˆã€‚

ä»¥ä¸Šæ˜¯åœ¨è¿›è¡ŒGCPäº‘æ¸—é€æµ‹è¯•æ—¶å¸¸ç”¨çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œè¿˜å¯ä»¥ç»“åˆå…¶ä»–æŠ€æœ¯å’Œå·¥å…·è¿›è¡Œæ›´æ·±å…¥çš„æµ‹è¯•å’Œæ”»å‡»ã€‚{% endtab %}
```bash
scout gcp --report-dir /tmp/gcp --user-account --all-projects
## use "--service-account KEY_FILE" instead of "--user-account" to use a service account

SCOUT_FOLDER_REPORT="/tmp"
for pid in $(gcloud projects list --format="value(projectId)"); do
echo "================================================"
echo "Checking $pid"
mkdir "$SCOUT_FOLDER_REPORT/$pid"
scout gcp --report-dir "$SCOUT_FOLDER_REPORT/$pid" --no-browser --user-account --project-id "$pid"
done
```
{% endtab %}
{% endtabs %}

### [Steampipe](https://github.com/turbot)

{% tabs %}
{% tab title="å®‰è£…" %}
ä¸‹è½½å¹¶å®‰è£…Steampipe ([https://steampipe.io/downloads](https://steampipe.io/downloads)). æˆ–è€…ä½¿ç”¨Brew:
```
brew tap turbot/tap
brew install steampipe
```
{% endtab %}

{% tab title="GCP" %}GCPï¼ˆGoogle Cloud Platformï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„äº‘è®¡ç®—å¹³å°ï¼Œæä¾›äº†å„ç§äº‘æœåŠ¡å’Œå·¥å…·ï¼ŒåŒ…æ‹¬è®¡ç®—ã€å­˜å‚¨ã€æ•°æ®åº“ã€ç½‘ç»œå’Œäººå·¥æ™ºèƒ½ç­‰ã€‚åœ¨è¿›è¡Œäº‘æ¸—é€æµ‹è¯•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

1. ä¿¡æ¯æ”¶é›†ï¼šæ”¶é›†æœ‰å…³ç›®æ ‡GCPç¯å¢ƒçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­åŸŸåã€IPåœ°å€ã€å¼€æ”¾ç«¯å£å’ŒæœåŠ¡ç‰ˆæœ¬ç­‰ã€‚

2. è®¤è¯å’Œæˆæƒæµ‹è¯•ï¼šæµ‹è¯•GCPç¯å¢ƒä¸­çš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼ŒåŒ…æ‹¬å¼±å¯†ç ã€é»˜è®¤å‡­è¯å’Œæƒé™é…ç½®é”™è¯¯ç­‰ã€‚

3. æ¼æ´æ‰«æï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å¯¹GCPç¯å¢ƒè¿›è¡Œæ¼æ´æ‰«æï¼Œå‘ç°å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚

4. é…ç½®å®¡è®¡ï¼šå®¡è®¡GCPç¯å¢ƒçš„é…ç½®ï¼ŒåŒ…æ‹¬å®‰å…¨ç»„ã€ç½‘ç»œè®¾ç½®å’Œè®¿é—®æ§åˆ¶ç­‰ï¼Œä»¥ç¡®ä¿å…¶ç¬¦åˆæœ€ä½³å®‰å…¨å®è·µã€‚

5. Webåº”ç”¨ç¨‹åºæµ‹è¯•ï¼šå¯¹GCPç¯å¢ƒä¸­çš„Webåº”ç”¨ç¨‹åºè¿›è¡Œæ¸—é€æµ‹è¯•ï¼ŒåŒ…æ‹¬æ³¨å…¥æ”»å‡»ã€è·¨ç«™è„šæœ¬å’Œè·¨ç«™è¯·æ±‚ä¼ªé€ ç­‰ã€‚

6. æ•°æ®åº“æµ‹è¯•ï¼šæµ‹è¯•GCPç¯å¢ƒä¸­çš„æ•°æ®åº“å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬SQLæ³¨å…¥ã€æœªæˆæƒè®¿é—®å’Œæ•æ„Ÿä¿¡æ¯æ³„éœ²ç­‰ã€‚

7. æ¼æ´åˆ©ç”¨ï¼šåˆ©ç”¨å·²å‘ç°çš„æ¼æ´ï¼Œè·å–å¯¹GCPç¯å¢ƒçš„æœªæˆæƒè®¿é—®æˆ–æ‰§è¡Œç‰¹æƒæ“ä½œã€‚

8. ç¤¾ä¼šå·¥ç¨‹å­¦æµ‹è¯•ï¼šé€šè¿‡ç¤¾ä¼šå·¥ç¨‹å­¦æ‰‹æ®µæµ‹è¯•GCPç¯å¢ƒä¸­çš„äººå‘˜å®‰å…¨æ„è¯†å’Œè¡Œä¸ºã€‚

9. æ¼æ´æŠ¥å‘Šï¼šç¼–å†™è¯¦ç»†çš„æ¼æ´æŠ¥å‘Šï¼ŒåŒ…æ‹¬å‘ç°çš„æ¼æ´ã€é£é™©è¯„ä¼°å’Œå»ºè®®çš„ä¿®å¤æªæ–½ã€‚

10. æ¼æ´ä¿®å¤éªŒè¯ï¼šéªŒè¯GCPç¯å¢ƒä¸­å·²ä¿®å¤çš„æ¼æ´ï¼Œç¡®ä¿ä¿®å¤æªæ–½æœ‰æ•ˆã€‚

ä»¥ä¸Šæ˜¯åœ¨è¿›è¡ŒGCPäº‘æ¸—é€æµ‹è¯•æ—¶å¸¸ç”¨çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œè¿˜å¯ä»¥ç»“åˆå…¶ä»–æŠ€æœ¯å’Œå·¥å…·è¿›è¡Œæ›´æ·±å…¥çš„æµ‹è¯•å’Œæ”»å‡»ã€‚{% endtab %}
```bash
# Install gcp plugin
steampipe plugin install gcp

# Use https://github.com/turbot/steampipe-mod-gcp-compliance.git
git clone https://github.com/turbot/steampipe-mod-gcp-compliance.git
cd steampipe-mod-gcp-compliance
# To run all the checks from the dashboard
steampipe dashboard
# To run all the checks from rhe cli
steampipe check all
```
<details>

<summary>æ£€æŸ¥æ‰€æœ‰é¡¹ç›®</summary>

ä¸ºäº†æ£€æŸ¥æ‰€æœ‰é¡¹ç›®ï¼Œæ‚¨éœ€è¦ç”Ÿæˆ`gcp.spc`æ–‡ä»¶ï¼ŒæŒ‡ç¤ºè¦æµ‹è¯•çš„æ‰€æœ‰é¡¹ç›®ã€‚æ‚¨åªéœ€æŒ‰ç…§ä»¥ä¸‹è„šæœ¬çš„æŒ‡ç¤ºè¿›è¡Œæ“ä½œï¼š
```bash
FILEPATH="/tmp/gcp.spc"
rm -rf "$FILEPATH" 2>/dev/null

# Generate a json like object for each project
for pid in $(gcloud projects list --format="value(projectId)"); do
echo "connection \"gcp_$(echo -n $pid | tr "-" "_" )\" {
plugin  = \"gcp\"
project = \"$pid\"
}" >> "$FILEPATH"
done

# Generate the aggragator to call
echo 'connection "gcp_all" {
plugin      = "gcp"
type        = "aggregator"
connections = ["gcp_*"]
}' >> "$FILEPATH"

echo "Copy $FILEPATH in ~/.steampipe/config/gcp.spc if it was correctly generated"
```
</details>

è¦æ£€æŸ¥**å…¶ä»–GCPæ´å¯ŸåŠ›**ï¼ˆç”¨äºæšä¸¾æœåŠ¡ï¼‰ï¼Œè¯·ä½¿ç”¨ï¼š[https://github.com/turbot/steampipe-mod-gcp-insights](https://github.com/turbot/steampipe-mod-gcp-insights)

è¦æ£€æŸ¥Terraform GCPä»£ç ï¼Œè¯·ä½¿ç”¨ï¼š[https://github.com/turbot/steampipe-mod-terraform-gcp-compliance](https://github.com/turbot/steampipe-mod-terraform-gcp-compliance)

æ›´å¤šSteampipeçš„GCPæ’ä»¶ï¼š[https://github.com/turbot?q=gcp](https://github.com/turbot?q=gcp)
{% endtab %}

{% tab title="AWS" %}
```bash
# Install aws plugin
steampipe plugin install aws

# Modify the spec indicating in "profile" the profile name to use
nano ~/.steampipe/config/aws.spc

# Get some info on how the AWS account is being used
git clone https://github.com/turbot/steampipe-mod-aws-insights.git
cd steampipe-mod-aws-insights
steampipe dashboard

# Get the services exposed to the internet
git clone https://github.com/turbot/steampipe-mod-aws-perimeter.git
cd steampipe-mod-aws-perimeter
steampipe dashboard

# Run the benchmarks
git clone https://github.com/turbot/steampipe-mod-aws-compliance
cd steampipe-mod-aws-compliance
steampipe dashboard # To see results in browser
steampipe check all --export=/tmp/output4.json
```
è¦æ£€æŸ¥Terraform AWSä»£ç ï¼š[https://github.com/turbot/steampipe-mod-terraform-aws-compliance](https://github.com/turbot/steampipe-mod-terraform-aws-compliance)

æ›´å¤šSteampipeçš„AWSæ’ä»¶ï¼š[https://github.com/orgs/turbot/repositories?q=aws](https://github.com/orgs/turbot/repositories?q=aws)
{% endtab %}
{% endtabs %}

### [~~cs-suite~~](https://github.com/SecurityFTW/cs-suite)

AWSï¼ŒGCPï¼ŒAzureï¼ŒDigitalOceanã€‚\
å®ƒéœ€è¦python2.7å¹¶ä¸”çœ‹èµ·æ¥æ²¡æœ‰ç»´æŠ¤ã€‚

### Nessus

Nessuså…·æœ‰æ”¯æŒAWSï¼ŒAzureï¼ŒOffice 365ï¼ŒRackspaceï¼ŒSalesforceçš„_**Audit Cloud Infrastructure**_æ‰«æã€‚åœ¨**Azure**ä¸­éœ€è¦ä¸€äº›é¢å¤–çš„é…ç½®æ¥è·å–**Client Id**ã€‚

### [**cloudlist**](https://github.com/projectdiscovery/cloudlist)

Cloudlistæ˜¯ä¸€ä¸ªä»äº‘æä¾›å•†è·å–èµ„äº§ï¼ˆä¸»æœºåï¼ŒIPåœ°å€ï¼‰çš„**å¤šäº‘å·¥å…·**ã€‚
```bash
cd /tmp
wget https://github.com/projectdiscovery/cloudlist/releases/latest/download/cloudlist_1.0.1_macOS_arm64.zip
unzip cloudlist_1.0.1_macOS_arm64.zip
chmod +x cloudlist
sudo mv cloudlist /usr/local/bin
```
{% endtab %}

{% tab title="ç¬¬äºŒä¸ªæ ‡ç­¾" %}
```bash
## For GCP it requires service account JSON credentials
cloudlist -config </path/to/config>
```
{% endtab %}
{% endtabs %}

### [**åœ°å›¾åˆ¶ä½œ**](https://github.com/lyft/cartography)

åœ°å›¾åˆ¶ä½œæ˜¯ä¸€ä¸ªä½¿ç”¨Neo4jæ•°æ®åº“æä¾›ç›´è§‚å›¾å½¢è§†å›¾çš„Pythonå·¥å…·ï¼Œç”¨äºæ•´åˆåŸºç¡€è®¾æ–½èµ„äº§åŠå…¶ä¹‹é—´çš„å…³ç³»ã€‚
```bash
# Installation
docker image pull ghcr.io/lyft/cartography
docker run --platform linux/amd64 ghcr.io/lyft/cartography cartography --help
## Install a Neo4j DB version 3.5.*
```
{% endtab %}

{% tab title="GCP" %}GCPï¼ˆGoogle Cloud Platformï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„äº‘è®¡ç®—å¹³å°ï¼Œæä¾›äº†å„ç§äº‘æœåŠ¡å’Œå·¥å…·ï¼ŒåŒ…æ‹¬è®¡ç®—ã€å­˜å‚¨ã€æ•°æ®åº“ã€ç½‘ç»œå’Œäººå·¥æ™ºèƒ½ç­‰ã€‚åœ¨è¿›è¡Œäº‘æ¸—é€æµ‹è¯•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

1. ä¿¡æ¯æ”¶é›†ï¼šæ”¶é›†ç›®æ ‡GCPå®ä¾‹çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ã€åŸŸåã€å­åŸŸåç­‰ã€‚

2. æ¼æ´æ‰«æï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å¯¹ç›®æ ‡GCPå®ä¾‹è¿›è¡Œæ¼æ´æ‰«æï¼Œå‘ç°å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚

3. è®¤è¯å’Œæˆæƒæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œå°è¯•ç»•è¿‡æˆ–åˆ©ç”¨å¼±ç‚¹è·å–æœªæˆæƒçš„è®¿é—®æƒé™ã€‚

4. é…ç½®å®¡è®¡ï¼šå®¡æŸ¥ç›®æ ‡GCPå®ä¾‹çš„é…ç½®ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å®‰å…¨çš„è®¾ç½®æˆ–é…ç½®é”™è¯¯ã€‚

5. Webåº”ç”¨ç¨‹åºæµ‹è¯•ï¼šå¯¹ç›®æ ‡GCPå®ä¾‹ä¸­çš„Webåº”ç”¨ç¨‹åºè¿›è¡Œå®‰å…¨æµ‹è¯•ï¼ŒåŒ…æ‹¬æ³¨å…¥æ”»å‡»ã€è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰æ”»å‡»ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»ç­‰ã€‚

6. æ•°æ®åº“æµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„æ•°æ®åº“å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬SQLæ³¨å…¥æ”»å‡»ã€æœªæˆæƒè®¿é—®ç­‰ã€‚

7. ç½‘ç»œæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„ç½‘ç»œå®‰å…¨æ€§ï¼ŒåŒ…æ‹¬ç«¯å£æ‰«æã€æœåŠ¡è¯†åˆ«ã€æ¼æ´åˆ©ç”¨ç­‰ã€‚

8. ç¤¾ä¼šå·¥ç¨‹å­¦æµ‹è¯•ï¼šé€šè¿‡æ¨¡æ‹Ÿæ”»å‡»è€…çš„ç¤¾ä¼šå·¥ç¨‹å­¦æŠ€æœ¯ï¼Œæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„äººå‘˜å®‰å…¨æ„è¯†å’Œååº”ã€‚

9. æ¼æ´åˆ©ç”¨ï¼šåˆ©ç”¨å·²å‘ç°çš„æ¼æ´ï¼Œè·å–ç›®æ ‡GCPå®ä¾‹çš„æ•æ„Ÿä¿¡æ¯æˆ–æ§åˆ¶æƒé™ã€‚

10. æŠ¥å‘Šç¼–å†™ï¼šæ ¹æ®æµ‹è¯•ç»“æœç¼–å†™è¯¦ç»†çš„æ¸—é€æµ‹è¯•æŠ¥å‘Šï¼ŒåŒ…æ‹¬å‘ç°çš„æ¼æ´ã€é£é™©è¯„ä¼°å’Œå»ºè®®çš„ä¿®å¤æªæ–½ã€‚

ä»¥ä¸Šæ˜¯åœ¨è¿›è¡ŒGCPäº‘æ¸—é€æµ‹è¯•æ—¶å¸¸ç”¨çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œè¿˜å¯ä»¥ç»“åˆå…¶ä»–æŠ€æœ¯å’Œå·¥å…·è¿›è¡Œæ›´æ·±å…¥çš„æµ‹è¯•å’Œæ”»å‡»ã€‚{% endtab %}
```bash
docker run --platform linux/amd64 \
--volume "$HOME/.config/gcloud/application_default_credentials.json:/application_default_credentials.json" \
-e GOOGLE_APPLICATION_CREDENTIALS="/application_default_credentials.json" \
-e NEO4j_PASSWORD="s3cr3t" \
ghcr.io/lyft/cartography  \
--neo4j-uri bolt://host.docker.internal:7687 \
--neo4j-password-env-var NEO4j_PASSWORD \
--neo4j-user neo4j


# It only checks for a few services inside GCP (https://lyft.github.io/cartography/modules/gcp/index.html)
## Cloud Resource Manager
## Compute
## DNS
## Storage
## Google Kubernetes Engine
### If you can run starbase or purplepanda you will get more info
```
{% endtab %}
{% endtabs %}

### [**starbase**](https://github.com/JupiterOne/starbase)

Starbaseå°†æ¥è‡ªå„ç§æœåŠ¡å’Œç³»ç»Ÿï¼ˆåŒ…æ‹¬äº‘åŸºç¡€è®¾æ–½ã€SaaSåº”ç”¨ç¨‹åºã€å®‰å…¨æ§åˆ¶ç­‰ï¼‰çš„èµ„äº§å’Œå…³ç³»æ”¶é›†åˆ°ä¸€ä¸ªç›´è§‚çš„å›¾å½¢è§†å›¾ä¸­ï¼Œæ”¯æŒNeo4jæ•°æ®åº“ã€‚
```bash
# You are going to need Node version 14, so install nvm following https://tecadmin.net/install-nvm-macos-with-homebrew/
npm install --global yarn
nvm install 14
git clone https://github.com/JupiterOne/starbase.git
cd starbase
nvm use 14
yarn install
yarn starbase --help
# Configure manually config.yaml depending on the env to analyze
yarn starbase setup
yarn starbase run

# Docker
git clone https://github.com/JupiterOne/starbase.git
cd starbase
cp config.yaml.example config.yaml
# Configure manually config.yaml depending on the env to analyze
docker build --no-cache -t starbase:latest .
docker-compose run starbase setup
docker-compose run starbase run
```
{% endtab %}

{% tab title="GCP" %}GCPï¼ˆGoogle Cloud Platformï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„äº‘è®¡ç®—å¹³å°ï¼Œæä¾›äº†å„ç§äº‘æœåŠ¡å’Œå·¥å…·ï¼ŒåŒ…æ‹¬è®¡ç®—ã€å­˜å‚¨ã€æ•°æ®åº“ã€ç½‘ç»œå’Œäººå·¥æ™ºèƒ½ç­‰ã€‚åœ¨è¿›è¡Œäº‘æ¸—é€æµ‹è¯•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

1. ä¿¡æ¯æ”¶é›†ï¼šæ”¶é›†ç›®æ ‡GCPå®ä¾‹çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ã€åŸŸåã€å­åŸŸåç­‰ã€‚

2. æ¼æ´æ‰«æï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å¯¹ç›®æ ‡GCPå®ä¾‹è¿›è¡Œæ¼æ´æ‰«æï¼Œå‘ç°å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚

3. è®¤è¯å’Œæˆæƒæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œå°è¯•ç»•è¿‡æˆ–åˆ©ç”¨å¼±ç‚¹è·å–æœªæˆæƒçš„è®¿é—®æƒé™ã€‚

4. é…ç½®å®¡è®¡ï¼šå®¡æŸ¥ç›®æ ‡GCPå®ä¾‹çš„é…ç½®ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å®‰å…¨çš„è®¾ç½®æˆ–é…ç½®é”™è¯¯ã€‚

5. Webåº”ç”¨ç¨‹åºæµ‹è¯•ï¼šå¯¹ç›®æ ‡GCPå®ä¾‹ä¸­çš„Webåº”ç”¨ç¨‹åºè¿›è¡Œå®‰å…¨æµ‹è¯•ï¼ŒåŒ…æ‹¬æ³¨å…¥æ”»å‡»ã€è·¨ç«™è„šæœ¬æ”»å‡»ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ç­‰ã€‚

6. æ•°æ®åº“æµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„æ•°æ®åº“å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬SQLæ³¨å…¥ã€æœªæˆæƒè®¿é—®ç­‰ã€‚

7. ç½‘ç»œæµ‹è¯•ï¼šæµ‹è¯•ç›®æ ‡GCPå®ä¾‹çš„ç½‘ç»œå®‰å…¨æ€§ï¼ŒåŒ…æ‹¬ç«¯å£æ‰«æã€æœåŠ¡è¯†åˆ«ã€æ¼æ´åˆ©ç”¨ç­‰ã€‚

8. ç¤¾ä¼šå·¥ç¨‹å­¦æµ‹è¯•ï¼šé€šè¿‡æ¨¡æ‹Ÿæ”»å‡»è€…çš„ç¤¾ä¼šå·¥ç¨‹å­¦æŠ€æœ¯ï¼Œæµ‹è¯•ç›®æ ‡GCPå®ä¾‹ä¸­çš„äººå‘˜å®‰å…¨æ„è¯†å’Œååº”ã€‚

9. æ¼æ´åˆ©ç”¨ï¼šåˆ©ç”¨å·²å‘ç°çš„æ¼æ´ï¼Œè·å–ç›®æ ‡GCPå®ä¾‹çš„æ•æ„Ÿä¿¡æ¯æˆ–æ§åˆ¶æƒé™ã€‚

10. æ¼æ´æŠ¥å‘Šï¼šæ•´ç†æµ‹è¯•ç»“æœï¼Œç¼–å†™æ¼æ´æŠ¥å‘Šï¼Œè¯¦ç»†æè¿°å‘ç°çš„æ¼æ´å’Œå»ºè®®çš„ä¿®å¤æªæ–½ã€‚

ä»¥ä¸Šæ˜¯åœ¨è¿›è¡ŒGCPäº‘æ¸—é€æµ‹è¯•æ—¶å¸¸ç”¨çš„æ–¹æ³•å’Œæ­¥éª¤ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œè¿˜å¯ä»¥ç»“åˆå…¶ä»–æŠ€æœ¯å’Œå·¥å…·è¿›è¡Œæµ‹è¯•ã€‚{% endtab %}
```yaml
## Config for GCP
### Check out: https://github.com/JupiterOne/graph-google-cloud/blob/main/docs/development.md
### It requires service account credentials

integrations:
-
name: graph-google-cloud
instanceId: testInstanceId
directory: ./.integrations/graph-google-cloud
gitRemoteUrl: https://github.com/JupiterOne/graph-google-cloud.git
config:
SERVICE_ACCOUNT_KEY_FILE: '{Check https://github.com/JupiterOne/graph-google-cloud/blob/main/docs/development.md#service_account_key_file-string}'
PROJECT_ID: ""
FOLDER_ID: ""
ORGANIZATION_ID: ""
CONFIGURE_ORGANIZATION_PROJECTS: false

storage:
engine: neo4j
config:
username: neo4j
password: s3cr3t
uri: bolt://localhost:7687
#Consider using host.docker.internal if from docker
```
{% endtab %}
{% endtabs %}

### [**SkyArk**](https://github.com/cyberark/SkyArk)

å‘ç°æ‰«æçš„AWSæˆ–Azureç¯å¢ƒä¸­çš„æœ€é«˜æƒé™ç”¨æˆ·ï¼ŒåŒ…æ‹¬AWSçš„Shadow Adminsã€‚å®ƒä½¿ç”¨powershellã€‚
```powershell
Import-Module .\SkyArk.ps1 -force
Start-AzureStealth

# in the Cloud Console
IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/cyberark/SkyArk/master/AzureStealth/AzureStealth.ps1')
Scan-AzureAdmins
```
### [äº‘æš´åŠ›ç ´è§£](https://github.com/0xsha/CloudBrute)

è¿™æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºåœ¨é¡¶çº§äº‘æä¾›å•†ï¼ˆAmazonã€Googleã€Microsoftã€DigitalOceanã€Alibabaã€Vultrã€Linodeï¼‰ä¸ŠæŸ¥æ‰¾å…¬å¸ï¼ˆç›®æ ‡ï¼‰çš„åŸºç¡€æ¶æ„ã€æ–‡ä»¶å’Œåº”ç”¨ç¨‹åºã€‚

### [äº‘ç‹](https://github.com/BishopFox/cloudfox)

* äº‘ç‹æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œç”¨äºåœ¨äº‘åŸºç¡€æ¶æ„ä¸­æŸ¥æ‰¾å¯åˆ©ç”¨çš„æ”»å‡»è·¯å¾„ï¼ˆç›®å‰ä»…æ”¯æŒAWSå’ŒAzureï¼ŒGCPå³å°†æ”¯æŒï¼‰ã€‚
* å®ƒæ˜¯ä¸€ä¸ªæšä¸¾å·¥å…·ï¼Œæ—¨åœ¨è¡¥å……æ‰‹åŠ¨æ¸—é€æµ‹è¯•ã€‚
* å®ƒä¸ä¼šåˆ›å»ºæˆ–ä¿®æ”¹äº‘ç¯å¢ƒä¸­çš„ä»»ä½•æ•°æ®ã€‚

### æ›´å¤šäº‘å®‰å…¨å·¥å…·åˆ—è¡¨

* [https://github.com/RyanJarv/awesome-cloud-sec](https://github.com/RyanJarv/awesome-cloud-sec)

## è°·æ­Œ

### GCP

{% content-ref url="gcp-security/" %}
[gcp-security](gcp-security/)
{% endcontent-ref %}

### Workspace

{% content-ref url="workspace-security.md" %}
[workspace-security.md](workspace-security.md)
{% endcontent-ref %}

## AWS

{% content-ref url="aws-security/" %}
[aws-security](aws-security/)
{% endcontent-ref %}

## Azure

åœ¨æ­¤å¤„è®¿é—®é—¨æˆ·ç½‘ç«™ï¼š[http://portal.azure.com/](http://portal.azure.com)\
è¦å¼€å§‹æµ‹è¯•ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨å…·æœ‰**è®¢é˜…çš„è¯»å–æƒé™**å’Œ**AzureADä¸­çš„å…¨å±€è¯»å–å™¨è§’è‰²**çš„ç”¨æˆ·è¿›è¡Œè®¿é—®ã€‚å¦‚æœå³ä½¿åœ¨è¿™ç§æƒ…å†µä¸‹æ‚¨**æ— æ³•è®¿é—®å­˜å‚¨å¸æˆ·çš„å†…å®¹**ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨**å­˜å‚¨å¸æˆ·è´¡çŒ®è€…è§’è‰²**æ¥ä¿®å¤å®ƒã€‚

å»ºè®®åœ¨**Linux**å’Œ**Windows**è™šæ‹Ÿæœºä¸Š**å®‰è£…azure-cli**ï¼ˆä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œpowershellå’Œpythonè„šæœ¬ï¼‰ï¼š[https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest)\
ç„¶åï¼Œè¿è¡Œ`az login`è¿›è¡Œç™»å½•ã€‚è¯·æ³¨æ„ï¼Œ**å¸æˆ·ä¿¡æ¯**å’Œ**ä»¤ç‰Œ**å°†è¢«**ä¿å­˜**åœ¨_\<HOME>/.azure_ï¼ˆWindowså’ŒLinuxéƒ½æ˜¯å¦‚æ­¤ï¼‰ä¸­ã€‚

è¯·è®°ä½ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯**å®‰å…¨ä¸­å¿ƒæ ‡å‡†å®šä»·å±‚**è€Œ**ä¸æ˜¯å…è´¹**å±‚ï¼Œåˆ™å¯ä»¥ä»Azureé—¨æˆ·ç”Ÿæˆ**CISåˆè§„æ€§æ‰«ææŠ¥å‘Š**ã€‚è½¬åˆ°_ç­–ç•¥å’Œåˆè§„æ€§-> æ³•è§„åˆè§„æ€§_ï¼ˆæˆ–å°è¯•è®¿é—®[https://portal.azure.com/#blade/Microsoft\_Azure\_Security/SecurityMenuBlade/22](https://portal.azure.com/#blade/Microsoft\_Azure\_Security/SecurityMenuBlade/22)ï¼‰ã€‚
\_\_å¦‚æœå…¬å¸æ²¡æœ‰ä¸ºæ ‡å‡†å¸æˆ·ä»˜è´¹ï¼Œæ‚¨å¯èƒ½éœ€è¦æ‰‹åŠ¨å®¡æŸ¥**CIS Microsoft AzureåŸºç¡€åŸºå‡†**ï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·è·å¾—ä¸€äº›å¸®åŠ©ï¼‰ã€‚ä»[**è¿™é‡Œ**](https://www.newnettechnologies.com/cis-benchmark.html?keyword=\&gclid=Cj0KCQjwyPbzBRDsARIsAFh15JYSireQtX57C6XF8cfZU3JVjswtaLFJndC3Hv45YraKpLVDgLqEY6IaAhsZEALw\_wcB#microsoft-azure)ä¸‹è½½ã€‚

### è¿è¡Œæ‰«æå™¨

è¿è¡Œæ‰«æå™¨æŸ¥æ‰¾**æ¼æ´**å¹¶ä¸**CIS**å®æ–½çš„å®‰å…¨æªæ–½è¿›è¡Œæ¯”è¾ƒã€‚
```bash
pip install scout
scout azure --cli --report-dir <output_dir>

#Fix azureaudit.py before launching cs.py
#Adding "j_res = {}" on line 1074
python cs.py -env azure

#Azucar is an Azure security scanner for PowerShell (https://github.com/nccgroup/azucar)
#Run it from its folder
.\Azucar.ps1 -AuthMode Interactive -ForceAuth -ExportTo EXCEL

#Azure-CIS-Scanner,CIS scanner for Azure (https://github.com/kbroughton/azure_cis_scanner)
pip3 install azure-cis-scanner #Install
azscan #Run, login before with `az login`
```
### æ”»å‡»å›¾

[**Stormspotter**](https://github.com/Azure/Stormspotter)åœ¨Azureè®¢é˜…ä¸­åˆ›å»ºäº†ä¸€ä¸ªèµ„æºçš„â€œæ”»å‡»å›¾â€ã€‚å®ƒä½¿çº¢é˜Ÿå’Œæ¸—é€æµ‹è¯•äººå‘˜èƒ½å¤Ÿå¯è§†åŒ–æ”»å‡»é¢å’Œåœ¨ç§Ÿæˆ·å†…è¿›è¡Œæ¢è½´æ“ä½œï¼Œå¹¶èƒ½å¤Ÿå¿«é€Ÿå®šä½å’Œä¼˜å…ˆå¤„ç†å®‰å…¨äº‹ä»¶å“åº”å·¥ä½œã€‚

### æ›´å¤šæ£€æŸ¥

* æ£€æŸ¥æ˜¯å¦å­˜åœ¨**å¤§é‡çš„å…¨å±€ç®¡ç†å‘˜**ï¼ˆå»ºè®®åœ¨2-4ä¹‹é—´ï¼‰ã€‚è®¿é—®é“¾æ¥ï¼š[https://portal.azure.com/#blade/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/Overview](https://portal.azure.com/#blade/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/Overview)
* å…¨å±€ç®¡ç†å‘˜åº”å¯ç”¨å¤šé‡èº«ä»½éªŒè¯ï¼ˆMFAï¼‰ã€‚è½¬åˆ°â€œç”¨æˆ·â€å¹¶ç‚¹å‡»â€œå¤šé‡èº«ä»½éªŒè¯â€æŒ‰é’®ã€‚
* ä¸“ç”¨ç®¡ç†å‘˜å¸æˆ·ä¸åº”è¯¥æœ‰é‚®ç®±ï¼ˆé™¤éä»–ä»¬æœ‰Office 365ï¼‰ã€‚
* å¦‚æœä¸éœ€è¦ï¼Œæœ¬åœ°ADä¸åº”ä¸Azure ADåŒæ­¥ï¼ˆ[https://portal.azure.com/#blade/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/AzureADConnect](https://portal.azure.com/#blade/Microsoft\_AAD\_IAM/ActiveDirectoryMenuBlade/AzureADConnect)ï¼‰ã€‚å¦‚æœåŒæ­¥äº†ï¼Œåˆ™åº”å¯ç”¨å¯é æ€§çš„å¯†ç å“ˆå¸ŒåŒæ­¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒè¢«ç¦ç”¨ï¼š
* **å…¨å±€ç®¡ç†å‘˜**ä¸åº”ä»æœ¬åœ°ADåŒæ­¥ã€‚æ£€æŸ¥å…¨å±€ç®¡ç†å‘˜çš„ç”µå­é‚®ä»¶æ˜¯å¦ä½¿ç”¨**onmicrosoft.com**åŸŸã€‚å¦‚æœä¸æ˜¯ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·çš„æ¥æºï¼Œæ¥æºåº”ä¸ºAzure Active Directoryï¼Œå¦‚æœæ¥è‡ªWindows Server ADï¼Œåˆ™æŠ¥å‘Šã€‚
* æ¨èä½¿ç”¨**æ ‡å‡†ç‰ˆ**è€Œä¸æ˜¯å…è´¹ç‰ˆï¼ˆåœ¨â€œå®šä»·å’Œè®¾ç½®â€ä¸­æŸ¥çœ‹ä½¿ç”¨çš„ç‰ˆæœ¬æˆ–åœ¨[https://portal.azure.com/#blade/Microsoft\_Azure\_Security/SecurityMenuBlade/24](https://portal.azure.com/#blade/Microsoft\_Azure\_Security/SecurityMenuBlade/24)ä¸­æŸ¥çœ‹ï¼‰ã€‚
*   **å®šæœŸæ‰«æSQLæœåŠ¡å™¨**ï¼š

_é€‰æ‹©SQLæœåŠ¡å™¨_ --> _ç¡®ä¿â€œé«˜çº§æ•°æ®å®‰å…¨æ€§â€è®¾ç½®ä¸ºâ€œæ‰“å¼€â€_ --> _åœ¨â€œæ¼æ´è¯„ä¼°è®¾ç½®â€ä¸‹ï¼Œå°†â€œå®šæœŸé‡å¤æ‰«æâ€è®¾ç½®ä¸ºâ€œæ‰“å¼€â€ï¼Œå¹¶é…ç½®ç”¨äºå­˜å‚¨æ¼æ´è¯„ä¼°æ‰«æç»“æœçš„å­˜å‚¨å¸æˆ·_ --> _ç‚¹å‡»ä¿å­˜_
* **ç¼ºä¹åº”ç”¨æœåŠ¡é™åˆ¶**ï¼šåœ¨Azureä¸­æŸ¥æ‰¾â€œåº”ç”¨æœåŠ¡â€ï¼ˆ[https://portal.azure.com/#blade/HubsExtension/BrowseResource/resourceType/Microsoft.Web%2Fsites](https://portal.azure.com/#blade/HubsExtension/BrowseResource/resourceType/Microsoft.Web%2Fsites)ï¼‰ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æœ‰äººåœ¨ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ£€æŸ¥æ¯ä¸ªåº”ç”¨ç¨‹åºçš„â€œè®¿é—®é™åˆ¶â€ï¼Œå¹¶ç¡®ä¿æ²¡æœ‰è§„åˆ™ã€‚åº”æ ¹æ®éœ€æ±‚é™åˆ¶å¯¹åº”ç”¨æœåŠ¡çš„è®¿é—®ã€‚

### Office365

æ‚¨éœ€è¦**å…¨å±€ç®¡ç†å‘˜**æˆ–è‡³å°‘**å…¨å±€ç®¡ç†å‘˜é˜…è¯»å™¨**ï¼ˆä½†è¯·æ³¨æ„ï¼Œå…¨å±€ç®¡ç†å‘˜é˜…è¯»å™¨çš„åŠŸèƒ½æœ‰ä¸€äº›é™åˆ¶ï¼‰ã€‚ç„¶è€Œï¼Œè¿™äº›é™åˆ¶å‡ºç°åœ¨ä¸€äº›PSæ¨¡å—ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¿é—®**Webåº”ç”¨ç¨‹åº**æ¥ç»•è¿‡ã€‚

## å…¶ä»–äº‘æ¸—é€æµ‹è¯•æŒ‡å—

* [**https://hackingthe.cloud**](https://hackingthe.cloud)

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨å¸Œæœ›åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å¾—[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„åŠ¨æ€ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
