# Kubernetes GÃ¼venlik BaÄŸlamÄ±(larÄ±)

<details>

<summary><strong>AWS hacklemeyi sÄ±fÄ±rdan kahraman olmak iÃ§in Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## PodSecurityContext <a href="#podsecuritycontext-v1-core" id="podsecuritycontext-v1-core"></a>

[**DokÃ¼mantasyondan:**](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core)

Bir Pod'un gÃ¼venlik baÄŸlamÄ±nÄ± belirtirken birkaÃ§ Ã¶zniteliÄŸi kullanabilirsiniz. Savunma amaÃ§lÄ± gÃ¼venlik aÃ§Ä±sÄ±ndan aÅŸaÄŸÄ±dakileri gÃ¶z Ã¶nÃ¼nde bulundurmalÄ±sÄ±nÄ±z:

* **runASNonRoot**'u **True** olarak ayarlamak
* **runAsUser**'Ä± yapÄ±landÄ±rmak
* MÃ¼mkÃ¼nse, **seLinuxOptions** ve **seccompProfile** ile **izinleri sÄ±nÄ±rlamak**
* **runAsGroup** ve **supplementaryGroups** aracÄ±lÄ±ÄŸÄ±yla **ayrÄ±calÄ±k grubu eriÅŸimini** **VERMEMEK**

| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>fsGroup</strong></a><br><em>tamsayÄ±</em></p>                                                                                                                                                                                                                                                 | <p>Bir Pod'daki **tÃ¼m konteynerlara uygulanan Ã¶zel bir ek grup**. BazÄ± hacim tÃ¼rleri, Kubelet'in bu hacmin sahipliÄŸini Pod tarafÄ±ndan sahiplenilen bir ÅŸekilde deÄŸiÅŸtirmesine izin verir:<br>1. Sahip olan GID FSGroup olur<br>2. setgid biti ayarlanÄ±r (hacimde oluÅŸturulan yeni dosyalar FSGroup'a ait olur)<br>3. Ä°zin bitleri rw-rw---- ile OR'lanÄ±r. AyarlanmamÄ±ÅŸsa, Kubelet hiÃ§bir hacmin sahipliÄŸini ve izinlerini deÄŸiÅŸtirmez</p> |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>fsGroupChangePolicy</strong></a><br><em>dize</em></p>                                                                                                                                                                                                                                      | Bu, Pod iÃ§inde gÃ¶rÃ¼nmeden Ã¶nce hacmin **sahipliÄŸini ve iznini deÄŸiÅŸtirme davranÄ±ÅŸÄ±nÄ±** tanÄ±mlar.                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsGroup</strong></a><br><em>tamsayÄ±</em></p>                                                                                                                                                                                                                                              | Konteyner sÃ¼recinin **giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lacak GID**. AyarlanmamÄ±ÅŸsa, Ã§alÄ±ÅŸma zamanÄ± varsayÄ±lanÄ± kullanÄ±lÄ±r. AyrÄ±ca SecurityContext iÃ§inde de ayarlanabilir.                                                                                                                                                                                                                                                                                                                                                        |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsNonRoot</strong></a><br><em>mantÄ±ksal</em></p>                                                                                                                                                                                                                                            | Konteynerin bir kÃ¶k kullanÄ±cÄ± olarak Ã§alÄ±ÅŸmamasÄ± gerektiÄŸini belirtir. EÄŸer true ise, Kubelet, konteynerin UID 0 (kÃ¶k) olarak Ã§alÄ±ÅŸmadÄ±ÄŸÄ±ndan emin olmak iÃ§in gÃ¶rÃ¼ntÃ¼yÃ¼ Ã§alÄ±ÅŸma zamanÄ±nda doÄŸrular ve konteyneri baÅŸlatamazsa hata verir.                                                                                                                                                                                                                                                                          |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>runAsUser</strong></a><br><em>tamsayÄ±</em></p>                                                                                                                                                                                                                                               | Konteyner sÃ¼recinin **giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lacak UID**. BelirtilmemiÅŸse, gÃ¶rÃ¼ntÃ¼ meta verilerinde belirtilen kullanÄ±cÄ±ya varsayÄ±lan olarak ayarlanÄ±r.                                                                                                                                                                                                                                                                                                                                                              |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>seLinuxOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#selinuxoptions-v1-core"><em>SELinuxOptions</em></a><br><em>seLinux hakkÄ±nda daha fazla bilgi</em></p>                                                           | **TÃ¼m konteynerlara uygulanacak SELinux baÄŸlamÄ±**. BelirtilmemiÅŸse, konteyner Ã§alÄ±ÅŸma zamanÄ± her konteyner iÃ§in rastgele bir SELinux baÄŸlamÄ± tahsis eder.                                                                                                                                                                                                                                                                                                                             |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>seccompProfile</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#seccompprofile-v1-core"><em>SeccompProfile</em></a><br><em>Seccomp hakkÄ±nda daha fazla bilgi</em></p>                                                           | Bu Pod'daki konteynerler tarafÄ±ndan kullanÄ±lacak **seccomp seÃ§enekleri**.                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>supplementalGroups</strong></a><br><em>tamsayÄ± dizisi</em></p>                                                                                                                                                                                                                                | Her konteynerde **ilk olarak Ã§alÄ±ÅŸtÄ±rÄ±lan sÃ¼rece uygulanan gruplarÄ±n listesi**, konteynerin birincil GID'sine ek olarak.                                                                                                                                                                                                                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>sysctls</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#sysctl-v1-core"><em>Sysctl</em></a> <em>dizi</em><br><em>sysctl hakkÄ±nda daha fazla bilgi</em></p> | Sysctls, Pod iÃ§in kullanÄ±lan **isim alanlÄ± sysctl'lerin bir listesini** tutar. Konteyner Ã§alÄ±ÅŸma zamanÄ± tarafÄ±ndan desteklenmeyen sysctl'lerle (tarafÄ±ndan) Ã§alÄ±ÅŸtÄ±rÄ±lan Pod'lar baÅŸlatÄ±lamaz.                                                                                                                                                                                                                                                                                                                                        |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core"><strong>windowsOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#windowssecuritycontextoptions-v1-core"><em>WindowsSecurityContextOptions</em></a></p>                                                                                           | TÃ¼m konteynerlara uygulanan Windows Ã¶zel ayarlar. BelirtilmemiÅŸse, bir konteynerin SecurityContext iÃ§indeki seÃ§enekler kullanÄ±lÄ±r.                                                                                                                                                                                                                                                                                                                                               |
## SecurityContext

[**DokÃ¼mantasyondan:**](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core)

Bu baÄŸlam, **konteyner tanÄ±mlarÄ±** iÃ§inde ayarlanÄ±r. Savunma odaklÄ± bir gÃ¼venlik aÃ§Ä±sÄ±ndan aÅŸaÄŸÄ±daki hususlarÄ± gÃ¶z Ã¶nÃ¼nde bulundurmalÄ±sÄ±nÄ±z:

* **allowPrivilegeEscalation**'Ä± **False** olarak ayarlayÄ±n
* Hassas **yetenekleri** eklemeyin (ve ihtiyaÃ§ duymadÄ±klarÄ±nÄ±zÄ± kaldÄ±rÄ±n)
* **privileged**'Ä± **False** olarak ayarlayÄ±n
* MÃ¼mkÃ¼nse, **readOnlyFilesystem**'i **True** olarak ayarlayÄ±n
* **runAsNonRoot**'u **True** olarak ayarlayÄ±n ve bir **runAsUser** belirleyin
* MÃ¼mkÃ¼nse, **seLinuxOptions** ve **seccompProfile**'Ä± belirterek **izinleri sÄ±nÄ±rlayÄ±n**
* **runAsGroup** Ã¼zerinden **privilege** **group** eriÅŸimini **VERMEYÄ°N.**

UnutmayÄ±n ki, **SecurityContext** ve **PodSecurityContext** iÃ§inde ayarlanan Ã¶zelliklerde, **SecurityContext**'te belirtilen deÄŸer Ã¶nceliklidir.

| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>allowPrivilegeEscalation</strong></a><br><em>boolean</em></p>                                                                                                                                                                      | **AllowPrivilegeEscalation**, bir iÅŸlemin **ebeveyn iÅŸleminden daha fazla ayrÄ±calÄ±k kazanÄ±p kazanamayacaÄŸÄ±nÄ±** kontrol eder. Bu bool, no\_new\_privs bayraÄŸÄ±nÄ±n konteyner iÅŸlemine ayarlanÄ±p ayarlanmayacaÄŸÄ±nÄ± doÄŸrudan kontrol eder. AllowPrivilegeEscalation, konteyner **Privileged** olarak Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ÄŸÄ±nda veya **CAP\_SYS\_ADMIN**'e sahip olduÄŸunda her zaman true'dur. |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>capabilities</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#capabilities-v1-core"><em>Capabilities</em></a><br><em>Capabilities</em> <em>hakkÄ±nda daha fazla bilgi</em></p>  | Konteynerler Ã§alÄ±ÅŸtÄ±rÄ±lÄ±rken **eklenecek/dÃ¼ÅŸÃ¼rÃ¼lecek yetenekler**. VarsayÄ±lan olarak, varsayÄ±lan yetenek kÃ¼mesi kullanÄ±lÄ±r.                                                                                                                                                                                                                    |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>privileged</strong></a><br><em>boolean</em></p>                                                                                                                                                                                    | AyrÄ±calÄ±klÄ± modda konteyneri Ã§alÄ±ÅŸtÄ±rÄ±n. AyrÄ±calÄ±klÄ± konteynerlerdeki iÅŸlemler, temelde **ana bilgisayardaki root ile eÅŸdeÄŸerdir**. VarsayÄ±lan olarak false'dur.                                                                                                                                                                               |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>procMount</strong></a><br><em>string</em></p>                                                                                                                                                                                      | procMount, konteynerler iÃ§in kullanÄ±lacak **proc mount tÃ¼rÃ¼nÃ¼** belirtir. VarsayÄ±lan olarak, DefaultProcMount kullanÄ±lÄ±r ve salt okunur yollarÄ± ve maskelenmiÅŸ yollarÄ± iÃ§in konteyner Ã§alÄ±ÅŸma zamanÄ± varsayÄ±lanlarÄ±nÄ± kullanÄ±r.                                                                                                                                    |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>readOnlyRootFilesystem</strong></a><br><em>boolean</em></p>                                                                                                                                                                        | Bu **konteynerin salt okunur bir kÃ¶k dosya sistemi** olup olmadÄ±ÄŸÄ±nÄ± belirtir. VarsayÄ±lan olarak false'dur.                                                                                                                                                                                                                                             |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsGroup</strong></a><br><em>integer</em></p>                                                                                                                                                                                    | Konteyner iÅŸlemi giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in **GID**'yi belirtir. AyarlanmamÄ±ÅŸsa, Ã§alÄ±ÅŸma zamanÄ± varsayÄ±lanÄ± kullanÄ±lÄ±r.                                                                                                                                                                                                                                |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsNonRoot</strong></a><br><em>boolean</em></p>                                                                                                                                                                                  | Konteynerin **root kullanÄ±cÄ±sÄ± olarak Ã§alÄ±ÅŸmamasÄ± gerektiÄŸini** belirtir. True ise, Kubelet, konteynerin baÅŸlatÄ±lamamasÄ± iÃ§in Ã§alÄ±ÅŸma zamanÄ±nda gÃ¶rÃ¼ntÃ¼yÃ¼ UID 0 (root) olarak Ã§alÄ±ÅŸtÄ±rmamasÄ±nÄ± doÄŸrulayacaktÄ±r.                                                                                                          |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>runAsUser</strong></a><br><em>integer</em></p>                                                                                                                                                                                     | Konteyner iÅŸlemi giriÅŸ noktasÄ±nÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in **UID**'yi belirtir. AyarlanmamÄ±ÅŸsa, gÃ¶rÃ¼ntÃ¼ meta verilerinde belirtilen kullanÄ±cÄ±ya varsayÄ±lan olarak ayarlanÄ±r.                                                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>seLinuxOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#selinuxoptions-v1-core"><em>SELinuxOptions</em></a><br><em>seLinux</em> <em>hakkÄ±nda daha fazla bilgi</em></p> | Konteynere uygulanacak **SELinux baÄŸlamÄ±nÄ±** belirtir. BelirtilmemiÅŸse, konteyner Ã§alÄ±ÅŸma zamanÄ± her konteyner iÃ§in rastgele bir SELinux baÄŸlamÄ± tahsis eder.                                                                                                                                                                  |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>seccompProfile</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#seccompprofile-v1-core"><em>SeccompProfile</em></a></p>                                                               | Bu konteyner tarafÄ±ndan kullanÄ±lacak **seccomp seÃ§enekleri**.                                                                                                                                                                                                                                                                         |
| <p><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core"><strong>windowsOptions</strong></a><br><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#windowssecuritycontextoptions-v1-core"><em>WindowsSecurityContextOptions</em></a></p>                                 | TÃ¼m konteynerlere uygulanan **Windows Ã¶zel ayarlarÄ±**.                                                                                                                                                                                                                                                              |

## Referanslar

* [https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podsecuritycontext-v1-core)
* [https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#securitycontext-v1-core)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin!</summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklam vermek veya HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINA**](https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) katÄ±lÄ±n veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na PR gÃ¶ndererek paylaÅŸÄ±n.

</details>
