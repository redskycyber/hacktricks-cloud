# Teste de PenetraÃ§Ã£o no Kubernetes

<details>

<summary><strong>Aprenda hacking na AWS do zero ao herÃ³i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se vocÃª deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A FamÃ­lia PEASS**](https://opensea.io/collection/the-peass-family), nossa coleÃ§Ã£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** ğŸ’¬ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe seus truques de hacking enviando PRs para os repositÃ³rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>

## Conceitos BÃ¡sicos do Kubernetes

Se vocÃª nÃ£o sabe nada sobre o Kubernetes, este Ã© um **bom comeÃ§o**. Leia para aprender sobre a **arquitetura, componentes e aÃ§Ãµes bÃ¡sicas** no Kubernetes:

{% content-ref url="kubernetes-basics.md" %}
[kubernetes-basics.md](kubernetes-basics.md)
{% endcontent-ref %}

### LaboratÃ³rios para praticar e aprender

* [https://securekubernetes.com/](https://securekubernetes.com)
* [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## ReforÃ§o de SeguranÃ§a no Kubernetes / Ferramentas AutomÃ¡ticas

{% content-ref url="kubernetes-hardening/" %}
[kubernetes-hardening](kubernetes-hardening/)
{% endcontent-ref %}

## Teste de PenetraÃ§Ã£o Manual no Kubernetes

### De Fora

Existem vÃ¡rios **serviÃ§os do Kubernetes que podem estar expostos** na Internet (ou em redes internas). Se vocÃª os encontrar, saberÃ¡ que hÃ¡ um ambiente Kubernetes lÃ¡.

Dependendo da configuraÃ§Ã£o e de seus privilÃ©gios, vocÃª pode ser capaz de abusar desse ambiente, para mais informaÃ§Ãµes:

{% content-ref url="pentesting-kubernetes-services/" %}
[pentesting-kubernetes-services](pentesting-kubernetes-services/)
{% endcontent-ref %}

### EnumeraÃ§Ã£o dentro de um Pod

Se vocÃª conseguir **comprometer um Pod**, leia a pÃ¡gina a seguir para aprender como enumerar e tentar **elevar privilÃ©gios/escapar**:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

### Enumerando o Kubernetes com Credenciais

VocÃª pode ter conseguido comprometer **credenciais de usuÃ¡rio, um token de usuÃ¡rio ou um token de conta de serviÃ§o**. VocÃª pode usÃ¡-lo para falar com o serviÃ§o da API do Kubernetes e tentar **enumerÃ¡-lo para aprender mais** sobre ele:

{% content-ref url="kubernetes-enumeration.md" %}
[kubernetes-enumeration.md](kubernetes-enumeration.md)
{% endcontent-ref %}

Outro detalhe importante sobre a enumeraÃ§Ã£o e abuso de permissÃµes do Kubernetes Ã© o **Controle de Acesso Baseado em FunÃ§Ã£o (RBAC) do Kubernetes**. Se vocÃª deseja abusar de permissÃµes, primeiro deve ler sobre isso aqui:

{% content-ref url="kubernetes-role-based-access-control-rbac.md" %}
[kubernetes-role-based-access-control-rbac.md](kubernetes-role-based-access-control-rbac.md)
{% endcontent-ref %}

#### Sabendo sobre o RBAC e tendo enumerado o ambiente, agora vocÃª pode tentar abusar das permissÃµes com:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### EscalaÃ§Ã£o de PrivilÃ©gios para um Namespace Diferente

Se vocÃª comprometeu um namespace, potencialmente pode escapar para outros namespaces com permissÃµes/recursos mais interessantes:

{% content-ref url="kubernetes-namespace-escalation.md" %}
[kubernetes-namespace-escalation.md](kubernetes-namespace-escalation.md)
{% endcontent-ref %}

### Do Kubernetes para a Nuvem

Se vocÃª comprometeu uma conta K8s ou um pod, pode ser capaz de se mover para outras nuvens. Isso ocorre porque em nuvens como AWS ou GCP Ã© possÃ­vel **dar permissÃµes de um SA K8s sobre a nuvem**.

{% content-ref url="kubernetes-pivoting-to-clouds.md" %}
[kubernetes-pivoting-to-clouds.md](kubernetes-pivoting-to-clouds.md)
{% endcontent-ref %}

<details>

<summary><strong>Aprenda hacking na AWS do zero ao herÃ³i com</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Outras formas de apoiar o HackTricks:

* Se vocÃª deseja ver sua **empresa anunciada no HackTricks** ou **baixar o HackTricks em PDF**, confira os [**PLANOS DE ASSINATURA**](https://github.com/sponsors/carlospolop)!
* Adquira o [**swag oficial do PEASS & HackTricks**](https://peass.creator-spring.com)
* Descubra [**A FamÃ­lia PEASS**](https://opensea.io/collection/the-peass-family), nossa coleÃ§Ã£o exclusiva de [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Junte-se ao** ğŸ’¬ [**grupo do Discord**](https://discord.gg/hRep4RUj7f) ou ao [**grupo do telegram**](https://t.me/peass) ou **siga-me** no **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Compartilhe seus truques de hacking enviando PRs para os repositÃ³rios do** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud).

</details>
