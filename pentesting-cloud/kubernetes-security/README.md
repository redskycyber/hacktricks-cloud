# Kubernetes Pentesting

<details>

<summary><strong>ÎœÎ¬Î¸ÎµÏ„Îµ Ï„Î¿ Ï‡Î¬ÎºÎ¹Î½Î³Îº Ï„Î¿Ï… AWS Î±Ï€ÏŒ Ï„Î¿ Î¼Î·Î´Î­Î½ Î¼Î­Ï‡ÏÎ¹ Ï„Î¿Î½ Î®ÏÏ‰Î± Î¼Îµ Ï„Î¿</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Î†Î»Î»Î¿Î¹ Ï„ÏÏŒÏ€Î¿Î¹ Î³Î¹Î± Î½Î± Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¾ÎµÏ„Îµ Ï„Î¿ HackTricks:

* Î•Î¬Î½ Î¸Î­Î»ÎµÏ„Îµ Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î·Î½ **ÎµÏ„Î±Î¹ÏÎµÎ¯Î± ÏƒÎ±Ï‚ Î½Î± Î´Î¹Î±Ï†Î·Î¼Î¯Î¶ÎµÏ„Î±Î¹ ÏƒÏ„Î¿ HackTricks** Î® Î½Î± **ÎºÎ±Ï„ÎµÎ²Î¬ÏƒÎµÏ„Îµ Ï„Î¿ HackTricks ÏƒÎµ Î¼Î¿ÏÏ†Î® PDF** ÎµÎ»Î­Î³Î¾Ï„Îµ Ï„Î± [**Î£Î§Î•Î”Î™Î‘ Î£Î¥ÎÎ”Î¡ÎŸÎœÎ—Î£**](https://github.com/sponsors/carlospolop)!
* Î‘Ï€Î¿ÎºÏ„Î®ÏƒÏ„Îµ Ï„Î¿ [**ÎµÏ€Î¯ÏƒÎ·Î¼Î¿ PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Î‘Î½Î±ÎºÎ±Î»ÏÏˆÏ„Îµ [**The PEASS Family**](https://opensea.io/collection/the-peass-family), Ï„Î· ÏƒÏ…Î»Î»Î¿Î³Î® Î¼Î±Ï‚ Î±Ï€ÏŒ Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÎ¬ [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Î•Î³Î³ÏÎ±Ï†ÎµÎ¯Ï„Îµ ÏƒÏ„Î·Î½** ğŸ’¬ [**Î¿Î¼Î¬Î´Î± Discord**](https://discord.gg/hRep4RUj7f) Î® ÏƒÏ„Î·Î½ [**Î¿Î¼Î¬Î´Î± telegram**](https://t.me/peass) Î® **Î±ÎºÎ¿Î»Î¿Ï…Î¸Î®ÏƒÏ„Îµ** Î¼Îµ ÏƒÏ„Î¿ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **ÎœÎ¿Î¹ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Ï„Î± Ï‡Î¬ÎºÎ¹Î½Î³Îº ÎºÏŒÎ»Ï€Î± ÏƒÎ±Ï‚ Ï…Ï€Î¿Î²Î¬Î»Î»Î¿Î½Ï„Î±Ï‚ PRs ÏƒÏ„Î±** [**HackTricks**](https://github.com/carlospolop/hacktricks) ÎºÎ±Î¹ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) Î±Ï€Î¿Î¸ÎµÏ„Î®ÏÎ¹Î± Ï„Î¿Ï… github.

</details>

## Î’Î±ÏƒÎ¹ÎºÎ¬ Î³Î¹Î± Ï„Î¿ Kubernetes

Î•Î¬Î½ Î´ÎµÎ½ Î³Î½Ï‰ÏÎ¯Î¶ÎµÏ„Îµ Ï„Î¯Ï€Î¿Ï„Î± Î³Î¹Î± Ï„Î¿ Kubernetes, Î±Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ Î­Î½Î± **ÎºÎ±Î»ÏŒ Î¾ÎµÎºÎ¯Î½Î·Î¼Î±**. Î”Î¹Î±Î²Î¬ÏƒÏ„Îµ Ï„Î¿ Î³Î¹Î± Î½Î± Î¼Î¬Î¸ÎµÏ„Îµ Î³Î¹Î± Ï„Î·Î½ **Î±ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ®, Ï„Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÎºÎ±Î¹ Ï„Î¹Ï‚ Î²Î±ÏƒÎ¹ÎºÎ­Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚** ÏƒÏ„Î¿ Kubernetes:

{% content-ref url="kubernetes-basics.md" %}
[kubernetes-basics.md](kubernetes-basics.md)
{% endcontent-ref %}

### Î•ÏÎ³Î±ÏƒÏ„Î®ÏÎ¹Î± Î³Î¹Î± ÎµÎ¾Î¬ÏƒÎºÎ·ÏƒÎ· ÎºÎ±Î¹ Î¼Î¬Î¸Î·ÏƒÎ·

* [https://securekubernetes.com/](https://securekubernetes.com)
* [https://madhuakula.com/kubernetes-goat/index.html](https://madhuakula.com/kubernetes-goat/index.html)

## Î•Î½Î¯ÏƒÏ‡Ï…ÏƒÎ· Ï„Î·Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚ Ï„Î¿Ï… Kubernetes / Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î± ÎµÏÎ³Î±Î»ÎµÎ¯Î±

{% content-ref url="kubernetes-hardening/" %}
[kubernetes-hardening](kubernetes-hardening/)
{% endcontent-ref %}

## Î§ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î¿Ï‚ Î­Î»ÎµÎ³Ï‡Î¿Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚ Ï„Î¿Ï… Kubernetes

### Î‘Ï€ÏŒ Ï„Î¿ ÎµÎ¾Ï‰Ï„ÎµÏÎ¹ÎºÏŒ

Î¥Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±ÏÎºÎµÏ„Î­Ï‚ Ï€Î¹Î¸Î±Î½Î­Ï‚ **Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Kubernetes Ï€Î¿Ï… Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Î²ÏÎµÎ¯Ï„Îµ ÎµÎºÏ„ÎµÎ¸ÎµÎ¹Î¼Î­Î½ÎµÏ‚** ÏƒÏ„Î¿ Î”Î¹Î±Î´Î¯ÎºÏ„Ï…Î¿ (Î® ÎµÎ½Ï„ÏŒÏ‚ ÎµÏƒÏ‰Ï„ÎµÏÎ¹ÎºÏÎ½ Î´Î¹ÎºÏ„ÏÏ‰Î½). Î•Î¬Î½ Ï„Î¹Ï‚ Î²ÏÎµÎ¯Ï„Îµ, Î¾Î­ÏÎµÏ„Îµ ÏŒÏ„Î¹ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½ Kubernetes ÎµÎºÎµÎ¯.

Î‘Î½Î¬Î»Î¿Î³Î± Î¼Îµ Ï„Î· Î´Î¹Î±Î¼ÏŒÏÏ†Ï‰ÏƒÎ· ÎºÎ±Î¹ Ï„Î± Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î¬ ÏƒÎ±Ï‚, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± ÎºÎ±Ï„Î±Ï‡ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½, Î³Î¹Î± Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Ï€Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚:

{% content-ref url="pentesting-kubernetes-services/" %}
[pentesting-kubernetes-services](pentesting-kubernetes-services/)
{% endcontent-ref %}

### Î‘Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· Î¼Î­ÏƒÎ± Î±Ï€ÏŒ Î­Î½Î± Pod

Î•Î¬Î½ ÎºÎ±Ï„Î±Ï†Î­ÏÎµÏ„Îµ Î½Î± **Ï€Î±ÏÎ±Î²Î¹Î¬ÏƒÎµÏ„Îµ Î­Î½Î± Pod**, Î´Î¹Î±Î²Î¬ÏƒÏ„Îµ Ï„Î·Î½ Ï€Î±ÏÎ±ÎºÎ¬Ï„Ï‰ ÏƒÎµÎ»Î¯Î´Î± Î³Î¹Î± Î½Î± Î¼Î¬Î¸ÎµÏ„Îµ Ï€ÏÏ‚ Î½Î± Î±Ï€Î±ÏÎ¹Î¸Î¼Î®ÏƒÎµÏ„Îµ ÎºÎ±Î¹ Î½Î± Ï€ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÎµÏ„Îµ Î½Î± **Î±Î½Î±Î²Î±Î¸Î¼Î¯ÏƒÎµÏ„Îµ Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î±/Î´ÏÎ±Ï€ÎµÏ„ÎµÏÏƒÎµÏ„Îµ**:

{% content-ref url="attacking-kubernetes-from-inside-a-pod.md" %}
[attacking-kubernetes-from-inside-a-pod.md](attacking-kubernetes-from-inside-a-pod.md)
{% endcontent-ref %}

### Î‘Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· Ï„Î¿Ï… Kubernetes Î¼Îµ Î´Î¹Î±Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î®ÏÎ¹Î±

ÎœÏ€Î¿ÏÎµÎ¯ Î½Î± ÎºÎ±Ï„Î±Ï†Î­ÏÎ±Ï„Îµ Î½Î± Ï€Î±ÏÎ±Î²Î¹Î¬ÏƒÎµÏ„Îµ **Î´Î¹Î±Ï€Î¹ÏƒÏ„ÎµÏ…Ï„Î®ÏÎ¹Î± Ï‡ÏÎ®ÏƒÏ„Î·, Î­Î½Î± Î´Î¹Î±ÎºÏÎ¹Ï„Î¹ÎºÏŒ Ï‡ÏÎ®ÏƒÏ„Î· Î® ÎºÎ¬Ï€Î¿Î¹Î¿ Î´Î¹Î±ÎºÏÎ¹Ï„Î¹ÎºÏŒ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚**. ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï„Î¿ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î®ÏƒÎµÏ„Îµ Î³Î¹Î± Î½Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎµÏ„Îµ Î¼Îµ Ï„Î·Î½ Ï…Ï€Î·ÏÎµÏƒÎ¯Î± Kubernetes API ÎºÎ±Î¹ Î½Î± Ï€ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÎµÏ„Îµ Î½Î± **Î±Ï€Î±ÏÎ¹Î¸Î¼Î®ÏƒÎµÏ„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ±** Î³Î¹Î± Î±Ï…Ï„Î®Î½:

{% content-ref url="kubernetes-enumeration.md" %}
[kubernetes-enumeration.md](kubernetes-enumeration.md)
{% endcontent-ref %}

ÎˆÎ½Î± Î¬Î»Î»Î¿ ÏƒÎ·Î¼Î±Î½Ï„Î¹ÎºÏŒ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î¿ Î³Î¹Î± Ï„Î·Î½ Î±Ï€Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ· ÎºÎ±Î¹ Ï„Î·Î½ ÎºÎ±Ï„Î¬Ï‡ÏÎ·ÏƒÎ· Ï„Ï‰Î½ Î´Î¹ÎºÎ±Î¹Ï‰Î¼Î¬Ï„Ï‰Î½ Ï„Î¿Ï… Kubernetes ÎµÎ¯Î½Î±Î¹ Î¿ **ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î ÏÏŒÏƒÎ²Î±ÏƒÎ·Ï‚ Î¼Îµ Î’Î¬ÏƒÎ· Ï„Î¿Î½ Î¡ÏŒÎ»Î¿ (RBAC) Ï„Î¿Ï… Kubernetes**. Î•Î¬Î½ Î¸Î­Î»ÎµÏ„Îµ Î½Î± ÎºÎ±Ï„Î±Ï‡ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î±, Ï€ÏÎ­Ï€ÎµÎ¹ Ï€ÏÏÏ„Î± Î½Î± Ï„Î¿ Î´Î¹Î±Î²Î¬ÏƒÎµÏ„Îµ ÎµÎ´Ï:

{% content-ref url="kubernetes-role-based-access-control-rbac.md" %}
[kubernetes-role-based-access-control-rbac.md](kubernetes-role-based-access-control-rbac.md)
{% endcontent-ref %}

#### Î“Î½Ï‰ÏÎ¯Î¶Î¿Î½Ï„Î±Ï‚ Î³Î¹Î± Ï„Î¿ RBAC ÎºÎ±Î¹ Î­Ï‡Î¿Î½Ï„Î±Ï‚ Î±Ï€Î±ÏÎ¹Î¸Î¼Î®ÏƒÎµÎ¹ Ï„Î¿ Ï€ÎµÏÎ¹Î²Î¬Î»Î»Î¿Î½, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Ï„ÏÏÎ± Î½Î± Ï€ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÎµÏ„Îµ Î½Î± ÎºÎ±Ï„Î±Ï‡ÏÎ±ÏƒÏ„ÎµÎ¯Ï„Îµ Ï„Î± Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î± Î¼Îµ:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Î‘Î½Î­Î²Î±ÏƒÎ¼Î± ÏƒÎµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÏŒ Namespace

Î•Î¬Î½ Î­Ï‡ÎµÏ„Îµ Ï€Î±ÏÎ±Î²Î¹Î¬ÏƒÎµÎ¹ Î­Î½Î± namespace, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Ï€Î¹Î¸Î±Î½ÏÏ‚ Î½Î± Î´ÏÎ±Ï€ÎµÏ„ÎµÏÏƒÎµÏ„Îµ ÏƒÎµ Î¬Î»Î»Î± namespaces Î¼Îµ Ï€Î¹Î¿ ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î½Ï„Î± Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î±/Ï€ÏŒÏÎ¿Ï…Ï‚:

{% content-ref url="kubernetes-namespace-escalation.md" %}
[kubernetes-namespace-escalation.md](kubernetes-namespace-escalation.md)
{% endcontent-ref %}

### Î‘Ï€ÏŒ Ï„Î¿ Kubernetes ÏƒÏ„Î¿ Cloud

Î•Î¬Î½ Î­Ï‡ÎµÏ„Îµ Ï€Î±ÏÎ±Î²Î¹Î¬ÏƒÎµÎ¹ Î­Î½Î±Î½ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ K8s Î® Î­Î½Î± pod, Î¼Ï€Î¿ÏÎµÎ¯Ï„Îµ Ï€Î¹Î¸Î±Î½ÏÏ‚ Î½Î± Î¼ÎµÏ„Î±ÎºÎ¹Î½Î·Î¸ÎµÎ¯Ï„Îµ ÏƒÎµ Î¬Î»Î»Î± cloud. Î‘Ï…Ï„ÏŒ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ ÎµÏ€ÎµÎ¹Î´Î® ÏƒÎµ cloud ÏŒÏ€Ï‰Ï‚ Ï„Î¿ AWS Î® Ï„Î¿ GCP ÎµÎ¯Î½Î±Î¹ Î´Ï…Î½Î±Ï„ÏŒÎ½ Î½Î± \*\*Î´Ï
