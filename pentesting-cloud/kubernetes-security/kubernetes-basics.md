# KubernetesåŸºç¡€çŸ¥è¯†

## KubernetesåŸºç¡€çŸ¥è¯†

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFç‰ˆçš„HackTricksï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘**[**HackTricks**](https://github.com/carlospolop/hacktricks)å’Œ[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

**æœ¬é¡µé¢çš„åŸå§‹ä½œè€…æ˜¯**[**Jorge**](https://www.linkedin.com/in/jorge-belmonte-a924b616b/) **ï¼ˆé˜…è¯»ä»–çš„åŸå§‹å¸–å­**[**è¿™é‡Œ**](https://sickrov.github.io)**ï¼‰**

## æ¶æ„å’ŒåŸºç¡€çŸ¥è¯†

### Kubernetesæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ

* å…è®¸åœ¨å®¹å™¨å¼•æ“ä¸­è¿è¡Œå®¹å™¨ã€‚
* è°ƒåº¦å…è®¸å®¹å™¨é«˜æ•ˆåœ°æ‰§è¡Œä»»åŠ¡ã€‚
* ä¿æŒå®¹å™¨çš„è¿è¡Œã€‚
* å…è®¸å®¹å™¨ä¹‹é—´çš„é€šä¿¡ã€‚
* å…è®¸éƒ¨ç½²æŠ€æœ¯ã€‚
* å¤„ç†å¤§é‡ä¿¡æ¯ã€‚

### æ¶æ„

![](https://sickrov.github.io/media/Screenshot-68.jpg)

* **èŠ‚ç‚¹**ï¼šå…·æœ‰Podæˆ–å¤šä¸ªPodçš„æ“ä½œç³»ç»Ÿã€‚
* **Pod**ï¼šåŒ…è£…å®¹å™¨æˆ–å¤šä¸ªå®¹å™¨çš„å®¹å™¨ã€‚ä¸€ä¸ªPodåº”è¯¥åªåŒ…å«ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆå› æ­¤é€šå¸¸ä¸€ä¸ªPodåªè¿è¡Œä¸€ä¸ªå®¹å™¨ï¼‰ã€‚Podæ˜¯KubernetesæŠ½è±¡å®¹å™¨æŠ€æœ¯è¿è¡Œçš„æ–¹å¼ã€‚
* **æœåŠ¡**ï¼šæ¯ä¸ªPodéƒ½æœ‰ä¸€ä¸ªæ¥è‡ªèŠ‚ç‚¹å†…éƒ¨èŒƒå›´çš„å†…éƒ¨**IPåœ°å€**ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿå¯ä»¥é€šè¿‡æœåŠ¡è¿›è¡Œå…¬å¼€ã€‚**æœåŠ¡ä¹Ÿæœ‰ä¸€ä¸ªIPåœ°å€**ï¼Œå…¶ç›®æ ‡æ˜¯ç»´æŠ¤Podä¹‹é—´çš„é€šä¿¡ï¼Œå› æ­¤å¦‚æœä¸€ä¸ªPodæ­»äº¡ï¼Œ**æ–°çš„æ›¿ä»£å“**ï¼ˆå…·æœ‰ä¸åŒçš„å†…éƒ¨IPï¼‰å°†åœ¨**æœåŠ¡çš„ç›¸åŒIPä¸­å¯è®¿é—®**ã€‚å®ƒå¯ä»¥é…ç½®ä¸ºå†…éƒ¨æˆ–å¤–éƒ¨ã€‚å½“ä¸¤ä¸ªPodè¿æ¥åˆ°åŒä¸€ä¸ªæœåŠ¡æ—¶ï¼ŒæœåŠ¡è¿˜å……å½“**è´Ÿè½½å‡è¡¡å™¨**ã€‚\
åˆ›å»º**æœåŠ¡**åï¼Œå¯ä»¥é€šè¿‡è¿è¡Œ`kubectl get endpoints`æ¥æŸ¥æ‰¾æ¯ä¸ªæœåŠ¡çš„ç«¯ç‚¹ã€‚
* **Kubelet**ï¼šä¸»è¦çš„èŠ‚ç‚¹ä»£ç†ã€‚è¯¥ç»„ä»¶åœ¨èŠ‚ç‚¹å’Œkubectlä¹‹é—´å»ºç«‹é€šä¿¡ï¼Œå¹¶ä¸”åªèƒ½è¿è¡ŒPodï¼ˆé€šè¿‡APIæœåŠ¡å™¨ï¼‰ã€‚Kubeletä¸ç®¡ç†ç”±Kubernetesåˆ›å»ºçš„å®¹å™¨ã€‚
* **Kube-proxy**ï¼šè´Ÿè´£ä¸apiserverå’ŒèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ï¼ˆæœåŠ¡ï¼‰çš„æœåŠ¡ã€‚åŸºç¡€æ˜¯èŠ‚ç‚¹çš„IPtablesã€‚æœ‰ç»éªŒçš„ç”¨æˆ·å¯ä»¥å®‰è£…å…¶ä»–ä¾›åº”å•†çš„kube-proxyã€‚
* **Sidecarå®¹å™¨**ï¼šSidecarå®¹å™¨æ˜¯åº”ä¸Podä¸­çš„ä¸»è¦å®¹å™¨ä¸€èµ·è¿è¡Œçš„å®¹å™¨ã€‚è¿™ç§Sidecaræ¨¡å¼æ‰©å±•å’Œå¢å¼ºäº†å½“å‰å®¹å™¨çš„åŠŸèƒ½ï¼Œè€Œä¸æ”¹å˜å®ƒä»¬ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬ä½¿ç”¨å®¹å™¨æŠ€æœ¯æ¥å°è£…åº”ç”¨ç¨‹åºåœ¨ä»»ä½•åœ°æ–¹è¿è¡Œçš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚å®¹å™¨åªåšä¸€ä»¶äº‹ï¼Œå¹¶ä¸”åšå¾—éå¸¸å¥½ã€‚
* **ä¸»è¿›ç¨‹**ï¼š
* **APIæœåŠ¡å™¨**ï¼šæ˜¯ç”¨æˆ·å’ŒPodä¸ä¸»è¿›ç¨‹é€šä¿¡çš„æ–¹å¼ã€‚åªå…è®¸ç»è¿‡èº«ä»½éªŒè¯çš„è¯·æ±‚ã€‚
* **è°ƒåº¦å™¨**ï¼šè°ƒåº¦æ˜¯æŒ‡ç¡®ä¿Podä¸èŠ‚ç‚¹åŒ¹é…ï¼Œä»¥ä¾¿Kubeletå¯ä»¥è¿è¡Œå®ƒä»¬ã€‚å®ƒå…·æœ‰è¶³å¤Ÿçš„æ™ºèƒ½æ¥å†³å®šå“ªä¸ªèŠ‚ç‚¹å…·æœ‰æ›´å¤šå¯ç”¨èµ„æºï¼Œå¹¶å°†æ–°çš„Podåˆ†é…ç»™è¯¥èŠ‚ç‚¹ã€‚è¯·æ³¨æ„ï¼Œè°ƒåº¦å™¨ä¸ä¼šå¯åŠ¨æ–°çš„Podï¼Œå®ƒåªä¸èŠ‚ç‚¹å†…è¿è¡Œçš„Kubeletè¿›ç¨‹é€šä¿¡ï¼Œåè€…å°†å¯åŠ¨æ–°çš„Podã€‚
* **Kubeæ§åˆ¶å™¨ç®¡ç†å™¨**ï¼šå®ƒæ£€æŸ¥èµ„æºï¼ˆå¦‚å‰¯æœ¬é›†æˆ–éƒ¨ç½²ï¼‰ä»¥æ£€æŸ¥æ˜¯å¦è¿è¡Œäº†æ­£ç¡®æ•°é‡çš„Podæˆ–èŠ‚ç‚¹ã€‚å¦‚æœç¼ºå°‘ä¸€ä¸ªPodï¼Œå®ƒå°†ä¸è°ƒåº¦å™¨é€šä¿¡ä»¥å¯åŠ¨ä¸€ä¸ªæ–°çš„Podã€‚å®ƒæ§åˆ¶å¤åˆ¶ã€ä»¤ç‰Œå’Œå‘APIæä¾›æœåŠ¡çš„å¸æˆ·ã€‚
* **etcd**ï¼šæ•°æ®å­˜å‚¨ï¼ŒæŒä¹…ã€ä¸€è‡´å’Œåˆ†å¸ƒå¼ã€‚æ˜¯Kubernetesçš„æ•°æ®åº“å’Œé”®å€¼å­˜å‚¨ï¼Œå®ƒä¿æŒé›†ç¾¤çš„å®Œæ•´çŠ¶æ€ï¼ˆæ¯ä¸ªæ›´æ”¹éƒ½åœ¨æ­¤å¤„è®°å½•ï¼‰ã€‚è°ƒåº¦å™¨æˆ–æ§åˆ¶å™¨ç®¡ç†å™¨ç­‰ç»„ä»¶ä¾èµ–äºæ­¤æ•°æ®æ¥äº†è§£å‘ç”Ÿäº†å“ªäº›æ›´æ”¹ï¼ˆèŠ‚ç‚¹çš„å¯ç”¨èµ„æºã€è¿è¡Œçš„Podæ•°é‡ç­‰ï¼‰ã€‚
* **äº‘æ§åˆ¶å™¨ç®¡ç†å™¨**ï¼šæ˜¯ç”¨äºæµé‡æ§åˆ¶å’Œåº”ç”¨ç¨‹åºçš„ç‰¹å®šæ§åˆ¶å™¨ï¼Œä¾‹å¦‚ï¼šå¦‚æœæ‚¨åœ¨AWSæˆ–OpenStackä¸­æœ‰é›†ç¾¤ã€‚

è¯·æ³¨æ„ï¼Œç”±äºå¯èƒ½æœ‰å¤šä¸ªèŠ‚ç‚¹ï¼ˆè¿è¡Œå¤šä¸ªPodï¼‰ï¼Œå› æ­¤å¯èƒ½è¿˜æœ‰å¤šä¸ªä¸»è¿›ç¨‹ï¼Œå®ƒä»¬å¯¹ApiæœåŠ¡å™¨çš„è®¿é—®æ˜¯è´Ÿè½½å¹³è¡¡çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„etcdæ˜¯åŒæ­¥çš„ã€‚

**å·ï¼š**

å½“Podåˆ›å»ºçš„æ•°æ®åœ¨Podæ¶ˆå¤±æ—¶ä¸åº”ä¸¢å¤±æ—¶ï¼Œåº”å°†å…¶å­˜å‚¨åœ¨ç‰©ç†å·ä¸­ã€‚**Kuberneteså…è®¸å°†å·é™„åŠ åˆ°Podä»¥æŒä¹…åŒ–æ•°æ®**ã€‚å·å¯ä»¥ä½äºæœ¬åœ°æœºå™¨ä¸Šæˆ–è¿œç¨‹å­˜å‚¨ä¸­ã€‚å¦‚æœåœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ä¸Šè¿è¡ŒPodï¼Œåº”ä½¿ç”¨è¿œç¨‹å­˜å‚¨ï¼Œä»¥ä¾¿æ‰€æœ‰Podéƒ½å¯ä»¥è®¿é—®å®ƒã€‚

**å…¶ä»–é…ç½®ï¼š**

* **ConfigMap**ï¼šæ‚¨å¯ä»¥é…ç½®**URL**ä»¥è®¿é—®æœåŠ¡ã€‚Podå°†ä»è¿™é‡Œè·å–æ•°æ®ï¼Œä»¥äº†è§£å¦‚ä½•ä¸å…¶ä»–æœåŠ¡ï¼ˆPodï¼‰é€šä¿¡ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸æ˜¯ä¿å­˜å‡­æ®çš„æ¨èä½ç½®ï¼
* **Secret**ï¼šè¿™æ˜¯å­˜å‚¨ç§˜å¯†æ•°æ®ï¼ˆå¦‚å¯†ç ã€APIå¯†é’¥ç­‰ï¼‰çš„ä½ç½®ï¼Œä»¥B64ç¼–ç ã€‚Podå°†èƒ½å¤Ÿè®¿é—®æ­¤æ•°æ®ä»¥ä½¿ç”¨æ‰€éœ€çš„å‡­æ®ã€‚
* **éƒ¨ç½²**ï¼šè¿™æ˜¯æŒ‡ç¤ºç”±Kubernetesè¿è¡Œçš„ç»„ä»¶çš„ä½ç½®ã€‚ç”¨æˆ·é€šå¸¸ä¸ä¼šç›´æ¥ä½¿ç”¨Podï¼ŒPodè¢«æŠ½è±¡ä¸º**ReplicaSets**ï¼ˆå¤åˆ¶çš„ç›¸åŒPodæ•°é‡ï¼‰ï¼Œé€šè¿‡éƒ¨ç½²è¿è¡Œã€‚è¯·æ³¨æ„ï¼Œéƒ¨ç½²æ˜¯ç”¨äº**æ— çŠ¶æ€**åº”ç”¨ç¨‹åºçš„ã€‚éƒ¨ç½²çš„æœ€å°é…ç½®æ˜¯åç§°å’Œè¦è¿è¡Œçš„é•œåƒã€‚
* **StatefulSet**ï¼šæ­¤ç»„ä»¶ä¸“é—¨ç”¨äºåƒ**æ•°æ®åº“**è¿™æ ·éœ€è¦**è®¿é—®ç›¸åŒå­˜å‚¨**çš„åº”ç”¨ç¨‹åºã€‚
* **Ingress**ï¼šè¿™æ˜¯ç”¨äºä½¿ç”¨URL**å…¬å¼€åº”ç”¨ç¨‹åº**çš„é…ç½®ã€‚è¯·æ³¨æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤–éƒ¨æœåŠ¡æ¥å®Œæˆæ­¤æ“ä½œï¼Œä½†è¿™æ˜¯å…¬å¼€åº”ç”¨ç¨‹åºçš„æ­£ç¡®æ–¹å¼ã€‚
* å¦‚æœæ‚¨å®ç°äº†Ingressï¼Œåˆ™éœ€è¦åˆ›å»º**Ingress Controllers**ã€‚Ingress Controlleræ˜¯ä¸€ä¸ªå°†æ¥æ”¶è¯·æ±‚å¹¶æ£€æŸ¥å¹¶å°†å…¶è´Ÿè½½å‡è¡¡åˆ°æœåŠ¡çš„**Pod**çš„ç»ˆç»“ç‚¹ã€‚Ingress Controllerå°†æ ¹æ®é…ç½®çš„Ingressè§„åˆ™**å‘é€è¯·æ±‚**ã€‚è¯·æ³¨æ„ï¼ŒIngressè§„åˆ™å¯ä»¥æŒ‡å‘ä¸åŒçš„è·¯å¾„ï¼Œç”šè‡³æ˜¯ä¸åŒçš„å†…éƒ¨KubernetesæœåŠ¡çš„å­åŸŸã€‚
* æ›´å¥½çš„å®‰å…¨å®è·µæ˜¯ä½¿ç”¨äº‘è´Ÿè½½å‡è¡¡å™¨æˆ–ä»£ç†æœåŠ¡å™¨ä½œä¸ºå…¥å£ç‚¹ï¼Œä»¥é¿å…å°†Kubernetesé›†ç¾¤çš„ä»»ä½•éƒ¨åˆ†æš´éœ²å‡ºå»ã€‚
* å½“æ¥æ”¶åˆ°ä¸åŒ¹é…ä»»ä½•Ingressè§„åˆ™çš„è¯·æ±‚æ—¶ï¼ŒIngress Controllerå°†å°†å…¶å®šå‘åˆ°â€œ**é»˜è®¤åç«¯**â€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨`describe`å‘½ä»¤è·å–Ingress Controllerçš„åœ°å€å‚æ•°ã€‚

`minikube addons enable ingress`
### PKIåŸºç¡€è®¾æ–½ - è¯ä¹¦é¢å‘æœºæ„CAï¼š

![](https://sickrov.github.io/media/Screenshot-66.jpg)

* CAæ˜¯é›†ç¾¤å†…æ‰€æœ‰è¯ä¹¦çš„å¯ä¿¡æ ¹ã€‚
* å…è®¸ç»„ä»¶ç›¸äº’éªŒè¯ã€‚
* æ‰€æœ‰é›†ç¾¤è¯ä¹¦éƒ½ç”±CAç­¾åã€‚
* ETCdæœ‰è‡ªå·±çš„è¯ä¹¦ã€‚
* ç±»å‹ï¼š
* apiserverè¯ä¹¦ã€‚
* kubeletè¯ä¹¦ã€‚
* schedulerè¯ä¹¦ã€‚

## åŸºæœ¬æ“ä½œ

### Minikube

**Minikube**å¯ç”¨äºåœ¨ä¸éœ€è¦éƒ¨ç½²æ•´ä¸ªKubernetesç¯å¢ƒçš„æƒ…å†µä¸‹å¯¹Kubernetesè¿›è¡Œä¸€äº›**å¿«é€Ÿæµ‹è¯•**ã€‚å®ƒå°†åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œ**ä¸»èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹è¿›ç¨‹**ã€‚Minikubeå°†ä½¿ç”¨virtualboxæ¥è¿è¡ŒèŠ‚ç‚¹ã€‚è¯·å‚é˜…[**æ­¤å¤„çš„å®‰è£…æ–¹æ³•**](https://minikube.sigs.k8s.io/docs/start/)ã€‚
```
$ minikube start
ğŸ˜„  minikube v1.19.0 on Ubuntu 20.04
âœ¨  Automatically selected the virtualbox driver. Other choices: none, ssh
ğŸ’¿  Downloading VM boot image ...
> minikube-v1.19.0.iso.sha256: 65 B / 65 B [-------------] 100.00% ? p/s 0s
> minikube-v1.19.0.iso: 244.49 MiB / 244.49 MiB  100.00% 1.78 MiB p/s 2m17.
ğŸ‘  Starting control plane node minikube in cluster minikube
ğŸ’¾  Downloading Kubernetes v1.20.2 preload ...
> preloaded-images-k8s-v10-v1...: 491.71 MiB / 491.71 MiB  100.00% 2.59 MiB
ğŸ”¥  Creating virtualbox VM (CPUs=2, Memory=3900MB, Disk=20000MB) ...
ğŸ³  Preparing Kubernetes v1.20.2 on Docker 20.10.4 ...
â–ª Generating certificates and keys ...
â–ª Booting up control plane ...
â–ª Configuring RBAC rules ...
ğŸ”  Verifying Kubernetes components...
â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5
ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass
ğŸ„  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by defaul

$ minikube status
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured

---- ONCE YOU HAVE A K8 SERVICE RUNNING WITH AN EXTERNAL SERVICE -----
$ minikube service mongo-express-service
(This will open your browser to access the service exposed port)

$ minikube delete
ğŸ”¥  Deleting "minikube" in virtualbox ...
ğŸ’€  Removed all traces of the "minikube" cluster
```
### Kubectl åŸºç¡€

**`Kubectl`** æ˜¯ç”¨äº Kubernetes é›†ç¾¤çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å®ƒä¸ä¸»è¿›ç¨‹çš„ API æœåŠ¡å™¨é€šä¿¡ï¼Œä»¥æ‰§è¡Œ Kubernetes ä¸­çš„æ“ä½œæˆ–è¯·æ±‚æ•°æ®ã€‚
```bash
kubectl version #Get client and server version
kubectl get pod
kubectl get services
kubectl get deployment
kubectl get replicaset
kubectl get secret
kubectl get all
kubectl get ingress
kubectl get endpoints

#kubectl create deployment <deployment-name> --image=<docker image>
kubectl create deployment nginx-deployment --image=nginx
#Access the configuration of the deployment and modify it
#kubectl edit deployment <deployment-name>
kubectl edit deployment nginx-deployment
#Get the logs of the pod for debbugging (the output of the docker container running)
#kubectl logs <replicaset-id/pod-id>
kubectl logs nginx-deployment-84cd76b964
#kubectl describe pod <pod-id>
kubectl describe pod mongo-depl-5fd6b7d4b4-kkt9q
#kubectl exec -it <pod-id> -- bash
kubectl exec -it mongo-depl-5fd6b7d4b4-kkt9q -- bash
#kubectl describe service <service-name>
kubectl describe service mongodb-service
#kubectl delete deployment <deployment-name>
kubectl delete deployment mongo-depl
#Deploy from config file
kubectl apply -f deployment.yml
```
### Minikube ä»ªè¡¨æ¿

ä»ªè¡¨æ¿å…è®¸æ‚¨æ›´è½»æ¾åœ°æŸ¥çœ‹ minikube æ­£åœ¨è¿è¡Œçš„å†…å®¹ï¼Œæ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°è®¿é—®å®ƒçš„ URLï¼š
```
minikube dashboard --url


ğŸ”Œ  Enabling dashboard ...
â–ª Using image kubernetesui/dashboard:v2.3.1
â–ª Using image kubernetesui/metrics-scraper:v1.0.7
ğŸ¤”  Verifying dashboard health ...
ğŸš€  Launching proxy ...
ğŸ¤”  Verifying proxy health ...
http://127.0.0.1:50034/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/
```
### YAMLé…ç½®æ–‡ä»¶ç¤ºä¾‹

æ¯ä¸ªé…ç½®æ–‡ä»¶åŒ…å«3ä¸ªéƒ¨åˆ†ï¼š**å…ƒæ•°æ®**ï¼Œ**è§„èŒƒ**ï¼ˆéœ€è¦å¯åŠ¨çš„å†…å®¹ï¼‰ï¼Œ**çŠ¶æ€**ï¼ˆæœŸæœ›çš„çŠ¶æ€ï¼‰ã€‚\
åœ¨éƒ¨ç½²é…ç½®æ–‡ä»¶çš„è§„èŒƒä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä½¿ç”¨æ–°çš„é…ç½®ç»“æ„å®šä¹‰è¦è¿è¡Œçš„é•œåƒçš„æ¨¡æ¿ï¼š

**åœ¨åŒä¸€é…ç½®æ–‡ä»¶ä¸­å£°æ˜éƒ¨ç½²å’ŒæœåŠ¡çš„ç¤ºä¾‹ï¼ˆæ¥è‡ª** [**è¿™é‡Œ**](https://gitlab.com/nanuchi/youtube-tutorial-series/-/blob/master/demo-kubernetes-components/mongo.yaml)**ï¼‰**

ç”±äºæœåŠ¡é€šå¸¸ä¸ä¸€ä¸ªéƒ¨ç½²ç›¸å…³è”ï¼Œå› æ­¤å¯ä»¥åœ¨åŒä¸€é…ç½®æ–‡ä»¶ä¸­å£°æ˜ä¸¤è€…ï¼ˆæ­¤é…ç½®ä¸­å£°æ˜çš„æœåŠ¡ä»…åœ¨å†…éƒ¨å¯è®¿é—®ï¼‰ï¼š
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
name: mongodb-deployment
labels:
app: mongodb
spec:
replicas: 1
selector:
matchLabels:
app: mongodb
template:
metadata:
labels:
app: mongodb
spec:
containers:
- name: mongodb
image: mongo
ports:
- containerPort: 27017
env:
- name: MONGO_INITDB_ROOT_USERNAME
valueFrom:
secretKeyRef:
name: mongodb-secret
key: mongo-root-username
- name: MONGO_INITDB_ROOT_PASSWORD
valueFrom:
secretKeyRef:
name: mongodb-secret
key: mongo-root-password
---
apiVersion: v1
kind: Service
metadata:
name: mongodb-service
spec:
selector:
app: mongodb
ports:
- protocol: TCP
port: 27017
targetPort: 27017
```
**å¤–éƒ¨æœåŠ¡é…ç½®ç¤ºä¾‹**

æ­¤æœåŠ¡å°†å¯ä»¥ä»å¤–éƒ¨è®¿é—®ï¼ˆè¯·æ£€æŸ¥`nodePort`å’Œ`type: LoadBalancer`å±æ€§ï¼‰ï¼š
```yaml
---
apiVersion: v1
kind: Service
metadata:
name: mongo-express-service
spec:
selector:
app: mongo-express
type: LoadBalancer
ports:
- protocol: TCP
port: 8081
targetPort: 8081
nodePort: 30000
```
{% hint style="info" %}
è¿™å¯¹äºæµ‹è¯•å¾ˆæœ‰ç”¨ï¼Œä½†å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œæ‚¨åº”è¯¥åªæœ‰å†…éƒ¨æœåŠ¡å’Œä¸€ä¸ªIngressæ¥æš´éœ²åº”ç”¨ç¨‹åºã€‚
{% endhint %}

**Ingressé…ç½®æ–‡ä»¶ç¤ºä¾‹**

è¿™å°†åœ¨`http://dashboard.com`ä¸­æš´éœ²åº”ç”¨ç¨‹åºã€‚
```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
name: dashboard-ingress
namespace: kubernetes-dashboard
spec:
rules:
- host: dashboard.com
http:
paths:
- backend:
serviceName: kubernetes-dashboard
servicePort: 80
```
**ç§˜å¯†é…ç½®æ–‡ä»¶ç¤ºä¾‹**

è¯·æ³¨æ„å¯†ç æ˜¯ä»¥B64ç¼–ç çš„ï¼ˆè¿™å¹¶ä¸å®‰å…¨ï¼ï¼‰
```yaml
apiVersion: v1
kind: Secret
metadata:
name: mongodb-secret
type: Opaque
data:
mongo-root-username: dXNlcm5hbWU=
mongo-root-password: cGFzc3dvcmQ=
```
**ConfigMapç¤ºä¾‹**

ä¸€ä¸ª**ConfigMap**æ˜¯æä¾›ç»™Podçš„é…ç½®ï¼Œä»¥ä¾¿å®ƒä»¬çŸ¥é“å¦‚ä½•å®šä½å’Œè®¿é—®å…¶ä»–æœåŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªPodå°†çŸ¥é“`mongodb-service`æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ä¹‹é€šä¿¡çš„Podçš„åœ°å€ï¼ˆè¯¥Podå°†æ‰§è¡Œä¸€ä¸ªmongodbï¼‰ï¼š
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
name: mongodb-configmap
data:
database_url: mongodb-service
```
ç„¶åï¼Œåœ¨**éƒ¨ç½²é…ç½®**ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŒ‡å®šè¯¥åœ°å€ï¼Œä»¥ä¾¿åœ¨Podçš„ç¯å¢ƒä¸­åŠ è½½ï¼š
```yaml
[...]
spec:
[...]
template:
[...]
spec:
containers:
- name: mongo-express
image: mongo-express
ports:
- containerPort: 8081
env:
- name: ME_CONFIG_MONGODB_SERVER
valueFrom:
configMapKeyRef:
name: mongodb-configmap
key: database_url
[...]
```
**å·é…ç½®ç¤ºä¾‹**

æ‚¨å¯ä»¥åœ¨[https://gitlab.com/nanuchi/youtube-tutorial-series/-/tree/master/kubernetes-volumes](https://gitlab.com/nanuchi/youtube-tutorial-series/-/tree/master/kubernetes-volumes)ä¸­æ‰¾åˆ°ä¸åŒçš„å­˜å‚¨é…ç½®yamlæ–‡ä»¶çš„ç¤ºä¾‹ã€‚\
**è¯·æ³¨æ„ï¼Œå·ä¸åœ¨å‘½åç©ºé—´å†…**

### å‘½åç©ºé—´

Kubernetesæ”¯æŒç”±åŒä¸€ç‰©ç†é›†ç¾¤æ”¯æŒçš„**å¤šä¸ªè™šæ‹Ÿé›†ç¾¤**ã€‚è¿™äº›è™šæ‹Ÿé›†ç¾¤ç§°ä¸º**å‘½åç©ºé—´**ã€‚è¿™äº›å‘½åç©ºé—´é€‚ç”¨äºåœ¨å¤šä¸ªå›¢é˜Ÿæˆ–é¡¹ç›®ä¸­åˆ†æ•£çš„è®¸å¤šç”¨æˆ·çš„ç¯å¢ƒä¸­ä½¿ç”¨ã€‚å¯¹äºå…·æœ‰å‡ ä¸ªåˆ°å‡ åä¸ªç”¨æˆ·çš„é›†ç¾¤ï¼Œæ‚¨ä¸éœ€è¦åˆ›å»ºæˆ–è€ƒè™‘å‘½åç©ºé—´ã€‚æ‚¨åªéœ€è¦å¼€å§‹ä½¿ç”¨å‘½åç©ºé—´æ¥æ›´å¥½åœ°æ§åˆ¶å’Œç»„ç»‡åœ¨Kubernetesä¸­éƒ¨ç½²çš„åº”ç”¨ç¨‹åºçš„æ¯ä¸ªéƒ¨åˆ†ã€‚

å‘½åç©ºé—´ä¸ºåç§°æä¾›äº†èŒƒå›´ã€‚èµ„æºçš„åç§°åœ¨å‘½åç©ºé—´å†…éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä½†åœ¨å‘½åç©ºé—´ä¹‹é—´ä¸éœ€è¦å”¯ä¸€ã€‚å‘½åç©ºé—´ä¸èƒ½åµŒå¥—åœ¨å½¼æ­¤å†…éƒ¨ï¼Œ**æ¯ä¸ª**Kubernetes**èµ„æº**åªèƒ½**åœ¨ä¸€ä¸ª**å‘½åç©ºé—´ä¸­ã€‚

å¦‚æœæ‚¨ä½¿ç”¨minikubeï¼Œé»˜è®¤æƒ…å†µä¸‹æœ‰4ä¸ªå‘½åç©ºé—´ï¼š
```
kubectl get namespace
NAME              STATUS   AGE
default           Active   1d
kube-node-lease   Active   1d
kube-public       Active   1d
kube-system       Active   1d
```
* **kube-system**: è¿™ä¸ªå‘½åç©ºé—´ä¸æ˜¯ä¸ºç”¨æˆ·ä½¿ç”¨çš„ï¼Œä½ ä¸åº”è¯¥è§¦ç¢°å®ƒã€‚å®ƒæ˜¯ç”¨äºä¸»èŠ‚ç‚¹å’Œkubectlè¿›ç¨‹çš„ã€‚
* **kube-public**: å…¬å¼€å¯è®¿é—®çš„æ•°æ®ã€‚åŒ…å«ä¸€ä¸ªé…ç½®æ˜ å°„ï¼Œå…¶ä¸­åŒ…å«é›†ç¾¤ä¿¡æ¯ã€‚
* **kube-node-lease**: ç¡®å®šèŠ‚ç‚¹çš„å¯ç”¨æ€§ã€‚
* **default**: ç”¨æˆ·å°†ç”¨æ¥åˆ›å»ºèµ„æºçš„å‘½åç©ºé—´ã€‚
```bash
#Create namespace
kubectl create namespace my-namespace
```
{% hint style="info" %}
è¯·æ³¨æ„ï¼Œå¤§å¤šæ•°Kubernetesèµ„æºï¼ˆä¾‹å¦‚podã€serviceã€replication controllerç­‰ï¼‰éƒ½å±äºæŸä¸ªå‘½åç©ºé—´ã€‚ä½†æ˜¯ï¼Œå…¶ä»–èµ„æºï¼Œå¦‚å‘½åç©ºé—´èµ„æºå’Œä½çº§èµ„æºï¼ˆä¾‹å¦‚èŠ‚ç‚¹å’ŒæŒä¹…å·ï¼‰ä¸å±äºä»»ä½•å‘½åç©ºé—´ã€‚è¦æŸ¥çœ‹å“ªäº›Kubernetesèµ„æºå±äºå‘½åç©ºé—´ï¼Œå“ªäº›ä¸å±äºå‘½åç©ºé—´ï¼š
```bash
kubectl api-resources --namespaced=true #In a namespace
kubectl api-resources --namespaced=false #Not in a namespace
```
{% endhint %}

æ‚¨å¯ä»¥åœ¨è¯¥ä¸Šä¸‹æ–‡ä¸­ä¸ºæ‰€æœ‰åç»­çš„kubectlå‘½ä»¤ä¿å­˜å‘½åç©ºé—´ã€‚
```bash
kubectl config set-context --current --namespace=<insert-namespace-name-here>
```
### Helm

Helmæ˜¯Kubernetesçš„**åŒ…ç®¡ç†å™¨**ã€‚å®ƒå…è®¸å°†YAMLæ–‡ä»¶æ‰“åŒ…å¹¶åˆ†å‘åˆ°å…¬å…±å’Œç§æœ‰ä»“åº“ä¸­ã€‚è¿™äº›åŒ…è¢«ç§°ä¸º**Helm Charts**ã€‚
```
helm search <keyword>
```
Helmä¹Ÿæ˜¯ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œå…è®¸ä½¿ç”¨å˜é‡ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š

## Kubernetes secrets

**Secret**æ˜¯ä¸€ä¸ªåŒ…å«æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç ã€ä»¤ç‰Œæˆ–å¯†é’¥ï¼‰çš„å¯¹è±¡ã€‚è¿™äº›ä¿¡æ¯å¯èƒ½ä¼šæ”¾åœ¨Podè§„èŒƒæˆ–é•œåƒä¸­ã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºSecretsï¼Œç³»ç»Ÿä¹Ÿä¼šåˆ›å»ºSecretsã€‚Secretå¯¹è±¡çš„åç§°å¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„DNSå­åŸŸåã€‚åœ¨è¿™é‡Œé˜…è¯»[å®˜æ–¹æ–‡æ¡£](https://kubernetes.io/docs/concepts/configuration/secret/)ã€‚

Secretså¯ä»¥æ˜¯ä»¥ä¸‹å†…å®¹ï¼š

* APIã€SSHå¯†é’¥ã€‚
* OAuthä»¤ç‰Œã€‚
* å‡­æ®ã€å¯†ç ï¼ˆæ˜æ–‡æˆ–b64 +åŠ å¯†ï¼‰ã€‚
* ä¿¡æ¯æˆ–æ³¨é‡Šã€‚
* æ•°æ®åº“è¿æ¥ä»£ç ã€å­—ç¬¦ä¸²...ã€‚

Kubernetesä¸­æœ‰ä¸åŒç±»å‹çš„secrets

| å†…ç½®ç±»å‹                            | ç”¨é€”                                       |
| ----------------------------------- | ----------------------------------------- |
| **Opaque**                          | **ä»»æ„ç”¨æˆ·å®šä¹‰çš„æ•°æ®ï¼ˆé»˜è®¤ï¼‰**             |
| kubernetes.io/service-account-token | æœåŠ¡å¸æˆ·ä»¤ç‰Œ                               |
| kubernetes.io/dockercfg             | åºåˆ—åŒ–çš„\~/.dockercfgæ–‡ä»¶                  |
| kubernetes.io/dockerconfigjson      | åºåˆ—åŒ–çš„\~/.docker/config.jsonæ–‡ä»¶         |
| kubernetes.io/basic-auth            | åŸºæœ¬èº«ä»½éªŒè¯å‡­æ®                           |
| kubernetes.io/ssh-auth              | SSHèº«ä»½éªŒè¯å‡­æ®                            |
| kubernetes.io/tls                   | ç”¨äºTLSå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨çš„æ•°æ®                |
| bootstrap.kubernetes.io/token       | å¼•å¯¼ä»¤ç‰Œæ•°æ®                               |

{% hint style="info" %}
**Opaqueç±»å‹æ˜¯é»˜è®¤ç±»å‹ï¼Œç”±ç”¨æˆ·å®šä¹‰çš„å…¸å‹é”®å€¼å¯¹ã€‚**
{% endhint %}

**Secretsçš„å·¥ä½œåŸç†ï¼š**

![](https://sickrov.github.io/media/Screenshot-164.jpg)

ä»¥ä¸‹é…ç½®æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º`mysecret`çš„**secret**ï¼Œå…¶ä¸­åŒ…å«2ä¸ªé”®å€¼å¯¹`username: YWRtaW4=`å’Œ`password: MWYyZDFlMmU2N2Rm`ã€‚å®ƒè¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸º`secretpod`çš„**pod**ï¼Œè¯¥podå°†åœ¨**ç¯å¢ƒå˜é‡**`SECRET_USERNAME`å’Œ`SECRET_PASSWORD`ä¸­å…¬å¼€`mysecret`ä¸­å®šä¹‰çš„`username`å’Œ`password`ã€‚å®ƒè¿˜å°†ä»¥`0640`æƒé™å°†`username` secretæŒ‚è½½åˆ°è·¯å¾„`/etc/foo/my-group/my-username`ä¸­ã€‚

{% code title="secretpod.yaml" %}
```yaml
apiVersion: v1
kind: Secret
metadata:
name: mysecret
type: Opaque
data:
username: YWRtaW4=
password: MWYyZDFlMmU2N2Rm
---
apiVersion: v1
kind: Pod
metadata:
name: secretpod
spec:
containers:
- name: secretpod
image: nginx
env:
- name: SECRET_USERNAME
valueFrom:
secretKeyRef:
name: mysecret
key: username
- name: SECRET_PASSWORD
valueFrom:
secretKeyRef:
name: mysecret
key: password
volumeMounts:
- name: foo
mountPath: "/etc/foo"
restartPolicy: Never
volumes:
- name: foo
secret:
secretName: mysecret
items:
- key: username
path: my-group/my-username
mode: 0640
```
{% endcode %}
```bash
kubectl apply -f <secretpod.yaml>
kubectl get pods #Wait until the pod secretpod is running
kubectl exec -it  secretpod -- bash
env | grep SECRET && cat /etc/foo/my-group/my-username && echo
```
### åœ¨ etcd ä¸­å‘ç°ç§˜å¯† <a href="#discover-secrets-in-etcd" id="discover-secrets-in-etcd"></a>

**etcd** æ˜¯ä¸€ä¸ªä¸€è‡´ä¸”é«˜å¯ç”¨çš„**é”®å€¼å­˜å‚¨**ï¼Œç”¨ä½œ Kubernetes çš„åå¤‡å­˜å‚¨ï¼Œç”¨äºå­˜å‚¨é›†ç¾¤æ•°æ®ã€‚è®©æˆ‘ä»¬è®¿é—®å­˜å‚¨åœ¨ etcd ä¸­çš„ç§˜å¯†ï¼š
```bash
cat /etc/kubernetes/manifests/kube-apiserver.yaml | grep etcd
```
ä½ ä¼šçœ‹åˆ°è¯ä¹¦ã€å¯†é’¥å’ŒURLçš„ä½ç½®åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ä¸€æ—¦è·å–åˆ°å®ƒä»¬ï¼Œä½ å°±èƒ½å¤Ÿè¿æ¥åˆ°etcdã€‚
```bash
#ETCDCTL_API=3 etcdctl --cert <path to client.crt> --key <path to client.ket> --cacert <path to CA.cert> endpoint=[<ip:port>] health

ETCDCTL_API=3 etcdctl --cert /etc/kubernetes/pki/apiserver-etcd-client.crt --key /etc/kubernetes/pki/apiserver-etcd-client.key --cacert /etc/kubernetes/pki/etcd/etcd/ca.cert endpoint=[127.0.0.1:1234] health
```
ä¸€æ—¦å»ºç«‹é€šä¿¡ï¼Œæ‚¨å°†èƒ½å¤Ÿè·å–ç§˜å¯†ï¼š
```bash
#ETCDCTL_API=3 etcdctl --cert <path to client.crt> --key <path to client.ket> --cacert <path to CA.cert> endpoint=[<ip:port>] get <path/to/secret>

ETCDCTL_API=3 etcdctl --cert /etc/kubernetes/pki/apiserver-etcd-client.crt --key /etc/kubernetes/pki/apiserver-etcd-client.key --cacert /etc/kubernetes/pki/etcd/etcd/ca.cert endpoint=[127.0.0.1:1234] get /registry/secrets/default/secret_02
```
**ä¸ºETCDæ·»åŠ åŠ å¯†**

é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤éåº”ç”¨åŠ å¯†å±‚ï¼Œå¦åˆ™æ‰€æœ‰çš„å¯†é’¥éƒ½ä»¥æ˜æ–‡å½¢å¼å­˜å‚¨åœ¨etcdä¸­ã€‚ä»¥ä¸‹ç¤ºä¾‹åŸºäº[https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/)

{% code title="encryption.yaml" %}
```yaml
apiVersion: apiserver.config.k8s.io/v1
kind: EncryptionConfiguration
resources:
- resources:
- secrets
providers:
- aescbc:
keys:
- name: key1
secret: cjjPMcWpTPKhAdieVtd+KhG4NN+N6e3NmBPMXJvbfrY= #Any random key
- identity: {}
```
{% endcode %}

ä¹‹åï¼Œæ‚¨éœ€è¦åœ¨ `kube-apiserver` ä¸Šè®¾ç½® `--encryption-provider-config` æ ‡å¿—ï¼ŒæŒ‡å‘åˆ›å»ºçš„é…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚æ‚¨å¯ä»¥ä¿®æ”¹ `/etc/kubernetes/manifest/kube-apiserver.yaml` æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹è¡Œï¼š
```yaml
containers:
- command:
- kube-apiserver
- --encriyption-provider-config=/etc/kubernetes/etcd/<configFile.yaml>
```
å‘ä¸‹æ»šåŠ¨åˆ°volumeMountséƒ¨åˆ†ï¼š
```yaml
- mountPath: /etc/kubernetes/etcd
name: etcd
readOnly: true
```
åœ¨volumeMountsä¸­å‘ä¸‹æ»šåŠ¨åˆ°hostPath:
```yaml
- hostPath:
path: /etc/kubernetes/etcd
type: DirectoryOrCreate
name: etcd
```
**éªŒè¯æ•°æ®æ˜¯å¦åŠ å¯†**

æ•°æ®åœ¨å†™å…¥etcdæ—¶ä¼šè¢«åŠ å¯†ã€‚åœ¨é‡æ–°å¯åŠ¨`kube-apiserver`ä¹‹åï¼Œä»»ä½•æ–°åˆ›å»ºæˆ–æ›´æ–°çš„å¯†é’¥éƒ½åº”è¯¥åœ¨å­˜å‚¨æ—¶è¢«åŠ å¯†ã€‚ä¸ºäº†æ£€æŸ¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`etcdctl`å‘½ä»¤è¡Œç¨‹åºæ¥æ£€ç´¢å¯†é’¥çš„å†…å®¹ã€‚

1. åœ¨`default`å‘½åç©ºé—´ä¸­åˆ›å»ºä¸€ä¸ªåä¸º`secret1`çš„æ–°å¯†é’¥ï¼š

```
kubectl create secret generic secret1 -n default --from-literal=mykey=mydata
```
2. ä½¿ç”¨etcdctlå‘½ä»¤è¡Œä»etcdä¸­è¯»å–è¯¥å¯†é’¥ï¼š

`ETCDCTL_API=3 etcdctl get /registry/secrets/default/secret1 [...] | hexdump -C`

å…¶ä¸­`[...]`å¿…é¡»æ˜¯è¿æ¥åˆ°etcdæœåŠ¡å™¨çš„é™„åŠ å‚æ•°ã€‚
3. éªŒè¯å­˜å‚¨çš„å¯†é’¥æ˜¯å¦ä»¥`k8s:enc:aescbc:v1:`ä¸ºå‰ç¼€ï¼Œè¿™è¡¨ç¤º`aescbc`æä¾›ç¨‹åºå·²åŠ å¯†ç”Ÿæˆçš„æ•°æ®ã€‚
4. é€šè¿‡APIæ£€ç´¢å¯†é’¥æ—¶ï¼ŒéªŒè¯å¯†é’¥æ˜¯å¦è¢«æ­£ç¡®è§£å¯†ï¼š

```
kubectl describe secret secret1 -n default
```

åº”è¯¥ä¸`mykey: bXlkYXRh`åŒ¹é…ï¼Œå…¶ä¸­mydataæ˜¯ç¼–ç çš„ï¼Œè¯·å‚é˜…[è§£ç å¯†é’¥](https://kubernetes.io/docs/concepts/configuration/secret#decoding-a-secret)ä»¥å®Œå…¨è§£ç å¯†é’¥ã€‚

**ç”±äºå¯†é’¥åœ¨å†™å…¥æ—¶è¢«åŠ å¯†ï¼Œå¯¹å¯†é’¥è¿›è¡Œæ›´æ–°å°†åŠ å¯†è¯¥å†…å®¹ï¼š**
```
kubectl get secrets --all-namespaces -o json | kubectl replace -f -
```
**æœ€åçš„æç¤ºï¼š**

* å°½é‡ä¸è¦å°†ç§˜å¯†ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä»å…¶ä»–åœ°æ–¹è·å–å®ƒä»¬ã€‚
* æŸ¥çœ‹ [https://www.vaultproject.io/](https://www.vaultproject.io) ä»¥å¢åŠ å¯¹æ‚¨çš„ç§˜å¯†çš„ä¿æŠ¤ã€‚
* [https://kubernetes.io/docs/concepts/configuration/secret/#risks](https://kubernetes.io/docs/concepts/configuration/secret/#risks)
* [https://docs.cyberark.com/Product-Doc/OnlineHelp/AAM-DAP/11.2/en/Content/Integrations/Kubernetes\_deployApplicationsConjur-k8s-Secrets.htm](https://docs.cyberark.com/Product-Doc/OnlineHelp/AAM-DAP/11.2/en/Content/Integrations/Kubernetes\_deployApplicationsConjur-k8s-Secrets.htm)

## å‚è€ƒèµ„æ–™

{% embed url="https://sickrov.github.io/" %}

{% embed url="https://www.youtube.com/watch?v=X48VuDVv0do" %}

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ï¼
* è·å– [**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°æˆ‘ä»¬çš„ç‹¬å®¶ [**NFTs**](https://opensea.io/collection/the-peass-family) é›†åˆ [**The PEASS Family**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨** æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
