# AWS - Elastic Beanstalkæšä¸¾

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFç‰ˆçš„HackTricksï¼Œè¯·æŸ¥çœ‹[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter**ä¸Šçš„è´¦å· ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## Elastic Beanstalk

**Amazon Elastic Beanstalk**æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„æœåŠ¡ï¼Œå¯ä»¥è½»æ¾åœ°éƒ¨ç½²ã€è¿è¡Œå’Œæ‰©å±•ä½¿ç”¨Javaã€.NETã€PHPã€Node.jsã€Pythonã€Rubyã€Goã€Dockerã€Tomcatç­‰å¼€å‘çš„Webåº”ç”¨ç¨‹åºå’ŒæœåŠ¡ï¼Œä»¥åŠåœ¨Apacheã€Nginxã€Passengerå’ŒIISç­‰ç†Ÿæ‚‰çš„æœåŠ¡å™¨ä¸Šã€‚

Elastic Beanstalkæä¾›äº†ä¸€ç§ç®€å•çµæ´»çš„æ–¹å¼ï¼Œå¯ä»¥å°†æ‚¨çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°AWSäº‘ä¸­ï¼Œæ— éœ€æ‹…å¿ƒåº•å±‚åŸºç¡€è®¾æ–½ã€‚å®ƒä¼šè‡ªåŠ¨å¤„ç†å®¹é‡è§„åˆ’ã€è´Ÿè½½å‡è¡¡ã€æ‰©å±•å’Œåº”ç”¨ç¨‹åºå¥åº·ç›‘æ§ç­‰ç»†èŠ‚ï¼Œè®©æ‚¨ä¸“æ³¨äºç¼–å†™å’Œéƒ¨ç½²ä»£ç ã€‚

ç”±Elastic Beanstalkåˆ›å»ºçš„åŸºç¡€è®¾æ–½ç”±EC2ä¸­çš„**è‡ªåŠ¨æ‰©å±•ç»„**ï¼ˆå¸¦æœ‰è´Ÿè½½å‡è¡¡å™¨ï¼‰ç®¡ç†ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨**å…¥ä¾µäº†ä¸»æœº**ï¼Œæ‚¨åº”è¯¥äº†è§£EC2çš„ç›¸å…³çŸ¥è¯†ï¼š

{% content-ref url="../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/" %}
[aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum](../../aws-security/aws-services/aws-ec2-ebs-elb-ssm-vpc-and-vpn-enum/)
{% endcontent-ref %}

æ­¤å¤–ï¼Œå¦‚æœä½¿ç”¨Dockerï¼Œå¯ä»¥ä½¿ç”¨**ECS**ã€‚

{% content-ref url="../../aws-security/aws-services/aws-eks-enum.md" %}
[aws-eks-enum.md](../../aws-security/aws-services/aws-eks-enum.md)
{% endcontent-ref %}

### åº”ç”¨ç¨‹åºå’Œç¯å¢ƒ

åœ¨AWS Elastic Beanstalkä¸­ï¼Œ"åº”ç”¨ç¨‹åº"å’Œ"ç¯å¢ƒ"çš„æ¦‚å¿µåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­å…·æœ‰ä¸åŒçš„ç›®çš„å’Œä¸åŒçš„è§’è‰²ã€‚

#### åº”ç”¨ç¨‹åº

* Elastic Beanstalkä¸­çš„åº”ç”¨ç¨‹åºæ˜¯æ‚¨çš„åº”ç”¨ç¨‹åºæºä»£ç ã€ç¯å¢ƒå’Œé…ç½®çš„**é€»è¾‘å®¹å™¨**ã€‚å®ƒå°†æ‚¨çš„åº”ç”¨ç¨‹åºä»£ç çš„ä¸åŒç‰ˆæœ¬ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶å…è®¸æ‚¨å°†å®ƒä»¬ä½œä¸ºå•ä¸ªå®ä½“è¿›è¡Œç®¡ç†ã€‚
* åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨æä¾›åç§°å’Œæè¿°ï¼Œä½†æ­¤é˜¶æ®µä¸ä¼š**é¢„é…ä»»ä½•èµ„æº**ã€‚å®ƒåªæ˜¯ä¸€ç§ç»„ç»‡å’Œç®¡ç†ä»£ç åŠç›¸å…³èµ„æºçš„æ–¹å¼ã€‚
* æ‚¨å¯ä»¥åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­æ‹¥æœ‰**å¤šä¸ªåº”ç”¨ç¨‹åºç‰ˆæœ¬**ã€‚æ¯ä¸ªç‰ˆæœ¬å¯¹åº”äºæ‚¨çš„ä»£ç çš„ç‰¹å®šå‘å¸ƒï¼Œå¯ä»¥éƒ¨ç½²åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç¯å¢ƒä¸­ã€‚

#### ç¯å¢ƒ

* ç¯å¢ƒæ˜¯åœ¨AWSåŸºç¡€è®¾æ–½ä¸Šè¿è¡Œçš„**åº”ç”¨ç¨‹åºçš„é¢„é…å®ä¾‹**ã€‚å®ƒæ˜¯**éƒ¨ç½²å’Œæ‰§è¡Œåº”ç”¨ç¨‹åºä»£ç çš„åœ°æ–¹**ã€‚Elastic Beanstalkæ ¹æ®ç¯å¢ƒé…ç½®é¢„é…å¿…è¦çš„èµ„æºï¼ˆä¾‹å¦‚EC2å®ä¾‹ã€è´Ÿè½½å‡è¡¡å™¨ã€è‡ªåŠ¨æ‰©å±•ç»„ã€æ•°æ®åº“ï¼‰ã€‚
* **æ¯ä¸ªç¯å¢ƒè¿è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºç‰ˆæœ¬**ï¼Œæ‚¨å¯ä»¥ä¸ºä¸åŒçš„ç›®çš„ï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€æš‚å­˜å’Œç”Ÿäº§ï¼‰æ‹¥æœ‰å¤šä¸ªç¯å¢ƒã€‚
* åˆ›å»ºç¯å¢ƒæ—¶ï¼Œæ‚¨é€‰æ‹©ä¸€ä¸ªå¹³å°ï¼ˆå¦‚Javaã€.NETã€Node.jsç­‰ï¼‰å’Œä¸€ä¸ªç¯å¢ƒç±»å‹ï¼ˆå¦‚WebæœåŠ¡å™¨æˆ–å·¥ä½œå™¨ï¼‰ã€‚æ‚¨è¿˜å¯ä»¥è‡ªå®šä¹‰ç¯å¢ƒé…ç½®ï¼Œä»¥æ§åˆ¶åŸºç¡€è®¾æ–½å’Œåº”ç”¨ç¨‹åºè®¾ç½®çš„å„ä¸ªæ–¹é¢ã€‚

### ä¸¤ç§ç±»å‹çš„ç¯å¢ƒ

1. **WebæœåŠ¡å™¨ç¯å¢ƒ**ï¼šè®¾è®¡ç”¨äº**æ‰˜ç®¡å’Œæä¾›Webåº”ç”¨ç¨‹åºå’ŒAPI**ã€‚è¿™äº›åº”ç”¨ç¨‹åºé€šå¸¸å¤„ç†ä¼ å…¥çš„HTTP/HTTPSè¯·æ±‚ã€‚WebæœåŠ¡å™¨ç¯å¢ƒé¢„é…èµ„æºï¼Œå¦‚**EC2å®ä¾‹ã€è´Ÿè½½å‡è¡¡å™¨å’Œè‡ªåŠ¨æ‰©å±•ç»„**ï¼Œä»¥å¤„ç†ä¼ å…¥çš„æµé‡ï¼Œç®¡ç†å®¹é‡å¹¶ç¡®ä¿åº”ç”¨ç¨‹åºçš„é«˜å¯ç”¨æ€§ã€‚
2. **å·¥ä½œå™¨ç¯å¢ƒ**ï¼šè®¾è®¡ç”¨äºå¤„ç†**åå°ä»»åŠ¡**ï¼Œè¿™äº›ä»»åŠ¡é€šå¸¸æ˜¯è€—æ—¶æˆ–èµ„æºå¯†é›†å‹æ“ä½œï¼Œä¸éœ€è¦å¯¹å®¢æˆ·ç«¯ç«‹å³å“åº”ã€‚å·¥ä½œå™¨ç¯å¢ƒé¢„é…èµ„æºï¼Œå¦‚**EC2å®ä¾‹å’Œè‡ªåŠ¨æ‰©å±•ç»„**ï¼Œä½†å®ƒ**æ²¡æœ‰è´Ÿè½½å‡è¡¡å™¨**ï¼Œå› ä¸ºå®ƒä¸ç›´æ¥å¤„ç†HTTP/HTTPSè¯·æ±‚ã€‚ç›¸åï¼Œå®ƒä»**Amazon Simple Queue Service (SQS)é˜Ÿåˆ—**ä¸­æ¶ˆè´¹ä»»åŠ¡ï¼Œè¯¥é˜Ÿåˆ—å……å½“å·¥ä½œå™¨ç¯å¢ƒå’Œå¤„ç†çš„ä»»åŠ¡ä¹‹é—´çš„ç¼“å†²åŒºã€‚

### å®‰å…¨æ€§

åœ¨Beanstalkä¸­åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶ï¼Œæœ‰3ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é€‰é¡¹å¯ä¾›é€‰æ‹©ï¼š

* **EC2å¯†é’¥å¯¹**ï¼šè¿™å°†æ˜¯èƒ½å¤Ÿè®¿é—®è¿è¡Œåº”ç”¨ç¨‹åºçš„EC2å®ä¾‹çš„SSHå¯†é’¥
* **IAMå®ä¾‹é…ç½®æ–‡ä»¶**ï¼šè¿™æ˜¯å®ä¾‹å°†å…·æœ‰çš„**å®ä¾‹é…ç½®æ–‡ä»¶**ï¼ˆIAMæƒé™ï¼‰
* è‡ªåŠ¨ç”Ÿæˆçš„è§’è‰²ç§°ä¸º**`aws-elasticbeanstalk-ec2-role`**ï¼Œå¹¶ä¸”å…·æœ‰ä¸€äº›æœ‰è¶£çš„è®¿é—®æƒé™ï¼Œå¯ä»¥è®¿é—®æ‰€æœ‰ECSã€æ‰€æœ‰SQSã€DynamoDB elasticbeanstalkå’Œelasticbeanstalk S3ï¼Œä½¿ç”¨AWSæ‰˜ç®¡ç­–ç•¥ï¼š[AWSElasticBeanstalkWebTier](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/AWSElasticBeanstalkWebTier)ã€[AWSElasticBeanstalkMulticontainerDocker](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/AWSElasticBeanstalkMulticontainerDocker)ã€[AWSElasticBeanstalkWorkerTier](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/AWSElasticBeanstalkWorkerTier)ã€‚
* **æœåŠ¡è§’è‰²**ï¼šè¿™æ˜¯AWSæœåŠ¡å°†ç”¨äºæ‰§è¡Œæ‰€æœ‰æ‰€éœ€æ“ä½œçš„**è§’è‰²**ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œæ™®é€šçš„AWSç”¨æˆ·æ— æ³•è®¿é—®è¯¥è§’è‰²ã€‚
* AWSç”Ÿæˆçš„æ­¤è§’è‰²ç§°ä¸º**`aws-elasticbeanstalk-service-role`**ï¼Œå¹¶ä½¿ç”¨AWSæ‰˜ç®¡ç­–ç•¥[AWSElasticBeanstalkEnhancedHealth](https://us-east-1.console.aws.amazon.com/iam/home#/policies/arn:aws:iam::aws:policy/service-role/AWSElasticBeanstalkEnhancedHealth)å’Œ[AWSElasticBeanstalkManagedUpdatesCustomerRolePolicy](https://us-east-1.console.aws.amazon.com/iamv2/home?region=us-east-1#/roles/details/aws-elasticbeanstalk-service-role?section=permissions)

é»˜è®¤æƒ…å†µä¸‹ï¼Œ**ç¦ç”¨å…ƒæ•°æ®ç‰ˆæœ¬1**ï¼š

<figure><img src="../../../.gitbook/assets/image (18) (1) (2).png" alt=""><figcaption></figcaption></figure>
### æš´éœ²

Beanstalkæ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º**`elasticbeanstalk-<region>-<acc-id>`**çš„**S3å­˜å‚¨æ¡¶**ä¸­ï¼ˆå¦‚æœæ˜¯åœ¨AWSæ§åˆ¶å°ä¸­åˆ›å»ºçš„ï¼‰ã€‚åœ¨è¿™ä¸ªå­˜å‚¨æ¡¶ä¸­ï¼Œæ‚¨å°†æ‰¾åˆ°ä¸Šä¼ çš„**åº”ç”¨ç¨‹åºçš„æºä»£ç **ã€‚

åˆ›å»ºçš„ç½‘é¡µçš„**URL**æ˜¯**`http://<webapp-name>-env.<random>.<region>.elasticbeanstalk.com/`**

{% hint style="warning" %}
å¦‚æœæ‚¨è·å¾—äº†å¯¹å­˜å‚¨æ¡¶çš„**è¯»å–æƒé™**ï¼Œæ‚¨å¯ä»¥**è¯»å–æºä»£ç **ï¼Œç”šè‡³åœ¨å…¶ä¸­æ‰¾åˆ°**æ•æ„Ÿå‡­æ®**ã€‚

å¦‚æœæ‚¨è·å¾—äº†å¯¹å­˜å‚¨æ¡¶çš„**å†™å…¥æƒé™**ï¼Œæ‚¨å¯ä»¥**ä¿®æ”¹æºä»£ç **ä»¥åœ¨ä¸‹æ¬¡æ‰§è¡Œæ—¶**å±å®³**åº”ç”¨ç¨‹åºæ­£åœ¨ä½¿ç”¨çš„**IAMè§’è‰²**ã€‚
{% endhint %}

### æšä¸¾

{% code overflow="wrap" %}
```bash
# Find S3 bucket
ACCOUNT_NUMBER=<account_number>
for r in "us-east-1 us-east-2 us-west-1 us-west-2 ap-south-1 ap-south-2 ap-northeast-1 ap-northeast-2 ap-northeast-3 ap-southeast-1 ap-southeast-2 ap-southeast-3 ca-central-1 eu-central-1 eu-central-2 eu-west-1 eu-west-2 eu-west-3 eu-north-1 sa-east-1 af-south-1 ap-east-1 eu-south-1 eu-south-2 me-south-1 me-central-1"; do aws s3 ls elasticbeanstalk-$r-$ACCOUNT_NUMBER 2>/dev/null; done

# Get apps and URLs
aws elasticbeanstalk describe-applications # List apps
aws elasticbeanstalk describe-application-versions # Get apps & bucket name with source code
aws elasticbeanstalk describe-environments # List envs
aws elasticbeanstalk describe-environments | grep -E "EndpointURL|CNAME"
aws elasticbeanstalk describe-configuration-settings --application-name <app_name> --environment-name <env_name>
aws elasticbeanstalk describe-environment-resources --environment-name <env_name> # Get env info such as SQS used queues
aws elasticbeanstalk describe-instances-health --environment-name <env_name> # Get the instances of an environment

# Get events
aws elasticbeanstalk describe-events
```
{% endcode %}

### æœªç»èº«ä»½éªŒè¯çš„è®¿é—®

{% content-ref url="../../aws-security/aws-unauthenticated-enum-access/aws-elastic-beanstalk-unauthenticated-enum.md" %}
[aws-elastic-beanstalk-unauthenticated-enum.md](../../aws-security/aws-unauthenticated-enum-access/aws-elastic-beanstalk-unauthenticated-enum.md)
{% endcontent-ref %}

### æŒä¹…æ€§

{% content-ref url="../../aws-security/aws-persistence/aws-elastic-beanstalk-persistence.md" %}
[aws-elastic-beanstalk-persistence.md](../../aws-security/aws-persistence/aws-elastic-beanstalk-persistence.md)
{% endcontent-ref %}

### ææƒ

{% content-ref url="../aws-privilege-escalation/aws-elastic-beanstalk-privesc.md" %}
[aws-elastic-beanstalk-privesc.md](../aws-privilege-escalation/aws-elastic-beanstalk-privesc.md)
{% endcontent-ref %}

### æ¼æ´åˆ©ç”¨å

{% content-ref url="../../aws-security/aws-post-exploitation/aws-elastic-beanstalk-post-exploitation.md" %}
[aws-elastic-beanstalk-post-exploitation.md](../../aws-security/aws-post-exploitation/aws-elastic-beanstalk-post-exploitation.md)
{% endcontent-ref %}

<details>

<summary><strong>æ”¯æŒ HackTricks å¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—® PEASS çš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½ HackTricks çš„ PDFï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS å’Œ HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
