# AWS - Kinesis Data Firehose Enum

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* If you want to see your **company advertised in HackTricks** or if you want access to the **latest version of the PEASS or download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Kinesis Data Firehose

Amazon Kinesis Data Firehoseã¯ã€Amazon Simple Storage Serviceï¼ˆAmazon S3ï¼‰ã€Amazon Redshiftã€Amazon OpenSearch Serviceã€Splunkã€ãŠã‚ˆã³ã‚«ã‚¹ã‚¿ãƒ ã®HTTPã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãªã©ã®**å®›å…ˆã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’é…ä¿¡ã™ã‚‹ãŸã‚ã®å®Œå…¨ã«ç®¡ç†ã•ã‚ŒãŸã‚µãƒ¼ãƒ“ã‚¹**ã§ã™ã€‚\
Kinesis Data Firehoseã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ãŸã‚Šãƒªã‚½ãƒ¼ã‚¹ã‚’ç®¡ç†ã—ãŸã‚Šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ã‚’**æ§‹æˆã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’Kinesis Data Firehoseã«é€ä¿¡**ã—ã€æŒ‡å®šã—ãŸå®›å…ˆã«ãƒ‡ãƒ¼ã‚¿ã‚’**è‡ªå‹•çš„ã«é…ä¿¡**ã—ã¾ã™ã€‚ã¾ãŸã€Kinesis Data Firehoseã‚’**ãƒ‡ãƒ¼ã‚¿ã‚’é…ä¿¡ã™ã‚‹å‰ã«å¤‰æ›ã™ã‚‹ã‚ˆã†ã«æ§‹æˆ**ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

### åˆ—æŒ™
```bash
# Get delivery streams
aws firehose list-delivery-streams

#Â Get stream info
aws firehose describe-delivery-stream --delivery-stream-name <name>
## Get roles
aws firehose describe-delivery-stream --delivery-stream-name <name> | grep -i RoleARN
```
## ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ / é˜²å¾¡å›é¿

FirehoseãŒãƒ­ã‚°ã‚„é˜²å¾¡ã‚¤ãƒ³ã‚µã‚¤ãƒˆã®é€ä¿¡ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã€æ”»æ’ƒè€…ã¯ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦æ­£å¸¸ã«å‹•ä½œã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### firehose:DeleteDeliveryStream
```
aws firehose delete-delivery-stream --delivery-stream-name <value> --allow-force-delete
```
### firehose:UpdateDestination

ã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€æŒ‡å®šã•ã‚ŒãŸAmazon Kinesis Data Firehoseé…ä¿¡ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å®›å…ˆã‚’æ›´æ–°ã—ã¾ã™ã€‚

#### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

- `DeliveryStreamName`ï¼ˆå¿…é ˆï¼‰ï¼šæ›´æ–°ã™ã‚‹é…ä¿¡ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®åå‰ã€‚
- `CurrentDeliveryStreamVersionId`ï¼ˆå¿…é ˆï¼‰ï¼šç¾åœ¨ã®é…ä¿¡ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³IDã€‚
- `DestinationId`ï¼ˆå¿…é ˆï¼‰ï¼šæ›´æ–°ã™ã‚‹å®›å…ˆã®IDã€‚
- `S3DestinationUpdate`ï¼šAmazon S3å®›å…ˆã®æ›´æ–°æƒ…å ±ã€‚
- `ExtendedS3DestinationUpdate`ï¼šæ‹¡å¼µAmazon S3å®›å…ˆã®æ›´æ–°æƒ…å ±ã€‚
- `RedshiftDestinationUpdate`ï¼šAmazon Redshiftå®›å…ˆã®æ›´æ–°æƒ…å ±ã€‚
- `ElasticsearchDestinationUpdate`ï¼šAmazon Elasticsearchå®›å…ˆã®æ›´æ–°æƒ…å ±ã€‚
- `SplunkDestinationUpdate`ï¼šSplunkå®›å…ˆã®æ›´æ–°æƒ…å ±ã€‚

#### å¿œç­”

- `DeliveryStreamARN`ï¼šæ›´æ–°ã•ã‚ŒãŸé…ä¿¡ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®Amazonãƒªã‚½ãƒ¼ã‚¹åï¼ˆARNï¼‰ã€‚
- `ResponseMetadata`ï¼šãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€‚

#### ä¾‹

##### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```python
response = client.update_destination(
    DeliveryStreamName='example-stream',
    CurrentDeliveryStreamVersionId='1',
    DestinationId='example-destination',
    S3DestinationUpdate={
        'RoleARN': 'arn:aws:iam::123456789012:role/firehose_delivery_role',
        'BucketARN': 'arn:aws:s3:::example-bucket',
        'Prefix': 'example-prefix',
        'BufferingHints': {
            'SizeInMBs': 128,
            'IntervalInSeconds': 300
        },
        'CompressionFormat': 'UNCOMPRESSED',
        'EncryptionConfiguration': {
            'NoEncryptionConfig': 'NoEncryption'
        },
        'CloudWatchLoggingOptions': {
            'Enabled': True,
            'LogGroupName': 'example-log-group',
            'LogStreamName': 'example-log-stream'
        }
    }
)
```

##### ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```python
{
    'DeliveryStreamARN': 'arn:aws:firehose:us-west-2:123456789012:deliverystream/example-stream',
    'ResponseMetadata': {
        'RequestId': '12345678-1234-1234-1234-123456789012',
        'HTTPStatusCode': 200,
        'HTTPHeaders': {
            'x-amzn-requestid': '12345678-1234-1234-1234-123456789012',
            'content-type': 'application/x-amz-json-1.1',
            'content-length': '1234',
            'date': 'Thu, 01 Jan 1970 00:00:00 GMT'
        },
        'RetryAttempts': 0
    }
}
```
```
aws firehose update-destination --delivery-stream-name <value> --current-delivery-stream-version-id <value> --destination-id <value>
```
### firehose:PutRecord | firehose:PutRecordBatch

ã“ã‚Œã‚‰ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€Amazon Kinesis Data Firehoseã«å¯¾ã—ã¦å®Ÿè¡Œã§ãã‚‹ã‚‚ã®ã§ã™ã€‚`firehose:PutRecord`ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€å˜ä¸€ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’Firehoseã‚¹ãƒˆãƒªãƒ¼ãƒ ã«æ›¸ãè¾¼ã‚€ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚`firehose:PutRecordBatch`ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€è¤‡æ•°ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä¸€æ‹¬ã§Firehoseã‚¹ãƒˆãƒªãƒ¼ãƒ ã«æ›¸ãè¾¼ã‚€ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
```
aws firehose put-record --delivery-stream-name my-stream --record '{"Data":"SGVsbG8gd29ybGQ="}'

aws firehose put-record-batch --delivery-stream-name my-stream --records file://records.json
```
## å‚è€ƒæ–‡çŒ®

* [https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html](https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html)

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* ã‚‚ã—ã‚‚ã‚ãªãŸã®**ä¼šç¤¾ã‚’HackTricksã§å®£ä¼ã—ãŸã„**å ´åˆã‚„ã€**æœ€æ–°ç‰ˆã®PEASSã‚’å…¥æ‰‹ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼ã®PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’è¦‹ã¤ã‘ã¦ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç™ºè¦‹ã—ã¾ã—ã‚‡ã†
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter**ã§ç§ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)
* **HackTricks**ã¨**HackTricks Cloud**ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
