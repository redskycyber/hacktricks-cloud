# AWS - Kinesis Data Firehose Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## Kinesis Data Firehose

Amazon Kinesis Data Firehose, **gerÃ§ek zamanlÄ± akÄ±ÅŸ verilerinin** teslimini kolaylaÅŸtÄ±ran **tamamen yÃ¶netilen bir hizmettir**. Amazon Simple Storage Service (Amazon S3), Amazon Redshift, Amazon OpenSearch Service, Splunk ve Ã¶zel HTTP uÃ§ noktalarÄ± dahil olmak Ã¼zere Ã§eÅŸitli hedefleri destekler.

Bu hizmet, veri Ã¼reticilerinin verileri doÄŸrudan Kinesis Data Firehose'a iletmek iÃ§in yapÄ±landÄ±rÄ±labilmelerine olanak saÄŸlayarak, uygulama yazma veya kaynak yÃ¶netimi gibi ihtiyaÃ§larÄ± ortadan kaldÄ±rÄ±r. Bu hizmet, verilerin belirtilen hedefe **otomatik olarak teslim edilmesinden sorumludur**. AyrÄ±ca, Kinesis Data Firehose, verinin tesliminden Ã¶nce **veriyi dÃ¶nÃ¼ÅŸtÃ¼rme seÃ§eneÄŸi** sunarak, esnekliÄŸini ve Ã§eÅŸitli kullanÄ±m durumlarÄ±na uygulanabilirliÄŸini artÄ±rÄ±r.

### Enumerasyon
```bash
# Get delivery streams
aws firehose list-delivery-streams

#Â Get stream info
aws firehose describe-delivery-stream --delivery-stream-name <name>
## Get roles
aws firehose describe-delivery-stream --delivery-stream-name <name> | grep -i RoleARN
```
## Son iÅŸlem / Savunma Atlama

Firehose, gÃ¼nlÃ¼kleri veya savunma bilgilerini gÃ¶ndermek iÃ§in kullanÄ±ldÄ±ÄŸÄ±nda, bir saldÄ±rgan bu iÅŸlevleri kullanarak onun dÃ¼zgÃ¼n Ã§alÄ±ÅŸmasÄ±nÄ± engelleyebilir.

### firehose:DeleteDeliveryStream
```
aws firehose delete-delivery-stream --delivery-stream-name <value> --allow-force-delete
```
#### firehose:UpdateDestination

Bu iÅŸlem, bir Kinesis Data Firehose hedefinin yapÄ±landÄ±rmasÄ±nÄ± gÃ¼ncellemek iÃ§in kullanÄ±lÄ±r. Bu API Ã§aÄŸrÄ±sÄ±, hedefin gÃ¼ncellenmesi iÃ§in gerekli olan parametreleri alÄ±r ve hedefin yapÄ±landÄ±rmasÄ±nÄ± deÄŸiÅŸtirir.

##### Ä°stek Parametreleri

- `DeliveryStreamName`: GÃ¼ncellenmek istenen Kinesis Data Firehose hedefinin adÄ±.
- `CurrentDeliveryStreamVersionId`: GÃ¼ncelleme iÅŸlemi sÄ±rasÄ±nda hedefin mevcut sÃ¼rÃ¼mÃ¼nÃ¼ belirtir.
- `DestinationId`: GÃ¼ncellenmek istenen hedefin kimliÄŸi.
- `S3DestinationUpdate`: Hedefin S3 yapÄ±landÄ±rmasÄ±nÄ± gÃ¼ncellemek iÃ§in kullanÄ±lÄ±r.
- `ExtendedS3DestinationUpdate`: Hedefin geniÅŸletilmiÅŸ S3 yapÄ±landÄ±rmasÄ±nÄ± gÃ¼ncellemek iÃ§in kullanÄ±lÄ±r.
- `RedshiftDestinationUpdate`: Hedefin Redshift yapÄ±landÄ±rmasÄ±nÄ± gÃ¼ncellemek iÃ§in kullanÄ±lÄ±r.
- `ElasticsearchDestinationUpdate`: Hedefin Elasticsearch yapÄ±landÄ±rmasÄ±nÄ± gÃ¼ncellemek iÃ§in kullanÄ±lÄ±r.
- `SplunkDestinationUpdate`: Hedefin Splunk yapÄ±landÄ±rmasÄ±nÄ± gÃ¼ncellemek iÃ§in kullanÄ±lÄ±r.

##### YanÄ±t Parametreleri

- `DeliveryStreamARN`: GÃ¼ncellenen Kinesis Data Firehose hedefinin Amazon Resource Name (ARN) deÄŸeri.
- `UpdateTimestamp`: GÃ¼ncelleme iÅŸleminin tamamlanma zamanÄ±.

##### Ã–rnek Ä°stek

```plaintext
POST / HTTP/1.1
Host: firehose.<region>.amazonaws.com
Content-Type: application/x-amz-json-1.1
X-Amz-Target: Firehose_20150804.UpdateDestination
Content-Length: <PayloadSizeBytes>
Authorization: <AuthParams>

{
  "DeliveryStreamName": "example-stream",
  "CurrentDeliveryStreamVersionId": "1",
  "DestinationId": "destination-id",
  "S3DestinationUpdate": {
    "RoleARN": "arn:aws:iam::123456789012:role/firehose_delivery_role",
    "BucketARN": "arn:aws:s3:::example-bucket",
    "Prefix": "example-prefix",
    "BufferingHints": {
      "SizeInMBs": 128,
      "IntervalInSeconds": 300
    },
    "CompressionFormat": "UNCOMPRESSED",
    "EncryptionConfiguration": {
      "NoEncryptionConfig": "NoEncryption"
    }
  }
}
```

##### Ã–rnek YanÄ±t

```plaintext
HTTP/1.1 200 OK
x-amzn-RequestId: <RequestId>
Content-Type: application/x-amz-json-1.1
Content-Length: <PayloadSizeBytes>
Date: <Date>

{
  "DeliveryStreamARN": "arn:aws:firehose:us-west-2:123456789012:deliverystream/example-stream",
  "UpdateTimestamp": "2022-01-01T00:00:00.000Z"
}
```
```
aws firehose update-destination --delivery-stream-name <value> --current-delivery-stream-version-id <value> --destination-id <value>
```
### firehose:PutRecord | firehose:PutRecordBatch

Bu iki AWS Kinesis Data Firehose API Ã§aÄŸrÄ±sÄ±, verileri Kinesis Data Firehose akÄ±ÅŸÄ±na gÃ¶ndermek iÃ§in kullanÄ±lÄ±r. `firehose:PutRecord` tek bir kaydÄ± gÃ¶nderirken, `firehose:PutRecordBatch` birden fazla kaydÄ± toplu olarak gÃ¶nderir.

#### firehose:PutRecord

Bu API Ã§aÄŸrÄ±sÄ±yla, belirli bir Kinesis Data Firehose akÄ±ÅŸÄ±na tek bir kayÄ±t gÃ¶nderebilirsiniz. KayÄ±t, bir veri kaynaÄŸÄ±ndan (Ã¶rneÄŸin, bir uygulama veya sensÃ¶r) alÄ±nan veriyi temsil eder. Bu Ã§aÄŸrÄ±, kaydÄ±n boyutunu ve akÄ±ÅŸa gÃ¶nderilme hÄ±zÄ±nÄ± kontrol etmek iÃ§in kullanÄ±lan parametreleri kabul eder.

#### firehose:PutRecordBatch

Bu API Ã§aÄŸrÄ±sÄ±yla, birden fazla kaydÄ± toplu olarak bir Kinesis Data Firehose akÄ±ÅŸÄ±na gÃ¶nderebilirsiniz. Her bir kayÄ±t, bir veri kaynaÄŸÄ±ndan alÄ±nan veriyi temsil eder. `firehose:PutRecord` Ã§aÄŸrÄ±sÄ±na benzer ÅŸekilde, bu Ã§aÄŸrÄ± da kayÄ±tlarÄ±n boyutunu ve akÄ±ÅŸa gÃ¶nderilme hÄ±zÄ±nÄ± kontrol etmek iÃ§in parametreleri kabul eder.

Bu API Ã§aÄŸrÄ±larÄ±nÄ±n yetkilendirme kontrollerini dikkatlice yapÄ±landÄ±rmak Ã¶nemlidir, Ã§Ã¼nkÃ¼ kÃ¶tÃ¼ niyetli bir saldÄ±rganÄ±n veri akÄ±ÅŸÄ±na izinsiz eriÅŸim saÄŸlamasÄ±nÄ± Ã¶nlemek iÃ§in gerekli Ã¶nlemleri almanÄ±z gerekir.
```
aws firehose put-record --delivery-stream-name my-stream --record '{"Data":"SGVsbG8gd29ybGQ="}'

aws firehose put-record-batch --delivery-stream-name my-stream --records file://records.json
```
## Referanslar

* [https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html](https://docs.amazonaws.cn/en\_us/firehose/latest/dev/what-is-this-service.html)

<details>

<summary><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±) ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>!</strong></a><strong></strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ±zÄ± gÃ¶rmek veya HackTricks'i PDF olarak indirmek isterseniz** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerimizden oluÅŸan PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± takip edin.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>
