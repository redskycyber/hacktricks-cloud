# GCP - Firebase Enum

<details>

<summary><strong>ãƒãƒƒã‚¯ãƒˆãƒªãƒƒã‚¯ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ç‰¹å…¸ã‚’å¾—ã‚‹ï¼</strong></summary>

* **HackTricksã§ä¼šç¤¾ã‚’å®£ä¼ã—ãŸã„**å ´åˆã‚„ã€**PEASSã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¦‹ãŸã„**å ´åˆã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter**ã§ç§ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)
* **ãƒãƒƒã‚­ãƒ³ã‚°ã®ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€**[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>

## [Firebase](https://cloud.google.com/sdk/gcloud/reference/firebase/)

Firebase Realtime Databaseã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ä¿å­˜ãŠã‚ˆã³åŒæœŸã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ›ã‚¹ãƒˆå‹ã®NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚[è©³ç´°ã‚’è¦‹ã‚‹](https://firebase.google.com/products/realtime-database/)ã€‚

### èªè¨¼ã•ã‚Œã¦ã„ãªã„åˆ—æŒ™

ä¸€éƒ¨ã®**Firebaseã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**ã¯**ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚Firebaseã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãã‚ŒãŒ**æ‚ªãæ§‹æˆã•ã‚Œã¦ã„ã¦ã€èª°ã§ã‚‚èª­ã¿å–ã‚Šï¼ˆãŠã‚ˆã³æ›¸ãè¾¼ã¿ï¼‰ã®æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹**å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã¯ã€æ§‹æˆãŒä¸ååˆ†ãªFirebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ¤œç´¢ãŠã‚ˆã³æ”»æ’ƒã™ã‚‹ä¸€èˆ¬çš„ãªæ–¹æ³•ã§ã™ã€‚

1. **ã‚¢ãƒ—ãƒªã®APK**ã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã®POCã§ã¯ã€ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰APKã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä»»æ„ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚\
ã€ŒAPK Extractorã€ã‚’ä½¿ç”¨ã§ãã¾ã™ [https://play.google.com/store/apps/details?id=com.ext.ui\&hl=e](https://hackerone.com/redirect?signature=3774f35d1b5ea8a4fd209d80084daa9f5887b105\&url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.ext.ui%26hl%3Den)
2. **apktool**ã‚’ä½¿ç”¨ã—ã¦APKã‚’**ãƒ‡ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã«å¾“ã£ã¦APKã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã¾ã™ã€‚
3. _**res/values/strings.xml**_ã«ç§»å‹•ã—ã€ã€Œ**firebase**ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’**æ¤œç´¢**ã—ã¾ã™ã€‚
4. ã€Œ_**https://xyz.firebaseio.com/**_ã€ã®ã‚ˆã†ãªURLãŒè¦‹ã¤ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
5. æ¬¡ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§è¦‹ã¤ã‹ã£ãŸURLã«ç§»å‹•ã—ã¾ã™ï¼š_https://xyz.firebaseio.com/.json_
6. 2ç¨®é¡ã®å¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼š
   1. ã€Œ**Permission Denied**ã€ï¼šã“ã‚Œã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨ã‚’æ„å‘³ã—ã€é©åˆ‡ã«æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚
   2. ã€Œ**null**ã€ã®å¿œç­”ã¾ãŸã¯ä¸€é€£ã®**JSONãƒ‡ãƒ¼ã‚¿**ï¼šã“ã‚Œã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€å°‘ãªãã¨ã‚‚èª­ã¿å–ã‚Šã‚¢ã‚¯ã‚»ã‚¹æ¨©ãŒã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
7. ã“ã®å ´åˆã€**æ›¸ãè¾¼ã¿æ¨©é™ã‚’ãƒã‚§ãƒƒã‚¯**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ›¸ãè¾¼ã¿æ¨©é™ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã¯ã€ã“ã“ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š[https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit](https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit)

**èˆˆå‘³æ·±ã„æ³¨è¨˜**ï¼š**MobSF**ã§ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ†æã™ã‚‹éš›ã«ã€Firebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é€šçŸ¥ã—ã¾ã™ã€‚

ä»£ã‚ã‚Šã«ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ã€ä¸Šè¨˜ã®ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•åŒ–ã™ã‚‹Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚ã‚‹[Firebase Scanner](https://github.com/shivsahni/FireBaseScanner)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
```bash
python FirebaseScanner.py -f <commaSeperatedFirebaseProjectNames>
```
### èªè¨¼æ¸ˆã¿ã®åˆ—æŒ™

Firebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®è³‡æ ¼æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€[**Baserunner**](https://github.com/iosiro/baserunner)ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€æ ¼ç´ã•ã‚ŒãŸæƒ…å ±ã«ã‚ˆã‚Šç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ã¾ãŸã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
```python
#Taken from https://blog.assetnote.io/bug-bounty/2020/02/01/expanding-attack-surface-react-native/
import pyrebase

config = {
"apiKey": "FIREBASE_API_KEY",
"authDomain": "FIREBASE_AUTH_DOMAIN_ID.firebaseapp.com",
"databaseURL": "https://FIREBASE_AUTH_DOMAIN_ID.firebaseio.com",
"storageBucket": "FIREBASE_AUTH_DOMAIN_ID.appspot.com",
}

firebase = pyrebase.initialize_app(config)

db = firebase.database()

print(db.get())
```
ä»–ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸Šã®æ“ä½œï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ›¸ãè¾¼ã¿ãªã©ï¼‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€[ã“ã¡ã‚‰](https://github.com/thisbejim/Pyrebase)ã®Pyrebaseãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### APPIDã¨APIã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚¢ã‚¯ã‚»ã‚¹æƒ…å ± <a href="#access-info-with-appid-and-api-key" id="access-info-with-appid-and-api-key"></a>

iOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€`GoogleService-Info.plist`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ã€APIã‚­ãƒ¼ã¨APP IDãŒè¦‹ã¤ã‹ã‚Šã¾ã™ï¼š

* APIã‚­ãƒ¼ **AIzaSyAs1\[...]**
* APP ID **1:612345678909:ios:c212345678909876**

ã„ãã¤ã‹ã®èˆˆå‘³æ·±ã„æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**

`curl -v -X POST "https://firebaseremoteconfig.googleapis.com/v1/projects/612345678909/namespaces/firebase:fetch?key=AIzaSyAs1[...]" -H "Content-Type: application/json" --data '{"appId": "1:612345678909:ios:c212345678909876", "appInstanceId": "PROD"}'`

## å‚è€ƒæ–‡çŒ® <a href="#references" id="references"></a>

* â€‹[https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/](https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/)â€‹
* â€‹[https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1](https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1)â€‹

<details>

<summary><strong>Support HackTricks and get benefits!</strong></summary>

* If you want to see your **company advertised in HackTricks** or if you want access to the **latest version of the PEASS or download HackTricks in PDF** Check the [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Get the [**official PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Discover [**The PEASS Family**](https://opensea.io/collection/the-peass-family), our collection of exclusive [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Join the** ğŸ’¬ [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** me on **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Share your hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
