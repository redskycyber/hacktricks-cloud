# GCP - Firebase Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§ã®AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **HackTricks**ã®[**GitHubãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>

## [Firebase](https://cloud.google.com/sdk/gcloud/reference/firebase/)

Firebaseãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãŠã‚ˆã³åŒæœŸã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ›ã‚¹ãƒˆå‹ã®NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚[è©³ç´°ã‚’å­¦ã¶](https://firebase.google.com/products/realtime-database/)ã€‚

### èªè¨¼ã•ã‚Œã¦ã„ãªã„Enum

**Firebaseã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**ã¯**ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã§è¦‹ã¤ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚Firebaseã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒèª¤ã£ã¦è¨­å®šã•ã‚Œã¦ã„ã¦ã€èª°ã§ã‚‚èª­ã¿å–ã‚Šï¼ˆãŠã‚ˆã³æ›¸ãè¾¼ã¿ï¼‰æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ä¸é©åˆ‡ã«è¨­å®šã•ã‚ŒãŸFirebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ¤œç´¢ã—ã¦æ‚ªç”¨ã™ã‚‹ä¸€èˆ¬çš„ãªæ–¹æ³•è«–ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™:

1. **APKã‚’å–å¾—ã™ã‚‹** ã“ã®POCã«ã¯ã€ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰APKã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚\
ã€ŒAPK Extractorã€ã‚’ä½¿ç”¨ã§ãã¾ã™ [https://play.google.com/store/apps/details?id=com.ext.ui\&hl=e](https://hackerone.com/redirect?signature=3774f35d1b5ea8a4fd209d80084daa9f5887b105\&url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.ext.ui%26hl%3Den)
2. **APKã‚’é€†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹** **apktool**ã‚’ä½¿ç”¨ã—ã¦APKã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã«å¾“ã£ã¦ãã ã•ã„ã€‚
3. _**res/values/strings.xml**_ ã«ç§»å‹•ã—ã€ã€Œ**firebase**ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’**æ¤œç´¢**ã—ã¾ã™
4. ã“ã®ã‚ˆã†ãªURLã‚’è¦‹ã¤ã‘ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ "_**https://xyz.firebaseio.com/**_"
5. æ¬¡ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§è¦‹ã¤ã‹ã£ãŸURLã«**ç§»å‹•ã—ã¾ã™**: _https://xyz.firebaseio.com/.json_
6. 2ç¨®é¡ã®å¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™:
   1. "**Permission Denied**": ã“ã‚Œã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨ã‚’æ„å‘³ã—ã€é©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™
   2. "**null**" å¿œç­”ã¾ãŸã¯å¤šãã®**JSONãƒ‡ãƒ¼ã‚¿**: ã“ã‚Œã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€å°‘ãªãã¨ã‚‚èª­ã¿å–ã‚Šã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
      1. ã“ã®å ´åˆã€**æ›¸ãè¾¼ã¿æ¨©é™ã‚’ãƒã‚§ãƒƒã‚¯**ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ›¸ãè¾¼ã¿æ¨©é™ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒˆã¯ã“ã¡ã‚‰ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™: [https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit](https://github.com/MuhammadKhizerJaved/Insecure-Firebase-Exploit)

**èˆˆå‘³æ·±ã„æ³¨è¨˜**: **MobSF**ã‚’ä½¿ç”¨ã—ã¦ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ†æã™ã‚‹éš›ã€Firebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹ã¨ã€ã“ã‚ŒãŒ**å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹**ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é€šçŸ¥ã—ã¾ã™ã€‚

ä»£ã‚ã‚Šã«ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ã€ä¸Šè¨˜ã®ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•åŒ–ã™ã‚‹Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚ã‚‹[Firebase Scanner](https://github.com/shivsahni/FireBaseScanner)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š
```bash
python FirebaseScanner.py -f <commaSeperatedFirebaseProjectNames>
```
### èªè¨¼æ¸ˆã¿Enum

Firebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®è³‡æ ¼æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã€[**Baserunner**](https://github.com/iosiro/baserunner)ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ä¿å­˜ã•ã‚Œã¦ã„ã‚‹æƒ…å ±ã«ã‚ˆã‚Šç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ã¾ãŸã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ï¼š
```python
#Taken from https://blog.assetnote.io/bug-bounty/2020/02/01/expanding-attack-surface-react-native/
import pyrebase

config = {
"apiKey": "FIREBASE_API_KEY",
"authDomain": "FIREBASE_AUTH_DOMAIN_ID.firebaseapp.com",
"databaseURL": "https://FIREBASE_AUTH_DOMAIN_ID.firebaseio.com",
"storageBucket": "FIREBASE_AUTH_DOMAIN_ID.appspot.com",
}

firebase = pyrebase.initialize_app(config)

db = firebase.database()

print(db.get())
```
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ›¸ãè¾¼ã¿ãªã©ã€ä»–ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€[ã“ã¡ã‚‰](https://github.com/thisbejim/Pyrebase)ã§è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹Pyrebaseã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### APPIDã¨APIã‚­ãƒ¼ã‚’ä½¿ã£ãŸã‚¢ã‚¯ã‚»ã‚¹æƒ…å ± <a href="#access-info-with-appid-and-api-key" id="access-info-with-appid-and-api-key"></a>

iOSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦`GoogleService-Info.plist`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ã€APIã‚­ãƒ¼ã¨APP IDãŒè¦‹ã¤ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š

* APIã‚­ãƒ¼ **AIzaSyAs1\[...]**
* APP ID **1:612345678909:ios:c212345678909876**

èˆˆå‘³æ·±ã„æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**

`curl -v -X POST "https://firebaseremoteconfig.googleapis.com/v1/projects/612345678909/namespaces/firebase:fetch?key=AIzaSyAs1[...]" -H "Content-Type: application/json" --data '{"appId": "1:612345678909:ios:c212345678909876", "appInstanceId": "PROD"}'`

## å‚è€ƒæ–‡çŒ® <a href="#references" id="references"></a>

* â€‹[https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/](https://blog.securitybreached.org/2020/02/04/exploiting-insecure-firebase-database-bugbounty/)â€‹
* â€‹[https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1](https://medium.com/@danangtriatmaja/firebase-database-takover-b7929bbb62e1)â€‹

<details>

<summary><strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶ã«ã¯</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ã‚’ãƒã‚§ãƒƒã‚¯ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼ã®PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã‚„[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ ã™ã‚‹**ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **HackTricks**ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’**å…±æœ‰**ã—ã¦ãã ã•ã„ã€‚

</details>
