# GCP - Artifact Registry Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)'a PR gÃ¶ndererek paylaÅŸÄ±n
* &#x20;github repos.

</details>

## Temel Bilgiler

Google Cloud Artifact Registry, **yazÄ±lÄ±m artefaktlarÄ±nÄ±zÄ± yÃ¶netmenize, depolamanÄ±za ve gÃ¼vence altÄ±na almanÄ±za olanak saÄŸlayan tamamen yÃ¶netilen bir hizmettir**. Temel olarak, **Docker** gÃ¶rÃ¼ntÃ¼leri, **Maven**, npm paketleri ve diÄŸer artefakt tÃ¼rleri gibi **derleme baÄŸÄ±mlÄ±lÄ±klarÄ±nÄ± depolamak iÃ§in bir depo** olarak kullanÄ±lÄ±r. YazÄ±lÄ±m geliÅŸtirme sÃ¼reci sÄ±rasÄ±nda Ã¼retilen artefaktlarÄ± depolamak ve sÃ¼rÃ¼mlemek iÃ§in **CI/CD borularÄ±nda yaygÄ±n olarak kullanÄ±lÄ±r**.

Artifact Registry'nin temel Ã¶zellikleri ÅŸunlardÄ±r:

1. **BirleÅŸik Depo**: Docker gÃ¶rÃ¼ntÃ¼leri, dil paketleri (Java'nÄ±n Maven'i, Node.js'nin npm'i gibi) ve diÄŸer artefakt tÃ¼rleri iÃ§in tek bir depo kullanmanÄ±za olanak saÄŸlar, bÃ¶ylece tÃ¼m artefaktlara tutarlÄ± eriÅŸim kontrolleri ve birleÅŸik bir gÃ¶rÃ¼nÃ¼m saÄŸlar.
2. **Tamamen YÃ¶netilen**: YÃ¶netilen bir hizmet olarak, altta yatan altyapÄ±yÄ±, Ã¶lÃ§eklendirmeyi ve gÃ¼venliÄŸi yÃ¶netir, kullanÄ±cÄ±lar iÃ§in bakÄ±m yÃ¼kÃ¼nÃ¼ azaltÄ±r.
3. **Ä°nce TanÄ±mlÄ± EriÅŸim KontrolÃ¼**: Google Cloud Kimlik ve EriÅŸim YÃ¶netimi (IAM) ile entegre olarak, depolarÄ±nÄ±zdaki artefaktlara kimin eriÅŸebileceÄŸini, yÃ¼kleyebileceÄŸini veya indirebileceÄŸini tanÄ±mlamanÄ±za olanak saÄŸlar.
4. **CoÄŸrafi Ã‡oÄŸaltma**: Birden fazla bÃ¶lgede artefaktlarÄ±n Ã§oÄŸaltÄ±lmasÄ±nÄ± destekler, indirme hÄ±zÄ±nÄ± artÄ±rÄ±r ve kullanÄ±labilirliÄŸi saÄŸlar.
5. **Google Cloud Hizmetleriyle Entegrasyon**: Cloud Build, Kubernetes Engine ve Compute Engine gibi **diÄŸer GCP hizmetleriyle sorunsuz Ã§alÄ±ÅŸÄ±r**, bu da Google Cloud ekosistemi iÃ§inde zaten Ã§alÄ±ÅŸan ekipler iÃ§in uygun bir seÃ§enek yapar.
6. **GÃ¼venlik**: Depolanan artefaktlarÄ±n gÃ¼venli ve bilinen gÃ¼venlik sorunlarÄ±ndan arÄ±ndÄ±ÄŸÄ±ndan emin olmak iÃ§in **zayÄ±flÄ±klarÄ±n taramasÄ± ve konteyner analizi** gibi Ã¶zellikler sunar.

### Formatlar ve Modlar

Yeni bir depo oluÅŸturulurken, depo **format/tÃ¼rÃ¼** arasÄ±ndan Docker, Maven, npm, Python gibi birini **seÃ§mek mÃ¼mkÃ¼ndÃ¼r** ve genellikle Ã¼Ã§ moddan biri olabilir:

* **Standart Depo**: Kendi artefaktlarÄ±nÄ±zÄ± (Docker gÃ¶rÃ¼ntÃ¼leri, Maven paketleri gibi) doÄŸrudan GCP'de **depolar** iÃ§in varsayÄ±lan moddur. GÃ¼venli, Ã¶lÃ§eklenebilir ve Google Cloud ekosistemiyle uyumlu Ã§alÄ±ÅŸÄ±r.
* **Uzak Depo** (mÃ¼saitse): DÄ±ÅŸ, genel depolardan **artefaktlarÄ± Ã¶nbelleÄŸe alan bir proxy** olarak hareket eder. BaÄŸÄ±mlÄ±lÄ±klarÄ±n yukarÄ± akÄ±ÅŸta deÄŸiÅŸmesinden kaynaklanan sorunlarÄ± Ã¶nlemeye yardÄ±mcÄ± olur ve sÄ±k eriÅŸilen artefaktlarÄ± Ã¶nbelleÄŸe alarak gecikmeyi azaltÄ±r.
* **Sanal Depo** (mÃ¼saitse): Birden Ã§ok (standart veya uzak) depoya **tek bir noktadan eriÅŸim saÄŸlayan birleÅŸik bir arayÃ¼z** sunar, bÃ¶ylece Ã§eÅŸitli depolara yayÄ±lan artefaktlar iÃ§in istemci tarafÄ± yapÄ±landÄ±rmasÄ±nÄ± ve eriÅŸim yÃ¶netimini basitleÅŸtirir.
* Sanal bir depo iÃ§in **depolarÄ± seÃ§meniz ve onlara bir Ã¶ncelik vermeniz gerekecektir** (en yÃ¼ksek Ã¶nceliÄŸe sahip depo kullanÄ±lacaktÄ±r).
* Bir sanal depoda **uzak ve standart** depolarÄ± **karÄ±ÅŸtÄ±rabilirsiniz**, eÄŸer **uzak** depodaki **Ã¶ncelik**, **standart** depodan **daha bÃ¼yÃ¼kse (Ã¶rneÄŸin PyPi)**, **uzaktaki paketler kullanÄ±lacaktÄ±r**. Bu, bir **BaÄŸÄ±mlÄ±lÄ±k KarÄ±ÅŸÄ±klÄ±ÄŸÄ±na** yol aÃ§abilir.

Docker'Ä±n **Uzak sÃ¼rÃ¼mÃ¼nde** Docker Hub'a eriÅŸmek iÃ§in bir kullanÄ±cÄ± adÄ± ve belirteÃ§ vermek mÃ¼mkÃ¼ndÃ¼r. **BelirteÃ§ daha sonra Secret Manager'da saklanÄ±r**.

### Åifreleme

BeklendiÄŸi gibi, varsayÄ±lan olarak Google tarafÄ±ndan yÃ¶netilen bir anahtar kullanÄ±lÄ±r, ancak MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen bir anahtar (CMEK) belirtilebilir.

### Temizleme PolitikalarÄ±

* **ArtefaktlarÄ± sil:** Artefaktlar, temizleme politikasÄ± kriterlerine gÃ¶re **silinecektir**.
* **Kuru Ã§alÄ±ÅŸtÄ±rma:** (VarsayÄ±lan olan) Artefaktlar **silinmeyecek**. Temizleme politikalarÄ± deÄŸerlendirilecek ve test silme olaylarÄ± Cloud Audit Logging'e gÃ¶nderilecektir.

### ZayÄ±flÄ±k TaramasÄ±

**ZayÄ±flÄ±k tarayÄ±cÄ±sÄ±nÄ±** etkinleÅŸtirmek mÃ¼mkÃ¼ndÃ¼r, bu tarayÄ±cÄ± **konteyner gÃ¶rÃ¼ntÃ¼leri** iÃ§indeki zayÄ±flÄ±klarÄ± kontrol edecektir.

### NumaralandÄ±rma
```bash
# Get repositories
gcloud artifacts repositories list
gcloud artifacts repositories describe --location <location> <repo-name>
gcloud artifacts versions list --repository=<repo-name> -location <location> --package <package-name>

# Get settings of a repository (example using python but could be other)
gcloud artifacts print-settings python --repository <repo-name> --location <location>

# Get docker images
gcloud artifacts docker images list us-central1-docker.pkg.dev/<proj-name>/<repo-name>

# Get packages (like python and others...)
gcloud artifacts packages list --repository <repo-name> --location <location>

# Get SBOMB artifacts
gcloud artifacts sbom list

# Get vulnerabilities (docker images)
gcloud artifacts vulnerabilities list us-east1-docker.pkg.dev/project123/repository123/someimage@sha256:49765698074d6d7baa82f
gcloud artifacts docker images list-vulnerabilities projects/<proj-name>/locations/<location>/scans/<scan-uuid>
```
### Yetki YÃ¼kseltme

{% content-ref url="../gcp-privilege-escalation/gcp-artifact-registry-privesc.md" %}
[gcp-artifact-registry-privesc.md](../gcp-privilege-escalation/gcp-artifact-registry-privesc.md)
{% endcontent-ref %}

### Kimlik DoÄŸrulamasÄ±z EriÅŸim

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md" %}
[gcp-artifact-registry-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-artifact-registry-unauthenticated-enum.md)
{% endcontent-ref %}

### SaldÄ±rÄ± SonrasÄ±

{% content-ref url="../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md" %}
[gcp-artifact-registry-post-exploitation.md](../gcp-post-exploitation/gcp-artifact-registry-post-exploitation.md)
{% endcontent-ref %}

### KalÄ±cÄ±lÄ±k

{% content-ref url="../gcp-persistence/gcp-artifact-registry-persistence.md" %}
[gcp-artifact-registry-persistence.md](../gcp-persistence/gcp-artifact-registry-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>
