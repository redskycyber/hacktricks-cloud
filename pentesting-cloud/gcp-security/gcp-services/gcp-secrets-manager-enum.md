# GCP - Secrets Manager Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ **ì œë¡œ**ë¶€í„° **íˆì–´ë¡œ**ê¹Œì§€ AWS í•´í‚¹ì„ ë°°ìš°ì„¸ìš”!</summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PDF í˜•ì‹ìœ¼ë¡œ HackTricks ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [Discord ê·¸ë£¹](https://discord.gg/hRep4RUj7f)** ë˜ëŠ” [í…”ë ˆê·¸ë¨ ê·¸ë£¹](https://t.me/peass)ì— **ê°€ì…**í•˜ê±°ë‚˜ **íŠ¸ìœ„í„°** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´ PRì„** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— ì œì¶œí•˜ì„¸ìš”.

</details>

## Secret Manager

Google [**Secret Manager**](https://cloud.google.com/solutions/secrets-management/)ì€ ë¹„ë°€ë²ˆí˜¸, API í‚¤, ì¸ì¦ì„œ, íŒŒì¼(ìµœëŒ€ 64KB) ë° ê¸°íƒ€ ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë³´ê¸ˆìë¦¬ì™€ ê°™ì€ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

ë¹„ë°€ì€ **ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë‹¤ë¥¸ ë²„ì „ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤**.

**ê¸°ë³¸ì ìœ¼ë¡œ** ë¹„ë°€ì€ **Googleì´ ê´€ë¦¬í•˜ëŠ” í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™”**ë˜ì§€ë§Œ, ë¹„ë°€ì„ ì•”í˜¸í™”í•˜ëŠ” ë° ì‚¬ìš©í•  KMS í‚¤ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**íšŒì „**ì— ëŒ€í•´ì„  **ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•˜ì—¬ ì¼ì • ì¼ ìˆ˜ë§ˆë‹¤ pub-subë¡œ ì „ì†¡**í•  ìˆ˜ ìˆìœ¼ë©°, í•´ë‹¹ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ëŠ” ì½”ë“œê°€ **ë¹„ë°€ì„ íšŒì „**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ìë™ ì‚­ì œë¥¼ ìœ„í•œ ë‚ ì§œ**ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìœ¼ë©°, ì§€ì •ëœ ë‚ ì§œì— ë„ë‹¬í•˜ë©´ **ë¹„ë°€ì´ ìë™ìœ¼ë¡œ ì‚­ì œ**ë©ë‹ˆë‹¤.

### Enumeration
```bash
# First, list the entries
gcloud secrets list
gcloud secrets get-iam-policy <secret_name>

# Then, pull the clear-text of any version of any secret
gcloud secrets versions list <secret_name>
gcloud secrets versions access 1 --secret="<secret_name>"
```
### ê¶Œí•œ ìƒìŠ¹

ë‹¤ìŒ í˜ì´ì§€ì—ì„œëŠ” **ì‹œí¬ë¦¿ ë§¤ë‹ˆì € ê¶Œí•œì„ ë‚¨ìš©í•˜ì—¬ ê¶Œí•œì„ ìƒìŠ¹í•˜ëŠ” ë°©ë²•**ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

{% content-ref url="../../gcp-security/gcp-privilege-escalation/gcp-secretmanager-privesc.md" %}
[gcp-secretmanager-privesc.md](../../gcp-security/gcp-privilege-escalation/gcp-secretmanager-privesc.md)
{% endcontent-ref %}

### ì‚¬í›„ ê³µê²©

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-secretmanager-post-exploitation.md" %}
[gcp-secretmanager-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-secretmanager-post-exploitation.md)
{% endcontent-ref %}

### ì§€ì†ì„±

{% content-ref url="../../gcp-security/gcp-persistence/gcp-secret-manager-persistence.md" %}
[gcp-secret-manager-persistence.md](../../gcp-security/gcp-persistence/gcp-secret-manager-persistence.md)
{% endcontent-ref %}

### íšŒì „ ì˜¤ìš©

ê³µê²©ìëŠ” ì‹œí¬ë¦¿ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ **íšŒì „ì„ ì¤‘ì§€**ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ìˆ˜ì •ë˜ì§€ ì•ŠìŒ), ë˜ëŠ” **íšŒì „ì„ í›¨ì”¬ ëœ ìì£¼**í•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì‹œí¬ë¦¿ì´ ìˆ˜ì •ë˜ì§€ ì•ŠìŒ) ë˜ëŠ” **íšŒì „ ë©”ì‹œì§€ë¥¼ ë‹¤ë¥¸ pub/subì— ê²Œì‹œ**í•˜ê±°ë‚˜ ì‹¤í–‰ë˜ëŠ” íšŒì „ ì½”ë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì´ëŠ” ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì—ì„œ ë°œìƒí•˜ë©° ì•„ë§ˆë„ í´ë¼ìš°ë“œ í•¨ìˆ˜ì—ì„œ ë°œìƒí•˜ë¯€ë¡œ ê³µê²©ìëŠ” í´ë¼ìš°ë“œ í•¨ìˆ˜ë‚˜ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ëŒ€í•œ íŠ¹ê¶Œ ì•¡ì„¸ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤)
