# GCP - Bezpieczestwo

<details>

<summary><strong>Zacznij od zera i sta si ekspertem od hakowania AWS dziki</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Inne sposoby wsparcia HackTricks:

* Jeli chcesz zobaczy swoj **firm reklamowan w HackTricks** lub **pobra HackTricks w formacie PDF**, sprawd藕 [**PLANY SUBSKRYPCYJNE**](https://github.com/sponsors/carlospolop)!
* Zdobd藕 [**oficjalne gad偶ety PEASS & HackTricks**](https://peass.creator-spring.com)
* Odkryj [**Rodzin PEASS**](https://opensea.io/collection/the-peass-family), nasz kolekcj ekskluzywnych [**NFT**](https://opensea.io/collection/the-peass-family)
* **Docz do**  [**grupy Discord**](https://discord.gg/hRep4RUj7f) lub [**grupy telegramowej**](https://t.me/peass) lub **led藕** nas na **Twitterze**  [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podziel si swoimi sztuczkami hakerskimi, przesyajc PR-y do** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>

## Podstawowe informacje

Bezpieczestwo Google Cloud Platform (GCP) obejmuje **kompleksowy zestaw narzdzi** i praktyk zaprojektowanych w celu zapewnienia **bezpieczestwa** zasob贸w i danych w rodowisku Google Cloud, podzielonych na cztery g贸wne sekcje: **Centrum Dowodzenia Bezpieczestwem, Wykrywanie i Kontrole, Ochrona Danych i Zero Trust.**

## **Centrum Dowodzenia Bezpieczestwem**

Centrum Dowodzenia Bezpieczestwem (SCC) Google Cloud Platform (GCP) to narzdzie **zarzdzania bezpieczestwem i ryzykiem dla zasob贸w GCP**, kt贸re umo偶liwia organizacjom uzyskanie widocznoci i kontroli nad ich zasobami w chmurze. Pomaga **wykrywa i reagowa na zagro偶enia**, oferujc kompleksow analiz bezpieczestwa, **identyfikujc bdy konfiguracji**, zapewniajc **zgodno** ze standardami bezpieczestwa oraz **integracj** z innymi narzdziami bezpieczestwa do automatycznego wykrywania i reagowania na zagro偶enia.

* **Przegld**: Panel do **wizualizacji przegldu** wszystkich wynik贸w Centrum Dowodzenia Bezpieczestwem.
* Zagro偶enia: \[Wymagane konto Premium] Panel do wizualizacji wszystkich **wykrytych zagro偶e. Sprawd藕 wicej o Zagro偶eniach poni偶ej**
* **Usterki**: Panel do **wizualizacji znalezionych bd贸w konfiguracji w koncie GCP**.
* **Zgodno**: \[Wymagane konto Premium] Ta sekcja pozwala **testowa rodowisko GCP pod ktem kilku sprawdze zgodnoci** (takich jak PCI-DSS, NIST 800-53, normy CIS...) w organizacji.
* **Zasoby**: Ta sekcja **pokazuje wszystkie u偶ywane zasoby**, bardzo przydatne dla administrator贸w systemu (i by mo偶e atakujcych), aby zobaczy, co dziaa na jednej stronie.
* **Wyniki**: To **agreguje** w **tabeli wyniki** r贸偶nych sekcji Bezpieczestwa GCP (nie tylko Centrum Dowodzenia), aby mo偶na byo atwo wizualizowa istotne wyniki.
* **殴r贸da**: Pokazuje **podsumowanie wynik贸w** wszystkich r贸偶nych sekcji bezpieczestwa GCP **wedug sekcji**.
* **Postawa**: \[Wymagane konto Premium] Postawa Bezpieczestwa pozwala na **definiowanie, ocen i monitorowanie bezpieczestwa rodowiska GCP**. Dziaa poprzez tworzenie polityki, kt贸ra definiuje ograniczenia lub restrykcje kontrolujce/monitorujce zasoby w GCP. Istnieje kilka predefiniowanych szablon贸w postawy, kt贸re mo偶na znale藕 pod adresem [https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy](https://cloud.google.com/security-command-center/docs/security-posture-overview?authuser=2#predefined-policy)

### **Zagro偶enia**

Z perspektywy atakujcego, jest to prawdopodobnie **najbardziej interesujca funkcja, poniewa偶 mo偶e wykry atakujcego**. Nale偶y jednak zauwa偶y, 偶e ta funkcja wymaga **Konta Premium** (co oznacza, 偶e firma bdzie musiaa zapaci wicej), wic **mo偶e nawet nie by wczona**.&#x20;

Istniej 3 rodzaje mechanizm贸w wykrywania zagro偶e:

* **Zagro偶enia Zdarze**: Wyniki generowane przez dopasowanie zdarze z **Cloud Logging** na podstawie **regu utworzonych** wewntrznie przez Google. Mo偶e r贸wnie偶 skanowa **logi Google Workspace**.
* Mo偶na znale藕 opis wszystkich [**regu wykrywania w dokumentacji**](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview?authuser=2#how\_works)
* **Zagro偶enia Kontener贸w**: Wyniki generowane po analizie zachowania na niskim poziomie jdra kontener贸w.
* **Zagro偶enia Niestandardowe**: Reguy utworzone przez firm.

Mo偶na znale藕 zalecane odpowiedzi na wykryte zagro偶enia obu typ贸w pod adresem [https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response](https://cloud.google.com/security-command-center/docs/how-to-investigate-threats?authuser=2#event\_response)

### Wyliczenie

{% code overflow="wrap" %}
```bash
# Get a source
gcloud scc sources describe <org-number> --source=5678
## If the response is that the service is disabled or that the source is not found, then, it isn't enabled

# Get notifications
gcloud scc notifications list <org-number>

# Get findings (if not premium these are just vulnerabilities)
gcloud scc findings list <org-number>
```
## Detekcje i Kontrole

* **Chronicle SecOps**: Zaawansowany pakiet operacji bezpieczestwa zaprojektowany w celu pomocy zespoom zwikszy szybko i wpyw operacji bezpieczestwa, w tym wykrywanie zagro偶e, dochodzenie i reakcja.
* **reCAPTCHA Enterprise**: Usuga chronica strony internetowe przed oszustwami takimi jak scrapowanie, stuffing powiadcze i ataki automatyczne, rozr贸偶niajca midzy ludzkimi u偶ytkownikami a botami.
* **Web Security Scanner**: Zautomatyzowane narzdzie skanujce bezpieczestwo, kt贸re wykrywa podatnoci i powszechne problemy z bezpieczestwem w aplikacjach internetowych hostowanych w Google Cloud lub innej usudze internetowej.
* **Risk Manager**: Narzdzie do zarzdzania ryzykiem, zgodnoci i zgodnoci (GRC), kt贸re pomaga organizacjom oceni, udokumentowa i zrozumie ich postaw ryzyka w Google Cloud.
* **Binary Authorization**: Kontrola bezpieczestwa dla kontener贸w, kt贸ra zapewnia, 偶e na klastrach silnika Kubernetes Engine s wdra偶ane tylko zaufane obrazy kontener贸w zgodnie z zasadami ustanowionymi przez przedsibiorstwo.
* **Powiadomienia Doradcze**: Usuga dostarczajca alert贸w i porad dotyczcych potencjalnych problem贸w z bezpieczestwem, podatnoci i zalecanych dziaa w celu zapewnienia bezpieczestwa zasob贸w.
* **Zatwierdzenie Dostpu**: Funkcja, kt贸ra pozwala organizacjom wymaga wyra藕nej zgody przed dostpem pracownik贸w Google do ich danych lub konfiguracji, zapewniajc dodatkow warstw kontroli i audytowalnoci.
* **Zarzdzany Microsoft AD**: Usuga oferujca zarzdzany Microsoft Active Directory (AD), kt贸ra pozwala u偶ytkownikom korzysta z istniejcych aplikacji i obci偶e zale偶nych od Microsoft AD w Google Cloud.

## Ochrona Danych

* **Ochrona Danych Wra偶liwych**: Narzdzia i praktyki majce na celu zabezpieczenie danych wra偶liwych, takich jak informacje osobiste lub wasno intelektualna, przed nieautoryzowanym dostpem lub ujawnieniem.
* **Zapobieganie Utracie Danych (DLP)**: Zestaw narzdzi i proces贸w su偶cych do identyfikowania, monitorowania i ochrony danych w u偶yciu, w ruchu i w spoczynku poprzez gbok inspekcj treci i stosowanie kompleksowego zestawu regu ochrony danych.
* **Usuga Certyfikacji Wadz Certyfikujcych**: Skalowalna i bezpieczna usuga upraszczajca i automatyzujca zarzdzanie, wdra偶anie i odnawianie certyfikat贸w SSL/TLS dla usug wewntrznych i zewntrznych.
* **Zarzdzanie Kluczami**: Usuga w chmurze, kt贸ra pozwala zarzdza kluczami kryptograficznymi dla aplikacji, w tym tworzenie, importowanie, rotacj, u偶ycie i niszczenie kluczy szyfrowania. Wicej informacji w:

{% content-ref url="gcp-kms-enum.md" %}
[gcp-kms-enum.md](gcp-kms-enum.md)
{% endcontent-ref %}

* **Mened偶er Certyfikat贸w**: Usuga zarzdzajca i wdra偶ajca certyfikaty SSL/TLS, zapewniajca bezpieczne i zaszyfrowane poczenia do usug internetowych i aplikacji.
* **Mened偶er Sekret贸w**: Bezpieczny i wygodny system przechowywania kluczy API, hase, certyfikat贸w i innych danych wra偶liwych, kt贸ry umo偶liwia atwy i bezpieczny dostp oraz zarzdzanie tymi sekretami w aplikacjach. Wicej informacji w:

{% content-ref url="../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md" %}
[gcp-secrets-manager-enum.md](../../gcp-pentesting/gcp-services/gcp-secrets-manager-enum.md)
{% endcontent-ref %}

## Zero Trust

* **BeyondCorp Enterprise**: Platforma bezpieczestwa zero trust umo偶liwiajca bezpieczny dostp do aplikacji wewntrznych bez koniecznoci tradycyjnego VPN, polegajc na weryfikacji zaufania u偶ytkownika i urzdzenia przed udzieleniem dostpu.
* **Narzdzie Rozwizywania Problem贸w z Polityk**: Narzdzie zaprojektowane w celu pomocy administratorom zrozumie i rozwiza problemy z dostpem w ich organizacji poprzez identyfikacj, dlaczego u偶ytkownik ma dostp do okrelonych zasob贸w lub dlaczego dostp zosta odm贸wiony, co pomaga w egzekwowaniu polityk zero trust.
* **Proxy Uwierzytelniania To偶samoci (IAP)**: Usuga kontrolujca dostp do aplikacji chmurowych i maszyn wirtualnych dziaajcych w Google Cloud, lokalnie lub w innych chmurach, na podstawie to偶samoci i kontekstu 偶dania, a nie sieci, z kt贸rej pochodzi 偶danie.
* **Kontrole Usugi VPC**: Granice bezpieczestwa zapewniajce dodatkowe warstwy ochrony zasob贸w i usug hostowanych w Prywatnej Chmurze Wirtualnej (VPC) Google Cloud, zapobiegajce wyciekom danych i zapewniajce szczeg贸ow kontrol dostpu.
* **Mened偶er Kontekstu Dostpu**: Cz BeyondCorp Enterprise Google Cloud, narzdzie to pomaga zdefiniowa i egzekwowa polityki kontroli dostpu o drobnej granulacji na podstawie to偶samoci u偶ytkownika i kontekstu jego 偶dania, takich jak status bezpieczestwa urzdzenia, adres IP i inne.
