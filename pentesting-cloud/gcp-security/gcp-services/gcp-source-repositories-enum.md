# GCP - ì†ŒìŠ¤ ì €ì¥ì†Œ ì—´ê±°

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>

## ê¸°ë³¸ ì •ë³´ <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Source RepositoriesëŠ” ì™„ì „í•œ ê¸°ëŠ¥ì„ ê°–ì¶˜ í™•ì¥ ê°€ëŠ¥í•œ **ê°œì¸ Git ì €ì¥ì†Œ ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ëŠ” ë‹¤ë¥¸ GCP ë„êµ¬ì™€ ì„œë¹„ìŠ¤ì™€ ì™„ë²½í•˜ê²Œ í†µí•©ë˜ì–´ **ì†ŒìŠ¤ ì½”ë“œë¥¼ ì™„ì „íˆ ê´€ë¦¬ë˜ëŠ” í™˜ê²½ì— í˜¸ìŠ¤íŒ…**í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. íŒ€ì´ ì½”ë“œë¥¼ ì €ì¥, ê´€ë¦¬ ë° ì¶”ì í•  ìˆ˜ ìˆëŠ” í˜‘ì—…ì ì´ê³  ì•ˆì „í•œ ì¥ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

Cloud Source Repositoriesì˜ ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **ì™„ì „ ê´€ë¦¬í˜• Git í˜¸ìŠ¤íŒ…**: ì¼ë°˜ì ì¸ Git ëª…ë ¹ê³¼ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ Gitì˜ ìµìˆ™í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
2. **GCP ì„œë¹„ìŠ¤ì™€ì˜ í†µí•©**: ì½”ë“œì—ì„œ ë°°í¬ê¹Œì§€ì˜ end-to-end ì¶”ì ì„ ìœ„í•´ Cloud Build, Pub/Sub ë° App Engineê³¼ ê°™ì€ ë‹¤ë¥¸ GCP ì„œë¹„ìŠ¤ì™€ í†µí•©ë©ë‹ˆë‹¤.
3. **ê°œì¸ ì €ì¥ì†Œ**: ì½”ë“œê°€ ì•ˆì „í•˜ê³  ê°œì¸ì ìœ¼ë¡œ ì €ì¥ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. Cloud Identity ë° Access Management (IAM) ì—­í• ì„ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„**: ë‹¤ë¥¸ GCP ë„êµ¬ì™€ í•¨ê»˜ ì‘ë™í•˜ì—¬ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ê³  ë²„ê·¸, ì·¨ì•½ì  ë˜ëŠ” ì˜ëª»ëœ ì½”ë”© ê´€í–‰ê³¼ ê°™ì€ ì ì¬ì ì¸ ë¬¸ì œë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.
5. **í˜‘ì—… ë„êµ¬**: ë³‘í•© ìš”ì²­, ì½”ë©˜íŠ¸ ë° ë¦¬ë·°ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜‘ì—…ì ì¸ ì½”ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤.
6. **ë¯¸ëŸ¬ ì§€ì›**: GitHub ë˜ëŠ” Bitbucketì— í˜¸ìŠ¤íŒ…ëœ ì €ì¥ì†Œì™€ Cloud Source Repositoriesë¥¼ ì—°ê²°í•˜ì—¬ ìë™ ë™ê¸°í™”ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ê³  ëª¨ë“  ì €ì¥ì†Œì˜ í†µí•©ëœ ë·°ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### OffSec ì •ë³´ <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* í”„ë¡œì íŠ¸ ë‚´ë¶€ì˜ ì†ŒìŠ¤ ì €ì¥ì†Œ êµ¬ì„±ì—ëŠ” Cloud Pub/Sub ë©”ì‹œì§€ë¥¼ ê²Œì‹œí•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” **ì„œë¹„ìŠ¤ ê³„ì •**ì´ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì€ **Compute SA**ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì†ŒìŠ¤ ì €ì¥ì†Œì—ì„œ í† í°ì„ í›”ì¹  ìˆ˜ ìˆëŠ”ì§€ëŠ” ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.
* GCP Cloud Source Repositories ì›¹ ì½˜ì†”([https://source.cloud.google.com/](https://source.cloud.google.com/))ì—ì„œ ì½”ë“œë¥¼ ë³´ë ¤ë©´ ì½”ë“œê°€ ê¸°ë³¸ì ìœ¼ë¡œ **ë§ˆìŠ¤í„° ë¸Œëœì¹˜ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤**.
* **Github** ë˜ëŠ” **Bitbucket**ì˜ ì €ì¥ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” **ë¯¸ëŸ¬ Cloud Repository**ë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤(í•´ë‹¹ í”Œë«í¼ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤).
* GCP ë‚´ë¶€ì—ì„œ **ì½”ë“œ ë° ë””ë²„ê¹…**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
* ê¸°ë³¸ì ìœ¼ë¡œ Source RepositoriesëŠ” ì»¤ë°‹ì— ê°œì¸ í‚¤ë¥¼ í‘¸ì‹œí•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ì§€ë§Œ, ì´ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Cloud Shellì—ì„œ ì—´ê¸°

Cloud Shellì—ì„œ ì €ì¥ì†Œë¥¼ ì—´ ìˆ˜ ìˆìœ¼ë©°, ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡¬í”„íŠ¸ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

<figure><img src="../../../.gitbook/assets/image (136).png" alt=""><figcaption></figcaption></figure>

ì´ë¥¼ í†µí•´ Cloud Shellì—ì„œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë””ë²„ê¹…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(Cloud Shellì´ ì¹¨í•´ë  ìˆ˜ ìˆìŒ).

### ì—´ê±°

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### ê¶Œí•œ ìƒìŠ¹ ë° ì‚¬í›„ ì¹¨íˆ¬

{% content-ref url="../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../../gcp-pentesting/gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### ì¸ì¦ë˜ì§€ ì•Šì€ ì—´ê±°

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ì„** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>
