# GCP - ì†ŒìŠ¤ ì €ì¥ì†Œ ì—´ê±°

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ **ì œë¡œë¶€í„° ì˜ì›…ê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°**!</summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜** **PDFë¡œ HackTricks ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ì…í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ë‹¹ì‚¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì— ê°€ì…í•˜ê±°ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜** **íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ì„ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ ìš”ë ¹ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

## ê¸°ë³¸ ì •ë³´ <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

Google Cloud Source RepositoriesëŠ” ì™„ì „í•œ ê¸°ëŠ¥ì„ ê°–ì¶˜ í™•ì¥ ê°€ëŠ¥í•œ **ê°œì¸ Git ì €ì¥ì†Œ ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤. ë‹¤ë¥¸ GCP ë„êµ¬ ë° ì„œë¹„ìŠ¤ì™€ ì™„ë²½í•˜ê²Œ í†µí•©ë˜ì–´ **ì†ŒìŠ¤ ì½”ë“œë¥¼ ì™„ì „íˆ ê´€ë¦¬ë˜ëŠ” í™˜ê²½ì— í˜¸ìŠ¤íŒ…**í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. íŒ€ì´ ì½”ë“œë¥¼ ì €ì¥, ê´€ë¦¬ ë° ì¶”ì í•  ìˆ˜ ìˆëŠ” í˜‘ì—…ì ì´ê³  ì•ˆì „í•œ ê³µê°„ì„ ì œê³µí•©ë‹ˆë‹¤.

Cloud Source Repositoriesì˜ ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

1. **ì™„ì „ ê´€ë¦¬í˜• Git í˜¸ìŠ¤íŒ…**: Gitì˜ ìµìˆ™í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ ì¼ë°˜ì ì¸ Git ëª…ë ¹ì–´ì™€ ì›Œí¬í”Œë¡œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **GCP ì„œë¹„ìŠ¤ì™€ í†µí•©**: ì½”ë“œë¶€í„° ë°°í¬ê¹Œì§€ì˜ ì¢…ë‹¨ ê°„ ì¶”ì ì„ ìœ„í•´ Cloud Build, Pub/Sub ë° App Engineê³¼ ê°™ì€ ë‹¤ë¥¸ GCP ì„œë¹„ìŠ¤ì™€ í†µí•©ë©ë‹ˆë‹¤.
3. **ê°œì¸ ì €ì¥ì†Œ**: ì½”ë“œê°€ ì•ˆì „í•˜ê³  ë¹„ê³µê°œë¡œ ì €ì¥ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. Cloud Identity ë° Access Management (IAM) ì—­í• ì„ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„**: ë‹¤ë¥¸ GCP ë„êµ¬ì™€ í•¨ê»˜ ì‘ë™í•˜ì—¬ ì†ŒìŠ¤ ì½”ë“œì˜ ìë™ ë¶„ì„ì„ ì œê³µí•˜ê³  ë²„ê·¸, ì·¨ì•½ì  ë˜ëŠ” ë‚˜ìœ ì½”ë”© ê´€í–‰ê³¼ ê°™ì€ ì ì¬ì ì¸ ë¬¸ì œë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.
5. **í˜‘ì—… ë„êµ¬**: ë¨¸ì§€ ìš”ì²­, ì½”ë©˜íŠ¸ ë° ë¦¬ë·°ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜‘ì—… ì½”ë”©ì„ ì§€ì›í•©ë‹ˆë‹¤.
6. **ë¯¸ëŸ¬ ì§€ì›**: GitHub ë˜ëŠ” Bitbucketì— í˜¸ìŠ¤íŒ…ëœ ì €ì¥ì†Œì™€ Cloud Source Repositoriesë¥¼ ì—°ê²°í•˜ì—¬ ìë™ ë™ê¸°í™”ë¥¼ í™œì„±í™”í•˜ê³  ëª¨ë“  ì €ì¥ì†Œì˜ í†µí•©ëœ ë³´ê¸°ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### OffSec ì •ë³´ <a href="#reviewing-cloud-git-repositories" id="reviewing-cloud-git-repositories"></a>

* í”„ë¡œì íŠ¸ ë‚´ë¶€ì˜ ì†ŒìŠ¤ ì €ì¥ì†Œ êµ¬ì„±ì—ëŠ” **Cloud Pub/Sub ë©”ì‹œì§€ë¥¼ ê²Œì‹œí•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì„œë¹„ìŠ¤ ê³„ì •**ì´ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì€ **Compute SA**ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ **ì†ŒìŠ¤ ì €ì¥ì†Œì—ì„œ í† í°ì„ ë„ìš©í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥**í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ê²ƒì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
* GCP Cloud Source Repositories ì›¹ ì½˜ì†”([https://source.cloud.google.com/](https://source.cloud.google.com/))ì—ì„œ ì½”ë“œë¥¼ ë³´ë ¤ë©´ ì½”ë“œê°€ **ê¸°ë³¸ì ìœ¼ë¡œ ë§ˆìŠ¤í„° ë¸Œëœì¹˜ì— ìˆì–´ì•¼**í•©ë‹ˆë‹¤.
* **Github** ë˜ëŠ” **Bitbucket**ì˜ ì €ì¥ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” **ë¯¸ëŸ¬ í´ë¼ìš°ë“œ ì €ì¥ì†Œ**ë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤(í•´ë‹¹ í”Œë«í¼ì— ì•¡ì„¸ìŠ¤ ê¶Œí•œ ë¶€ì—¬).
* **GCP ë‚´ë¶€ì—ì„œ ì½”ë“œ ë° ë””ë²„ê¹…**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
* ê¸°ë³¸ì ìœ¼ë¡œ Source RepositoriesëŠ” ì»¤ë°‹ì— ê°œì¸ í‚¤ë¥¼ í‘¸ì‹œí•˜ëŠ” ê²ƒì„ **ë°©ì§€**í•˜ì§€ë§Œ ì´ë¥¼ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í´ë¼ìš°ë“œ ì…¸ì—ì„œ ì—´ê¸°

í´ë¼ìš°ë“œ ì…¸ì—ì„œ ì €ì¥ì†Œë¥¼ ì—´ ìˆ˜ ìˆìœ¼ë©°, ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡¬í”„íŠ¸ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

<figure><img src="../../../.gitbook/assets/image (325).png" alt=""><figcaption></figcaption></figure>

ì´ë¥¼ í†µí•´ í´ë¼ìš°ë“œ ì…¸ì—ì„œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë””ë²„ê¹…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(í´ë¼ìš°ë“œ ì…¸ì´ ì¹¨í•´ë‹¹í•  ìˆ˜ ìˆìŒ). 

### ì—´ê±°

{% code overflow="wrap" %}
```bash
# Repos enumeration
gcloud source repos list #Get names and URLs
gcloud source repos describe <repo_name>
gcloud source repos get-iam-policy <repo_name>

# gcloud repo clone
gcloud source repos clone <REPO NAME>
gcloud source repos get-iam-policy <REPO NAME>
... git add & git commit -m ...
git push --set-upstream origin master
git push -u origin master

# Access via git
## To add a SSH key go to https://source.cloud.google.com/user/ssh_keys (no gcloud command)
git clone ssh://username@domain.com@source.developers.google.com:2022/p/<proj-name>/r/<repo-name>
git add, commit, push...
```
{% endcode %}

### ê¶Œí•œ ìƒìŠ¹ ë° í¬ìŠ¤íŠ¸ ìµìŠ¤í”Œë¡œì‡

{% content-ref url="../gcp-privilege-escalation/gcp-sourcerepos-privesc.md" %}
[gcp-sourcerepos-privesc.md](../gcp-privilege-escalation/gcp-sourcerepos-privesc.md)
{% endcontent-ref %}

### ì¸ì¦ë˜ì§€ ì•Šì€ ì—´ê±°

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md" %}
[gcp-source-repositories-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-source-repositories-unauthenticated-enum.md)
{% endcontent-ref %}

<details>

<summary><strong>ì œë¡œë¶€í„° ì˜ì›…ì´ ë  ë•Œê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ê°€ HackTricksì— ê´‘ê³ ë˜ê¸¸ ì›í•˜ê±°ë‚˜ PDFë¡œ HackTricksë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¶ë‹¤ë©´** [**êµ¬ë… ìš”ê¸ˆì œ**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì™œê·¸**](https://peass.creator-spring.com)ë¥¼ êµ¬ë§¤í•˜ì„¸ìš”
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”, ì €í¬ì˜ ë…ì  [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜
* **ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f)ì´ë‚˜ [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— ê°€ì…í•˜ê±°ë‚˜** íŠ¸ìœ„í„°** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ì„ íŒ”ë¡œìš°í•˜ì„¸ìš”.**
* **HackTricks** ë° **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
