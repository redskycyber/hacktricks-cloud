# GCP - ãƒ­ã‚®ãƒ³ã‚°åˆ—æŒ™

<details>

<summary><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

- **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
- [**å…¬å¼PEASSï¼†HackTricksã‚¹ãƒ¯ãƒƒã‚°**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
- **Discordã‚°ãƒ«ãƒ¼ãƒ—**ã«**å‚åŠ **ã™ã‚‹ğŸ’¬(https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter**ã§ç§ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ğŸ¦[**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
- **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹**ã«ã¯ã€[**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>

## åŸºæœ¬æƒ…å ±

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€GCPã‹ã‚‰ã®**ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã¨ã‚¤ãƒ™ãƒ³ãƒˆ**ã‚’ä¿å­˜ã€æ¤œç´¢ã€åˆ†æã€ç›£è¦–ã€ã‚¢ãƒ©ãƒ¼ãƒˆã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¨±å¯ã—ã¾ã™ã€‚

Cloud Loggingã¯ã€ä»–ã®GCPã‚µãƒ¼ãƒ“ã‚¹ã¨å®Œå…¨ã«çµ±åˆã•ã‚Œã¦ãŠã‚Šã€ã™ã¹ã¦ã®GCPãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ­ã‚°ã‚’é›†ç´„ã™ã‚‹ãŸã‚ã®ä¸­å¤®ãƒªãƒã‚¸ãƒˆãƒªã‚’æä¾›ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€App Engineã€Compute Engineã€Cloud Functionsãªã©ã®ã•ã¾ã–ã¾ãªGCPã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ãƒ­ã‚°ã‚’**è‡ªå‹•çš„ã«åé›†**ã§ãã¾ã™ã€‚ã¾ãŸã€Cloud Loggingã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¾ãŸã¯APIã‚’ä½¿ç”¨ã—ã¦ã€ã‚ªãƒ³ãƒ—ãƒ¬ãƒŸã‚¹ã¾ãŸã¯ä»–ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚‚Cloud Loggingã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

ä¸»ãªæ©Ÿèƒ½ï¼š

- **ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã®é›†ç´„:** ã•ã¾ã–ã¾ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’é›†ç´„ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®åŒ…æ‹¬çš„ãªãƒ“ãƒ¥ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ç®¡ç†:** å³åº§ã®åˆ†æã¨å¯¾å¿œã®ãŸã‚ã«ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¹ãƒˆãƒªãƒ¼ãƒ é…ä¿¡ã—ã¾ã™ã€‚
- **å¼·åŠ›ãªãƒ‡ãƒ¼ã‚¿åˆ†æ:** å¤§é‡ã®ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’è¿…é€Ÿã«ãµã‚‹ã„åˆ†ã‘ã‚‹ãŸã‚ã®é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨æ¤œç´¢æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
- **BigQueryã¨ã®çµ±åˆ:** è©³ç´°ãªåˆ†æã¨ã‚¯ã‚¨ãƒªã®ãŸã‚ã«ãƒ­ã‚°ã‚’BigQueryã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
- **ãƒ­ã‚°ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹:** ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ä½œæˆã—ã¦ã€ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡Œã„ã¾ã™ã€‚

### ãƒ­ã‚°ã®æµã‚Œ

<figure><img src="../../../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption><p><a href="https://betterstack.com/community/guides/logging/gcp-logging/">https://betterstack.com/community/guides/logging/gcp-logging/</a></p></figcaption></figure>

åŸºæœ¬çš„ã«ã€ã‚·ãƒ³ã‚¯ã¨ãƒ­ã‚°ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€ãƒ­ã‚°ã‚’ä¿å­˜ã™ã‚‹å ´æ‰€ã‚’æ±ºå®šã—ã¾ã™ã€‚

### GCP Loggingã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹æ§‹æˆ

Cloud Loggingã¯ã€ã•ã¾ã–ã¾ãªé‹ç”¨ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦é«˜åº¦ã«æ§‹æˆå¯èƒ½ã§ã™ï¼š

1. **ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆï¼ˆWebä¸Šã®ãƒ­ã‚°ã®ä¿å­˜ï¼‰:** Cloud Loggingã§ãƒã‚±ãƒƒãƒˆã‚’å®šç¾©ã—ã¦**ãƒ­ã‚°ã®ä¿æŒæœŸé–“**ã‚’ç®¡ç†ã—ã€ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªãŒä¿æŒã•ã‚Œã‚‹æœŸé–“ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€`_Default`ã¨`_Required`ã®ãƒã‚±ãƒƒãƒˆãŒä½œæˆã•ã‚Œã¾ã™ï¼ˆ1ã¤ã¯ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã€ã‚‚ã†1ã¤ã¯è¨˜éŒ²ã—ãªã„ï¼‰ã€‚
   - **\_Required**ã¯:

{% code overflow="wrap" %}
```bash
LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
```
{% endcode %}
   - ãƒ‡ãƒ¼ã‚¿ã®**ä¿æŒæœŸé–“**ã¯ãƒã‚±ãƒƒãƒˆã”ã¨ã«æ§‹æˆã•ã‚Œã€**å°‘ãªãã¨ã‚‚1æ—¥**ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãŸã ã—ã€**\_Requiredã®ä¿æŒæœŸé–“ã¯400æ—¥**ã§ã‚ã‚Šã€å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚
   - ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆã¯**Cloud Storageã§è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“**ã€‚
2. **ãƒ­ã‚°ã‚·ãƒ³ã‚¯ï¼ˆWebä¸Šã®ãƒ­ã‚°ãƒ«ãƒ¼ã‚¿ãƒ¼ï¼‰:** ãƒ•ã‚£ãƒ«ã‚¿ã«åŸºã¥ã„ã¦ã€ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã‚’Pub/Subã€BigQueryã€ã¾ãŸã¯Cloud Storageãªã©ã®ã•ã¾ã–ã¾ãªå®›å…ˆã«**ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**ã™ã‚‹ãŸã‚ã®ã‚·ãƒ³ã‚¯ã‚’ä½œæˆã—ã¾ã™ã€‚
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒã‚±ãƒƒãƒˆ`_Default`ã¨`_Required`ã®ã‚·ãƒ³ã‚¯ãŒä½œæˆã•ã‚Œã¾ã™:
   - ```bash
     _Required  logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Required  LOG_ID("cloudaudit.googleapis.com/activity") OR LOG_ID("externalaudit.googleapis.com/activity") OR LOG_ID("cloudaudit.googleapis.com/system_event") OR LOG_ID("externalaudit.googleapis.com/system_event") OR LOG_ID("cloudaudit.googleapis.com/access_transparency") OR LOG_ID("externalaudit.googleapis.com/access_transparency")
     _Default   logging.googleapis.com/projects/<proj-name>/locations/global/buckets/_Default   NOT LOG_ID("cloudaudit.googleapis.com/activity") AND NOT LOG_ID("externalaudit.googleapis.com/activity") AND NOT LOG_ID("cloudaudit.googleapis.com/system_event") AND NOT LOG_ID("externalaudit.googleapis.com/system_event") AND NOT LOG_ID("cloudaudit.googleapis.com/access_transparency") AND NOT LOG_ID("externalaudit.googleapis.com/access_transparency")
     ```
   - **é™¤å¤–ãƒ•ã‚£ãƒ«ã‚¿:** ç‰¹å®šã®ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªã®å–ã‚Šè¾¼ã¿ã‚’é˜²ããŸã‚ã«**é™¤å¤–**ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€ã‚³ã‚¹ãƒˆã‚’ç¯€ç´„ã—ã€ä¸è¦ãªãƒã‚¤ã‚ºã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚
3. **ãƒ­ã‚°ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹:** ãƒ­ã‚°ã®å†…å®¹ã«åŸºã¥ã„ã¦**ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹**ã‚’æ§‹æˆã—ã€ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ãŸã‚¢ãƒ©ãƒ¼ãƒˆã¨ç›£è¦–ã‚’è¡Œã„ã¾ã™ã€‚
4. **ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼:** ãƒ­ã‚°ãƒã‚±ãƒƒãƒˆå†…ã®ãƒ­ã‚°ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’é«˜åº¦ã‹ã¤**ç´°ã‹ãåˆ¶å¾¡**ã™ã‚‹ãŸã‚ã®ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚
   - Cloud Loggingã¯ã€**ã™ã¹ã¦ã®ãƒã‚±ãƒƒãƒˆã«å¯¾ã—ã¦è‡ªå‹•çš„ã«`_AllLogs`ãƒ“ãƒ¥ãƒ¼**ã‚’ä½œæˆã—ã€ã™ã¹ã¦ã®ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚Cloud Loggingã¯ã€`_Default`ãƒã‚±ãƒƒãƒˆç”¨ã«`_Default`ã¨ã„ã†ãƒ“ãƒ¥ãƒ¼ã‚‚ä½œæˆã—ã¾ã™ã€‚`_Default`ãƒã‚±ãƒƒãƒˆã®`_Default`ãƒ“ãƒ¥ãƒ¼ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ç›£æŸ»ãƒ­ã‚°ã‚’é™¤ãã™ã¹ã¦ã®ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚`_AllLogs`ãŠã‚ˆã³`_Default`ãƒ“ãƒ¥ãƒ¼ã¯ç·¨é›†ã§ãã¾ã›ã‚“ã€‚

ç‰¹å®šã®ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã®ä½¿ç”¨ã‚’è¨±å¯ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€IAMãƒãƒªã‚·ãƒ¼ã‚’ä½¿ç”¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ï¼š
```json
{
"bindings": [
{
"members": [
"user:username@gmail.com"
],
"role": "roles/logging.viewAccessor",
"condition": {
"title": "Bucket reader condition example",
"description": "Grants logging.viewAccessor role to user username@gmail.com for the VIEW_ID log view.",
"expression":
"resource.name == \"projects/PROJECT_ID/locations/LOCATION/buckets/BUCKET_NAME/views/VIEW_ID\""
}
}
],
"etag": "BwWd_6eERR4=",
"version": 3
}
```
### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ­ã‚°

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€**ç®¡ç†è€…æ›¸ãè¾¼ã¿**æ“ä½œï¼ˆã¾ãŸã¯ç®¡ç†è€…ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ç›£æŸ»ãƒ­ã‚°ã¨ã‚‚å‘¼ã°ã‚Œã‚‹ï¼‰ãŒãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã™ï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚„æ§‹æˆæƒ…å ±ã®æ›¸ãè¾¼ã¿ï¼‰ã—ã€**ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“**ã€‚

ãã®å¾Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯**ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ç›£æŸ»ãƒ­ã‚°**ã‚’æœ‰åŠ¹ã«ã§ãã¾ã™ã€‚ã“ã‚Œã«ã¯**ç®¡ç†è€…èª­ã¿å–ã‚Šã€ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿ã€ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿**ãŒå«ã¾ã‚Œã¾ã™ã€‚

å„ãƒ­ã‚°ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ç¢ºèªã§ãã¾ã™ï¼š[https://cloud.google.com/iam/docs/audit-logging](https://cloud.google.com/iam/docs/audit-logging)

ãŸã ã—ã€ã“ã‚Œã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯**`GetIamPolicy`**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚„ãã®ä»–ã®èª­ã¿å–ã‚Šã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒ**ãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œãªã„**ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ç’°å¢ƒã‚’åˆ—æŒ™ã—ã‚ˆã†ã¨ã™ã‚‹æ”»æ’ƒè€…ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ãŒã‚ˆã‚Šå¤šãã®ãƒ­ã‚°ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«æ§‹æˆã—ã¦ã„ãªã„é™ã‚Šã€æ¤œçŸ¥ã•ã‚Œã¾ã›ã‚“ã€‚

ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚ˆã‚Šå¤šãã®ãƒ­ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã¯[https://console.cloud.google.com/iam-admin/audit](https://console.cloud.google.com/iam-admin/audit)ã«ç§»å‹•ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚2ã¤ã®ç•°ãªã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ï¼š

* **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ§‹æˆ**ï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ§‹æˆã‚’ä½œæˆã—ã€ã™ã¹ã¦ã®ç®¡ç†è€…èª­ã¿å–ã‚ŠãŠã‚ˆã³/ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚ŠãŠã‚ˆã³/ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿ãƒ­ã‚°ã‚’è¨˜éŒ²ã—ã€å…é™¤ã•ã‚ŒãŸãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ï¼š

<figure><img src="../../../.gitbook/assets/image (149).png" alt=""><figcaption></figcaption></figure>

* **ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠ**ï¼šã¾ãŸã¯ã€ãƒ­ã‚°ã‚’ç”Ÿæˆã—ãŸã„ã‚µãƒ¼ãƒ“ã‚¹ã¨ãƒ­ã‚°ã®ç¨®é¡ã€ãŠã‚ˆã³ãã®ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã®å…é™¤ã•ã‚ŒãŸãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã“ã‚Œã‚‰ã®ãƒ­ã‚°ã®ã¿ãŒç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ã€ã‚ˆã‚Šå¤šãã®ãƒ­ã‚°ã‚’ç”Ÿæˆã™ã‚‹ã¨ã‚³ã‚¹ãƒˆãŒå¢—åŠ ã—ã¾ã™ã€‚

### åˆ—æŒ™

`gcloud`ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã¯GCPã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®é‡è¦ãªéƒ¨åˆ†ã§ã‚ã‚Šã€ãƒªã‚½ãƒ¼ã‚¹ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã¯ã€`gcloud`ã‚’ä½¿ç”¨ã—ã¦ãƒ­ã‚°æ§‹æˆã¨ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã§ã™ã€‚

{% code overflow="wrap" %}
```bash
# List buckets
gcloud logging buckets list
gcloud logging buckets describe <bucket-name> --location <location>

# List log entries: only logs that contain log entries are listed.
gcloud logging logs list

# Get log metrics
gcloud logging metrics list
gcloud logging metrics describe <metric-name>

# Get log sinks
gcloud logging sinks list
gcloud logging sinks describe <sink-name>

# Get log views
gcloud logging views list --bucket <bucket> --location global
gcloud logging views describe --bucket <bucket> --location global <view-id> # view-id is usually the same as the bucket name

# Get log links
gcloud logging links list --bucket _Default --location global
gcloud logging links describe <link-id> --bucket _Default --location global
```
{% endcode %}

**`cloudresourcemanager`**ã®ãƒ­ã‚°ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ä¾‹ï¼ˆã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’BFã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚‚ã®ï¼‰ï¼š[https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512](https://console.cloud.google.com/logs/query;query=protoPayload.serviceName%3D%22cloudresourcemanager.googleapis.com%22;summaryFields=:false:32:beginning;cursorTimestamp=2024-01-20T00:07:14.482809Z;startTime=2024-01-01T11:12:26.062Z;endTime=2024-02-02T17:12:26.062Z?authuser=2\&project=digital-bonfire-410512)

**`testIamPermissions`**ã®ãƒ­ã‚°ã¯ã‚ã‚Šã¾ã›ã‚“ï¼š

<figure><img src="../../../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>

### ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

{% content-ref url="../gcp-post-exploitation/gcp-logging-post-exploitation.md" %}
[gcp-logging-post-exploitation.md](../gcp-post-exploitation/gcp-logging-post-exploitation.md)
{% endcontent-ref %}

### æ°¸ç¶šæ€§

{% content-ref url="../gcp-persistence/gcp-logging-persistence.md" %}
[gcp-logging-persistence.md](../gcp-persistence/gcp-logging-persistence.md)
{% endcontent-ref %}

## å‚è€ƒæ–‡çŒ®

* [https://cloud.google.com/logging/docs/logs-views#gcloud](https://cloud.google.com/logging/docs/logs-views#gcloud)
* [https://betterstack.com/community/guides/logging/gcp-logging/](https://betterstack.com/community/guides/logging/gcp-logging/)

<details>

<summary><strong>ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§ã®AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚¹ã‚¦ã‚©ãƒƒã‚°**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã‚‹
* **ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã§ç§ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«** [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã™ã‚‹ã€‚

</details>
