# GCP - Filestore Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzdaki Ã¶zel [**NFT'leri**](https://opensea.io/collection/the-peass-family) keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>

## Temel Bilgiler

Google Cloud Filestore, hem bir **dosya sistemi arabirimi** hem de **veri iÃ§in paylaÅŸÄ±lan bir dosya sistemi** gerektiren uygulamalar iÃ§in Ã¶zel olarak tasarlanmÄ±ÅŸ bir **yÃ¶netilen dosya depolama hizmeti** olarak tanÄ±mlanÄ±r. Bu hizmet, yÃ¼ksek performanslÄ± dosya paylaÅŸÄ±mlarÄ± sunarak Ã§eÅŸitli GCP hizmetleriyle entegre edilebilme Ã¶zelliÄŸiyle Ã¶ne Ã§Ä±kar. Geleneksel dosya sistemi arabirimleri ve semantiklerinin Ã¶nemli olduÄŸu medya iÅŸleme, iÃ§erik yÃ¶netimi ve veritabanÄ± yedekleme gibi senaryolarda kullanÄ±ÅŸlÄ±dÄ±r.

Bu, herhangi bir **NFS** **paylaÅŸÄ±lan belge deposu** gibi dÃ¼ÅŸÃ¼nebilirsiniz - hassas bilgilerin potansiyel bir kaynaÄŸÄ±.

### BaÄŸlantÄ±lar

Filestore Ã¶rneÄŸi oluÅŸtururken, **eriÅŸilebilir olacaÄŸÄ± aÄŸÄ± seÃ§mek mÃ¼mkÃ¼ndÃ¼r**.

AyrÄ±ca, **varsayÄ±lan olarak seÃ§ilen VPC aÄŸÄ± ve bÃ¶lgedeki tÃ¼m istemcilerin eriÅŸebileceÄŸi** ancak **eriÅŸimi IP adresine** veya aralÄ±ÄŸÄ±na gÃ¶re **kÄ±sÄ±tlayabileceÄŸiniz ve istemcinin alacaÄŸÄ± eriÅŸim ayrÄ±calÄ±ÄŸÄ±nÄ± (YÃ¶netici, YÃ¶netici GÃ¶rÃ¼ntÃ¼leyici, DÃ¼zenleyici, GÃ¶rÃ¼ntÃ¼leyici) belirtebileceÄŸiniz** bir seÃ§enek vardÄ±r.

AyrÄ±ca, bir **Ã–zel Hizmet EriÅŸim BaÄŸlantÄ±sÄ±** aracÄ±lÄ±ÄŸÄ±yla da eriÅŸilebilir:

* VPC aÄŸÄ±na Ã¶zgÃ¼dÃ¼r ve Memorystore, Tensorflow ve SQL gibi tÃ¼m yÃ¶netilen hizmetlerde kullanÄ±labilir.
* Google tarafÄ±ndan sahip olunan bir aÄŸ ile VPC aÄŸÄ±nÄ±z arasÄ±nda bir VPC eÅŸleme kullanarak, Ã¶rneklerinizin ve hizmetlerinizin yalnÄ±zca **dahili IP adreslerini kullanarak iletiÅŸim kurmasÄ±nÄ± saÄŸlar**.
* Hizmet Ã¼retici tarafÄ±nda size Ã¶zel bir proje oluÅŸturur, baÅŸka mÃ¼ÅŸterilerle paylaÅŸÄ±lmaz. Sadece saÄŸladÄ±ÄŸÄ±nÄ±z kaynaklar iÃ§in faturalandÄ±rÄ±lÄ±rsÄ±nÄ±z.
* VPC eÅŸlemesi, VPC'nize yeni rotalarÄ± iÃ§e aktarÄ±r

### Yedeklemeler

File paylaÅŸÄ±mlarÄ±nÄ±n **yedeklerini oluÅŸturmak mÃ¼mkÃ¼ndÃ¼r**. Bu yedekler daha sonra **orijinal** yeni Fileshare Ã¶rneÄŸinde veya **yeni Ã¶rneklerde** geri yÃ¼klenebilir.

### Åifreleme

VarsayÄ±lan olarak, verileri ÅŸifrelemek iÃ§in bir **Google tarafÄ±ndan yÃ¶netilen ÅŸifreleme anahtarÄ±** kullanÄ±lÄ±r, ancak bir **MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen ÅŸifreleme anahtarÄ± (CMEK)** seÃ§mek mÃ¼mkÃ¼ndÃ¼r.

### NumaralandÄ±rma

EÄŸer projede bir filestore bulursanÄ±z, kompromize edilmiÅŸ Hesaplama Ã–rneÄŸi iÃ§inden onu **baÄŸlayabilirsiniz**. Var olup olmadÄ±ÄŸÄ±nÄ± gÃ¶rmek iÃ§in aÅŸaÄŸÄ±daki komutu kullanÄ±n.

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
UnutmayÄ±n ki bir dosya depolama servisi, onun iÃ§in oluÅŸturulan **tamamen yeni bir alt aÄŸda** olabilir (bir **VPC eÅŸlemesi** olan Ã–zel Hizmet EriÅŸimi BaÄŸlantÄ±sÄ± iÃ§inde).\
Bu nedenle, aÄŸ aralÄ±klarÄ±nda nmap Ã§alÄ±ÅŸtÄ±rmak iÃ§in **VPC eÅŸlemelerini sÄ±ralamanÄ±z gerekebilir**.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
{% endcode %}
{% endhint %}

### Yetki YÃ¼kseltme ve SonrasÄ± SaldÄ±rÄ±

Bu hizmeti doÄŸrudan istismar ederek GCP'de yetki yÃ¼kseltme yollarÄ± bulunmamaktadÄ±r, ancak bazÄ± **SonrasÄ± SaldÄ±rÄ± hileleri kullanarak verilere eriÅŸim saÄŸlamak mÃ¼mkÃ¼n** ve belki de yetki yÃ¼kseltmek iÃ§in bazÄ± kimlik bilgileri bulabilirsiniz:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### KalÄ±cÄ±lÄ±k

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin</strong></a><strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **tanÄ±tmak** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARINI**](https://github.com/sponsors/carlospolop) kontrol edin!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz olan [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>
