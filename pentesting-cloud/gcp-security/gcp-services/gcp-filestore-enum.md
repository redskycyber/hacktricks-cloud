# GCP - Dosya Deposu SÄ±ralama

<details>

<summary><strong>SÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS KÄ±rmÄ±zÄ± TakÄ±m UzmanÄ±)</strong></a><strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* **Åirketinizi HackTricks'te reklamÄ±nÄ± gÃ¶rmek istiyorsanÄ±z** veya **HackTricks'i PDF olarak indirmek istiyorsanÄ±z** [**ABONELÄ°K PLANLARI**]'na(https://github.com/sponsors/carlospolop) gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**PEASS Ailesi'ni**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**'Ä± takip edin**.
* **Hacking pÃ¼f noktalarÄ±nÄ±zÄ± paylaÅŸarak PR'lar gÃ¶ndererek** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na katkÄ±da bulunun.

</details>

## Temel Bilgiler

Google Cloud Dosya Deposu, hem bir **dosya sistemi arabirimi hem de veri iÃ§in paylaÅŸÄ±lan bir dosya sistemine ihtiyaÃ§ duyan uygulamalar iÃ§in Ã¶zel olarak tasarlanmÄ±ÅŸ bir **yÃ¶netilen dosya depolama hizmetidir**. Bu hizmet, yÃ¼ksek performanslÄ± dosya paylaÅŸÄ±mlarÄ± sunarak, Ã§eÅŸitli GCP hizmetleriyle entegre edilebilir. Geleneksel dosya sistemi arabirimleri ve anlamlarÄ±nÄ±n Ã¶nemli olduÄŸu medya iÅŸleme, iÃ§erik yÃ¶netimi ve veritabanÄ± yedekleme gibi senaryolarda kullanÄ±ÅŸlÄ±dÄ±r.

Bunu, diÄŸer **NFS** **paylaÅŸÄ±lan belge havuzu gibi dÃ¼ÅŸÃ¼nebilirsiniz -** hassas bilgilerin potansiyel bir kaynaÄŸÄ±.

### BaÄŸlantÄ±lar

Bir Dosya Deposu Ã¶rneÄŸi oluÅŸturulurken, **eriÅŸileceÄŸi aÄŸÄ± seÃ§mek mÃ¼mkÃ¼ndÃ¼r**.

AyrÄ±ca, **varsayÄ±lan olarak seÃ§ilen VPC aÄŸÄ± ve bÃ¶lgesindeki tÃ¼m istemcilerin eriÅŸebileceÄŸi**, ancak **eriÅŸimi IP adresine gÃ¶re de kÄ±sÄ±tlayabilir ve istemcinin IP adresine baÄŸlÄ± olarak eriÅŸim ayrÄ±calÄ±ÄŸÄ±nÄ± (YÃ¶netici, YÃ¶netici GÃ¶rÃ¼ntÃ¼leyici, EditÃ¶r, GÃ¶rÃ¼ntÃ¼leyici) belirtebilirsiniz**.

AyrÄ±ca, bir **Ã–zel Hizmet EriÅŸim BaÄŸlantÄ±sÄ±** aracÄ±lÄ±ÄŸÄ±yla eriÅŸilebilir:

* VPC aÄŸÄ± baÅŸÄ±na olup Memorystore, Tensorflow ve SQL gibi tÃ¼m yÃ¶netilen hizmetlerde kullanÄ±labilir.
* Google'a ait bir aÄŸ ile VPC aÄŸÄ±nÄ±z arasÄ±ndadÄ±r ve VPC eÅŸleme kullanÄ±larak, Ã¶rnekleriniz ve hizmetlerinizin yalnÄ±zca **dahili IP adreslerini kullanarak iletiÅŸim kurmasÄ±nÄ± saÄŸlar**.
* Hizmet Ã¼retici tarafÄ±nda size izole bir proje oluÅŸturur, yani baÅŸka mÃ¼ÅŸterilerle paylaÅŸÄ±lmaz. YalnÄ±zca saÄŸladÄ±ÄŸÄ±nÄ±z kaynaklar iÃ§in faturalandÄ±rÄ±lacaksÄ±nÄ±z.
* VPC eÅŸlemesi, VPC'nize yeni rotalarÄ± iÃ§e aktaracaktÄ±r.

### Yedeklemeler

Dosya paylaÅŸÄ±mlarÄ±nÄ±n **yedeklerini oluÅŸturmak mÃ¼mkÃ¼ndÃ¼r**. Bu yedekler daha sonra **orijinal** yeni Dosya PaylaÅŸÄ±mÄ± Ã¶rneÄŸinde veya **yeni** dosyalarda **geri yÃ¼klenebilir**.

### Åifreleme

VarsayÄ±lan olarak, verileri ÅŸifrelemek iÃ§in bir **Google tarafÄ±ndan yÃ¶netilen ÅŸifreleme anahtarÄ±** kullanÄ±lacaktÄ±r, ancak bir **MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen ÅŸifreleme anahtarÄ± (CMEK)** seÃ§mek mÃ¼mkÃ¼ndÃ¼r.

### SÄ±ralama

EÄŸer projede bir dosya deposu bulursanÄ±z, bu dosya deposunu **kompromize edilmiÅŸ Hesaplama Ã–rneÄŸi iÃ§inden baÄŸlayabilirsiniz**. Var olup olmadÄ±ÄŸÄ±nÄ± gÃ¶rmek iÃ§in aÅŸaÄŸÄ±daki komutu kullanÄ±n.

{% code overflow="wrap" %}
```bash
# Instances
gcloud filestore instances list # Check the IP address
gcloud filestore instances describe --zone <zone> <name> # Check IP and access restrictions

# Backups
gcloud filestore backups list
gcloud filestore backups describe --region <region> <backup>

# Search for NFS shares in a VPC subnet
sudo nmap -n -T5 -Pn -p 2049 --min-parallelism 100 --min-rate 1000 --open 10.99.160.2/20
```
{% endcode %}

{% hint style="danger" %}
Bir dosya depolama hizmetinin **tamamen onun iÃ§in oluÅŸturulan yeni bir alt aÄŸda** olabileceÄŸini unutmayÄ±n (bir **VPC eÅŸ yolu** olan Ã–zel Hizmet EriÅŸim BaÄŸlantÄ±sÄ± iÃ§inde).\
Bu nedenle, ayrÄ±ca bu aÄŸ aralÄ±klarÄ±nda nmap Ã§alÄ±ÅŸtÄ±rmak iÃ§in **VPC eÅŸ yollarÄ±nÄ± sÄ±ralamanÄ±z gerekebilir**.

{% code overflow="wrap" %}
```bash
# Get peerings
gcloud compute networks peerings list
# Get routes imported from a peering
gcloud compute networks peerings list-routes <peering-name> --network=<network-name> --region=<region> --direction=INCOMING
```
### Yetkilendirme YÃ¼kseltme ve SaldÄ±rÄ± SonrasÄ± Ä°stismar

GCP'de doÄŸrudan bu hizmeti istismar ederek yetkileri yÃ¼kseltmenin bir yolu yok, ancak bazÄ± **SaldÄ±rÄ± SonrasÄ± hileler kullanÄ±larak verilere eriÅŸim saÄŸlamak mÃ¼mkÃ¼n** ve belki bazÄ± kimlik bilgilerini bulabilir ve yetkileri yÃ¼kseltebilirsiniz:

{% content-ref url="../gcp-post-exploitation/gcp-filestore-post-exploitation.md" %}
[gcp-filestore-post-exploitation.md](../gcp-post-exploitation/gcp-filestore-post-exploitation.md)
{% endcontent-ref %}

### KalÄ±cÄ±lÄ±k

{% content-ref url="../gcp-persistence/gcp-filestore-persistence.md" %}
[gcp-filestore-persistence.md](../gcp-persistence/gcp-filestore-persistence.md)
{% endcontent-ref %}
