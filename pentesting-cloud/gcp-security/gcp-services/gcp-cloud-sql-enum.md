# GCP - Cloud SQL Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team 전문가)로부터 AWS 해킹을 처음부터 전문가까지 배우세요!</strong></summary>

HackTricks를 지원하는 다른 방법:

* **회사가 HackTricks에 광고되길 원하거나 HackTricks를 PDF로 다운로드하고 싶다면** [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스왜그**](https://peass.creator-spring.com)를 구매하세요
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요, 당사의 독점 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션
* **💬 [Discord 그룹](https://discord.gg/hRep4RUj7f)** 또는 [텔레그램 그룹](https://t.me/peass)에 **가입**하거나 **트위터** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)을 **팔로우**하세요.
* **HackTricks** 및 **HackTricks Cloud**에 PR을 제출하여 **해킹 요령을 공유**하세요
*
*
* github 저장소.

</details>

## 기본 정보

Google Cloud SQL은 MySQL, PostgreSQL 및 SQL Server와 같은 관계형 데이터베이스를 Google Cloud Platform에서 설정, 유지 관리 및 관리하는 것을 간소화하는 관리형 서비스입니다. 하드웨어 프로비저닝, 데이터베이스 설정, 패치 및 백업과 같은 작업을 처리할 필요가 없어집니다.

Google Cloud SQL의 주요 기능은 다음과 같습니다:

1. **완전 관리형**: Google Cloud SQL은 데이터베이스 패치, 업데이트, 백업 및 구성과 같은 데이터베이스 유지 관리 작업을 처리하는 완전 관리형 서비스입니다.
2. **확장성**: 데이터베이스의 저장 용량 및 컴퓨팅 리소스를 확장할 수 있어 종종 다운타임 없이 작동합니다.
3. **고가용성**: 가용성 구성을 제공하여 데이터베이스 서비스가 신뢰성 있게 운영되고 존 또는 인스턴스 장애를 견딜 수 있도록 합니다.
4. **보안**: 데이터 암호화, Identity and Access Management (IAM) 제어 및 사설 IP 및 VPC를 사용한 네트워크 격리와 같은 견고한 보안 기능을 제공합니다.
5. **백업 및 복구**: 자동 백업 및 시점 복구를 지원하여 데이터를 안전하게 보호하고 복원할 수 있도록 도와줍니다.
6. **통합**: 다른 Google Cloud 서비스와 원활하게 통합되어 애플리케이션을 구축, 배포 및 관리하는 포괄적인 솔루션을 제공합니다.
7. **성능**: 데이터베이스 성능을 모니터링, 문제 해결 및 개선하기 위한 성능 메트릭 및 진단을 제공합니다.

### 비밀번호

웹 콘솔에서 Cloud SQL은 데이터베이스의 **비밀번호를 설정**할 수 있도록 해주며, 생성 기능도 있지만, 더 중요한 것은 **MySQL**에서 **빈 비밀번호를 남길 수 있고 모든 비밀번호를 "a"로 설정할 수 있다는 것**입니다.

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

**길이**, **복잡성**, **재사용 비활성화** 및 **비밀번호에 사용자 이름 비활성화**를 요구하는 비밀번호 정책을 구성할 수도 있습니다. 모두 기본적으로 비활성화되어 있습니다.

**SQL Server**는 **Active Directory 인증**으로 구성할 수 있습니다.

### 존 가용성

데이터베이스는 **1개의 존 또는 여러 존에서 사용 가능**하며, 중요한 데이터베이스는 여러 존에 있어야 합니다.

### 암호화

기본적으로 Google 관리형 암호화 키가 사용되지만 **고객 관리형 암호화 키 (CMEK)를 선택**할 수도 있습니다.

### 연결

* **사설 IP**: VPC 네트워크를 지정하고 데이터베이스는 네트워크 내부에 사설 IP를 받습니다.
* **공용 IP**: 데이터베이스는 공용 IP를 받지만 기본적으로 아무도 연결할 수 없습니다.
* **인가된 네트워크**: 데이터베이스에 연결할 수 있는 **공용 IP 범위**를 지정합니다.
* **사설 경로**: DB가 특정 VPC에 연결된 경우 이 옵션을 활성화하고 **BigQuery와 같은 다른 GCP 서비스에 액세스**를 제공할 수 있습니다.

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### 데이터 보호

* **일일 백업**: 자동 일일 백업을 수행하고 유지할 백업 수를 지정합니다.
* **시간별 복구**: 특정 시점부터 데이터를 복구할 수 있도록 초 단위로 데이터를 복구할 수 있습니다.
* **삭제 보호**: 활성화된 경우 이 기능이 비활성화될 때까지 DB를 삭제할 수 없습니다.

### 열거
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### 인증되지 않은 Enum

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### 사후 공격

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### 지속성

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>를 통해 제로부터 영웅이 되는 AWS 해킹을 배우세요!</summary>

HackTricks를 지원하는 다른 방법:

* **회사를 HackTricks에서 광고하거나 PDF로 다운로드**하려면 [**구독 요금제**](https://github.com/sponsors/carlospolop)를 확인하세요!
* [**공식 PEASS & HackTricks 스왜그**](https://peass.creator-spring.com)를 구매하세요
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)를 발견하세요, 당사의 독점 [**NFTs**](https://opensea.io/collection/the-peass-family) 컬렉션
* **💬 [**Discord 그룹**](https://discord.gg/hRep4RUj7f) 또는 [**텔레그램 그룹**](https://t.me/peass)에 가입하거나**Twitter** 🐦 [**@carlospolopm**](https://twitter.com/carlospolopm)을 팔로우하세요.
* **HackTricks** 및 [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github 저장소에 PR을 제출하여 해킹 트릭을 공유하세요.

</details>
