# GCP - Cloud SQL æšä¸¾

<details>

<summary><strong>ä»é›¶å¼€å§‹å­¦ä¹ AWSé»‘å®¢æŠ€æœ¯ï¼Œæˆä¸º</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ï¼</strong></summary>

æ”¯æŒHackTricksçš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½HackTricksçš„PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASS & HackTrickså•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFTsç³»åˆ—**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegramç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨**Twitter**ä¸Š**å…³æ³¨**æˆ‘ ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§**
*
*
* &#x20;githubä»“åº“ã€‚

</details>

## åŸºæœ¬ä¿¡æ¯

Google Cloud SQLæ˜¯ä¸€é¡¹**å…¨é¢æ‰˜ç®¡çš„æ•°æ®åº“æœåŠ¡**ï¼Œå®ƒä½¿åœ¨Google Cloud Platformä¸Šè®¾ç½®ã€ç»´æŠ¤ã€ç®¡ç†å’Œç®¡ç†æ‚¨çš„**å…³ç³»æ•°æ®åº“**å˜å¾—ç®€å•ã€‚å®ƒæä¾›äº†ä¸€ç§ä½¿ç”¨ç†Ÿæ‚‰çš„SQLæ•°æ®åº“ï¼ˆ**MySQLã€PostgreSQLå’ŒSQL Server**ï¼‰çš„æ–¹æ³•ï¼Œè€Œæ— éœ€å¤„ç†å¸¸è§„çš„æ“ä½œä»»åŠ¡ï¼Œå¦‚ç¡¬ä»¶é…ç½®ã€æ•°æ®åº“è®¾ç½®ã€è¡¥ä¸æˆ–å¤‡ä»½ã€‚

Google Cloud SQLçš„å…³é”®ç‰¹æ€§åŒ…æ‹¬ï¼š

1. **å…¨é¢æ‰˜ç®¡**ï¼šGoogle Cloud SQLæ˜¯ä¸€é¡¹å…¨é¢æ‰˜ç®¡çš„æœåŠ¡ï¼Œæ„å‘³ç€Googleå¤„ç†æ•°æ®åº“ç»´æŠ¤ä»»åŠ¡ï¼Œå¦‚æ‰“è¡¥ä¸ã€æ›´æ–°ã€å¤‡ä»½å’Œé…ç½®ã€‚
2. **å¯ä¼¸ç¼©æ€§**ï¼šå®ƒæä¾›äº†æ‰©å±•æ•°æ®åº“å­˜å‚¨å®¹é‡å’Œè®¡ç®—èµ„æºçš„èƒ½åŠ›ï¼Œé€šå¸¸ä¸ä¼šæœ‰åœæœºæ—¶é—´ã€‚
3. **é«˜å¯ç”¨æ€§**ï¼šæä¾›é«˜å¯ç”¨æ€§é…ç½®ï¼Œç¡®ä¿æ‚¨çš„æ•°æ®åº“æœåŠ¡å¯é ï¼Œå¹¶èƒ½æ‰¿å—åŒºåŸŸæˆ–å®ä¾‹æ•…éšœã€‚
4. **å®‰å…¨æ€§**ï¼šæä¾›å¼ºå¤§çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æ•°æ®åŠ å¯†ã€èº«ä»½å’Œè®¿é—®ç®¡ç†ï¼ˆIAMï¼‰æ§åˆ¶ï¼Œä»¥åŠä½¿ç”¨ç§æœ‰IPå’ŒVPCçš„ç½‘ç»œéš”ç¦»ã€‚
5. **å¤‡ä»½å’Œæ¢å¤**ï¼šæ”¯æŒè‡ªåŠ¨å¤‡ä»½å’Œæ—¶é—´ç‚¹æ¢å¤ï¼Œå¸®åŠ©æ‚¨ä¿æŠ¤å’Œæ¢å¤æ•°æ®ã€‚
6. **é›†æˆ**ï¼šä¸å…¶ä»–Google CloudæœåŠ¡æ— ç¼é›†æˆï¼Œä¸ºæ„å»ºã€éƒ¨ç½²å’Œç®¡ç†åº”ç”¨ç¨‹åºæä¾›å…¨é¢è§£å†³æ–¹æ¡ˆã€‚
7. **æ€§èƒ½**ï¼šæä¾›æ€§èƒ½æŒ‡æ ‡å’Œè¯Šæ–­å·¥å…·ï¼Œä»¥ç›‘æ§ã€æ’é™¤æ•…éšœå’Œæé«˜æ•°æ®åº“æ€§èƒ½ã€‚

### å¯†ç 

åœ¨Webæ§åˆ¶å°Cloud SQLå…è®¸ç”¨æˆ·**è®¾ç½®**æ•°æ®åº“çš„**å¯†ç **ï¼Œè¿˜æœ‰ä¸€ä¸ªç”ŸæˆåŠŸèƒ½ï¼Œä½†æœ€é‡è¦çš„æ˜¯ï¼Œ**MySQL**å…è®¸**ç•™ç©ºå¯†ç ï¼Œæ‰€æœ‰æ•°æ®åº“éƒ½å…è®¸å°†å¯†ç è®¾ç½®ä¸ºå­—ç¬¦"a"ï¼š**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

è¿˜å¯ä»¥é…ç½®å¯†ç ç­–ç•¥ï¼Œè¦æ±‚**é•¿åº¦**ã€**å¤æ‚æ€§**ã€**ç¦ç”¨é‡ç”¨**å’Œ**ç¦ç”¨ç”¨æˆ·ååœ¨å¯†ç ä¸­**ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯ç¦ç”¨çš„ã€‚

**SQL Server**å¯ä»¥é…ç½®ä¸ºä½¿ç”¨**Active Directoryè®¤è¯**ã€‚

### åŒºåŸŸå¯ç”¨æ€§

æ•°æ®åº“å¯ä»¥**åœ¨ä¸€ä¸ªåŒºåŸŸæˆ–å¤šä¸ªåŒºåŸŸä¸­å¯ç”¨**ï¼Œå½“ç„¶ï¼Œå»ºè®®å°†é‡è¦æ•°æ®åº“æ”¾åœ¨å¤šä¸ªåŒºåŸŸä¸­ã€‚

### åŠ å¯†

é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨Googleç®¡ç†çš„åŠ å¯†å¯†é’¥ï¼Œä½†ä¹Ÿ**å¯ä»¥é€‰æ‹©ä½¿ç”¨å®¢æˆ·ç®¡ç†çš„åŠ å¯†å¯†é’¥ï¼ˆCMEKï¼‰**ã€‚

### è¿æ¥

* **ç§æœ‰IP**ï¼šæŒ‡å®šVPCç½‘ç»œï¼Œæ•°æ®åº“å°†åœ¨ç½‘ç»œå†…è·å¾—ä¸€ä¸ªç§æœ‰IP
* **å…¬å…±IP**ï¼šæ•°æ®åº“å°†è·å¾—ä¸€ä¸ªå…¬å…±IPï¼Œä½†é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰äººèƒ½å¤Ÿè¿æ¥
* **æˆæƒç½‘ç»œ**ï¼šæŒ‡å®šåº”è¯¥è¢«å…è®¸è¿æ¥åˆ°æ•°æ®åº“çš„å…¬å…±**IPèŒƒå›´**
* **ç§æœ‰è·¯å¾„**ï¼šå¦‚æœæ•°æ®åº“è¿æ¥åˆ°æŸä¸ªVPCï¼Œå¯ä»¥å¯ç”¨æ­¤é€‰é¡¹ï¼Œå¹¶å…è®¸**å…¶ä»–GCPæœåŠ¡å¦‚BigQueryé€šè¿‡å®ƒè®¿é—®**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### æ•°æ®ä¿æŠ¤

* **æ¯æ—¥å¤‡ä»½**ï¼šæ‰§è¡Œè‡ªåŠ¨æ¯æ—¥å¤‡ä»½ï¼Œå¹¶æŒ‡å®šæ‚¨å¸Œæœ›ä¿ç•™çš„å¤‡ä»½æ•°é‡ã€‚
* **æ—¶é—´ç‚¹æ¢å¤**ï¼šå…è®¸æ‚¨ä»ç‰¹å®šæ—¶é—´ç‚¹æ¢å¤æ•°æ®ï¼Œç²¾ç¡®åˆ°å‡ åˆ†ä¹‹ä¸€ç§’ã€‚
* **åˆ é™¤ä¿æŠ¤**ï¼šå¦‚æœå¯ç”¨ï¼Œç›´åˆ°ç¦ç”¨æ­¤åŠŸèƒ½ä¹‹å‰ï¼Œæ•°æ®åº“å°†æ— æ³•è¢«åˆ é™¤

### æšä¸¾
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### æœªç»è®¤è¯çš„æšä¸¾

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### åæœŸåˆ©ç”¨

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### æŒä¹…æ€§

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>é€šè¿‡</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS çº¢é˜Ÿä¸“å®¶)</strong></a><strong>ä»é›¶å¼€å§‹å­¦ä¹  AWS é»‘å®¢æ”»å‡»ï¼</strong></summary>

æ”¯æŒ HackTricks çš„å…¶ä»–æ–¹å¼ï¼š

* å¦‚æœæ‚¨æƒ³åœ¨ HackTricks ä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**æˆ–**ä¸‹è½½ HackTricks çš„ PDF**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹ PEASS & HackTricks å•†å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASS å®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬ç‹¬å®¶çš„[**NFT é›†åˆ**](https://opensea.io/collection/the-peass-family)
* **åŠ å…¥** ğŸ’¬ [**Discord ç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**telegram ç¾¤ç»„**](https://t.me/peass) æˆ–åœ¨ **Twitter** ğŸ¦ ä¸Š**å…³æ³¨**æˆ‘ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ä»“åº“æäº¤ PR æ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚

</details>
