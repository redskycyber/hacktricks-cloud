# GCP - Cloud SQL Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahramana kadar AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family) koleksiyonumuz
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)'a PR gÃ¶ndererek paylaÅŸÄ±n
*
*
* github depolarÄ±.

</details>

## Temel Bilgiler

Google Cloud SQL, **tamamen yÃ¶netilen bir veritabanÄ± hizmeti** olarak kabul edilir. Temel amacÄ±, Google Cloud Platform Ã¼zerindeki **iliÅŸkisel veritabanlarÄ±nÄ±n** baÅŸlatÄ±lmasÄ±, bakÄ±mÄ±, yÃ¶netimi ve yÃ¶netimi sÃ¼reÃ§lerini kolaylaÅŸtÄ±rmaktÄ±r. Hizmet, genellikle donanÄ±m saÄŸlama, veritabanÄ± yapÄ±landÄ±rmasÄ±, yamalarÄ±n uygulanmasÄ± ve yedeklemelerin gerÃ§ekleÅŸtirilmesi gibi rutin iÅŸlemleri yÃ¶netme ihtiyacÄ±nÄ± ortadan kaldÄ±rarak, tanÄ±nmÄ±ÅŸ SQL veritabanlarÄ±yla (**MySQL, PostgreSQL ve SQL Server**) etkileÅŸimi kolaylaÅŸtÄ±rmak iÃ§in tasarlanmÄ±ÅŸtÄ±r.

Google Cloud SQL'in temel Ã¶zellikleri ÅŸunlardÄ±r:

1. **Tamamen YÃ¶netilen**: Google Cloud SQL, yamalarÄ±, gÃ¼ncellemeleri, yedeklemeleri ve yapÄ±landÄ±rmayÄ± gibi veritabanÄ± bakÄ±m gÃ¶revlerini tamamen yÃ¶netilen bir hizmet olarak ele alÄ±r.
2. **Ã–lÃ§eklenebilirlik**: VeritabanÄ±nÄ±zÄ±n depolama kapasitesini ve hesaplama kaynaklarÄ±nÄ± genellikle kesintisiz bir ÅŸekilde Ã¶lÃ§eklendirebilme yeteneÄŸi saÄŸlar.
3. **YÃ¼ksek KullanÄ±labilirlik**: BÃ¶lge veya Ã¶rnek arÄ±zalarÄ±na dayanÄ±klÄ± olacak ÅŸekilde yÃ¼ksek kullanÄ±labilirlik yapÄ±landÄ±rmalarÄ± sunar, bÃ¶ylece veritabanÄ± hizmetleriniz gÃ¼venilir olur.
4. **GÃ¼venlik**: Veri ÅŸifreleme, Kimlik ve EriÅŸim YÃ¶netimi (IAM) kontrolleri ve Ã¶zel IP'ler ve VPC kullanarak aÄŸ izolasyonu gibi gÃ¼Ã§lÃ¼ gÃ¼venlik Ã¶zellikleri saÄŸlar.
5. **Yedeklemeler ve Kurtarma**: Otomatik yedeklemeleri ve zamana gÃ¶re kurtarmayÄ± destekleyerek verilerinizi korumanÄ±za ve geri yÃ¼klemenize yardÄ±mcÄ± olur.
6. **Entegrasyon**: DiÄŸer Google Cloud hizmetleriyle sorunsuz bir ÅŸekilde entegre olur, uygulamalar oluÅŸturmak, daÄŸÄ±tmak ve yÃ¶netmek iÃ§in kapsamlÄ± bir Ã§Ã¶zÃ¼m sunar.
7. **Performans**: VeritabanÄ± performansÄ±nÄ± izlemek, sorun gidermek ve iyileÅŸtirmek iÃ§in performans metrikleri ve teÅŸhisler sunar.

### Åifre

Web konsolunda Cloud SQL, veritabanÄ±nÄ±n **ÅŸifresini belirlemeye** izin verir, ayrÄ±ca bir oluÅŸturma Ã¶zelliÄŸi de vardÄ±r, ancak en Ã¶nemlisi, **MySQL** boÅŸ bir ÅŸifre bÄ±rakmaya izin verir ve tÃ¼m ÅŸifrelerin sadece "a" karakteri olarak ayarlanmasÄ±na izin verir:

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

AyrÄ±ca, **SQL Server** **Active Directory Kimlik DoÄŸrulamasÄ±** ile yapÄ±landÄ±rÄ±labilir.

### BÃ¶lge KullanÄ±labilirliÄŸi

VeritabanÄ±, **1 bÃ¶lgede veya birden fazla bÃ¶lgede kullanÄ±labilir**, elbette, Ã¶nemli veritabanlarÄ±nÄ±n birden fazla bÃ¶lgede olmasÄ± Ã¶nerilir.

### Åifreleme

VarsayÄ±lan olarak, Google tarafÄ±ndan yÃ¶netilen bir ÅŸifreleme anahtarÄ± kullanÄ±lÄ±r, ancak **MÃ¼ÅŸteri tarafÄ±ndan yÃ¶netilen bir ÅŸifreleme anahtarÄ± (CMEK)** seÃ§mek de mÃ¼mkÃ¼ndÃ¼r.

### BaÄŸlantÄ±lar

* **Ã–zel IP**: VPC aÄŸÄ±nÄ± belirtin ve veritabanÄ± aÄŸ iÃ§inde Ã¶zel bir IP alÄ±r
* **Genel IP**: VeritabanÄ± bir genel IP alÄ±r, ancak varsayÄ±lan olarak kimse baÄŸlanamaz
* **YetkilendirilmiÅŸ aÄŸlar**: VeritabanÄ±na baÄŸlanmaya izin verilmesi gereken genel **IP aralÄ±klarÄ±nÄ± belirtin**
* **Ã–zel Yol**: DB bir VPC'de baÄŸlÄ±ysa, bu seÃ§eneÄŸi etkinleÅŸtirebilir ve **BigQuery gibi diÄŸer GCP hizmetlerine eriÅŸim saÄŸlayabilirsiniz**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### Veri Koruma

* **GÃ¼nlÃ¼k yedeklemeler**: Otomatik gÃ¼nlÃ¼k yedeklemeleri gerÃ§ekleÅŸtirin ve korumak istediÄŸiniz yedeklemelerin sayÄ±sÄ±nÄ± belirtin.
* **Zamana gÃ¶re kurtarma**: Belirli bir zamandaki verileri, saniyenin bir kesirine kadar geri yÃ¼klemenizi saÄŸlar.
* **Silme KorumasÄ±**: EtkinleÅŸtirildiyse, bu Ã¶zellik devre dÄ±ÅŸÄ± bÄ±rakÄ±lÄ±ncaya kadar DB silinemez

### NumaralandÄ±rma
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Kimlik DoÄŸrulama Gerektirmeyen Enum

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### SonrasÄ± SÄ±zma

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### SÃ¼reklilik

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'Ä± desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ±zÄ± gÃ¶rmek** veya HackTricks'i **PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'yi keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)'u **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek** paylaÅŸÄ±n.

</details>
