# GCP - Cloud SQL Enum

<details>

<summary><strong>Lernen Sie das Hacken von AWS von Null auf mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks als PDF herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
*
*
* GitHub-Repositories.

</details>

## Grundlegende Informationen

Google Cloud SQL ist ein verwalteter Dienst, der das **Einrichten, Warten und Verwalten von relationalen Datenbanken** wie MySQL, PostgreSQL und SQL Server auf der Google Cloud Platform vereinfacht und die Notwendigkeit beseitigt, Aufgaben wie Hardwarebereitstellung, Datenbankeinrichtung, Patching und Backups zu √ºbernehmen.

Zu den wichtigsten Funktionen von Google Cloud SQL geh√∂ren:

1. **Vollst√§ndig verwaltet**: Google Cloud SQL ist ein vollst√§ndig verwalteter Dienst, was bedeutet, dass Google Datenbankwartungsaufgaben wie Patching, Updates, Backups und Konfiguration √ºbernimmt.
2. **Skalierbarkeit**: Es bietet die M√∂glichkeit, die Speicherkapazit√§t und Rechenressourcen Ihrer Datenbank zu skalieren, oft ohne Ausfallzeiten.
3. **Hohe Verf√ºgbarkeit**: Bietet Konfigurationen mit hoher Verf√ºgbarkeit, die sicherstellen, dass Ihre Datenbankdienste zuverl√§ssig sind und Zone- oder Instanzfehler √ºberstehen k√∂nnen.
4. **Sicherheit**: Bietet robuste Sicherheitsfunktionen wie Datenverschl√ºsselung, Identit√§ts- und Zugriffsverwaltung (IAM)-Steuerungen und Netzwerktrennung unter Verwendung privater IPs und VPC.
5. **Backups und Wiederherstellung**: Unterst√ºtzt automatische Backups und Punkt-in-Zeit-Wiederherstellung, um Ihre Daten zu sch√ºtzen und wiederherzustellen.
6. **Integration**: Integriert sich nahtlos mit anderen Google Cloud-Diensten und bietet eine umfassende L√∂sung zum Erstellen, Bereitstellen und Verwalten von Anwendungen.
7. **Leistung**: Bietet Leistungsmetriken und Diagnosen zur √úberwachung, Fehlerbehebung und Verbesserung der Datenbankleistung.

### Passwort

Im Web-Console erm√∂glicht Cloud SQL dem Benutzer, das **Passwort** der Datenbank **einzurichten**, es gibt auch eine Generierungsfunktion, aber am wichtigsten ist, dass **MySQL** es erlaubt, ein leeres Passwort zu hinterlassen und alle erlauben, als Passwort einfach das Zeichen "a" einzustellen:

<figure><img src="../../../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

Es ist auch m√∂glich, eine Passwortrichtlinie zu konfigurieren, die **L√§nge**, **Komplexit√§t**, **Wiederverwendung deaktivieren** und **Benutzername im Passwort deaktivieren** erfordert. Alle sind standardm√§√üig deaktiviert.

**SQL Server** kann mit **Active Directory-Authentifizierung** konfiguriert werden.

### Zonenverf√ºgbarkeit

Die Datenbank kann in 1 Zone oder in mehreren **verf√ºgbar sein**, es wird nat√ºrlich empfohlen, wichtige Datenbanken in mehreren Zonen zu haben.

### Verschl√ºsselung

Standardm√§√üig wird ein von Google verwalteter Verschl√ºsselungsschl√ºssel verwendet, aber es ist auch **m√∂glich, einen kundenverwalteten Verschl√ºsselungsschl√ºssel (CMEK)** auszuw√§hlen.

### Verbindungen

* **Private IP**: Geben Sie das VPC-Netzwerk an, und die Datenbank erh√§lt eine private IP im Netzwerk.
* **√ñffentliche IP**: Die Datenbank erh√§lt eine √∂ffentliche IP, aber standardm√§√üig kann niemand eine Verbindung herstellen.
* **Autorisierte Netzwerke**: Geben Sie √∂ffentliche **IP-Bereiche an, die zur Verbindung mit der Datenbank zugelassen sein sollen**.
* **Privater Pfad**: Wenn die DB mit einem VPC verbunden ist, ist es m√∂glich, diese Option zu aktivieren und **anderen GCP-Diensten wie BigQuery den Zugriff darauf zu erm√∂glichen**.

<figure><img src="../../../.gitbook/assets/image (15).png" alt=""><figcaption></figcaption></figure>

### Datensicherung

* **T√§gliche Backups**: F√ºhren Sie automatische t√§gliche Backups durch und geben Sie die Anzahl der Backups an, die Sie beibehalten m√∂chten.
* **Punkt-in-Zeit-Wiederherstellung**: Erm√∂glicht es Ihnen, Daten von einem bestimmten Zeitpunkt an wiederherzustellen, bis auf einen Bruchteil einer Sekunde genau.
* **L√∂schschutz**: Wenn aktiviert, kann die DB nicht gel√∂scht werden, bis diese Funktion deaktiviert ist.

### Enumeration
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Nicht authentifizierte Enumeration

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post-Exploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistenz

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Erlernen Sie AWS-Hacking von Null auf Held mit</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Andere M√∂glichkeiten, HackTricks zu unterst√ºtzen:

* Wenn Sie Ihr **Unternehmen in HackTricks beworben sehen m√∂chten** oder **HackTricks im PDF-Format herunterladen m√∂chten**, √ºberpr√ºfen Sie die [**ABONNEMENTPL√ÑNE**](https://github.com/sponsors/carlospolop)!
* Holen Sie sich das [**offizielle PEASS & HackTricks-Merch**](https://peass.creator-spring.com)
* Entdecken Sie [**The PEASS Family**](https://opensea.io/collection/the-peass-family), unsere Sammlung exklusiver [**NFTs**](https://opensea.io/collection/the-peass-family)
* **Treten Sie der** üí¨ [**Discord-Gruppe**](https://discord.gg/hRep4RUj7f) oder der [**Telegram-Gruppe**](https://t.me/peass) bei oder **folgen** Sie mir auf **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Teilen Sie Ihre Hacking-Tricks, indem Sie PRs an die** [**HackTricks**](https://github.com/carlospolop/hacktricks) und [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) GitHub-Repositories einreichen.

</details>
