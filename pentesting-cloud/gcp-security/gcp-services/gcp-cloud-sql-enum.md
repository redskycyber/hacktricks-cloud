# GCP - Cloud SQL Enum

<details>

<summary><strong>Impara l'hacking su AWS da zero a eroe con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (Esperto Red Team di HackTricks su AWS)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se vuoi vedere la tua **azienda pubblicizzata su HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale di PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**La Famiglia PEASS**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguimi** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Condividi i tuoi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)
*
*
* repository di GitHub.

</details>

## Informazioni di Base

Google Cloud SQL √® un servizio gestito che **semplifica la configurazione, la manutenzione e l'amministrazione di database relazionali** come MySQL, PostgreSQL e SQL Server su Google Cloud Platform, eliminando la necessit√† di gestire compiti come il provisioning dell'hardware, la configurazione del database, il patching e i backup.

Le caratteristiche chiave di Google Cloud SQL includono:

1. **Totalmente Gestito**: Google Cloud SQL √® un servizio completamente gestito, il che significa che Google gestisce compiti di manutenzione del database come il patching, gli aggiornamenti, i backup e la configurazione.
2. **Scalabilit√†**: Fornisce la capacit√† di scalare la capacit√† di archiviazione e le risorse di calcolo del tuo database, spesso senza tempi di inattivit√†.
3. **Alta Affidabilit√†**: Offre configurazioni ad alta disponibilit√†, garantendo che i tuoi servizi di database siano affidabili e possano resistere a guasti di zona o di istanza.
4. **Sicurezza**: Fornisce robuste funzionalit√† di sicurezza come la crittografia dei dati, i controlli di Identity and Access Management (IAM) e l'isolamento di rete utilizzando IP privati e VPC.
5. **Backup e Ripristino**: Supporta backup automatici e ripristino a un punto nel tempo, aiutandoti a proteggere e ripristinare i tuoi dati.
6. **Integrazione**: Si integra in modo trasparente con altri servizi di Google Cloud, fornendo una soluzione completa per la costruzione, il rilascio e la gestione delle applicazioni.
7. **Prestazioni**: Offre metriche delle prestazioni e diagnostica per monitorare, risolvere i problemi e migliorare le prestazioni del database.

### Password

Nella console web Cloud SQL consente all'utente di **impostare** la **password** del database, c'√® anche una funzione di generazione, ma soprattutto, **MySQL** consente di **lasciare una password vuota e tutti permettono di impostare come password solo il carattere "a":**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

√à anche possibile configurare una politica delle password che richiede **lunghezza**, **complessit√†**, **disabilitazione del riutilizzo** e **disabilitazione del nome utente nella password**. Tutti sono disabilitati per impostazione predefinita.

**SQL Server** pu√≤ essere configurato con **Autenticazione tramite Active Directory**.

### Disponibilit√† della Zona

Il database pu√≤ essere **disponibile in 1 zona o in pi√π**, naturalmente, √® consigliabile avere database importanti in pi√π zone.

### Crittografia

Per impostazione predefinita viene utilizzata una chiave di crittografia gestita da Google, ma √® anche **possibile selezionare una chiave di crittografia gestita dal cliente (CMEK)**.

### Connessioni

* **IP Privato**: Indica la rete VPC e il database otterr√† un IP privato all'interno della rete
* **IP Pubblico**: Il database otterr√† un IP pubblico, ma per impostazione predefinita nessuno potr√† connettersi
* **Reti autorizzate**: Indica gli **intervalli di IP pubblici che dovrebbero essere autorizzati** a connettersi al database
* **Percorso Privato**: Se il DB √® connesso in qualche VPC, √® possibile abilitare questa opzione e dare **accesso ad altri servizi GCP come BigQuery su di esso**

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

### Protezione dei Dati

* **Backup giornalieri**: Esegui backup automatici giornalieri e indica il numero di backup che desideri mantenere.
* **Ripristino a un punto nel tempo**: Consente di recuperare dati da un punto specifico nel tempo, fino a una frazione di secondo.
* **Protezione dalla Cancellazione**: Se abilitata, il DB non potr√† essere eliminato fino a quando questa funzionalit√† non viene disabilitata

### Enumerazione
```bash
# Get SQL instances
gcloud sql instances list
gcloud sql instances describe <inst-name> # get IPs, CACert, settings

# Get database names inside an instance (like information_schema, sys...)
gcloud sql databases list --instance <intance-name>
gcloud sql databases describe <db-name> --instance <intance-name>

# Get usernames inside the db instance
gcloud sql users list --instance <intance-name>

# Backups
gcloud sql backups list --instance <intance-name>
gcloud sql backups describe <backup-name> --instance <intance-name>
```
### Enumerazione non autenticata

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md" %}
[gcp-cloud-sql-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-cloud-sql-unauthenticated-enum.md)
{% endcontent-ref %}

### Post Esploitation

{% content-ref url="../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md" %}
[gcp-cloud-sql-post-exploitation.md](../gcp-post-exploitation/gcp-cloud-sql-post-exploitation.md)
{% endcontent-ref %}

### Persistenza

{% content-ref url="../gcp-persistence/gcp-cloud-sql-persistence.md" %}
[gcp-cloud-sql-persistence.md](../gcp-persistence/gcp-cloud-sql-persistence.md)
{% endcontent-ref %}

<details>

<summary><strong>Impara l'hacking su AWS da zero a esperto con</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Altri modi per supportare HackTricks:

* Se desideri vedere la tua **azienda pubblicizzata in HackTricks** o **scaricare HackTricks in PDF** Controlla i [**PIANI DI ABBONAMENTO**](https://github.com/sponsors/carlospolop)!
* Ottieni il [**merchandising ufficiale PEASS & HackTricks**](https://peass.creator-spring.com)
* Scopri [**The PEASS Family**](https://opensea.io/collection/the-peass-family), la nostra collezione di [**NFT esclusivi**](https://opensea.io/collection/the-peass-family)
* **Unisciti al** üí¨ [**gruppo Discord**](https://discord.gg/hRep4RUj7f) o al [**gruppo telegram**](https://t.me/peass) o **seguimi** su **Twitter** üê¶ [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Condividi i tuoi trucchi di hacking inviando PR a** [**HackTricks**](https://github.com/carlospolop/hacktricks) e [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
