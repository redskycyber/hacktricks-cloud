# GCP - IAMã€ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã€ãŠã‚ˆã³çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã®åˆ—æŒ™

<details>

<summary><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong>ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã³ã¾ã—ã‚‡ã†ï¼</summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

- **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**å ´åˆã‚„**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
- [**å…¬å¼PEASSï¼†HackTricksã‚¹ãƒ¯ãƒƒã‚°**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
- [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
- ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã¾ãŸã¯[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ **ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã™ã‚‹
- **HackTricks**ãŠã‚ˆã³**HackTricks Cloud**ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>

## ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã¤ã„ã¦ã®ç´¹ä»‹ã¯æ¬¡ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

{% content-ref url="../gcp-basic-information.md" %}
[gcp-basic-information.md](../gcp-basic-information.md)
{% endcontent-ref %}

### åˆ—æŒ™

ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯å¸¸ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å±ã—ã¦ã„ã¾ã™ï¼š
```bash
gcloud iam service-accounts list --project <project>
```
## ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼†ã‚°ãƒ«ãƒ¼ãƒ—

GCPã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼†ã‚°ãƒ«ãƒ¼ãƒ—ã®å‹•ä½œã«ã¤ã„ã¦ã®ç´¹ä»‹ã¯ã€ä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼š

{% content-ref url="../gcp-basic-information.md" %}
[gcp-basic-information.md](../gcp-basic-information.md)
{% endcontent-ref %}

### åˆ—æŒ™

æ¨©é™ **`serviceusage.services.enable`** ã¨ **`serviceusage.services.use`** ã‚’æŒã£ã¦ã„ã‚‹ã¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ **ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹åŒ–** ã—ã€ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

{% hint style="danger" %}
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Workspaceãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ **Project Creator** ã®å½¹å‰²ãŒä»˜ä¸ã•ã‚Œã€**æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ** ã™ã‚‹æ¨©é™ãŒä¸ãˆã‚‰ã‚Œã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãã‚Œã«å¯¾ã—ã¦ **`owner`** å½¹å‰²ãŒä¸ãˆã‚‰ã‚Œã¾ã™ã€‚ãã®ãŸã‚ã€å½¼ã¯ **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã“ã‚Œã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹åŒ–** ã—ã¦Workspaceã‚’åˆ—æŒ™ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãŸã ã—ã€ã“ã‚Œã‚‰ã®APIã‚’å‘¼ã³å‡ºã™ãŸã‚ã«ã¯ã€Workspaceã§ **ååˆ†ãªæ¨©é™ãŒå¿…è¦** ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
{% endhint %}

**`admin`ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹åŒ–** ã§ãã€ã‹ã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒWorkspaceã§ **ååˆ†ãªç‰¹æ¨©ã‚’æŒã£ã¦ã„ã‚‹** å ´åˆã€ä»¥ä¸‹ã®è¡Œã‚’ä½¿ç”¨ã—ã¦ **ã™ã¹ã¦ã®ã‚°ãƒ«ãƒ¼ãƒ—ï¼†ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’åˆ—æŒ™** ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\
**`identity groups`** ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã¦ã‚‚ã€**ã‚°ãƒ«ãƒ¼ãƒ—ã«å±ã•ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼** ã‚‚è¿”ã•ã‚Œã¾ã™ï¼š

{% code overflow="wrap" %}
```bash
# Enable admin
gcloud services enable admin.googleapis.com
gcloud services enable cloudidentity.googleapis.com

# Using admin.googleapis.com
## List all users
gcloud organizations list #The DIRECTORY_CUSTOMER_ID is the Workspace ID
gcloud beta identity groups preview --customer <workspace-id>

# Using cloudidentity.googleapis.com
## List groups of a user
gcloud identity groups memberships search-transitive-groups --member-email <email> --labels=cloudidentity.googleapis.com/groups.discussion_forum

## List Group Members
gcloud identity groups memberships list --group-email=<email>
### Make it transitive
gcloud identity groups memberships search-transitive-memberships --group-email=<email>

## Get a graph (if you have enough permissions)
gcloud identity groups memberships get-membership-graph --member-email=<email> --labels=cloudidentity.googleapis.com/groups.discussion_forum
```
{% endcode %}

{% hint style="success" %}
å‰ã®ä¾‹ã§ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `--labels` ãŒå¿…è¦ãªã®ã§ã€ä¸€èˆ¬çš„ãªå€¤ãŒä½¿ç”¨ã•ã‚Œã¾ã™ï¼ˆ[**PurplePanda ãŒã“ã“ã§è¡Œã£ã¦ã„ã‚‹ã‚ˆã†ã«**](https://github.com/carlospolop/PurplePanda/blob/master/intel/google/discovery/disc\_groups\_users.py) ã®ã‚ˆã†ã« API ã‚’ç›´æ¥ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚
{% endhint %}

ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã¦ã‚‚ã€ä¾µå®³ã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ååˆ†ãªæ¨©é™ãŒãªã„ãŸã‚ã€ãã‚Œã‚‰ã‚’åˆ—æŒ™ã™ã‚‹éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼š

<figure><img src="../../../.gitbook/assets/image (5) (2).png" alt=""><figcaption></figcaption></figure>

## IAM

IAM ã«é–¢ã™ã‚‹åŸºæœ¬æƒ…å ±ã«ã¤ã„ã¦ã¯ã€[**ã“ã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„**](../gcp-basic-information.md#iam-roles)ã€‚

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ¨©é™

[**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**](https://cloud.google.com/resource-manager/docs/default-access-control) ã«ã‚ˆã‚‹ã¨ã€çµ„ç¹”ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ‰ãƒ¡ã‚¤ãƒ³å†…ã®ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã« **Billing Account Creator** ãŠã‚ˆã³ **Project Creator** ã®å½¹å‰²ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å½¹å‰²ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã™ãã« Google Cloud ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ãŒã€çµ„ç¹”ãƒªã‚½ãƒ¼ã‚¹ã®é€šå¸¸ã®é‹ç”¨ã«ã¯é©ã—ã¦ã„ã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã® **å½¹å‰²** ã¯ä»¥ä¸‹ã® **æ¨©é™** ã‚’ä»˜ä¸ã—ã¾ã™ï¼š

* `billing.accounts.create` ãŠã‚ˆã³ `resourcemanager.organizations.get`
* `resourcemanager.organizations.get` ãŠã‚ˆã³ `resourcemanager.projects.create`

ã•ã‚‰ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ã€[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cloud.google.com/resource-manager/docs/access-control-proj) ã«ã‚ˆã‚‹ã¨ã€ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ‰€æœ‰è€…ãŒè‡ªå‹•çš„ã«ä»˜ä¸ã•ã‚Œã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ãã®ä¸Šã§ä»»æ„ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè¡Œã§ãã¾ã™ï¼ˆãƒã‚¤ãƒŠãƒ¼ï¼Ÿãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®åˆ—æŒ™ï¼Ÿ...ï¼‰

{% hint style="danger" %}
GCP çµ„ç¹”ã§ã®æœ€é«˜æ¨©é™ã¯ **Organization Administrator** å½¹å‰²ã§ã™ã€‚
{% endhint %}

### set-iam-policy ã¨ add-iam-policy-binding

ã»ã¨ã‚“ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã€ãƒªã‚½ãƒ¼ã‚¹ä¸Šã®æ¨©é™ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã« **`add-iam-policy-binding`** ã¾ãŸã¯ **`set-iam-policy`** ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚ä¸»ãªé•ã„ã¯ã€**`add-iam-policy-binding` ã¯æ—¢å­˜ã® IAM ãƒãƒªã‚·ãƒ¼ã«æ–°ã—ã„ãƒ­ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¿½åŠ **ã™ã‚‹ã®ã«å¯¾ã—ã€**`set-iam-policy`** ã¯ä»¥å‰ã«ä»˜ä¸ã•ã‚ŒãŸæ¨©é™ã‚’ **å‰Šé™¤** ã—ã€ã‚³ãƒãƒ³ãƒ‰ã§æŒ‡å®šã•ã‚ŒãŸæ¨©é™ã®ã¿ã‚’ **è¨­å®š** ã™ã‚‹ã“ã¨ã§ã™ã€‚

### åˆ—æŒ™
```bash
# Roles
## List roles
gcloud iam roles list --project $PROJECT_ID # List only custom roles
gcloud iam roles list --filter='etag:AA=='

## Get perms and description of role
gcloud iam roles describe roles/container.admin
gcloud iam roles describe --project <proj-name> <role-name>

# Policies
gcloud organizations get-iam-policy <org_id>
gcloud resource-manager folders get-iam-policy <folder-id>
gcloud projects get-iam-policy <project-id>

# MISC
## Testable permissions in resource
gcloud iam list-testable-permissions --filter "NOT apiDisabled: true" <resource>
## Grantable roles to a resource
gcloud iam list-grantable-roles <project URL>
```
### cloudasset IAMåˆ—æŒ™

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã™ã¹ã¦ã®æ¨©é™ã‚’ã•ã¾ã–ã¾ãªãƒªã‚½ãƒ¼ã‚¹ï¼ˆçµ„ç¹”ã€ãƒ•ã‚©ãƒ«ãƒ€ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã©ï¼‰ã§ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãŸã‚ã®ç•°ãªã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€ãƒªã‚½ãƒ¼ã‚¹å†…ã®ã™ã¹ã¦ã®IAMãƒãƒªã‚·ãƒ¼ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãã¾ã™ã€‚

* æ¨©é™ **`cloudasset.assets.searchAllIamPolicies`** ã¯ã€ãƒªã‚½ãƒ¼ã‚¹å†…ã® **ã™ã¹ã¦ã®IAMãƒãƒªã‚·ãƒ¼** ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãã¾ã™ã€‚
```bash
gcloud asset search-all-iam-policies #By default uses current configured project
gcloud asset search-all-iam-policies --scope folders/1234567
gcloud asset search-all-iam-policies --scope organizations/123456
gcloud asset search-all-iam-policies --scope projects/project-id-123123
```
* æ¨©é™ **`cloudasset.assets.analyzeIamPolicy`** ã¯ã€ãƒªã‚½ãƒ¼ã‚¹å†…ã®ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã® **ã™ã¹ã¦ã®IAMãƒãƒªã‚·ãƒ¼** ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãã¾ã™ã€‚
```bash
# Needs perm "cloudasset.assets.analyzeIamPolicy" over the asset
gcloud asset analyze-iam-policy --organization=<org-id> \
--identity='user:email@hacktricks.xyz'
gcloud asset analyze-iam-policy --folder=<folder-id> \
--identity='user:email@hacktricks.xyz'
gcloud asset analyze-iam-policy --project=<project-name> \
--identity='user:email@hacktricks.xyz'
```
* æ¨©é™ **`cloudasset.assets.searchAllResources`** ã¯ã€çµ„ç¹”ã€ãƒ•ã‚©ãƒ«ãƒ€ã€ã¾ãŸã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã¾ã™ã€‚IAM é–¢é€£ã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆå½¹å‰²ãªã©ï¼‰ãŒå«ã¾ã‚Œã¾ã™ã€‚
```bash
gcloud asset search-all-resources --scope projects/<proj-name>
gcloud asset search-all-resources --scope folders/1234567
gcloud asset search-all-resources --scope organizations/123456
```
* æ¨©é™ **`cloudasset.assets.analyzeMove`** ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã©ã®ãƒªã‚½ãƒ¼ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒãƒªã‚·ãƒ¼ã‚’å–å¾—ã™ã‚‹ã®ã«ã‚‚å½¹ç«‹ã¡ã¾ã™ã€‚
```bash
gcloud asset analyze-move --project=<proj-name> \
--destination-organization=609216679593
```
* ç§ã¯ã€æ¨©é™ **`cloudasset.assets.queryIamPolicy`** ãŒä¸»ä½“ã®æ¨©é™ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚‚ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚
```bash
# But, when running something like this
gcloud asset query --project=<proj> --statement='SELECT * FROM compute_googleapis_com_Instance'
# I get the error
ERROR: (gcloud.asset.query) UNAUTHENTICATED: QueryAssets API is only supported for SCC premium customers. See https://cloud.google.com/security-command-center/pricing
```
### testIamPermissionsåˆ—æŒ™

{% hint style="danger" %}
å‰è¿°ã®æ–¹æ³•ã§IAMæƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆã€Red Teamã«ã„ã‚‹å ´åˆã¯ã€[https://github.com/carlospolop/bf_my_gcp_perms](https://github.com/carlospolop/bf_my_gcp_perms)ã‚’ä½¿ç”¨ã—ã¦ç¾åœ¨ã®æ¨©é™ã‚’ç·å½“ãŸã‚Šæ”»æ’ƒã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãŸã ã—ã€`cloudresourcemanager.googleapis.com`ã‚µãƒ¼ãƒ“ã‚¹ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
{% endhint %}

### Privesc

æ¬¡ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€**IAMæ¨©é™ã‚’æ‚ªç”¨ã—ã¦ç‰¹æ¨©ã‚’æ˜‡æ ¼**ã™ã‚‹æ–¹æ³•ã‚’ç¢ºèªã§ãã¾ã™ï¼š

{% content-ref url="../gcp-privilege-escalation/gcp-iam-privesc.md" %}
[gcp-iam-privesc.md](../gcp-privilege-escalation/gcp-iam-privesc.md)
{% endcontent-ref %}

### èªè¨¼ãªã—ã®åˆ—æŒ™ <a href="#service-account-impersonation" id="service-account-impersonation"></a>

{% content-ref url="../gcp-unaunthenticated-enum-and-access/gcp-iam-principals-and-org-unauthenticated-enum.md" %}
[gcp-iam-principals-and-org-unauthenticated-enum.md](../gcp-unaunthenticated-enum-and-access/gcp-iam-principals-and-org-unauthenticated-enum.md)
{% endcontent-ref %}

### ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ <a href="#service-account-impersonation" id="service-account-impersonation"></a>

{% content-ref url="../gcp-post-exploitation/gcp-iam-post-exploitation.md" %}
[gcp-iam-post-exploitation.md](../gcp-post-exploitation/gcp-iam-post-exploitation.md)
{% endcontent-ref %}

### æ°¸ç¶šæ€§

é«˜ã„æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã¯ã€æ¬¡ã®ã“ã¨ãŒã§ãã¾ã™ï¼š

- æ–°ã—ã„SAï¼ˆã¾ãŸã¯Workspaceã®å ´åˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã‚’ä½œæˆã™ã‚‹
- è‡ªåˆ†è‡ªèº«ãŒåˆ¶å¾¡ã™ã‚‹ä¸»ä½“ã«ã‚ˆã‚Šå¤šãã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹
- è„†å¼±ãªSAã«ã‚ˆã‚Šå¤šãã®ç‰¹æ¨©ã‚’ä»˜ä¸ã™ã‚‹ï¼ˆvmå†…ã®SSRFã€è„†å¼±ãªCloud Functionãªã©ï¼‰
- ...

## çµ„ç¹”ãƒãƒªã‚·ãƒ¼

Org Policiesã«ã¤ã„ã¦ã®ç´¹ä»‹ã¯æ¬¡ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

{% content-ref url="../gcp-basic-information.md" %}
[gcp-basic-information.md](../gcp-basic-information.md)
{% endcontent-ref %}

IAMãƒãƒªã‚·ãƒ¼ã¯ã€å½¹å‰²ã‚’ä»‹ã—ã¦ä¸»ä½“ãŒãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦æŒã¤æ¨©é™ã‚’ç¤ºã—ã€ç´°ã‹ã„æ¨©é™ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã¯ã€**ã“ã‚Œã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ä½¿ç”¨æ–¹æ³•ã‚’åˆ¶é™ã—ãŸã‚Šã€ç„¡åŠ¹ã«ã™ã‚‹æ©Ÿèƒ½ã‚’åˆ¶é™**ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€GCPç’°å¢ƒã®å„ãƒªã‚½ãƒ¼ã‚¹ã®æœ€å°ç‰¹æ¨©ã‚’å‘ä¸Šã•ã›ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚
```bash
gcloud resource-manager org-policies list --organization=ORGANIZATION_ID
gcloud resource-manager org-policies list --folder=FOLDER_ID
gcloud resource-manager org-policies list --project=PROJECT_ID
```
### ç‰¹æ¨©æ˜‡æ ¼

ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€**çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã®æ¨©é™ã‚’æ‚ªç”¨ã—ã¦ç‰¹æ¨©ã‚’æ˜‡æ ¼ã•ã›ã‚‹æ–¹æ³•**ã‚’ç¢ºèªã§ãã¾ã™ï¼š

{% content-ref url="../gcp-privilege-escalation/gcp-orgpolicy-privesc.md" %}
[gcp-orgpolicy-privesc.md](../gcp-privilege-escalation/gcp-orgpolicy-privesc.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ã‚’é€šã˜ã¦ã€ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§ã®AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã®ã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[NFTs](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«å‚åŠ ã™ã‚‹ã‹ã€[**telegramã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã§**ãƒ•ã‚©ãƒ­ãƒ¼**ã™ã‚‹ã€‚
* **HackTricks**ãŠã‚ˆã³**HackTricks Cloud**ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
