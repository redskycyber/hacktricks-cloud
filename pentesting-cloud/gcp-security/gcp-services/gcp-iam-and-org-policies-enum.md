# GCP - IAMã€ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ« & çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã®åˆ—æŒ™

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**PEASSãƒ•ã‚¡ãƒŸãƒªãƒ¼**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFT**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’**å…±æœ‰ã™ã‚‹**ã€‚

</details>

## ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã¤ã„ã¦ã®ã‚¤ãƒ³ãƒˆãƒ­ã¯ä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„:

{% content-ref url="../gcp-basic-information.md" %}
[gcp-basic-information.md](../gcp-basic-information.md)
{% endcontent-ref %}

### åˆ—æŒ™

ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯å¸¸ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å±ã—ã¦ã„ã¾ã™ï¼š
```bash
gcloud iam service-accounts list --project <project>
```
## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚°ãƒ«ãƒ¼ãƒ—

GCPã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚°ãƒ«ãƒ¼ãƒ—ã®å‹•ä½œã«ã¤ã„ã¦ã®å°å…¥ã¯ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

{% content-ref url="../gcp-basic-information.md" %}
[gcp-basic-information.md](../gcp-basic-information.md)
{% endcontent-ref %}

### åˆ—æŒ™

**`serviceusage.services.enable`** ã¨ **`serviceusage.services.use`** ã®æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§**ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹ã«ã—**ã€ãã‚Œã‚‰ã‚’**ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™**ã€‚

{% hint style="danger" %}
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Workspaceãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆè€…**ã®å½¹å‰²ãŒä»˜ä¸ã•ã‚Œã¦ãŠã‚Šã€**æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹**ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ã€ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦**`owner`** å½¹å‰²ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€**Workspaceã‚’åˆ—æŒ™ã™ã‚‹ãŸã‚ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸Šã§ã“ã‚Œã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚
{% endhint %}

**`admin` ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã“ã¨ãŒã§ã**ã€ã‹ã¤ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒWorkspaceã§**ååˆ†ãªæ¨©é™ã‚’æŒã£ã¦ã„ã‚‹å ´åˆ**ã€ä»¥ä¸‹ã®è¡Œã‚’ä½¿ç”¨ã—ã¦**ã™ã¹ã¦ã®ã‚°ãƒ«ãƒ¼ãƒ—ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’åˆ—æŒ™ã™ã‚‹**ã“ã¨ãŒã§ãã¾ã™ã€‚
**`identity groups`** ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã¦ã‚‚ã€**ã‚°ãƒ«ãƒ¼ãƒ—ã«å±ã—ã¦ã„ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚‚è¿”ã•ã‚Œã¾ã™**ï¼š

{% code overflow="wrap" %}
```bash
# Enable admin
gcloud services enable admin.googleapis.com
gcloud services enable cloudidentity.googleapis.com

# Using admin.googleapis.com
## List all users
gcloud organizations list #The DIRECTORY_CUSTOMER_ID is the Workspace ID
gcloud beta identity groups preview --customer <workspace-id>

# Using cloudidentity.googleapis.com
## List groups of a user
gcloud identity groups memberships search-transitive-groups --member-email <email> --labels=cloudidentity.googleapis.com/groups.discussion_forum

## List Group Members
gcloud identity groups memberships list --group-email=<email>
### Make it transitive
gcloud identity groups memberships search-transitive-memberships --group-email=<email>

## Get a graph (if you have enough permissions)
gcloud identity groups memberships get-membership-graph --member-email=<email> --labels=cloudidentity.googleapis.com/groups.discussion_forum
```
{% endcode %}

{% hint style="success" %}
å‰ã®ä¾‹ã§ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `--labels` ãŒå¿…è¦ã§ã™ãŒã€ä¸€èˆ¬çš„ãªå€¤ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ï¼ˆ[**PurplePandaãŒã“ã“ã§è¡Œã£ã¦ã„ã‚‹ã‚ˆã†ã«**](https://github.com/carlospolop/PurplePanda/blob/master/intel/google/discovery/disc\_groups\_users.py)ç›´æ¥APIã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚
{% endhint %}

ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹ã«ã—ã¦ã‚‚ã€ä¾µå®³ã•ã‚ŒãŸWorkspaceãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ååˆ†ãªæ¨©é™ãŒãªã„ãŸã‚ã€åˆ—æŒ™ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼š

<figure><img src="../../../.gitbook/assets/image (5) (2).png" alt=""><figcaption></figcaption></figure>

## IAM

IAMã«é–¢ã™ã‚‹åŸºæœ¬æƒ…å ±ã«ã¤ã„ã¦ã¯[**ã“ã¡ã‚‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„**](../gcp-basic-information.md#iam-roles)ã€‚

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ¨©é™

[**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**](https://cloud.google.com/resource-manager/docs/default-access-control)ã«ã‚ˆã‚‹ã¨ã€çµ„ç¹”ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ã¨ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å†…ã®ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§**Billing Account Creator**ã¨**Project Creator**ã®å½¹å‰²ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å½¹å‰²ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã™ãã«Google Cloudã®ä½¿ç”¨ã‚’é–‹å§‹ã§ãã¾ã™ãŒã€çµ„ç¹”ãƒªã‚½ãƒ¼ã‚¹ã®é€šå¸¸ã®é‹ç”¨ã«ã¯æ„å›³ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

ã“ã‚Œã‚‰ã®**å½¹å‰²**ã¯ä»¥ä¸‹ã®**æ¨©é™**ã‚’ä»˜ä¸ã—ã¾ã™ï¼š

* `billing.accounts.create` ã¨ `resourcemanager.organizations.get`
* `resourcemanager.organizations.get` ã¨ `resourcemanager.projects.create`

ã•ã‚‰ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ã€[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cloud.google.com/resource-manager/docs/access-control-proj)ã«ã‚ˆã‚‹ã¨ã€ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®**è‡ªå‹•çš„ã«æ‰€æœ‰è€…ã«ãªã‚Šã¾ã™**ã€‚ã—ãŸãŒã£ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€ãã‚Œã«ä»»æ„ã®ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆãƒã‚¤ãƒŠãƒ¼ï¼ŸWorkspaceåˆ—æŒ™ï¼Ÿ...ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

{% hint style="danger" %}
GCPçµ„ç¹”ã§æœ€ã‚‚é«˜ã„æ¨©é™ã¯**Organization Administrator**ã®å½¹å‰²ã§ã™ã€‚
{% endhint %}

### åˆ—æŒ™
```bash
# Roles
## List roles
gcloud iam roles list --project $PROJECT_ID # List only custom roles
gcloud iam roles list --filter='etag:AA=='

## Get perms and description of role
gcloud iam roles describe roles/container.admin
gcloud iam roles describe --project <proj-name> <role-name>

# Policies
gcloud organizations get-iam-policy <org_id>
gcloud resource-manager folders get-iam-policy <folder-id>
gcloud projects get-iam-policy <project-id>

# MISC
## Testable permissions in resource
gcloud iam list-testable-permissions --filter "NOT apiDisabled: true" <resource>
## Grantable roles to a resource
gcloud iam list-grantable-roles <project URL>
```
#### cloudasset ã‚’é€šã˜ãŸåˆ—æŒ™

ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€ã•ã¾ã–ã¾ãªãƒªã‚½ãƒ¼ã‚¹ï¼ˆçµ„ç¹”ã€ãƒ•ã‚©ãƒ«ãƒ€ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã©ï¼‰å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã™ã¹ã¦ã®æ¨©é™ã‚’ç¢ºèªã™ã‚‹æ–¹æ³•ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

* æ¨©é™ **`cloudasset.assets.searchAllIamPolicies`** ã¯ã€ãƒªã‚½ãƒ¼ã‚¹å†…ã®**ã™ã¹ã¦ã® iam ãƒãƒªã‚·ãƒ¼**ã‚’è¦æ±‚ã§ãã¾ã™ã€‚
```bash
gcloud asset search-all-iam-policies #By default uses current configured project
gcloud asset search-all-iam-policies --scope folders/1234567
gcloud asset search-all-iam-policies --scope organizations/123456
gcloud asset search-all-iam-policies --scope projects/project-id-123123
```
* æ¨©é™ **`cloudasset.assets.analyzeIamPolicy`** ã¯ã€ãƒªã‚½ãƒ¼ã‚¹å†…ã®ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã®**ã™ã¹ã¦ã®IAMãƒãƒªã‚·ãƒ¼**ã‚’è¦æ±‚ã§ãã¾ã™ã€‚
```bash
# Needs perm "cloudasset.assets.analyzeIamPolicy" over the asset
gcloud asset analyze-iam-policy --organization=<org-id> \
--identity='user:email@hacktricks.xyz'
gcloud asset analyze-iam-policy --folder=<folder-id> \
--identity='user:email@hacktricks.xyz'
gcloud asset analyze-iam-policy --project=<project-name> \
--identity='user:email@hacktricks.xyz'
```
* æ¨©é™ **`cloudasset.assets.searchAllResources`** ã¯ã€çµ„ç¹”ã€ãƒ•ã‚©ãƒ«ãƒ€ã€ã¾ãŸã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒªã‚¹ãƒˆã™ã‚‹ã“ã¨ã‚’è¨±å¯ã—ã¾ã™ã€‚IAM é–¢é€£ãƒªã‚½ãƒ¼ã‚¹ï¼ˆãƒ­ãƒ¼ãƒ«ãªã©ï¼‰ã‚‚å«ã¾ã‚Œã¾ã™ã€‚
```bash
gcloud asset search-all-resources --scope projects/<proj-name>
gcloud asset search-all-resources --scope folders/1234567
gcloud asset search-all-resources --scope organizations/123456
```
* ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ **`cloudasset.assets.analyzeMove`** ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚ˆã†ãªãƒªã‚½ãƒ¼ã‚¹ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒãƒªã‚·ãƒ¼ã‚’å–å¾—ã™ã‚‹ã®ã«ã‚‚å½¹ç«‹ã¤å ´åˆãŒã‚ã‚Šã¾ã™
```bash
gcloud asset analyze-move --project=<proj-name> \
--destination-organization=609216679593
```
* æ¨©é™ **`cloudasset.assets.queryIamPolicy`** ã¯ã€ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã®æ¨©é™ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã«ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
```bash
# But, when running something like this
gcloud asset query --project=<proj> --statement='SELECT * FROM compute_googleapis_com_Instance'
# I get the error
ERROR: (gcloud.asset.query) UNAUTHENTICATED: QueryAssets API is only supported for SCC premium customers. See https://cloud.google.com/security-command-center/pricing
```
{% hint style="danger" %}
å‰è¿°ã®æ–¹æ³•ã§IAMæƒ…å ±ã«**ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆ**ã€Red Teamã®ä¸€å“¡ã§ã‚ã‚Œã°ã€ç¾åœ¨ã®æ¨©é™ã‚’ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹ã™ã‚‹ãŸã‚ã«ãƒ„ãƒ¼ãƒ« [**https://github.com/carlospolop/my\_gcp\_perms**](https://github.com/carlospolop/my\_gcp\_perms) ã‚’**ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚**
{% endhint %}

### Privesc

ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€IAMæ¨©é™ã‚’æ‚ªç”¨ã—ã¦æ¨©é™ã‚’æ˜‡æ ¼ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç¢ºèªã§ãã¾ã™ï¼š

{% content-ref url="../gcp-privilege-escalation/gcp-iam-privesc.md" %}
[gcp-iam-privesc.md](../gcp-privilege-escalation/gcp-iam-privesc.md)
{% endcontent-ref %}

### ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãªã‚Šã™ã¾ã— <a href="#service-account-impersonation" id="service-account-impersonation"></a>

ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãªã‚Šã™ã¾ã™ã“ã¨ã¯ã€**æ–°ã—ãã€ã‚ˆã‚Šè‰¯ã„æ¨©é™ã‚’å–å¾—ã™ã‚‹**ãŸã‚ã«éå¸¸ã«æœ‰ç”¨ã§ã™ã€‚

[ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãªã‚Šã™ã¾ã™](https://cloud.google.com/iam/docs/understanding-service-accounts#impersonating\_a\_service\_account)æ–¹æ³•ã¯3ã¤ã‚ã‚Šã¾ã™ï¼š

* **RSAãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ãŸèªè¨¼**ï¼ˆä¸Šè¨˜ã§èª¬æ˜ï¼‰
* **Cloud IAMãƒãƒªã‚·ãƒ¼ã‚’ä½¿ç”¨ã—ãŸèªå¯**ï¼ˆã“ã“ã§èª¬æ˜ï¼‰
* **GCPã‚µãƒ¼ãƒ“ã‚¹ä¸Šã§ã®ã‚¸ãƒ§ãƒ–ã®ãƒ‡ãƒ—ãƒ­ã‚¤**ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å¦¥å”ã«ã‚ˆã‚Šé©ç”¨ã•ã‚Œã‚‹ï¼‰

### ç®¡ç†ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã®ä»˜ä¸ <a href="#granting-access-to-management-console" id="granting-access-to-management-console"></a>

[GCPç®¡ç†ã‚³ãƒ³ã‚½ãƒ¼ãƒ«](https://console.cloud.google.com)ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ã€**ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã¯ãªããƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«æä¾›ã•ã‚Œã¾ã™**ã€‚ã‚¦ã‚§ãƒ–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã«ã¯ã€åˆ¶å¾¡ä¸‹ã«ã‚ã‚‹**Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä»˜ä¸**ã§ãã¾ã™ã€‚ã“ã‚Œã¯ä¸€èˆ¬çš„ãª"**@gmail.com**"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚ã‚Šã€**å¯¾è±¡çµ„ç¹”ã®ãƒ¡ãƒ³ãƒãƒ¼ã§ã‚ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“**ã€‚

ãŸã ã—ã€ä¸€èˆ¬çš„ãª"@gmail.com"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«**Owner**ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãƒ­ãƒ¼ãƒ«ã‚’**ä»˜ä¸**ã™ã‚‹ã«ã¯ã€**ã‚¦ã‚§ãƒ–ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ä½¿ç”¨**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚`gcloud`ã¯ã€Editorä»¥ä¸Šã®æ¨©é™ã‚’ä»˜ä¸ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«**Editor**ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãƒ­ãƒ¼ãƒ«ã‚’**ä»˜ä¸**ã§ãã¾ã™ï¼š
```bash
gcloud projects add-iam-policy-binding [PROJECT] --member user:[EMAIL] --role roles/editor
```
æˆåŠŸã—ãŸã‚‰ã€**ã‚¦ã‚§ãƒ–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦**ã€ãã“ã‹ã‚‰æ¢ç´¢ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

ã“ã‚Œã¯ã€gcloudãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹**æœ€é«˜ãƒ¬ãƒ™ãƒ«ã§ã™**ã€‚

## çµ„ç¹”ãƒãƒªã‚·ãƒ¼

çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã«ã¤ã„ã¦ã®å°å…¥ã¯ã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

{% content-ref url="../gcp-basic-information.md" %}
[gcp-basic-information.md](../gcp-basic-information.md)
{% endcontent-ref %}

IAMãƒãƒªã‚·ãƒ¼ã¯ã€å½¹å‰²ã‚’ä»‹ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã™ã‚‹ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã®æ¨©é™ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®å½¹å‰²ã«ã¯ã€ç´°ã‹ã„æ¨©é™ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã¯ã€**ã‚µãƒ¼ãƒ“ã‚¹ã®ä½¿ç”¨æ–¹æ³•ã‚’åˆ¶é™ã—ãŸã‚Šã€ç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹æ©Ÿèƒ½ã‚’æŒ‡å®šã—ãŸã‚Šã—ã¾ã™**ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€GCPç’°å¢ƒå†…ã®å„ãƒªã‚½ãƒ¼ã‚¹ã®æœ€å°æ¨©é™ã®å‘ä¸Šã«å½¹ç«‹ã¡ã¾ã™ã€‚
```bash
gcloud resource-manager org-policies list --organization=ORGANIZATION_ID
gcloud resource-manager org-policies list --folder=FOLDER_ID
gcloud resource-manager org-policies list --project=PROJECT_ID
```
### Privesc

ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã§ã€**çµ„ç¹”ãƒãƒªã‚·ãƒ¼ã®æ¨©é™ã‚’æ‚ªç”¨ã—ã¦æ¨©é™ã‚’æ˜‡æ ¼ã™ã‚‹æ–¹æ³•**ã«ã¤ã„ã¦ç¢ºèªã§ãã¾ã™ï¼š

{% content-ref url="../gcp-privilege-escalation/gcp-orgpolicy-privesc.md" %}
[gcp-orgpolicy-privesc.md](../gcp-privilege-escalation/gcp-orgpolicy-privesc.md)
{% endcontent-ref %}

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•ï¼š

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã€ã¾ãŸã¯**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã§**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* **HackTricks**ã®[**GitHubãƒªãƒã‚¸ãƒˆãƒª**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã™ã‚‹ã€‚

</details>
