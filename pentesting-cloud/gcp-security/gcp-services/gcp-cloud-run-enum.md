# GCP - Cloud Run Enum

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* HackTricksì—ì„œ **íšŒì‚¬ ê´‘ê³ ë¥¼ ë³´ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ë¥¼** **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **HackTricks**ì™€ **HackTricks Cloud** github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ **í•´í‚¹ íŠ¸ë¦­ì„ ê³µìœ **í•˜ì„¸ìš”.

</details>

## Cloud Run <a href="#reviewing-cloud-run-configurations" id="reviewing-cloud-run-configurations"></a>

Cloud Runì€ Googleì˜ í™•ì¥ ê°€ëŠ¥í•œ ì¸í”„ë¼ ìœ„ì— ì§ì ‘ **ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰**í•  ìˆ˜ ìˆëŠ” ì„œë²„ë¦¬ìŠ¤ ê´€ë¦¬í˜• ì»´í“¨íŒ… í”Œë«í¼ì…ë‹ˆë‹¤.

Go, Node.js, Python, Java, .NET Core ë˜ëŠ” Rubyë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° [ì†ŒìŠ¤ ê¸°ë°˜ ë°°í¬](https://cloud.google.com/run/docs/deploying-source-code) ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ **ë¹Œë“œ**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Googleì€ Cloud Runì„ ë‹¤ë¥¸ Google Cloud ì„œë¹„ìŠ¤ì™€ **ì›í™œí•˜ê²Œ ì—°ë™**í•  ìˆ˜ ìˆë„ë¡ êµ¬ì¶•í–ˆìœ¼ë¯€ë¡œ ì™„ì „í•œ ê¸°ëŠ¥ì„ ê°–ì¶˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì„œë¹„ìŠ¤ ë° ì‘ì—… <a href="#services-and-jobs" id="services-and-jobs"></a>

Cloud Runì—ì„œ ì½”ë“œëŠ” _**ì„œë¹„ìŠ¤**_ ë˜ëŠ” _**ì‘ì—…**_ìœ¼ë¡œ ê³„ì† ì‹¤í–‰ë˜ê±°ë‚˜ ì¢…ë£Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ì™€ ì‘ì—…ì€ ë™ì¼í•œ í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ë©° Google Cloudì˜ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ ë™ì¼í•œ í†µí•©ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* **Cloud Run ì„œë¹„ìŠ¤.** ì›¹ ìš”ì²­ ë˜ëŠ” ì´ë²¤íŠ¸ì— ì‘ë‹µí•˜ëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
* **Cloud Run ì‘ì—….** ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì¢…ë£Œë˜ëŠ” ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

## Cloud Run ì„œë¹„ìŠ¤

Google [Cloud Run](https://cloud.google.com/run)ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ë˜ ë‹¤ë¥¸ ì„œë²„ë¦¬ìŠ¤ ì œê³µì…ë‹ˆë‹¤. Cloud Runì€ ê¸°ë³¸ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ í¬íŠ¸ 8080ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì‘ì€ ì›¹ ì„œë²„ë¥¼ ìƒì„±í•˜ê³  HTTP GET ìš”ì²­ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ìš”ì²­ì´ ìˆ˜ì‹ ë˜ë©´ ì‘ì—…ì´ ì‹¤í–‰ë˜ê³  ì‘ì—… ë¡œê·¸ê°€ HTTP ì‘ë‹µì„ í†µí•´ ì¶œë ¥ë©ë‹ˆë‹¤.

### ê´€ë ¨ ì„¸ë¶€ ì •ë³´

* ê¸°ë³¸ì ìœ¼ë¡œ ì›¹ ì„œë²„ì— ëŒ€í•œ **ì•¡ì„¸ìŠ¤**ëŠ” **ê³µê°œ**ë˜ì§€ë§Œ **ë‚´ë¶€ íŠ¸ë˜í”½ì— ì œí•œ**ì„ ë‘˜ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤(VPC...).
ë˜í•œ, ì›¹ ì„œë²„ì— ì—°ë½í•˜ê¸° ìœ„í•œ **ì¸ì¦**ì€ **ëª¨ë‘ í—ˆìš©**í•˜ê±°ë‚˜ **IAMì„ í†µí•œ ì¸ì¦ì´ í•„ìš”**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ê¸°ë³¸ì ìœ¼ë¡œ **ì•”í˜¸í™”**ëŠ” **Google ê´€ë¦¬ í‚¤**ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ **KMS**ì˜ **CMEK**(ê³ ê° ê´€ë¦¬ ì•”í˜¸í™” í‚¤)ë¥¼ ì„ íƒí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
* ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” **ì„œë¹„ìŠ¤ ê³„ì •**ì€ í”„ë¡œì íŠ¸ì— ëŒ€í•œ **Editor** ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ê°–ëŠ” **Compute Engine ê¸°ë³¸ ê³„ì •**ì…ë‹ˆë‹¤. ë˜í•œ **`cloud-platform`** ìŠ¤ì½”í”„ë¥¼ ê°–ìŠµë‹ˆë‹¤.
* ì‹¤í–‰ì„ ìœ„í•´ **í‰ë¬¸ í™˜ê²½ ë³€ìˆ˜**ë¥¼ ì •ì˜í•˜ê±°ë‚˜ **í´ë¼ìš°ë“œ ë¹„ë°€**ì„ **ë§ˆìš´íŠ¸**í•˜ê±°ë‚˜ **í™˜ê²½ ë³€ìˆ˜ì— í´ë¼ìš°ë“œ ë¹„ë°€ì„ ì¶”ê°€**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* **Cloud SQLê³¼ì˜ ì—°ê²°ì„ ì¶”ê°€**í•˜ê±°ë‚˜ **íŒŒì¼ ì‹œìŠ¤í…œì„ ë§ˆìš´íŠ¸**í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
* ë°°í¬ëœ ì„œë¹„ìŠ¤ì˜ **URL**ì€ **`https://<svc-name>-<random>.a.run.app`**ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.
* Run ì„œë¹„ìŠ¤ëŠ” **1ê°œ ì´ìƒì˜ ë²„ì „ ë˜ëŠ” ë¦¬ë¹„ì „**ì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©° ì—¬ëŸ¬ ë¦¬ë¹„ì „ ì‚¬ì´ì—ì„œ **íŠ¸ë˜í”½ì„ ë¶„í• **í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì—´ê±°
```bash
# List services
gcloud run services list
gcloud run services list --platform=managed
gcloud run services list --platform=gke

# Get info of a service
gcloud run services describe --region <region> <svc-name>

# Get info of all the services together
gcloud run services list --format=yaml
gcloud run services list --platform=managed --format=json
gcloud run services list --platform=gke --format=json

# Get policy
gcloud run services get-iam-policy --region <region> <svc-name>

# Get revisions
gcloud run revisions list --region <region>
gcloud run revisions describe --region <region> <revision>

# Get domains
gcloud run domain-mappings list
gcloud run domain-mappings describe <name>

# Attempt to trigger a job unauthenticated
curl <url>

# Attempt to trigger a job with your current gcloud authorization
curl -H "Authorization: Bearer $(gcloud auth print-identity-token)" <url>
```
## Cloud Run ì‘ì—…

Cloud Run ì‘ì—…ì€ **ì™„ë£Œë˜ê³  ìš”ì²­ì„ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆì— ë” ì í•©**í•©ë‹ˆë‹¤. ì‘ì—…ì€ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê±°ë‚˜ í¬íŠ¸ì—ì„œ ìˆ˜ì‹  ëŒ€ê¸°í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” Cloud Run ì„œë¹„ìŠ¤ì™€ ë‹¬ë¦¬ ì‘ì—…ì€ ì›¹ ì„œë²„ë¥¼ ë²ˆë“¤ë¡œ í¬í•¨í•´ì„œëŠ” ì•ˆ ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ëŒ€ì‹ , ì‘ì—… ì»¨í…Œì´ë„ˆëŠ” ì™„ë£Œë˜ë©´ ì¢…ë£Œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

### ì—´ê±°
```bash
gcloud beta run jobs list
gcloud beta run jobs describe --region <region> <job-name>
gcloud beta run jobs get-iam-policy --region <region> <job-name>
```
## ê¶Œí•œ ìƒìŠ¹

ë‹¤ìŒ í˜ì´ì§€ì—ì„œëŠ” **ê¶Œí•œ ìƒìŠ¹ì„ ìœ„í•´ í´ë¼ìš°ë“œ ëŸ° ê¶Œí•œì„ ë‚¨ìš©í•˜ëŠ” ë°©ë²•**ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="../../gcp-security/gcp-privilege-escalation/gcp-run-privesc.md" %}
[gcp-run-privesc.md](../../gcp-security/gcp-privilege-escalation/gcp-run-privesc.md)
{% endcontent-ref %}

## ì¸ì¦ë˜ì§€ ì•Šì€ ì•¡ì„¸ìŠ¤

{% content-ref url="../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-cloud-run-unauthenticated-enum.md" %}
[gcp-cloud-run-unauthenticated-enum.md](../../gcp-security/gcp-unaunthenticated-enum-and-access/gcp-cloud-run-unauthenticated-enum.md)
{% endcontent-ref %}

## í›„ë°˜ ì‘ì—…

{% content-ref url="../../gcp-security/gcp-post-exploitation/gcp-cloud-run-post-exploitation.md" %}
[gcp-cloud-run-post-exploitation.md](../../gcp-security/gcp-post-exploitation/gcp-cloud-run-post-exploitation.md)
{% endcontent-ref %}

## ì§€ì†ì„±

{% content-ref url="../../gcp-security/gcp-persistence/gcp-cloud-run-persistence.md" %}
[gcp-cloud-run-persistence.md](../../gcp-security/gcp-persistence/gcp-cloud-run-persistence.md)
{% endcontent-ref %}

## ì°¸ê³  ìë£Œ

* [https://cloud.google.com/run/docs/overview/what-is-cloud-run](https://cloud.google.com/run/docs/overview/what-is-cloud-run)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ ì œë¡œì—ì„œ ì˜ì›…ê¹Œì§€ AWS í•´í‚¹ ë°°ìš°ê¸°<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* HackTricksì—ì„œ **íšŒì‚¬ ê´‘ê³ ë¥¼ ë³´ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**ë¥¼** íŒ”ë¡œìš°í•˜ì„¸ìš”.
* **HackTricks**ì™€ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì—¬ ìì‹ ì˜ í•´í‚¹ ê¸°ë²•ì„ ê³µìœ í•˜ì„¸ìš”.

</details>
