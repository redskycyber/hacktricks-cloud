# GCP Pentesting

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* íšŒì‚¬ë¥¼ **HackTricksì—ì„œ ê´‘ê³ **í•˜ê±°ë‚˜ **PDFë¡œ HackTricks ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìŠ¤ì›¨ê·¸**](https://peass.creator-spring.com)ë¥¼ ì–»ìœ¼ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>

## ê¸°ë³¸ ì •ë³´

**GCP** í™˜ê²½ì„ **íœí…ŒìŠ¤íŒ…**í•˜ê¸° ì „ì—, ë¬´ì—‡ì„ í•´ì•¼í•˜ê³ , ë¯¸ìŠ¤ì»¨í”¼ê·œë ˆì´ì…˜ì„ ì°¾ëŠ” ë°©ë²• ë° ì´ë¥¼ ì•…ìš©í•˜ëŠ” ë°©ë²•ì„ ì´í•´í•˜ê¸° ìœ„í•´ ëª‡ ê°€ì§€ **ê¸°ë³¸ ì‚¬í•­ì„ ì•Œì•„ì•¼í•©ë‹ˆë‹¤**.

**ì¡°ì§** ê³„ì¸µ êµ¬ì¡°, **ê¶Œí•œ** ë° ê¸°íƒ€ ê¸°ë³¸ ê°œë…ì€ ë‹¤ìŒì—ì„œ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-basic-information.md" %}
[gcp-basic-information.md](gcp-basic-information.md)
{% endcontent-ref %}

## í•™ìŠµì„ ìœ„í•œ ë©

* [https://gcpgoat.joshuajebaraj.com/](https://gcpgoat.joshuajebaraj.com/)
* [https://github.com/ine-labs/GCPGoat](https://github.com/ine-labs/GCPGoat)
* [https://github.com/lacioffi/GCP-pentest-lab/](https://github.com/lacioffi/GCP-pentest-lab/)
* [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts)

## GCP Pentester/Red Team ë°©ë²•ë¡ 

GCP í™˜ê²½ì„ ê°ì‚¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì„ ì•Œì•„ì•¼í•©ë‹ˆë‹¤: ì–´ë–¤ **ì„œë¹„ìŠ¤ê°€ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€**, ë¬´ì—‡ì´ **ë…¸ì¶œ**ë˜ê³  ìˆëŠ”ì§€, ëˆ„ê°€ **ë¬´ì—‡ì— ì ‘ê·¼**í•  ìˆ˜ ìˆëŠ”ì§€, ë‚´ë¶€ GCP ì„œë¹„ìŠ¤ì™€ **ì™¸ë¶€ ì„œë¹„ìŠ¤**ê°€ ì–´ë–»ê²Œ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€.

Red Team ê´€ì ì—ì„œ GCP í™˜ê²½ì„ **ì¹¨í•´í•˜ê¸° ìœ„í•œ ì²« ë²ˆì§¸ ë‹¨ê³„**ëŠ” ì¼ë¶€ **ìê²© ì¦ëª…ì„ ì–»ëŠ” ê²ƒ**ì…ë‹ˆë‹¤. ë‹¤ìŒì€ ê·¸ ë°©ë²•ì— ëŒ€í•œ ëª‡ ê°€ì§€ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤:

* github (ë˜ëŠ” ìœ ì‚¬í•œ ê³³)ì—ì„œì˜ **ì •ë³´ ìœ ì¶œ** - OSINT
* **ì‚¬íšŒ ê³µí•™** (í˜ì´ì§€ [**Workspace Security**](../workspace-security/) ì°¸ì¡°)
* **ë¹„ë°€ë²ˆí˜¸ ì¬ì‚¬ìš©** (ë¹„ë°€ë²ˆí˜¸ ìœ ì¶œ)
* GCP-í˜¸ìŠ¤íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì·¨ì•½ì 
* [**ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡°(SSRF)**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) - ë©”íƒ€ë°ì´í„° ì—”ë“œí¬ì¸íŠ¸ì— ì•¡ì„¸ìŠ¤
* **ë¡œì»¬ íŒŒì¼ ì½ê¸°**
* `/home/USERNAME/.config/gcloud/*`
* `C:\Users\USERNAME\.config\gcloud\*`
* íƒ€ì‚¬ **ì¹¨í•´**
* **ë‚´ë¶€** ì§ì›

ë˜ëŠ” **ì¸ì¦ë˜ì§€ ì•Šì€ ì„œë¹„ìŠ¤**ë¥¼ ì¹¨í•´í•¨ìœ¼ë¡œì¨ ì–»ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

ë˜ëŠ” **ë¦¬ë·°**ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ë‹¤ìŒ ì—­í• ë¡œ **ìê²© ì¦ëª…ì„ ìš”ì²­**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-permissions-for-a-pentest.md" %}
[gcp-permissions-for-a-pentest.md](gcp-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
ìê²© ì¦ëª…ì„ ì–»ì€ í›„, í•´ë‹¹ ìê²© ì¦ëª…ì´ **ëˆ„êµ¬ì—ê²Œ ì†í•´ ìˆëŠ”ì§€** ë° **ë¬´ì—‡ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€** ì•Œì•„ì•¼í•˜ë¯€ë¡œ ëª‡ ê°€ì§€ ê¸°ë³¸ ì—´ê±°ë¥¼ ìˆ˜í–‰í•´ì•¼í•©ë‹ˆë‹¤:
{% endhint %}

## ê¸°ë³¸ ì—´ê±°

### **SSRF**

GCP ë©”íƒ€ë°ì´í„°ë¥¼ **ì—´ê±°í•˜ëŠ” ë°©ë²•**ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒ hacktricks í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

### Whoami

GCPì—ì„œëŠ” ìì‹ ì´ ëˆ„êµ¬ì¸ì§€ ì¶”ì¸¡í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ì˜µì…˜ì„ ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% code overflow="wrap" %}
```bash
#If you are inside a compromise machine
gcloud auth list
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=$(gcloud auth print-access-token)" https://www.googleapis.com/oauth2/v1/tokeninfo
gcloud auth print-identity-token #Get info from the token

#If you compromised a metadata token or somehow found an OAuth token
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=<token>" https://www.googleapis.com/oauth2/v1/tokeninfo
```
{% endcode %}

### ì¡°ì§ ì—´ê±°

{% code-tabs %}
{% code-tabs-item title="gcloud organizations list" %}
```bash
gcloud organizations list
```
{% endcode-tabs-item %}
{% endcode-tabs %}

ì¡°ì§ ì—´ê±°ëŠ” GCP ì¡°ì§ ê³„ì •ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ í˜„ì¬ ì‚¬ìš©ìì˜ GCP í”„ë¡œì íŠ¸ì— ì—°ê²°ëœ ëª¨ë“  ì¡°ì§ì„ ë‚˜ì—´í•©ë‹ˆë‹¤.

### Project Enumeration

{% code-tabs %}
{% code-tabs-item title="gcloud projects list" %}
```bash
gcloud projects list
```
{% endcode-tabs-item %}
{% endcode-tabs %}

í”„ë¡œì íŠ¸ ì—´ê±°ëŠ” GCP í”„ë¡œì íŠ¸ë¥¼ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ í˜„ì¬ ì‚¬ìš©ìì˜ GCP ì¡°ì§ì— ì—°ê²°ëœ ëª¨ë“  í”„ë¡œì íŠ¸ë¥¼ ë‚˜ì—´í•©ë‹ˆë‹¤.

### Service Account Enumeration

{% code-tabs %}
{% code-tabs-item title="gcloud iam service-accounts list" %}
```bash
gcloud iam service-accounts list
```
{% endcode-tabs-item %}
{% endcode-tabs %}

ì„œë¹„ìŠ¤ ê³„ì • ì—´ê±°ëŠ” GCP ì¡°ì§ ë˜ëŠ” í”„ë¡œì íŠ¸ì— ì—°ê²°ëœ ëª¨ë“  ì„œë¹„ìŠ¤ ê³„ì •ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ í˜„ì¬ ì‚¬ìš©ìì˜ GCP ì¡°ì§ ë˜ëŠ” í”„ë¡œì íŠ¸ì— ì—°ê²°ëœ ëª¨ë“  ì„œë¹„ìŠ¤ ê³„ì •ì„ ë‚˜ì—´í•©ë‹ˆë‹¤.

### IAM Policy Enumeration

{% code-tabs %}
{% code-tabs-item title="gcloud projects get-iam-policy PROJECT_ID" %}
```bash
gcloud projects get-iam-policy PROJECT_ID
```
{% endcode-tabs-item %}
{% endcode-tabs %}

IAM ì •ì±… ì—´ê±°ëŠ” GCP í”„ë¡œì íŠ¸ì˜ IAM(Identity and Access Management) ì •ì±…ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ íŠ¹ì • í”„ë¡œì íŠ¸ì˜ IAM ì •ì±…ì„ ë‚˜ì—´í•©ë‹ˆë‹¤.

### IAM Role Enumeration

{% code-tabs %}
{% code-tabs-item title="gcloud iam roles list" %}
```bash
gcloud iam roles list
```
{% endcode-tabs-item %}
{% endcode-tabs %}

IAM ì—­í•  ì—´ê±°ëŠ” GCP ì¡°ì§ ë˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  IAM ì—­í• ì„ ì‹ë³„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ í˜„ì¬ ì‚¬ìš©ìì˜ GCP ì¡°ì§ ë˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  IAM ì—­í• ì„ ë‚˜ì—´í•©ë‹ˆë‹¤.
```bash
# Get organizations
gcloud organizations list #The DIRECTORY_CUSTOMER_ID is the Workspace ID
gcloud resource-manager folders list --organization <org_number> # Get folders
gcloud projects list # Get projects
```
### Principal ë° IAM ì—´ê±°

ì¶©ë¶„í•œ ê¶Œí•œì´ ìˆë‹¤ë©´, GCP ê³„ì • ë‚´ì˜ ê° ì—”í‹°í‹°ì˜ ê¶Œí•œì„ í™•ì¸í•˜ì—¬ ìì‹ ê³¼ ë‹¤ë¥¸ ì‹ ì›ì´ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ ë° ê¶Œí•œ ìƒìŠ¹ ë°©ë²•ì„ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.

IAMì„ ì—´ê±°í•  ì¶©ë¶„í•œ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°, ë¬´ì°¨ë³„ ëŒ€ì…(brute-force)ì„ í†µí•´ IAMì„ ì•Œì•„ë‚´ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\
ë‹¤ìŒì—ì„œ ì—´ê±° ë° ë¬´ì°¨ë³„ ëŒ€ì…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•˜ì„¸ìš”:

{% content-ref url="gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
ì´ì œ ìê²© ì¦ëª…ì— ëŒ€í•œ ì¼ë¶€ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ (ë ˆë“œ íŒ€ì¸ ê²½ìš° ê°ì§€ë˜ì§€ ì•Šì•˜ì„ ê²ƒìœ¼ë¡œ í¬ë§í•©ë‹ˆë‹¤), í™˜ê²½ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\
ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì¼ë¶€ ì¼ë°˜ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ì—´ê±°í•˜ëŠ” ë°©ë²•ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
{% endhint %}

## ì„œë¹„ìŠ¤ ì—´ê±°

GCPì—ëŠ” ë†€ë¼ìš´ ìˆ˜ì˜ ì„œë¹„ìŠ¤ê°€ ìˆìœ¼ë©°, ë‹¤ìŒ í˜ì´ì§€ì—ì„œëŠ” ì¼ë¶€ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¸°ë³¸ ì •ë³´, ì—´ê±° ì²´í¬ì‹œíŠ¸, íƒì§€ íšŒí”¼ ë°©ë²•, ì§€ì†ì„± í™•ë³´ ë° ê¸°íƒ€ í›„ë°˜ ì‘ì—… íŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-services/" %}
[gcp-services](gcp-services/)
{% endcontent-ref %}

ìˆ˜ë™ìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì„ ìˆ˜í–‰í•  í•„ìš”ëŠ” ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì‹­ì‹œì˜¤. ì´ ê²Œì‹œë¬¼ì˜ ì•„ë˜ì—ì„œ [ìë™ ë„êµ¬ì— ëŒ€í•œ](./#automatic-tools) ì„¹ì…˜ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ, ì´ ë‹¨ê³„ì—ì„œ ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œëœ ë” ë§ì€ ì„œë¹„ìŠ¤ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ì•…ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

## ê¶Œí•œ ìƒìŠ¹, í›„ë°˜ ì‘ì—… ë° ì§€ì†ì„±

í´ë¼ìš°ë“œ ìê²© ì¦ëª…ì„ ì–»ê±°ë‚˜ í´ë¼ìš°ë“œ ë‚´ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì¼ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì¹¨í•´í•œ í›„ì—ëŠ” ì¹¨í•´ëœ ê³„ì •ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì˜ëª» êµ¬ì„±ëœ ê¶Œí•œì„ ì•…ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ë¨¼ì € ê¶Œí•œì„ ì—´ê±°í•´ì•¼ í•©ë‹ˆë‹¤.

ë˜í•œ, ì´ ì—´ê±° ì¤‘ì—ëŠ” ê¶Œí•œì´ "ì¡°ì§"ì˜ ìµœìƒìœ„ ìˆ˜ì¤€ì—ì„œ ì„¤ì •ë  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê¸°ì–µí•˜ì‹­ì‹œì˜¤.

{% content-ref url="gcp-privilege-escalation/" %}
[gcp-privilege-escalation](gcp-privilege-escalation/)
{% endcontent-ref %}

{% content-ref url="gcp-post-exploitation/" %}
[gcp-post-exploitation](gcp-post-exploitation/)
{% endcontent-ref %}

{% content-ref url="gcp-persistence/" %}
[gcp-persistence](gcp-persistence/)
{% endcontent-ref %}

### ê³µê°œì ìœ¼ë¡œ ë…¸ì¶œëœ ì„œë¹„ìŠ¤

GCP ì„œë¹„ìŠ¤ë¥¼ ì—´ê±°í•˜ëŠ” ë™ì•ˆ ì¸í„°ë„·ì— ìš”ì†Œë¥¼ ë…¸ì¶œí•˜ëŠ” ì¼ë¶€ ì„œë¹„ìŠ¤(VM/ì»¨í…Œì´ë„ˆ í¬íŠ¸, ë°ì´í„°ë² ì´ìŠ¤ ë˜ëŠ” í ì„œë¹„ìŠ¤, ìŠ¤ëƒ…ìƒ· ë˜ëŠ” ë²„í‚· ë“±)ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆì—ˆì„ ê²ƒì…ë‹ˆë‹¤.\
íœí…ŒìŠ¤í„°/ë ˆë“œ íŒ€ì€ í•­ìƒ í•´ë‹¹ ì„œë¹„ìŠ¤ì—ì„œ ë¯¼ê°í•œ ì •ë³´/ì·¨ì•½ì ì„ ì°¾ì„ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” AWS ê³„ì •ìœ¼ë¡œì˜ ì¶”ê°€ì ì¸ ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ì±…ì—ì„œëŠ” ë…¸ì¶œëœ GCP ì„œë¹„ìŠ¤ë¥¼ ì°¾ê³  í™•ì¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë…¸ì¶œëœ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ì—ì„œ ì·¨ì•½ì ì„ ì°¾ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œëŠ” ë‹¤ìŒì—ì„œ íŠ¹ì • ì„œë¹„ìŠ¤ì— ëŒ€í•´ ê²€ìƒ‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤:

{% embed url="https://book.hacktricks.xyz/" %}

## GCP <--> Workspace í”¼ë²—

**í•˜ë‚˜ì˜** í”Œë«í¼ì—ì„œ ì£¼ì²´(principal)ë¥¼ **ì¹¨í•´**í•˜ë©´ ê³µê²©ìê°€ **ë‹¤ë¥¸ í”Œë«í¼ì„ ì¹¨í•´**í•  ìˆ˜ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒì„ ì°¸ì¡°í•˜ì„¸ìš”:

{% content-ref url="gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## ìë™ ë„êµ¬

* **GCloud ì½˜ì†”**ì—ì„œ [https://console.cloud.google.com/iam-admin/asset-inventory/dashboard](https://console.cloud.google.com/iam-admin/asset-inventory/dashboard)ì—ì„œ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ë° IAMì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì´ APIì—ì„œ ì§€ì›í•˜ëŠ” ìì‚°ì€ ë‹¤ìŒì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: [https://cloud.google.com/asset-inventory/docs/supported-asset-types](https://cloud.google.com/asset-inventory/docs/supported-asset-types)
* [ë‹¤ì–‘í•œ í´ë¼ìš°ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë„êµ¬](../pentesting-cloud-methodology.md)ë¥¼ í™•ì¸í•˜ì„¸ìš”.
* [gcp\_scanner](https://github.com/google/gcp\_scanner): GCP ë¦¬ì†ŒìŠ¤ ìŠ¤ìºë„ˆë¡œ, GCPì—ì„œ íŠ¹ì • ìê²© ì¦ëª…ì´ ì–´ë–¤ ìˆ˜ì¤€ì˜ ì•¡ì„¸ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
```bash
# Install
git clone https://github.com/google/gcp_scanner.git
cd gcp_scanner
virtualenv -p python3 venv
source venv/bin/activate
pip install -r requirements.txt
# Execute with gcloud creds
python3 __main__.py -o /tmp/output/ -g "$HOME/.config/gcloud"
```
* [**gcp\_enum**](https://gitlab.com/gitlab-com/gl-security/threatmanagement/redteam/redteam-public/gcp\_enum): GCP í™˜ê²½ì„ ì—´ê±°í•˜ê¸° ìœ„í•´ gcloud clië¥¼ ì‚¬ìš©í•˜ê³  ê²°ê³¼ë¥¼ íŒŒì¼ì— ì €ì¥í•˜ëŠ” Bash ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.
* [**GCP-IAM-Privilege-Escalation**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation): ê³ ê¸‰ IAM ê¶Œí•œì„ ì—´ê±°í•˜ê³  ì´ë¥¼ ì•…ìš©í•˜ì—¬ GCPì—ì„œ ê¶Œí•œì„ ìƒìŠ¹ì‹œí‚¤ëŠ” ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤ (ì—´ê±° ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤).

## gcloud config & debug
```bash
# Login so gcloud can use your credentials
gcloud auth login
gcloud config set project security-devbox
gcloud auth print-access-token

# Login so SDKs can use your user credentials
gcloud auth application-default login
gcloud auth application-default set-quota-project security-devbox
gcloud auth application-default print-access-token

# Update gcloud
gcloud components update
```
### gcloud, gsutil... ë„¤íŠ¸ì›Œí¬ ìº¡ì²˜

**gcloud** cliì—ì„œ **`--log-http`** **ë§¤ê°œë³€ìˆ˜**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„êµ¬ê°€ ìˆ˜í–‰í•˜ëŠ” **ìš”ì²­**ì„ **ì¶œë ¥**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¡œê·¸ì—ì„œ í† í° ê°’ì„ ê°€ë ¤ì£¼ì§€ ì•Šìœ¼ë ¤ë©´ `gcloud config set log_http_redact_token false`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

ë˜í•œ, í†µì‹ ì„ ê°€ë¡œì±„ë ¤ë©´:
```bash
gcloud config set proxy/address 127.0.0.1
gcloud config set proxy/port 8080
gcloud config set proxy/type http
gcloud config set auth/disable_ssl_validation True

# If you don't want to completely disable ssl_validation use:
gcloud config set core/custom_ca_certs_file cert.pem

# Back to normal
gcloud config unset proxy/address
gcloud config unset proxy/port
gcloud config unset proxy/type
gcloud config unset auth/disable_ssl_validation
gcloud config unset core/custom_ca_certs_file
```
### gcloudì—ì„œ OAuth í† í° êµ¬ì„±

ë©”íƒ€ë°ì´í„° ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìœ ì¶œëœ ì„œë¹„ìŠ¤ ê³„ì • OAuth í† í°ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
```bash
# Via env vars
export CLOUDSDK_AUTH_ACCESS_TOKEN=<token>
gcloud projects list

# Via setup
echo "<token>" > /some/path/to/token
gcloud config set auth/access_token_file /some/path/to/token
gcloud projects list
gcloud config unset auth/access_token_file
```
## ì°¸ê³  ìë£Œ

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong>ë¥¼ í†µí•´ AWS í•´í‚¹ì„ ì²˜ìŒë¶€í„° ì „ë¬¸ê°€ê¹Œì§€ ë°°ì›Œë³´ì„¸ìš”<strong>!</strong></summary>

HackTricksë¥¼ ì§€ì›í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•:

* **íšŒì‚¬ë¥¼ HackTricksì—ì„œ ê´‘ê³ í•˜ê±°ë‚˜ HackTricksë¥¼ PDFë¡œ ë‹¤ìš´ë¡œë“œ**í•˜ë ¤ë©´ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ë¥¼ í™•ì¸í•˜ì„¸ìš”!
* [**ê³µì‹ PEASS & HackTricks ìƒí’ˆ**](https://peass.creator-spring.com)ì„ êµ¬ë§¤í•˜ì„¸ìš”.
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ë¥¼ ë°œê²¬í•˜ì„¸ìš”. ë…ì ì ì¸ [**NFTs**](https://opensea.io/collection/the-peass-family) ì»¬ë ‰ì…˜ì…ë‹ˆë‹¤.
* ğŸ’¬ [**Discord ê·¸ë£¹**](https://discord.gg/hRep4RUj7f) ë˜ëŠ” [**í…”ë ˆê·¸ë¨ ê·¸ë£¹**](https://t.me/peass)ì— **ì°¸ì—¬**í•˜ê±°ë‚˜ **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)ë¥¼ **íŒ”ë¡œìš°**í•˜ì„¸ìš”.
* **Hacking íŠ¸ë¦­ì„ ê³µìœ í•˜ë ¤ë©´** [**HackTricks**](https://github.com/carlospolop/hacktricks) ë° [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github ì €ì¥ì†Œì— PRì„ ì œì¶œí•˜ì„¸ìš”.

</details>
