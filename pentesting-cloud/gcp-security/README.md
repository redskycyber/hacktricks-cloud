# GCP ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

<details>

<summary><strong>AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã™ã‚‹ã€ç§ãŸã¡ã®ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã«**å‚åŠ ã™ã‚‹**ã‹ã€[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹**ã€‚
* **HackTricks**ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’å…±æœ‰ã™ã‚‹ã€‚

</details>

## åŸºæœ¬æƒ…å ±

**GCPç’°å¢ƒã®ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã™ã‚‹å‰ã«**ã€ãã‚ŒãŒã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã«ã¤ã„ã¦ã„ãã¤ã‹ã®**åŸºæœ¬çš„ãªã“ã¨ã‚’çŸ¥ã£ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™**ã€‚ã“ã‚Œã¯ã€ä½•ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã€èª¤è¨­å®šã‚’è¦‹ã¤ã‘ã‚‹æ–¹æ³•ã€ãã—ã¦ãã‚Œã‚‰ã‚’ã©ã®ã‚ˆã†ã«æ‚ªç”¨ã™ã‚‹ã‹ã‚’ç†è§£ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

**çµ„ç¹”**éšå±¤ã€**æ¨©é™**ãªã©ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã§èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™:

{% content-ref url="gcp-basic-information.md" %}
[gcp-basic-information.md](gcp-basic-information.md)
{% endcontent-ref %}

## å­¦ã¶ãŸã‚ã®ãƒ©ãƒœ

* [https://gcpgoat.joshuajebaraj.com/](https://gcpgoat.joshuajebaraj.com/)
* [https://github.com/ine-labs/GCPGoat](https://github.com/ine-labs/GCPGoat)
* [https://github.com/lacioffi/GCP-pentest-lab/](https://github.com/lacioffi/GCP-pentest-lab/)
* [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts)

## GCP ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼/ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ  ãƒ¡ã‚½ãƒ‰ãƒ­ã‚¸ãƒ¼

GCPç’°å¢ƒã‚’ç›£æŸ»ã™ã‚‹ãŸã‚ã«ã¯ã€ã©ã®**ã‚µãƒ¼ãƒ“ã‚¹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹**ã€ä½•ãŒ**éœ²å‡ºã—ã¦ã„ã‚‹ã‹**ã€èª°ãŒä½•ã«**ã‚¢ã‚¯ã‚»ã‚¹**ã—ã¦ã„ã‚‹ã‹ã€ãã—ã¦å†…éƒ¨ã®GCPã‚µãƒ¼ãƒ“ã‚¹ã¨**å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹**ãŒã©ã®ã‚ˆã†ã«æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‹ã‚’çŸ¥ã‚‹ã“ã¨ãŒéå¸¸ã«é‡è¦ã§ã™ã€‚

ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ã®è¦³ç‚¹ã‹ã‚‰ã€**GCPç’°å¢ƒã‚’ä¾µå®³ã™ã‚‹æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—**ã¯ã€ä½•ã‚‰ã‹ã®**è³‡æ ¼æƒ…å ±**ã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ã™ã€‚ä»¥ä¸‹ã«ãã®æ–¹æ³•ã«ã¤ã„ã¦ã„ãã¤ã‹ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç¤ºã—ã¾ã™:

* githubï¼ˆã¾ãŸã¯é¡ä¼¼ã®ã‚‚ã®ï¼‰ã§ã®**ãƒªãƒ¼ã‚¯** - OSINT
* **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«**ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼ˆ[**Workspace Security**](../workspace-security.md)ãƒšãƒ¼ã‚¸ã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
* **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**ã®å†åˆ©ç”¨ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªãƒ¼ã‚¯ï¼‰
* GCPãƒ›ã‚¹ãƒˆå‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è„†å¼±æ€§
* ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æŒã¤[**ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ã‚©ãƒ¼ã‚¸ã‚§ãƒª**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf)
* **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãƒªãƒ¼ãƒ‰**
* `/home/USERNAME/.config/gcloud/*`
* `C:\Users\USERNAME\.config\gcloud\*`
* ç¬¬ä¸‰è€…ã®**ä¾µå®³**
* **å†…éƒ¨**å¾“æ¥­å“¡

ã¾ãŸã¯ã€éœ²å‡ºã—ã¦ã„ã‚‹**èªè¨¼ã•ã‚Œã¦ã„ãªã„ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä¾µå®³ã™ã‚‹**ã“ã¨ã«ã‚ˆã£ã¦:

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

ã¾ãŸã¯ã€**ãƒ¬ãƒ“ãƒ¥ãƒ¼**ã‚’è¡Œã£ã¦ã„ã‚‹å ´åˆã¯ã€ã“ã‚Œã‚‰ã®ãƒ­ãƒ¼ãƒ«ã‚’æŒã¤**è³‡æ ¼æƒ…å ±ã‚’ãŸã å°‹ã­ã‚‹**ã“ã¨ã‚‚ã§ãã¾ã™:

{% content-ref url="gcp-permissions-for-a-pentest.md" %}
[gcp-permissions-for-a-pentest.md](gcp-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
è³‡æ ¼æƒ…å ±ã‚’å–å¾—ã—ãŸå¾Œã€ãã‚Œã‚‰ã®**è³‡æ ¼æƒ…å ±ãŒèª°ã«å±ã—ã¦ã„ã‚‹ã‹**ã€ãã—ã¦**ä½•ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‹**ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã«ã¯ã€ã„ãã¤ã‹ã®åŸºæœ¬çš„ãªåˆ—æŒ™ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™:
{% endhint %}

## åŸºæœ¬çš„ãªåˆ—æŒ™

### **SSRF**

GCPãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®**åˆ—æŒ™æ–¹æ³•**ã«ã¤ã„ã¦ã®è©³ç´°ã¯ã€ä»¥ä¸‹ã®hacktricksãƒšãƒ¼ã‚¸ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

### Whoami

GCPã§ã¯ã€è‡ªåˆ†ãŒèª°ã§ã‚ã‚‹ã‹ã‚’æ¨æ¸¬ã™ã‚‹ãŸã‚ã«ã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è©¦ã™ã“ã¨ãŒã§ãã¾ã™:
```bash
#If you are inside a compromise machine
gcloud auth list
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=$(gcloud auth print-access-token)" https://www.googleapis.com/oauth2/v1/tokeninfo
gcloud auth print-identity-token #Get info from the token

#If you compromised a metadata token or somehow found an OAuth token
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=<token>" https://www.googleapis.com/oauth2/v1/tokeninfo
```
### çµ„ç¹”åˆ—æŒ™
```bash
# Get organizations
gcloud organizations list #The DIRECTORY_CUSTOMER_ID is the Workspace ID
gcloud resource-manager folders list --organization <org_number> # Get folders
gcloud projects list # Get projects
```
### ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ« & IAM åˆ—æŒ™

ååˆ†ãªæ¨©é™ãŒã‚ã‚Œã°ã€**GCPã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã®å„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ¨©é™ã‚’ç¢ºèªã™ã‚‹ã“ã¨**ã§ã€ã‚ãªãŸã¨ä»–ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒä½•ãŒã§ãã‚‹ã‹ã€ãã—ã¦**æ¨©é™ã‚’æ˜‡æ ¼ã™ã‚‹**æ–¹æ³•ã‚’ç†è§£ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

IAMã‚’åˆ—æŒ™ã™ã‚‹ãŸã‚ã®ååˆ†ãªæ¨©é™ãŒãªã„å ´åˆã€ãã‚Œã‚‰ã‚’**ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹ã§ç›—ã‚€**ã“ã¨ã§è§£æ˜ã§ãã¾ã™ã€‚\
åˆ—æŒ™ã¨ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹ã®æ–¹æ³•ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„:

{% content-ref url="gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
ã“ã‚Œã§**è‡ªåˆ†ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã«é–¢ã™ã‚‹æƒ…å ±ãŒã„ãã¤ã‹å¾—ã‚‰ã‚ŒãŸ**ã®ã§ï¼ˆã‚‚ã—èµ¤ãƒãƒ¼ãƒ ã§ã‚ã‚Œã°ã€å¹¸ã„ã«ã‚‚**æ¤œå‡ºã•ã‚Œã¦ã„ãªã„**ã¯ãšã§ã™ï¼‰ã€‚æ¬¡ã«ã€ç’°å¢ƒã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’æŠŠæ¡ã™ã‚‹æ™‚ã§ã™ã€‚\
ä»¥ä¸‹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€**ã„ãã¤ã‹ã®ä¸€èˆ¬çš„ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ—æŒ™ã™ã‚‹**æ–¹æ³•ã‚’ç¢ºèªã§ãã¾ã™ã€‚
{% endhint %}

## ã‚µãƒ¼ãƒ“ã‚¹åˆ—æŒ™ã€ä¾µå®³å¾Œã®æ´»å‹• & æŒç¶šæ€§

GCPã«ã¯é©šãã»ã©å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚æ¬¡ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€ãã‚Œã‚‰ã®ã„ãã¤ã‹ã«ã¤ã„ã¦ã€**åŸºæœ¬æƒ…å ±ã€åˆ—æŒ™**ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆã€**æ¤œå‡ºã‚’é¿ã‘ã‚‹**æ–¹æ³•ã€**æŒç¶šæ€§**ã‚’å¾—ã‚‹æ–¹æ³•ã€ãã®ä»–ã®**ä¾µå®³å¾Œã®**ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¦ã„ã¾ã™:

{% content-ref url="gcp-services/" %}
[gcp-services](gcp-services/)
{% endcontent-ref %}

{% content-ref url="gcp-non-svc-persistance.md" %}
[gcp-non-svc-persistance.md](gcp-non-svc-persistance.md)
{% endcontent-ref %}

**ã™ã¹ã¦ã®ä½œæ¥­ã‚’**æ‰‹å‹•ã§è¡Œã†å¿…è¦ã¯**ãªã„**ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ä»¥ä¸‹ã®æŠ•ç¨¿ã«ã¯ã€[**è‡ªå‹•ãƒ„ãƒ¼ãƒ«**](./#automatic-tools)ã«ã¤ã„ã¦ã®**ã‚»ã‚¯ã‚·ãƒ§ãƒ³**ãŒã‚ã‚Šã¾ã™ã€‚

ã•ã‚‰ã«ã€ã“ã®æ®µéšã§ã€èªè¨¼ã•ã‚Œã¦ã„ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹**ã•ã‚‰ã«å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹**ã‚’ç™ºè¦‹ã—ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã‚Œã‚‰ã‚’åˆ©ç”¨ã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™:

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

## æ¨©é™æ˜‡æ ¼

ã‚¯ãƒ©ã‚¦ãƒ‰ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’å–å¾—ã—ãŸã‚Šã€ã‚¯ãƒ©ã‚¦ãƒ‰å†…ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä¾µå®³ã—ãŸå¾Œã€æœ€ã‚‚ä¸€èˆ¬çš„ãªæ–¹æ³•ã¯ã€ä¾µå®³ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒæŒã¤å¯èƒ½æ€§ã®ã‚ã‚‹**èª¤è¨­å®šã•ã‚ŒãŸæ¨©é™ã‚’æ‚ªç”¨ã™ã‚‹**ã“ã¨ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€æœ€åˆã«è¡Œã†ã¹ãã“ã¨ã¯ã€è‡ªåˆ†ã®æ¨©é™ã‚’åˆ—æŒ™ã™ã‚‹ã“ã¨ã§ã™ã€‚

ã¾ãŸã€ã“ã®åˆ—æŒ™ä¸­ã«ã€**æ¨©é™ã¯æœ€ä¸Šä½ãƒ¬ãƒ™ãƒ«ã®ã€Œçµ„ç¹”ã€ã§è¨­å®šã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹**ã“ã¨ã‚‚è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚

{% content-ref url="gcp-privilege-escalation/" %}
[gcp-privilege-escalation](gcp-privilege-escalation/)
{% endcontent-ref %}

## å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹

GCPã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ—æŒ™ã—ã¦ã„ã‚‹é–“ã«ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«**è¦ç´ ã‚’å…¬é–‹ã—ã¦ã„ã‚‹**ã‚‚ã®ï¼ˆVM/ã‚³ãƒ³ãƒ†ãƒŠã®ãƒãƒ¼ãƒˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„ã‚­ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚„ãƒã‚±ãƒƒãƒˆãªã©ï¼‰ã‚’è¦‹ã¤ã‘ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\
ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ã‚¿ãƒ¼/ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ã¨ã—ã¦ã¯ã€ãã‚Œã‚‰ã«**æ©Ÿå¯†æƒ…å ±/è„†å¼±æ€§**ãŒãªã„ã‹å¸¸ã«ç¢ºèªã—ã€ãã‚Œã«ã‚ˆã£ã¦**AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®ã•ã‚‰ãªã‚‹ã‚¢ã‚¯ã‚»ã‚¹**ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã®æœ¬ã§ã¯ã€**å…¬é–‹ã•ã‚Œã¦ã„ã‚‹AWSã‚µãƒ¼ãƒ“ã‚¹ã‚’è¦‹ã¤ã‘ã€ãã‚Œã‚‰ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹**æ–¹æ³•ã«ã¤ã„ã¦ã®**æƒ…å ±**ãŒè¦‹ã¤ã‹ã‚‹ã¯ãšã§ã™ã€‚å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã®**è„†å¼±æ€§ã‚’è¦‹ã¤ã‘ã‚‹**æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ç‰¹å®šã®**ã‚µãƒ¼ãƒ“ã‚¹**ã‚’ä»¥ä¸‹ã§**æ¤œç´¢**ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™:

{% embed url="https://book.hacktricks.xyz/" %}

## è‡ªå‹•ãƒ„ãƒ¼ãƒ«

* **GCloudã‚³ãƒ³ã‚½ãƒ¼ãƒ«**ã§ã€[https://console.cloud.google.com/iam-admin/asset-inventory/dashboard](https://console.cloud.google.com/iam-admin/asset-inventory/dashboard) ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã¨IAMã‚’ç¢ºèªã§ãã¾ã™ã€‚
* ã“ã®APIã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚»ãƒƒãƒˆã‚’ã“ã¡ã‚‰ã§ç¢ºèªã§ãã¾ã™: [https://cloud.google.com/asset-inventory/docs/supported-asset-types](https://cloud.google.com/asset-inventory/docs/supported-asset-types)
* [**è¤‡æ•°ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã§ä½¿ç”¨ã§ãã‚‹ãƒ„ãƒ¼ãƒ«**](../pentesting-cloud-methodology.md)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
* [**gcp\_scanner**](https://github.com/google/gcp\_scanner): ã“ã‚Œã¯GCPãƒªã‚½ãƒ¼ã‚¹ã‚¹ã‚­ãƒ£ãƒŠãƒ¼ã§ã€ç‰¹å®šã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ãŒGCPä¸Šã§ã©ã®**ãƒ¬ãƒ™ãƒ«ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æŒã£ã¦ã„ã‚‹ã‹**ã‚’åˆ¤æ–­ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚
```bash
# Install
git clone https://github.com/google/gcp_scanner.git
cd gcp_scanner
virtualenv -p python3 venv
source venv/bin/activate
pip install -r requirements.txt
# Execute with gcloud creds
python3 __main__.py -o /tmp/output/ -g "$HOME/.config/gcloud"
```
* [**gcp\_enum**](https://gitlab.com/gitlab-com/gl-security/threatmanagement/redteam/redteam-public/gcp\_enum): gcloud cliã‚’ä½¿ç”¨ã—ã¦GCPç’°å¢ƒã‚’åˆ—æŒ™ã—ã€çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹Bashã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚
* [**GCP-IAM-Privilege-Escalation**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation): é«˜ã„IAMæ¨©é™ã‚’åˆ—æŒ™ã—ã€ãã‚Œã‚‰ã‚’æ‚ªç”¨ã—ã¦GCPã§æ¨©é™æ˜‡æ ¼ã‚’è¡Œã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆåˆ—æŒ™ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã§ãã¾ã›ã‚“ã§ã—ãŸï¼‰ã€‚

## gcloud config & debug
```bash
# Login so gcloud can use your credentials
gcloud auth login
gcloud config set project security-devbox
gcloud auth print-access-token

# Login so SDKs can use your user credentials
gcloud auth application-default login
gcloud auth application-default set-quota-project security-devbox
gcloud auth application-default print-access-token

# Update gcloud
gcloud components update
```
### gcloud, gsutil... ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚­ãƒ£ãƒ—ãƒãƒ£

**`gcloud`** CLIã§**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿** **`--log-http`** ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ„ãƒ¼ãƒ«ãŒå®Ÿè¡Œã—ã¦ã„ã‚‹**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**ã‚’**å°åˆ·**ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚ãƒˆãƒ¼ã‚¯ãƒ³å€¤ã®ãƒ­ã‚°ã‚’ç·¨é›†ã—ãŸããªã„å ´åˆã¯ `gcloud config set log_http_redact_token false` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ã•ã‚‰ã«ã€é€šä¿¡ã‚’å‚å—ã™ã‚‹ã«ã¯ï¼š
```bash
gcloud config set proxy/address 127.0.0.1
gcloud config set proxy/port 8080
gcloud config set proxy/type http
gcloud config set auth/disable_ssl_validation True

# If you don't want to completely disable ssl_validation use:
gcloud config set core/custom_ca_certs_file cert.pem

# Back to normal
gcloud config unset proxy/address
gcloud config unset proxy/port
gcloud config unset proxy/type
gcloud config unset auth/disable_ssl_validation
gcloud config unset core/custom_ca_certs_file
```
## å‚è€ƒæ–‡çŒ®

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)ã§AWSã®ãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã¶</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã«ã‚ãªãŸã®ä¼šç¤¾ã‚’åºƒå‘Šã—ãŸã„**ã€ã¾ãŸã¯**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ã€[**ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼ã®PEASS & HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„
* ğŸ’¬ [**Discordã‚°ãƒ«ãƒ¼ãƒ—**](https://discord.gg/hRep4RUj7f)ã‚„[**ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã‚°ãƒ«ãƒ¼ãƒ—**](https://t.me/peass)ã«**å‚åŠ ã™ã‚‹**ã‹ã€**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)ã‚’**ãƒ•ã‚©ãƒ­ãƒ¼**ã—ã¦ãã ã•ã„ã€‚
* [**HackTricks**](https://github.com/carlospolop/hacktricks)ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ã®ã‚³ãƒ„ã‚’**å…±æœ‰ã—ã¦ãã ã•ã„**ã€‚

</details>
