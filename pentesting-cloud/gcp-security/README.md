# GCP ãƒšãƒ³ãƒ†ã‚¹ãƒˆ

<details>

<summary><strong>htARTEï¼ˆHackTricks AWS Red Team Expertï¼‰</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>ã§ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’å­¦ã¶</strong></a><strong>ï¼</strong></summary>

HackTricks ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricks ã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**ã¾ãŸã¯ **HackTricks ã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„**å ´åˆã¯ [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop) ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚°ãƒƒã‚º**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã™ã‚‹
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª [**NFTs**](https://opensea.io/collection/the-peass-family)ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã‚‹
* **ğŸ’¬ [Discordã‚°ãƒ«ãƒ¼ãƒ—](https://discord.gg/hRep4RUj7f)** ã«å‚åŠ ã™ã‚‹ã‹ã€[telegramã‚°ãƒ«ãƒ¼ãƒ—](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã€‚
* **ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã™ã‚‹ã«ã¯ã€** [**HackTricks**](https://github.com/carlospolop/hacktricks) ã¨ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) ã®GitHubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚

</details>

## åŸºæœ¬æƒ…å ±

**GCP** ç’°å¢ƒã‚’ãƒšãƒ³ãƒ†ã‚¹ãƒˆã™ã‚‹å‰ã«ã€**ã©ã®ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ç†è§£**ã—ã€ãƒŸã‚¹æ§‹æˆã‚’è¦‹ã¤ã‘ã¦æ‚ªç”¨ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã™ã‚‹ã®ã«å½¹ç«‹ã¤ **åŸºæœ¬äº‹é …** ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚

**çµ„ç¹”**ã®éšå±¤ã€**æ¨©é™**ãªã©ã®æ¦‚å¿µã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã§èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™:

{% content-ref url="gcp-basic-information/" %}
[gcp-basic-information](gcp-basic-information/)
{% endcontent-ref %}

## å­¦ç¿’ç”¨ãƒ©ãƒœ

* [https://gcpgoat.joshuajebaraj.com/](https://gcpgoat.joshuajebaraj.com/)
* [https://github.com/ine-labs/GCPGoat](https://github.com/ine-labs/GCPGoat)
* [https://github.com/lacioffi/GCP-pentest-lab/](https://github.com/lacioffi/GCP-pentest-lab/)
* [https://github.com/carlospolop/gcp\_privesc\_scripts](https://github.com/carlospolop/gcp\_privesc\_scripts)

## GCP ãƒšãƒ³ãƒ†ã‚¹ã‚¿ãƒ¼/ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ã®æ–¹æ³•è«–

GCP ç’°å¢ƒã‚’ç›£æŸ»ã™ã‚‹ãŸã‚ã«ã¯ã€**ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹**ã€**ä½•ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹**ã€**èª°ãŒä½•ã«ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’æŒã£ã¦ã„ã‚‹ã‹**ã€å†…éƒ¨ã®GCPã‚µãƒ¼ãƒ“ã‚¹ã¨**å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹**ãŒã©ã®ã‚ˆã†ã«æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‹ã‚’çŸ¥ã‚‹ã“ã¨ãŒéå¸¸ã«é‡è¦ã§ã™ã€‚

ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ã®è¦–ç‚¹ã‹ã‚‰ã€GCP ç’°å¢ƒã‚’ä¾µå®³ã™ã‚‹**æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—**ã¯ã€ã„ãã¤ã‹ã®**è³‡æ ¼æƒ…å ±ã‚’å–å¾—**ã™ã‚‹ã“ã¨ã§ã™ã€‚ä»¥ä¸‹ã«ã€ãã‚Œã‚’è¡Œã†ãŸã‚ã®ã„ãã¤ã‹ã®ã‚¢ã‚¤ãƒ‡ã‚¢ãŒã‚ã‚Šã¾ã™:

* githubï¼ˆã¾ãŸã¯é¡ä¼¼ã®ï¼‰ã§ã®**æƒ…å ±æ¼æ´©** - OSINT
* **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«**ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼ˆ[**Workspace Security**](../workspace-security/) ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ï¼‰
* **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**å†åˆ©ç”¨ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¼æ´©ï¼‰
* GCP ãƒ›ã‚¹ãƒˆã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è„†å¼±æ€§
* [**ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ã‚©ãƒ¼ã‚¸ã‚§ãƒª**](https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf) ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
* **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Š**
* `/home/USERNAME/.config/gcloud/*`
* `C:\Users\USERNAME\.config\gcloud\*`
* 3è€…ãŒ**ä¾µå®³**
* **å†…éƒ¨**å¾“æ¥­å“¡

ã¾ãŸã¯**èªè¨¼ã•ã‚Œã¦ã„ãªã„ã‚µãƒ¼ãƒ“ã‚¹**ã‚’ä¾µå®³ã™ã‚‹ã“ã¨ã§:

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

ã¾ãŸã¯**ãƒ¬ãƒ“ãƒ¥ãƒ¼**ã‚’è¡Œã£ã¦ã„ã‚‹å ´åˆã¯ã€ã“ã‚Œã‚‰ã®å½¹å‰²ã§**è³‡æ ¼æƒ…å ±ã‚’è¦æ±‚**ã™ã‚‹ã ã‘ã§ã™:

{% content-ref url="gcp-permissions-for-a-pentest.md" %}
[gcp-permissions-for-a-pentest.md](gcp-permissions-for-a-pentest.md)
{% endcontent-ref %}

{% hint style="info" %}
è³‡æ ¼æƒ…å ±ã‚’å–å¾—ã—ãŸå¾Œã¯ã€ãã‚Œã‚‰ã®è³‡æ ¼æƒ…å ±ãŒ**èª°ã«å±ã—ã¦ã„ã‚‹ã‹**ã€**ä½•ã«ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’æŒã£ã¦ã„ã‚‹ã‹**ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ã„ãã¤ã‹ã®åŸºæœ¬çš„ãªåˆ—æŒ™ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:
{% endhint %}

## åŸºæœ¬åˆ—æŒ™

### **SSRF**

GCP ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’**åˆ—æŒ™ã™ã‚‹æ–¹æ³•**ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€æ¬¡ã® hacktricks ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„:

{% embed url="https://book.hacktricks.xyz/pentesting-web/ssrf-server-side-request-forgery/cloud-ssrf#6440" %}

### Whoami

GCP ã§ã¯ã€è‡ªåˆ†ãŒèª°ã‹ã‚’æ¨æ¸¬ã™ã‚‹ãŸã‚ã«ã„ãã¤ã‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è©¦ã™ã“ã¨ãŒã§ãã¾ã™:

{% code overflow="wrap" %}
```bash
#If you are inside a compromise machine
gcloud auth list
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=$(gcloud auth print-access-token)" https://www.googleapis.com/oauth2/v1/tokeninfo
gcloud auth print-identity-token #Get info from the token

#If you compromised a metadata token or somehow found an OAuth token
curl -H "Content-Type: application/x-www-form-urlencoded" -d "access_token=<token>" https://www.googleapis.com/oauth2/v1/tokeninfo
```
### çµ„ç¹”ã®åˆ—æŒ™

{% endcode %}
```bash
# Get organizations
gcloud organizations list #The DIRECTORY_CUSTOMER_ID is the Workspace ID
gcloud resource-manager folders list --organization <org_number> # Get folders
gcloud projects list # Get projects
```
### Principal & IAM Enumeration

ååˆ†ãªæ¨©é™ãŒã‚ã‚‹å ´åˆã€**GCPã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã®å„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ç‰¹æ¨©ã‚’ãƒã‚§ãƒƒã‚¯**ã™ã‚‹ã“ã¨ã§ã€è‡ªåˆ†ã‚„ä»–ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒä½•ãŒã§ãã‚‹ã‹ã€ç‰¹æ¨©ã‚’**ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆ**ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã§ãã¾ã™ã€‚

IAMã‚’åˆ—æŒ™ã™ã‚‹æ¨©é™ãŒãªã„å ´åˆã€**ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒ**ã‚’è¡Œã£ã¦ç‰¹æ¨©ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\
**åˆ—æŒ™ã¨ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒã®æ–¹æ³•**ã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã¾ã™ï¼š

{% content-ref url="gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}

{% hint style="info" %}
ä»Šã€**è³‡æ ¼æƒ…å ±ã«ã¤ã„ã¦ã®æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹**ï¼ˆã‚‚ã—ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ã§ã‚ã‚Œã°ã€**æ¤œå‡ºã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’é¡˜ã„ã¾ã™**ï¼‰ã€‚ç’°å¢ƒã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç‰¹å®šã™ã‚‹æ™‚ãŒãã¾ã—ãŸã€‚\
ä»¥ä¸‹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã„ãã¤ã‹ã®ä¸€èˆ¬çš„ãªã‚µãƒ¼ãƒ“ã‚¹ã‚’**åˆ—æŒ™ã™ã‚‹æ–¹æ³•**ã‚’ç¢ºèªã§ãã¾ã™ã€‚
{% endhint %}

## ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ—æŒ™

GCPã«ã¯é©šãã»ã©å¤šãã®ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚Šã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã§ã¯ã€ã„ãã¤ã‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹**åŸºæœ¬æƒ…å ±ã€åˆ—æŒ™**ã®ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆã€**æ¤œå‡ºã‚’å›é¿**ã™ã‚‹æ–¹æ³•ã€**æŒç¶šæ€§**ã‚’ç¢ºä¿ã™ã‚‹æ–¹æ³•ã€ãŠã‚ˆã³ãã®ä»–ã®**ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**ãƒˆãƒªãƒƒã‚¯ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ï¼š

{% content-ref url="gcp-services/" %}
[gcp-services](gcp-services/)
{% endcontent-ref %}

ã™ã¹ã¦ã®ä½œæ¥­ã‚’**æ‰‹å‹•**ã§è¡Œã†å¿…è¦ã¯ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã®æŠ•ç¨¿ã®ä¸‹ã«ã¯ã€[**è‡ªå‹•ãƒ„ãƒ¼ãƒ«ã«é–¢ã™ã‚‹**ã‚»ã‚¯ã‚·ãƒ§ãƒ³](./#automatic-tools)ãŒã‚ã‚Šã¾ã™ã€‚

ã•ã‚‰ã«ã€ã“ã®æ®µéšã§ã¯ã€**èªè¨¼ã•ã‚Œã¦ã„ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãŒã•ã‚‰ã«è¦‹ã¤ã‹ã‚‹**å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’æ‚ªç”¨ã§ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š

{% content-ref url="gcp-unaunthenticated-enum-and-access/" %}
[gcp-unaunthenticated-enum-and-access](gcp-unaunthenticated-enum-and-access/)
{% endcontent-ref %}

## ç‰¹æ¨©æ˜‡æ ¼ã€ãƒã‚¹ãƒˆã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ã‚¤ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€æŒç¶šæ€§

ã‚¯ãƒ©ã‚¦ãƒ‰ã®è³‡æ ¼æƒ…å ±ã‚’å…¥æ‰‹ã—ãŸã‚Šã€ã‚¯ãƒ©ã‚¦ãƒ‰å†…ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä¾µå®³ã—ãŸã‚Šã—ãŸå ´åˆã€**ä¾µå®³ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒæŒã¤ç‰¹æ¨©ã‚’æ‚ªç”¨**ã™ã‚‹ã®ãŒæœ€ã‚‚ä¸€èˆ¬çš„ãªæ–¹æ³•ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ã¾ãšç‰¹æ¨©ã‚’åˆ—æŒ™ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€ã“ã®åˆ—æŒ™ä¸­ã«ã€**æ¨©é™ã¯æœ€ä¸Šä½ã®ã€Œçµ„ç¹”ã€ãƒ¬ãƒ™ãƒ«ã§è¨­å®šã§ãã‚‹**ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚

{% content-ref url="gcp-privilege-escalation/" %}
[gcp-privilege-escalation](gcp-privilege-escalation/)
{% endcontent-ref %}

{% content-ref url="gcp-post-exploitation/" %}
[gcp-post-exploitation](gcp-post-exploitation/)
{% endcontent-ref %}

{% content-ref url="gcp-persistence/" %}
[gcp-persistence](gcp-persistence/)
{% endcontent-ref %}

### å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹

GCPã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ—æŒ™ã™ã‚‹éš›ã«ã€ãã‚Œã‚‰ã®ä¸­ã«ã¯**ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«è¦ç´ ã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã‚‚ã®**ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼ˆVM/ã‚³ãƒ³ãƒ†ãƒŠã®ãƒãƒ¼ãƒˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„ã‚­ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚„ãƒã‚±ãƒ„ãªã©ï¼‰ã€‚\
ãƒšãƒ³ãƒ†ã‚¹ã‚¿ãƒ¼/ãƒ¬ãƒƒãƒ‰ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨ã—ã¦ã¯ã€ã“ã‚Œã‚‰ãŒAWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®**ã•ã‚‰ãªã‚‹ã‚¢ã‚¯ã‚»ã‚¹**ã‚’æä¾›ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãã‚Œã‚‰ã«**æ©Ÿå¯†æƒ…å ±/è„†å¼±æ€§**ãŒãªã„ã‹å¸¸ã«ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®æ›¸ç±ã§ã¯ã€**å…¬é–‹ã•ã‚Œã¦ã„ã‚‹GCPã‚µãƒ¼ãƒ“ã‚¹ã‚’è¦‹ã¤ã‘ã‚‹æ–¹æ³•ã‚„ç¢ºèªæ–¹æ³•**ã«ã¤ã„ã¦ã®æƒ…å ±ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚**å…¬é–‹ã•ã‚ŒãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚µãƒ¼ãƒ“ã‚¹ã®è„†å¼±æ€§ã‚’è¦‹ã¤ã‘ã‚‹æ–¹æ³•**ã«ã¤ã„ã¦ã¯ã€ç‰¹å®šã®**ã‚µãƒ¼ãƒ“ã‚¹**ã‚’æ¤œç´¢ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ï¼š

{% embed url="https://book.hacktricks.xyz/" %}

## GCP <--> Workspace ãƒ”ãƒœãƒ†ã‚£ãƒ³ã‚°

**1ã¤ã®**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã®ä¸»ä½“ã®**ä¾µå®³**ã¯ã€æ”»æ’ƒè€…ãŒ**ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’ä¾µå®³**ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚è©³ç´°ã¯ä»¥ä¸‹ã‚’ã”ç¢ºèªãã ã•ã„ï¼š

{% content-ref url="gcp-to-workspace-pivoting/" %}
[gcp-to-workspace-pivoting](gcp-to-workspace-pivoting/)
{% endcontent-ref %}

## è‡ªå‹•ãƒ„ãƒ¼ãƒ«

* **GCloudã‚³ãƒ³ã‚½ãƒ¼ãƒ«**ã§ã¯ã€[https://console.cloud.google.com/iam-admin/asset-inventory/dashboard](https://console.cloud.google.com/iam-admin/asset-inventory/dashboard) ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã¨IAMã‚’ç¢ºèªã§ãã¾ã™ã€‚
* ã“ã®APIã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚¢ã‚»ãƒƒãƒˆã¯ã“ã¡ã‚‰ã§ç¢ºèªã§ãã¾ã™ï¼š[https://cloud.google.com/asset-inventory/docs/supported-asset-types](https://cloud.google.com/asset-inventory/docs/supported-asset-types)
* [**è¤‡æ•°ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã§ä½¿ç”¨ã§ãã‚‹ãƒ„ãƒ¼ãƒ«**](../pentesting-cloud-methodology.md)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
* [**gcp\_scanner**](https://github.com/google/gcp\_scanner): ã“ã‚Œã¯GCPãƒªã‚½ãƒ¼ã‚¹ã‚¹ã‚­ãƒ£ãƒŠãƒ¼ã§ã‚ã‚Šã€GCPã§ç‰¹å®šã®è³‡æ ¼æƒ…å ±ãŒã©ã®ã‚ˆã†ãª**ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã‹**ã‚’åˆ¤æ–­ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚
```bash
# Install
git clone https://github.com/google/gcp_scanner.git
cd gcp_scanner
virtualenv -p python3 venv
source venv/bin/activate
pip install -r requirements.txt
# Execute with gcloud creds
python3 __main__.py -o /tmp/output/ -g "$HOME/.config/gcloud"
```
* [**gcp\_enum**](https://gitlab.com/gitlab-com/gl-security/threatmanagement/redteam/redteam-public/gcp\_enum): GCPç’°å¢ƒã‚’åˆ—æŒ™ã™ã‚‹ãŸã‚ã®Bashã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚gcloud cliã‚’ä½¿ç”¨ã—ã¦çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚
* [**GCP-IAM-Privilege-Escalation**](https://github.com/RhinoSecurityLabs/GCP-IAM-Privilege-Escalation): é«˜ã„IAMç‰¹æ¨©ã‚’åˆ—æŒ™ã—ã€ãã‚Œã‚’æ‚ªç”¨ã—ã¦GCPã§ç‰¹æ¨©ã‚’æ˜‡æ ¼ã•ã›ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆåˆ—æŒ™ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã§ãã¾ã›ã‚“ã§ã—ãŸï¼‰ã€‚

## gcloudè¨­å®šã¨ãƒ‡ãƒãƒƒã‚°
```bash
# Login so gcloud can use your credentials
gcloud auth login
gcloud config set project security-devbox
gcloud auth print-access-token

# Login so SDKs can use your user credentials
gcloud auth application-default login
gcloud auth application-default set-quota-project security-devbox
gcloud auth application-default print-access-token

# Update gcloud
gcloud components update
```
### gcloudã€gsutil...ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã‚­ãƒ£ãƒ—ãƒãƒ£

**`gcloud`** cliã§**`--log-http`** **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ„ãƒ¼ãƒ«ãŒå®Ÿè¡Œã—ã¦ã„ã‚‹**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**ã‚’**è¡¨ç¤º**ã§ãã‚‹ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚ãƒ­ã‚°ãŒãƒˆãƒ¼ã‚¯ãƒ³ã®å€¤ã‚’ä¼ã›ã‚‹ã®ã‚’é¿ã‘ãŸã„å ´åˆã¯ã€`gcloud config set log_http_redact_token false`ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

ã•ã‚‰ã«ã€é€šä¿¡ã‚’å‚å—ã™ã‚‹ã«ã¯ï¼š
```bash
gcloud config set proxy/address 127.0.0.1
gcloud config set proxy/port 8080
gcloud config set proxy/type http
gcloud config set auth/disable_ssl_validation True

# If you don't want to completely disable ssl_validation use:
gcloud config set core/custom_ca_certs_file cert.pem

# Back to normal
gcloud config unset proxy/address
gcloud config unset proxy/port
gcloud config unset proxy/type
gcloud config unset auth/disable_ssl_validation
gcloud config unset core/custom_ca_certs_file
```
### gcloudã§ã®OAuthãƒˆãƒ¼ã‚¯ãƒ³ã®è¨­å®š

**ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰æµå‡ºã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®OAuthãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹**ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™:
```bash
# Via env vars
export CLOUDSDK_AUTH_ACCESS_TOKEN=<token>
gcloud projects list

# Via setup
echo "<token>" > /some/path/to/token
gcloud config set auth/access_token_file /some/path/to/token
gcloud projects list
gcloud config unset auth/access_token_file
```
## å‚è€ƒ

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>ã§AWSãƒãƒƒã‚­ãƒ³ã‚°ã‚’ã‚¼ãƒ­ã‹ã‚‰ãƒ’ãƒ¼ãƒ­ãƒ¼ã¾ã§å­¦ã³ã¾ã—ã‚‡ã†ï¼</strong></summary>

HackTricksã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ä»–ã®æ–¹æ³•:

* **HackTricksã§ä¼æ¥­ã‚’å®£ä¼ã—ãŸã„**å ´åˆã‚„**HackTricksã‚’PDFã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ã—ãŸã„å ´åˆã¯ã€[**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼
* [**å…¬å¼PEASSï¼†HackTricksã‚¹ãƒ¯ãƒƒã‚°**](https://peass.creator-spring.com)ã‚’å…¥æ‰‹ã—ã¦ãã ã•ã„
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family)ã‚’ç™ºè¦‹ã—ã€ç‹¬å çš„ãª[**NFTs**](https://opensea.io/collection/the-peass-family)ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„
* **ğŸ’¬ [Discordã‚°ãƒ«ãƒ¼ãƒ—](https://discord.gg/hRep4RUj7f)**ã«å‚åŠ ã™ã‚‹ã‹ã€[telegramã‚°ãƒ«ãƒ¼ãƒ—](https://t.me/peass)ã«å‚åŠ ã™ã‚‹ã‹ã€**Twitter** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚
* **HackTricks**ã¨[**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud)ã®githubãƒªãƒã‚¸ãƒˆãƒªã«PRã‚’æå‡ºã—ã¦ã€ã‚ãªãŸã®ãƒãƒƒã‚­ãƒ³ã‚°ãƒˆãƒªãƒƒã‚¯ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚

</details>
