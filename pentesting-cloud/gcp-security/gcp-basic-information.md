# GCP - Osnovne informacije

<details>

<summary><strong>NauÄite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi naÄini podrÅ¡ke HackTricks-u:

* Ako Å¾elite da vidite svoju **kompaniju reklamiranu na HackTricks-u** ili da **preuzmete HackTricks u PDF formatu** proverite [**PLANOVE ZA PRIJATELJSTVO**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvaniÄni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**Porodicu PEASS**](https://opensea.io/collection/the-peass-family), naÅ¡u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **PridruÅ¾ite se** ğŸ’¬ [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili nas **pratite** na **Twitteru** ğŸ¦ [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## **Hijerarhija resursa**

Google Cloud koristi [Hijerarhiju resursa](https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy) koja je konceptualno sliÄna tradicionalnom sistemskom fajl sistemu. Ovo pruÅ¾a logiÄan roditeljski/detinjasti radni tok sa specifiÄnim taÄkama prikljuÄenja za politike i dozvole.

Na visokom nivou, izgleda ovako:
```
Organization
--> Folders
--> Projects
--> Resources
```
## **Virtuelna maÅ¡ina (nazvana Compute Instance) je resurs.**

Resurs se nalazi u projektu, verovatno zajedno sa drugim Compute Instancama, skladiÅ¡nim kantama, itd.

<figure><img src="../../.gitbook/assets/image.png" alt=""><figcaption><p><a href="https://cloud.google.com/static/resource-manager/img/cloud-hierarchy.svg">https://cloud.google.com/static/resource-manager/img/cloud-hierarchy.svg</a></p></figcaption></figure>

## **Migracija Projekata**

MoguÄ‡e je **migrirati projekat bez bilo koje organizacije** u organizaciju sa dozvolama `roles/resourcemanager.projectCreator` i `roles/resourcemanager.projectMover`. Ako je projekat unutar druge organizacije, potrebno je kontaktirati GCP podrÅ¡ku da ih prvo **izmesti iz organizacije**. Za viÅ¡e informacija pogledajte [**ovde**](https://medium.com/google-cloud/migrating-a-project-from-one-organization-to-another-gcp-4b37a86dd9e6).

## **Politike Organizacije**

OmoguÄ‡avaju centralizovanu kontrolu nad resursima u vaÅ¡oj organizaciji u oblaku:

* Centralizovana kontrola za **konfigurisanje ograniÄenja** o tome kako se resursi vaÅ¡e organizacije mogu koristiti.
* Definisanje i uspostavljanje **zaÅ¡titnih ograda** za vaÅ¡e razvojne timove da ostanu unutar granica usaglaÅ¡enosti.
* PomaÅ¾u vlasnicima projekata i njihovim timovima da brzo napreduju bez brige o krÅ¡enju usaglaÅ¡enosti.

Ove politike mogu biti kreirane da **utiÄu na celu organizaciju, folder(e) ili projekat(e)**. Potomci ciljanog Ävora hijerarhije resursa **nasleÄ‘uju organizacionu politiku**.

Da biste **definisali** organizacionu politiku, **izaberete** [**ograniÄenje**](https://cloud.google.com/resource-manager/docs/organization-policy/overview#constraints), koje je odreÄ‘eni tip ograniÄenja protiv Google Cloud servisa ili grupe Google Cloud servisa. Zatim **konfiguriÅ¡ete to ograniÄenje sa Å¾eljenim ograniÄenjima**.

<figure><img src="../../.gitbook/assets/image (5) (4).png" alt=""><figcaption><p><a href="https://cloud.google.com/resource-manager/img/org-policy-concepts.svg">https://cloud.google.com/resource-manager/img/org-policy-concepts.svg</a></p></figcaption></figure>

#### ÄŒesti sluÄajevi upotrebe <a href="#common_use_cases" id="common_use_cases"></a>

* OgraniÄavanje deljenja resursa na osnovu domena.
* OgraniÄavanje koriÅ¡Ä‡enja servisnih naloga za identitet i pristup.
* OgraniÄavanje fiziÄke lokacije novostvorenih resursa.
* OnemoguÄ‡avanje kreiranja servisnih naloga.

<figure><img src="../../.gitbook/assets/image (83).png" alt=""><figcaption></figcaption></figure>

Postoji joÅ¡ mnogo ograniÄenja koja vam daju detaljnu kontrolu nad resursima vaÅ¡e organizacije. Za **viÅ¡e informacija, pogledajte** [**listu svih ograniÄenja usluge Organizacione Politike**](https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints)**.**

### **Podrazumevane Politike Organizacije**

<details>

<summary>Ovo su politike koje Ä‡e Google automatski dodati prilikom postavljanja vaÅ¡e GCP organizacije:</summary>

**Politike Upravljanja Pristupom**

* **OgraniÄeni kontakti po domenu:** OnemoguÄ‡ava dodavanje korisnika Essential kontakata izvan vaÅ¡ih odabranih domena. Ovo ograniÄava Essential kontakte da dozvoli samo upravljane korisniÄke identitete u vaÅ¡im odabranim domenima da primaju obaveÅ¡tenja platforme.
* **OgraniÄeno deljenje po domenu:** OnemoguÄ‡ava dodavanje korisnika u IAM politike izvan vaÅ¡ih odabranih domena. Ovo ograniÄava IAM politike da dozvoli samo upravljane korisniÄke identitete u vaÅ¡im odabranim domenima da pristupe resursima unutar ove organizacije.
* **Prevencija javnog pristupa:** OnemoguÄ‡ava Cloud Storage kante da budu izloÅ¾ene javnosti. Ovo osigurava da programer ne moÅ¾e konfigurisati Cloud Storage kante da imaju neautentifikovan pristup internetu.
* **Jednaki pristup nivou kante:** OnemoguÄ‡ava liste kontrole pristupa na nivou objekta (ACL) u Cloud Storage kantama. Ovo pojednostavljuje upravljanje pristupom primenom IAM politika dosledno na sve objekte u Cloud Storage kantama.
* **Zahtevaj prijavljivanje na OS:** Virtuelne maÅ¡ine kreirane u novim projektima Ä‡e imati omoguÄ‡eno prijavljivanje na OS. Ovo vam omoguÄ‡ava da upravljate SSH pristupom vaÅ¡im instancama koristeÄ‡i IAM, bez potrebe za kreiranjem i upravljanjem pojedinaÄnim SSH kljuÄevima.

**Dodatne sigurnosne politike za servisne naloge**

* **OnemoguÄ‡i automatske IAM dozvole**: OnemoguÄ‡ava podrazumevane App Engine i Compute Engine servisne naloge da automatski dobiju Editor IAM ulogu na projektu prilikom kreiranja. Ovo osigurava da servisni nalozi ne dobijaju prekomerne IAM uloge prilikom kreiranja.
* **OnemoguÄ‡i kreiranje kljuÄeva servisnog naloga**: OnemoguÄ‡ava kreiranje javnih kljuÄeva servisnih naloga. Ovo pomaÅ¾e u smanjenju rizika izlaganja trajnih akreditiva.
* **OnemoguÄ‡i otpremanje kljuÄeva servisnog naloga**: OnemoguÄ‡ava otpremanje javnih kljuÄeva servisnih naloga. Ovo pomaÅ¾e u smanjenju rizika od izloÅ¾enih ili ponovo koriÅ¡Ä‡enih kljuÄeva.

**Sigurna konfiguracija VPC mreÅ¾e**

* **DefiniÅ¡i dozvoljene spoljne IP adrese za VM instance**: OnemoguÄ‡ava kreiranje Compute instanci sa javnom IP adresom, Å¡to ih moÅ¾e izloÅ¾iti internet saobraÄ‡aju.

<!---->

* **OnemoguÄ‡i ugnjeÅ¾deno virtualizaciju VM-ova**: OnemoguÄ‡ava kreiranje ugnjeÅ¾denih VM-ova na Compute Engine VM-ovima. Ovo smanjuje sigurnosni rizik od neprekidnih ugnjeÅ¾denih VM-ova.

<!---->

* **OnemoguÄ‡i serijski port VM-a:** OnemoguÄ‡ava pristup serijskom portu Compute Engine VM-ova. Ovo spreÄava unos u serijski port servera koriÅ¡Ä‡enjem Compute Engine API-ja.

<!---->

* **OgraniÄi ovlaÅ¡Ä‡ene mreÅ¾e na Cloud SQL instancama:** OnemoguÄ‡ava javne ili ne-internetske mreÅ¾ne opsege da pristupe vaÅ¡im Cloud SQL bazama podataka.

<!---->

* **OgraniÄi prosleÄ‘ivanje protokola na osnovu tipa IP adrese:** OnemoguÄ‡ava prosleÄ‘ivanje protokola VM-ova za eksterne IP adrese.

<!---->

* **OgraniÄi pristup javnim IP adresama na Cloud SQL instancama:** OnemoguÄ‡ava kreiranje Cloud SQL instanci sa javnom IP adresom, Å¡to ih moÅ¾e izloÅ¾iti internet saobraÄ‡aju.

<!---->

* **OgraniÄi uklanjanje liena deljenog VPC projekta:** OnemoguÄ‡ava sluÄajno brisanje host projekata deljenog VPC-a.

<!---->

* **Postavlja interni DNS za nove projekte na Zonalni DNS samo:** OnemoguÄ‡ava koriÅ¡Ä‡enje zastarelog DNS postavke koja ima smanjenu dostupnost usluge.

<!---->

* **PreskoÄi podrazumevano kreiranje mreÅ¾e:** OnemoguÄ‡ava automatsko kreiranje podrazumevane VPC mreÅ¾e i povezanih resursa. Ovo izbegava prekomerno dozvoljene podrazumevane pravila firewall-a.

<!---->

* **OnemoguÄ‡i koriÅ¡Ä‡enje spoljnih IPv6 adresa u VPC-u:** OnemoguÄ‡ava kreiranje spoljnih IPv6 podmreÅ¾a, koje mogu biti izloÅ¾ene neovlaÅ¡Ä‡enom internet pristupu.

</details>

## **IAM Uloge**

Ove su sliÄne IAM politikama u AWS-u jer **svaka uloga sadrÅ¾i skup dozvola**.

MeÄ‘utim, za razliku od AWS-a, ne postoji **centralizovani repozitorijum** uloga. Umesto toga, **resursi daju X pristupnih uloga Y principima**, i jedini naÄin da saznate ko ima pristup resursu je da koristite **`get-iam-policy` metodu nad tim resursom**.\
Ovo moÅ¾e biti problem jer to znaÄi da je jedini naÄin da saznate **koje dozvole princip ima je da pitate svaki resurs kome daje dozvole**, a korisnik moÅ¾da nema dozvole da dobije dozvole od svih resursa.

Postoje **tri vrste** uloga u IAM-u:

* **Osnovne/Primitivne uloge**, koje ukljuÄuju uloge **Vlasnik**, **UreÄ‘ivaÄ** i **PregledaÄ** koje su postojale pre uvoÄ‘enja IAM-a.
* **Predefinisane uloge**, koje pruÅ¾aju granularni pristup za odreÄ‘enu uslugu i upravljaju ih Google Cloud. Postoji mnogo predefinisanih uloga, moÅ¾ete **videti sve njih sa privilegijama koje imaju** [**ovde**](https://cloud.google.com/iam/docs/understanding-roles#predefined\_roles).
* **PrilagoÄ‘ene uloge**, koje pruÅ¾aju granularni pristup prema listi dozvola koje je korisnik odredio.

Postoji hiljade dozvola u GCP-u. Da biste proverili da li uloga ima dozvole, moÅ¾ete [**pretraÅ¾iti dozvolu ovde**](https://cloud.google.com/iam/docs/permissions-reference) i videti koje uloge je imaju.

TakoÄ‘e moÅ¾ete [**ovde pretraÅ¾iti predefinisane uloge**](https://cloud.google.com/iam/docs/understanding-roles#product\_specific\_documentation) **ponuÄ‘ene od strane svakog proizvoda.** Imajte na umu da neke **uloge** ne mogu biti dodeljene korisnicima veÄ‡ **samo servisnim nalozima zbog nekih dozvola** koje sadrÅ¾e.\
Osim toga, imajte na umu da Ä‡e **dozvole** imati efekta samo ako su **dodate relevantnoj usluzi.**

Ili proverite da li **prilagoÄ‘ena uloga moÅ¾e koristiti** [**specifiÄnu dozvolu ovde**](https://cloud.google.com/iam/docs/custom-roles-permissions-support)**.**

{% content-ref url="gcp-services/gcp-iam-and-org-policies-enum.md" %}
[gcp-iam-and-org-policies-enum.md](gcp-services/gcp-iam-and-org-policies-enum.md)
{% endcontent-ref %}
## Korisnici <a href="#default-credentials" id="default-credentials"></a>

U **GCP konzoli** nema upravljanja **Korisnicima ili Grupama**, to se radi u **Google Workspace-u**. MeÄ‘utim, moÅ¾ete sinhronizovati drugog provajdera identiteta u Google Workspace-u.

Korisnici i grupe Workspaces-a mogu se pristupiti na [**https://admin.google.com**](https://admin.google.com/).

**MFA** moÅ¾e biti **obavezan** za korisnike Workspaces-a, meÄ‘utim, **napadaÄ** moÅ¾e koristiti token za pristup GCP **putem CLI-a koji neÄ‡e biti zaÅ¡tiÄ‡en MFA-om** (biÄ‡e zaÅ¡tiÄ‡en MFA-om samo kada korisnik se prijavi da ga generiÅ¡e: `gcloud auth login`).

## Grupe

Kada se organizacija kreira, preporuÄuje se da se kreiraju nekoliko grupa. Ako upravljate bilo kojom od njih, moÅ¾da ste kompromitovali celu ili vaÅ¾an deo organizacije:

<table data-header-hidden><thead><tr><th width="299.3076923076923"></th><th></th></tr></thead><tbody><tr><td><strong>Grupa</strong></td><td><strong>Funkcija</strong></td></tr><tr><td><strong><code>gcp-organization-admins</code></strong><br><em>(grupa ili individualni nalozi potrebni za proveru)</em></td><td>Upravljanje svakim resursom koji pripada organizaciji. Dodelite ovu ulogu Å¡tedljivo; administratori organizacije imaju pristup svim vaÅ¡im Google Cloud resursima. Alternativno, zbog visokih privilegija ove funkcije, razmislite o koriÅ¡Ä‡enju individualnih naloga umesto kreiranja grupe.</td></tr><tr><td><strong><code>gcp-network-admins</code></strong><br><em>(potrebno za proveru)</em></td><td>Kreiranje mreÅ¾a, podmreÅ¾a, pravila zaÅ¡tite od poÅ¾ara i mreÅ¾nih ureÄ‘aja poput Cloud Routera, Cloud VPN-a i cloud load balansera.</td></tr><tr><td><strong><code>gcp-billing-admins</code></strong><br><em>(potrebno za proveru)</em></td><td>Postavljanje billing naloga i praÄ‡enje njihove upotrebe.</td></tr><tr><td><strong><code>gcp-developers</code></strong><br><em>(potrebno za proveru)</em></td><td>Dizajniranje, kodiranje i testiranje aplikacija.</td></tr><tr><td><strong><code>gcp-security-admins</code></strong><br></td><td>Uspostavljanje i upravljanje sigurnosnim politikama za celu organizaciju, ukljuÄujuÄ‡i upravljanje pristupom i <a href="https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints">politike ograniÄenja organizacije</a>. Pogledajte <a href="https://cloud.google.com/architecture/security-foundations/authentication-authorization#users_and_groups">Google Cloud vodiÄ za osnove sigurnosti</a> za viÅ¡e informacija o planiranju vaÅ¡e Google Cloud sigurnosne infrastrukture.</td></tr><tr><td><strong><code>gcp-devops</code></strong></td><td>Kreiranje ili upravljanje celokupnim tokovima rada koji podrÅ¾avaju kontinuiranu integraciju i isporuku, praÄ‡enje i obezbeÄ‘ivanje sistema.</td></tr><tr><td><strong><code>gcp-logging-admins</code></strong></td><td></td></tr><tr><td><strong><code>gcp-logging-viewers</code></strong></td><td></td></tr><tr><td><strong><code>gcp-monitor-admins</code></strong></td><td></td></tr><tr><td><strong><code>gcp-billing-viewer</code></strong><br><em>(viÅ¡e nije podrazumevano)</em></td><td>PraÄ‡enje troÅ¡kova projekata. TipiÄni Älanovi su deo finansijskog tima.</td></tr><tr><td><strong><code>gcp-platform-viewer</code></strong><br><em>(viÅ¡e nije podrazumevano)</em></td><td>Pregled informacija o resursima Å¡irom Google Cloud organizacije.</td></tr><tr><td><strong><code>gcp-security-reviewer</code></strong><br><em>(viÅ¡e nije podrazumevano)</em></td><td>Pregledavanje sigurnosti u oblaku.</td></tr><tr><td><strong><code>gcp-network-viewer</code></strong><br><em>(viÅ¡e nije podrazumevano)</em></td><td>Pregled konfiguracija mreÅ¾e.</td></tr><tr><td><strong><code>grp-gcp-audit-viewer</code></strong><br><em>(viÅ¡e nije podrazumevano)</em></td><td>Pregledanje dnevnika revizije.</td></tr><tr><td><strong><code>gcp-scc-admin</code></strong><br><em>(viÅ¡e nije podrazumevano)</em></td><td>Upravljanje Security Command Centrom.</td></tr><tr><td><strong><code>gcp-secrets-admin</code></strong><br><em>(viÅ¡e nije podrazumevano)</em></td><td>Upravljanje tajnama u Secret Manager-u.</td></tr></tbody></table>

## **Podrazumevana politika lozinki**

* Nametanje jakih lozinki
* IzmeÄ‘u 8 i 100 karaktera
* Bez ponovne upotrebe
* Bez isteka
* Ako ljudi pristupaju Workspace-u putem provajdera treÄ‡e strane, ovi zahtevi se ne primenjuju.

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (2) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

## **Servisni nalozi**

Ovo su principali koje **resursi** mogu **imati** **priloÅ¾ene** i pristup za lakÅ¡u interakciju sa GCP-om. Na primer, moguÄ‡e je pristupiti **autentiÄnom tokenu** Servisnog naloga **priloÅ¾enog virtuelnoj maÅ¡ini** u metapodacima.\
MoguÄ‡e je naiÄ‡i na neke **sukobe** prilikom koriÅ¡Ä‡enja i **IAM i pristupnih opsega**. Na primer, vaÅ¡ servisni nalog moÅ¾e imati IAM ulogu `compute.instanceAdmin` ali instanca koju ste prekrÅ¡ili je ograniÄena opsegom `https://www.googleapis.com/auth/compute.readonly`. To bi vas spreÄilo da vrÅ¡ite bilo kakve promene koristeÄ‡i OAuth token koji je automatski dodeljen vaÅ¡oj instanci.

SliÄno je **IAM ulogama iz AWS-a**. Ali za razliku od AWS-a, **bilo** koji servisni nalog moÅ¾e biti **priloÅ¾en bilo kom servisu** (ne mora mu se dozvoliti putem politike).

Neki od servisnih naloga koje Ä‡ete pronaÄ‡i zapravo su **automatski generisani od strane GCP-a** kada poÄnete koristiti uslugu, kao Å¡to su:
```
PROJECT_NUMBER-compute@developer.gserviceaccount.com
PROJECT_ID@appspot.gserviceaccount.com
```
MeÄ‘utim, takoÄ‘e je moguÄ‡e kreirati i povezati **prilagoÄ‘ene servisne naloge** sa resursima, koji Ä‡e izgledati ovako:
```
SERVICE_ACCOUNT_NAME@PROJECT_NAME.iam.gserviceaccount.com
```
### **Pristupni opsezi**

Pristupni opsezi su **dodeljeni generisanim OAuth tokenima** kako bi se pristupilo GCP API endpointima. Oni **ograniÄavaju dozvole** OAuth tokena.\
Ovo znaÄi da ako token pripada Vlasniku resursa ali nema dozvolu u opsegu tokena da pristupi tom resursu, token **ne moÅ¾e biti koriÅ¡Ä‡en za zloupotrebu tih privilegija**.

Google zapravo [preporuÄuje](https://cloud.google.com/compute/docs/access/service-accounts#service\_account\_permissions) da se **pristupni opsezi ne koriste i da se potpuno oslonite na IAM**. Web menadÅ¾erski portal zapravo ovo sprovodi, ali pristupni opsezi i dalje mogu biti primenjeni na instance koriÅ¡Ä‡enjem prilagoÄ‘enih servisnih naloga programski.

MoÅ¾ete videti koje **opsege** imate **dodeljene** **upitom:**

{% code overflow="wrap" %}
```bash
curl 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=<access_token>'

{
"issued_to": "223044615559.apps.googleusercontent.com",
"audience": "223044615559.apps.googleusercontent.com",
"user_id": "139746512919298469201",
"scope": "openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/appengine.admin https://www.googleapis.com/auth/sqlservice.login https://www.googleapis.com/auth/compute https://www.googleapis.com/auth/accounts.reauth",
"expires_in": 2253,
"email": "username@testing.com",
"verified_email": true,
"access_type": "offline"
}
```
{% endcode %}

Prethodni **opsezi** su generisani **podrazumevano** koriÅ¡Ä‡enjem **`gcloud`** za pristup podacima. To je zato Å¡to kada koristite **`gcloud`**, prvo kreirate OAuth token, a zatim ga koristite da kontaktirate krajnje taÄke.

NajvaÅ¾niji opseg od tih potencijalno je **`cloud-platform`**, Å¡to u osnovi znaÄi da je moguÄ‡e **pristupiti bilo kojoj usluzi u GCP**.

MoÅ¾ete **pronaÄ‡i listu** [**svih moguÄ‡ih opsega ovde**](https://developers.google.com/identity/protocols/googlescopes)**.**

Ako imate **`gcloud`** kredencijale pretraÅ¾ivaÄa, moguÄ‡e je **dobiti token sa drugim opsezima**, radeÄ‡i neÅ¡to sliÄno:
```bash
# Maybe you can get a user token with other scopes changing the scopes array from ~/.config/gcloud/credentials.db

# Set new scopes for SDKs credentials
gcloud auth application-default login --scopes=https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/sqlservice.login,https://www.googleapis.com/auth/appengine.admin,https://www.googleapis.com/auth/compute,https://www.googleapis.com/auth/accounts.reauth,https://www.googleapis.com/auth/admin.directory.user,https://www.googleapis.com/auth/admin.directory.group,https://www.googleapis.com/auth/admin.directory.domain,https://www.googleapis.com/auth/admin.directory.user

# Print new token
gcloud auth application-default print-access-token

# To use this token with some API you might need to use curl to indicate the project header with --header "X-Goog-User-Project: <project-name>"
```
## **Terraform IAM politike, veze i Älanstva**

Kako je definisano od strane terraforma na [https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam) koriÅ¡Ä‡enjem terraforma sa GCP-om postoje razliÄiti naÄini dodeljivanja pristupa principalu nad resursom:

* **ÄŒlanstva**: Postavljate **principale kao Älanove uloga** **bez ograniÄenja** nad ulogom ili principale. MoÅ¾ete postaviti korisnika kao Älana uloge, a zatim postaviti grupu kao Älana iste uloge i takoÄ‘e postaviti te principe (korisnika i grupu) kao Älanove drugih uloga.
* **Veze**: ViÅ¡e **principala moÅ¾e biti povezano sa ulogom**. Ti **principali i dalje mogu biti povezani ili biti Älanovi drugih uloga**. MeÄ‘utim, ako se princip koji nije povezan sa ulogom postavi kao **Älan povezane uloge**, sledeÄ‡i put kada se **veza primeni, Älanstvo Ä‡e nestati**.
* **Politike**: Politika je **autoritativna**, ona oznaÄava uloge i principe, a zatim, **ti principali ne mogu imati viÅ¡e uloga i te uloge ne mogu imati viÅ¡e principala** osim ako se ta politika ne izmeni (Äak ni u drugim politikama, vezama ili Älanstvima). Stoga, kada se uloga ili princip navedu u politici, sva njegova ovlaÅ¡Ä‡enja su **ograniÄena tom politikom**. OÄigledno, ovo se moÅ¾e zaobiÄ‡i u sluÄaju kada se principu da opcija da izmeni politiku ili dozvole za eskalaciju privilegija (kao Å¡to je kreiranje novog principala i dodeljivanje mu nove uloge).

## Reference

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)
* [https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy](https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy)
