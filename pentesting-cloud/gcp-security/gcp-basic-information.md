# GCP - Temel Bilgiler

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **reklamÄ±nÄ± gÃ¶rmek** veya **HackTricks'i PDF olarak indirmek** iÃ§in [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* Ã–zel [**NFT'lerden**](https://opensea.io/collection/the-peass-family) oluÅŸan koleksiyonumuz [**The PEASS Family**](https://opensea.io/collection/the-peass-family)'i keÅŸfedin
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)'Ä± **takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github depolarÄ±na **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>

## **Kaynak hiyerarÅŸisi**

Google Cloud, kavramsal olarak geleneksel bir dosya sistemiyle benzer olan bir [Kaynak hiyerarÅŸisi](https://cloud.google.com/resource-manager/docs/cloud-platform-resource-hierarchy) kullanÄ±r. Bu, politikalar ve izinler iÃ§in belirli bir eklenti noktasÄ± olan mantÄ±ksal bir Ã¼st/alt iÅŸ akÄ±ÅŸÄ± saÄŸlar.

YÃ¼ksek seviyede, ÅŸu ÅŸekildedir:
```
Organization
--> Folders
--> Projects
--> Resources
```
Bir sanal makine (Compute Instance olarak adlandÄ±rÄ±lÄ±r) bir kaynaktÄ±r. Bir kaynak, muhtemelen diÄŸer Compute Instance'lar, depolama kovalarÄ± vb. ile birlikte bir projede bulunur.

<figure><img src="../../.gitbook/assets/image (5) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

## **Proje GÃ¶Ã§Ã¼**

Bir projeyi, `roles/resourcemanager.projectCreator` ve `roles/resourcemanager.projectMover` izinlerine sahip bir organizasyona **organizasyon olmadan** gÃ¶Ã§ etmek mÃ¼mkÃ¼ndÃ¼r. Proje baÅŸka bir organizasyonun iÃ§indeyse, Ã¶nce onlarÄ± organizasyondan Ã§Ä±karmak iÃ§in GCP destek ekibiyle iletiÅŸime geÃ§mek gerekmektedir. Daha fazla bilgi iÃ§in [**buraya**](https://medium.com/google-cloud/migrating-a-project-from-one-organization-to-another-gcp-4b37a86dd9e6) bakÄ±n.

## **Organizasyon PolitikalarÄ±**

Organizasyonunuzun bulut kaynaklarÄ± Ã¼zerinde merkezi kontrol saÄŸlar:

* Organizasyonunuzun kaynaklarÄ±nÄ±n nasÄ±l kullanÄ±labileceÄŸi Ã¼zerinde **kÄ±sÄ±tlamalarÄ± yapÄ±landÄ±rmak** iÃ§in merkezi kontrol saÄŸlar.
* GeliÅŸtirme ekiplerinin uyumluluk sÄ±nÄ±rlarÄ± iÃ§inde kalmasÄ±nÄ± saÄŸlamak iÃ§in **sÄ±nÄ±rlamalarÄ±** tanÄ±mlar ve oluÅŸturur.
* Proje sahipleri ve ekiplerinin uyumluluÄŸu bozmadan hÄ±zlÄ± bir ÅŸekilde ilerlemelerine yardÄ±mcÄ± olur.

Bu politikalar, **tÃ¼m organizasyonu, klasÃ¶r(ler)i veya proje(leri) etkileyebilir**. Hedeflenen kaynak hiyerarÅŸisi dÃ¼ÄŸÃ¼mÃ¼nÃ¼n **alt Ã¶ÄŸeleri organizasyon politikasÄ±nÄ± devralÄ±r**.

Bir organizasyon politikasÄ±nÄ± **tanÄ±mlamak** iÃ§in, Google Cloud hizmetine veya bir grup Google Cloud hizmetine karÅŸÄ± belirli bir kÄ±sÄ±tlama tÃ¼rÃ¼ olan bir [**kÄ±sÄ±tlama**](https://cloud.google.com/resource-manager/docs/organization-policy/overview#constraints) seÃ§ersiniz. Bu kÄ±sÄ±tlamayÄ±, istediÄŸiniz kÄ±sÄ±tlamalarla yapÄ±landÄ±rÄ±rsÄ±nÄ±z.

<figure><img src="../../.gitbook/assets/image (5) (4).png" alt=""><figcaption></figcaption></figure>

#### Ortak kullanÄ±m durumlarÄ± <a href="#common_use_cases" id="common_use_cases"></a>

* Alan adÄ±na dayalÄ± kaynak paylaÅŸÄ±mÄ±nÄ± sÄ±nÄ±rlama.
* Kimlik ve EriÅŸim YÃ¶netimi hizmet hesaplarÄ±nÄ±n kullanÄ±mÄ±nÄ± sÄ±nÄ±rlama.
* Yeni oluÅŸturulan kaynaklarÄ±n fiziksel konumunu kÄ±sÄ±tlama.
* Hizmet hesabÄ± oluÅŸturmayÄ± devre dÄ±ÅŸÄ± bÄ±rakma.

<figure><img src="../../.gitbook/assets/image (83).png" alt=""><figcaption></figcaption></figure>

Organizasyonunuzun kaynaklarÄ± Ã¼zerinde ayrÄ±ntÄ±lÄ± kontrol saÄŸlayan birÃ§ok baÅŸka kÄ±sÄ±tlama bulunmaktadÄ±r. **Daha fazla bilgi iÃ§in, tÃ¼m Organizasyon PolitikasÄ± Hizmeti kÄ±sÄ±tlamalarÄ±nÄ±n listesine** [**buradan**](https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints)**bakÄ±n.**

### **VarsayÄ±lan Organizasyon PolitikalarÄ±**

<details>

<summary>Google, GCP organizasyonunuzu kurarken varsayÄ±lan olarak ekleyeceÄŸi politikalar bunlardÄ±r:</summary>

**EriÅŸim YÃ¶netimi PolitikalarÄ±**

* **Alan adÄ± kÄ±sÄ±tlÄ± iletiÅŸim kiÅŸileri:** Belirtilen alanlar dÄ±ÅŸÄ±nda Kritik Ä°letiÅŸimlere kullanÄ±cÄ± eklenmesini engeller. Bu, yalnÄ±zca seÃ§tiÄŸiniz alanlardaki yÃ¶netilen kullanÄ±cÄ± kimliklerinin platform bildirimleri almasÄ±na izin verir.
* **Alan adÄ± kÄ±sÄ±tlÄ± paylaÅŸÄ±m:** IAM politikalarÄ±na belirtilen alanlar dÄ±ÅŸÄ±nda kullanÄ±cÄ± eklenmesini engeller. Bu, yalnÄ±zca seÃ§tiÄŸiniz alanlardaki yÃ¶netilen kullanÄ±cÄ± kimliklerinin bu organizasyon iÃ§indeki kaynaklara eriÅŸmesine izin verir.
* **Herkese aÃ§Ä±k eriÅŸimi Ã¶nleme:** Cloud Storage kovalarÄ±nÄ±n halka aÃ§Ä±k hale gelmesini engeller. Bu, bir geliÅŸtiricinin Cloud Storage kovalarÄ±nÄ± kimliÄŸi doÄŸrulanmamÄ±ÅŸ internet eriÅŸimine sahip olacak ÅŸekilde yapÄ±landÄ±rmasÄ±nÄ± engeller.
* **Birlikte kova dÃ¼zeyinde eriÅŸimi etkinleÅŸtirme:** Cloud Storage kovalarÄ±ndaki nesne dÃ¼zeyinde eriÅŸim kontrol listelerini (ACL'ler) engeller. Bu, Cloud Storage kovalarÄ±ndaki tÃ¼m nesnelere tutarlÄ± bir ÅŸekilde IAM politikalarÄ± uygulayarak eriÅŸim yÃ¶netiminizi basitleÅŸtirir.
* **Ä°ÅŸletim sistemi oturumu aÃ§mayÄ± gerektirme:** Yeni projelerde oluÅŸturulan sanal makinelerde iÅŸletim sistemi oturumu aÃ§mayÄ± etkinleÅŸtirir. Bu, IAM kullanarak Ã¶rneklerinize SSH eriÅŸimini yÃ¶netmenizi, ayrÄ± ayrÄ± SSH anahtarlarÄ± oluÅŸturmanÄ±za ve yÃ¶netmenize gerek kalmadan yapmanÄ±zÄ± saÄŸlar.

**Hizmet hesaplarÄ± iÃ§in ek gÃ¼venlik politikalarÄ±**

* **Otomatik IAM izinlerini devre dÄ±ÅŸÄ± bÄ±rakma**: VarsayÄ±lan App Engine ve Compute Engine hizmet hesaplarÄ±nÄ±n projenin oluÅŸturulduÄŸunda otomatik olarak EditÃ¶r IAM rolÃ¼nÃ¼ almalarÄ±nÄ± engeller. Bu, hizmet hesaplarÄ±nÄ±n oluÅŸturulduÄŸunda aÅŸÄ±rÄ± izinli IAM rolleri almamasÄ±nÄ± saÄŸlar.
* **Hizmet hesabÄ± anahtar oluÅŸturmayÄ± devre dÄ±ÅŸÄ± bÄ±rakma**: Genel hizmet hesabÄ± anahtarlarÄ±nÄ±n oluÅŸturulmasÄ±nÄ± engeller. Bu, kalÄ±cÄ± kimlik bilgilerinin ifÅŸa edilme riskini azaltmaya yardÄ±mcÄ± olur.
* **Hizmet hesabÄ± anahtar yÃ¼klemeyi devre dÄ±ÅŸÄ± bÄ±rakma**: Genel hizmet hesabÄ± anahtarlarÄ±nÄ±n yÃ¼klenmesini engeller. Bu, sÄ±zdÄ±rÄ±lan veya yeniden kullanÄ±lan anahtar materyallerinin riskini azaltmaya yardÄ±mcÄ± olur.

**GÃ¼venli VPC aÄŸÄ± yapÄ±landÄ±rma politikalarÄ±**

* **VM Ã¶rnekleri iÃ§in izin verilen harici IP'leri tanÄ±mlama**: Halka aÃ§Ä±k IP'ye sahip Compute Ã¶rneklerinin oluÅŸturulmasÄ±nÄ± engeller, bu da onlarÄ± internet trafiÄŸine maruz bÄ±rakabilir.

<!---->

* **VM iÃ§ iÃ§e sanallaÅŸtÄ±rmayÄ± devre dÄ±ÅŸÄ± bÄ±rakma**: Compute Engine VM'lerinde iÃ§ iÃ§e sanal makinelerin oluÅŸturulmasÄ±nÄ± engeller. Bu, izlenmeyen iÃ§ iÃ§e sanal makinelerin gÃ¼venlik riskini azaltÄ±r.

<!---->

* **VM seri baÄŸlantÄ± noktasÄ±nÄ± devre dÄ±ÅŸÄ± bÄ±rakma:** Compute Engine VM'lerine seri baÄŸlantÄ± noktasÄ± eriÅŸimini engeller. Bu, Compute Engine API'sÄ±nÄ± kullanarak sunucunun seri baÄŸlantÄ± noktasÄ±na giriÅŸi engeller.

<!---->

* **Cloud SQL Ã¶rneklerinde yetkilendirilmiÅŸ aÄŸlarÄ± kÄ±sÄ±tlama:** Genel veya iÃ§ aÄŸ aralÄ±klarÄ±nÄ±n Cloud SQL veritabanlarÄ±nÄ±za eriÅŸmesini engeller.

<!---->

* **IP Adresi TÃ¼rÃ¼ne GÃ¶re Protokol YÃ¶nlendirmesini KÄ±sÄ±tla:** Harici IP adresleri iÃ§in VM protokol yÃ¶nlendirmesini engeller.

<!---->

* **Cloud SQL Ã¶rneklerinde Genel IP eriÅŸimini kÄ±sÄ±tla:** Halka aÃ§Ä±k IP'ye sahip Cloud SQL Ã¶rneklerinin oluÅŸturulmasÄ±nÄ± engeller, bu da onlarÄ± internet trafiÄŸine maruz bÄ±rakabilir.

<!---->

* **PaylaÅŸÄ±lan VPC proje lien kaldÄ±rmasÄ±nÄ± kÄ±sÄ±tla:** PaylaÅŸÄ±lan VPC ana bilgisayar projelerinin yanlÄ±ÅŸlÄ±kla silinmesini engeller.

<!---->

* **Yeni projeler iÃ§in iÃ§ DNS ayarÄ±nÄ± YalnÄ±zca BÃ¶lgesel DNS olarak ayarlar:** Hizmet kullanÄ±labilirliÄŸi azaltÄ±lmÄ±ÅŸ olan eski bir DNS ayarÄ±nÄ±n kullanÄ±lmasÄ±nÄ± engeller.

<!---->

* **VarsayÄ±lan aÄŸ oluÅŸturmayÄ± atla:** VarsayÄ±lan VPC aÄŸÄ±nÄ±n ve ilgili kaynaklarÄ±n otomatik olarak oluÅŸturulmasÄ±nÄ± engeller. Bu, aÅŸÄ±rÄ± izinli varsayÄ±lan gÃ¼venlik duvarÄ± kurallarÄ±ndan kaÃ§Ä±nmanÄ±zÄ± saÄŸlar.

<!---->

* **VPC Harici IPv6 kullanÄ±mÄ±nÄ± devre dÄ±ÅŸÄ± bÄ±rakma:** Harici IPv6 alt aÄŸlarÄ±nÄ±n oluÅŸturulmasÄ±nÄ± engeller, bu da yetkisiz internet eriÅŸimine maruz kalabilir.

</details>

## **
## KullanÄ±cÄ±lar <a href="#default-credentials" id="default-credentials"></a>

**GCP konsolunda** **KullanÄ±cÄ±lar veya Gruplar** yÃ¶netimi yoktur, bu iÅŸlem **Google Workspace** Ã¼zerinde gerÃ§ekleÅŸtirilir. Bununla birlikte, farklÄ± bir kimlik saÄŸlayÄ±cÄ±yÄ± Google Workspace'e senkronize edebilirsiniz.

Workspaces kullanÄ±cÄ±larÄ±na ve gruplarÄ±na [**https://admin.google.com**](https://admin.google.com/) adresinden eriÅŸebilirsiniz.

**MFA**, Workspaces kullanÄ±cÄ±larÄ±na **zorunlu** hale getirilebilir, ancak bir **saldÄ±rgan**, MFA tarafÄ±ndan korunmayan GCP'ye eriÅŸmek iÃ§in bir belirteÃ§ kullanabilir (kullanÄ±cÄ± yalnÄ±zca bunu oluÅŸturmak iÃ§in oturum aÃ§tÄ±ÄŸÄ±nda MFA tarafÄ±ndan korunur: `gcloud auth login`).

## Gruplar

Bir organizasyon oluÅŸturulduÄŸunda, birkaÃ§ grup **kesinlikle oluÅŸturulmasÄ± Ã¶nerilir**. Bunlardan herhangi birini yÃ¶netiyorsanÄ±z, tÃ¼m organizasyonu veya Ã¶nemli bir bÃ¶lÃ¼mÃ¼nÃ¼ tehlikeye atabilirsiniz:

<table data-header-hidden><thead><tr><th width="299.3076923076923"></th><th></th></tr></thead><tbody><tr><td><strong>Grup</strong></td><td><strong>Ä°ÅŸlev</strong></td></tr><tr><td><strong><code>gcp-organization-admins</code></strong><br><em>(kontrol listesi iÃ§in gereken grup veya bireysel hesaplar)</em></td><td>Organizasyona ait herhangi bir kaynaÄŸÄ± yÃ¶netme. Bu rolÃ¼ dikkatli bir ÅŸekilde atayÄ±n; org yÃ¶neticileri tÃ¼m Google Cloud kaynaklarÄ±na eriÅŸime sahiptir. Alternatif olarak, bu iÅŸlev yÃ¼ksek ayrÄ±calÄ±klÄ± olduÄŸu iÃ§in bir grup oluÅŸturmak yerine bireysel hesaplarÄ± kullanmayÄ± dÃ¼ÅŸÃ¼nebilirsiniz.</td></tr><tr><td><strong><code>gcp-network-admins</code></strong><br><em>(kontrol listesi iÃ§in gereken grup)</em></td><td>AÄŸlar, alt aÄŸlar, gÃ¼venlik duvarÄ± kurallarÄ± ve Cloud Router, Cloud VPN ve bulut yÃ¼k dengeleyicileri gibi aÄŸ cihazlarÄ± oluÅŸturma.</td></tr><tr><td><strong><code>gcp-billing-admins</code></strong><br><em>(kontrol listesi iÃ§in gereken grup)</em></td><td>Fatura hesaplarÄ±nÄ± kurma ve kullanÄ±mlarÄ±nÄ± izleme.</td></tr><tr><td><strong><code>gcp-developers</code></strong><br><em>(kontrol listesi iÃ§in gereken grup)</em></td><td>UygulamalarÄ± tasarlama, kodlama ve test etme.</td></tr><tr><td><strong><code>gcp-security-admins</code></strong><br></td><td>TÃ¼m organizasyon iÃ§in eriÅŸim yÃ¶netimi ve <a href="https://cloud.google.com/resource-manager/docs/organization-policy/org-policy-constraints">organizasyon kÄ±sÄ±tlama politikalarÄ±</a> dahil olmak Ã¼zere gÃ¼venlik politikalarÄ±nÄ± oluÅŸturma ve yÃ¶netme. Google Cloud gÃ¼venlik temelleri kÄ±lavuzunda Google Cloud gÃ¼venlik altyapÄ±nÄ±zÄ± planlama hakkÄ±nda daha fazla bilgi iÃ§in bkz.</td></tr><tr><td><strong><code>gcp-devops</code></strong></td><td>SÃ¼rekli entegrasyon ve daÄŸÄ±tÄ±mÄ± destekleyen, izleme ve sistem saÄŸlama sÃ¼reÃ§lerini oluÅŸturma veya yÃ¶netme.</td></tr><tr><td><strong><code>gcp-logging-admins</code></strong></td><td></td></tr><tr><td><strong><code>gcp-logging-viewers</code></strong></td><td></td></tr><tr><td><strong><code>gcp-monitor-admins</code></strong></td><td></td></tr><tr><td><strong><code>gcp-billing-viewer</code></strong><br><em>(artÄ±k varsayÄ±lan olarak yok)</em></td><td>Projelerdeki harcamalarÄ± izleme. Tipik Ã¼yeler finans ekibinin bir parÃ§asÄ±dÄ±r.</td></tr><tr><td><strong><code>gcp-platform-viewer</code></strong><br><em>(artÄ±k varsayÄ±lan olarak yok)</em></td><td>Google Cloud organizasyonu genelinde kaynak bilgilerini inceleme.</td></tr><tr><td><strong><code>gcp-security-reviewer</code></strong><br><em>(artÄ±k varsayÄ±lan olarak yok)</em></td><td>Bulut gÃ¼venliÄŸini inceleme.</td></tr><tr><td><strong><code>gcp-network-viewer</code></strong><br><em>(artÄ±k varsayÄ±lan olarak yok)</em></td><td>AÄŸ yapÄ±landÄ±rmalarÄ±nÄ± inceleme.</td></tr><tr><td><strong><code>grp-gcp-audit-viewer</code></strong><br><em>(artÄ±k varsayÄ±lan olarak yok)</em></td><td>Denetim gÃ¼nlÃ¼klerini gÃ¶rÃ¼ntÃ¼leme.</td></tr><tr><td><strong><code>gcp-scc-admin</code></strong><br><em>(artÄ±k varsayÄ±lan olarak yok)</em></td><td>Security Command Center'Ä± yÃ¶netme.</td></tr><tr><td><strong><code>gcp-secrets-admin</code></strong><br><em>(artÄ±k varsayÄ±lan olarak yok)</em></td><td>Secret Manager'da gizli bilgileri yÃ¶netme.</td></tr></tbody></table>

## **VarsayÄ±lan Parola PolitikasÄ±**

* GÃ¼Ã§lÃ¼ parolalarÄ± zorunlu kÄ±lma
* 8 ile 100 karakter arasÄ±
* Tekrar kullanÄ±m yok
* SÃ¼resi dolma yok
* Ä°nsanlar, Workspace'e Ã¼Ã§Ã¼ncÃ¼ taraf saÄŸlayÄ±cÄ± aracÄ±lÄ±ÄŸÄ±yla eriÅŸiyorsa, bu gereksinimler uygulanmaz.

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (2) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

## **Hizmet hesaplarÄ±**

Bunlar, kaynaklarÄ±n GCP ile kolayca etkileÅŸimde bulunabilmesi iÃ§in **eklenebilecek** ve eriÅŸebilecek **Ã¶znelerdir**. Ã–rneÄŸin, bir VM'ye **baÄŸlÄ± bir Hizmet HesabÄ±nÄ±n** kimlik doÄŸrulama belirteci **metadata**'da eriÅŸilebilir.

IAM rolleri AWS'deki gibi benzerdir. Ancak AWS'den farklÄ± olarak, **herhangi bir** hizmet hesabÄ± **herhangi bir hizmete eklenebilir** (bunu bir politika aracÄ±lÄ±ÄŸÄ±yla izin vermesi gerekmez).

KarÅŸÄ±laÅŸabileceÄŸiniz hizmet hesaplarÄ±nÄ±n birÃ§oÄŸu aslÄ±nda GCP'yi kullanmaya baÅŸladÄ±ÄŸÄ±nÄ±zda **otomatik olarak oluÅŸturulur**, Ã¶rneÄŸin:
```
PROJECT_NUMBER-compute@developer.gserviceaccount.com
PROJECT_ID@appspot.gserviceaccount.com
```
Ancak, Ã¶zel hizmet hesaplarÄ± oluÅŸturmak ve bunlarÄ± kaynaklara eklemek de mÃ¼mkÃ¼ndÃ¼r. Bu hesaplar aÅŸaÄŸÄ±daki gibi gÃ¶rÃ¼necektir:
```
SERVICE_ACCOUNT_NAME@PROJECT_NAME.iam.gserviceaccount.com
```
### **EriÅŸim kapsamlarÄ±**

EriÅŸim kapsamlarÄ±, GCP API uÃ§ noktalarÄ±na eriÅŸmek iÃ§in oluÅŸturulan OAuth belirteÃ§lerine **eklenir**. Bu, OAuth belirteÄŸinin izinlerini **sÄ±nÄ±rlar**.

Bu, bir belirteÄŸin bir kaynaÄŸÄ±n Sahibi olmasÄ±na raÄŸmen, belirtekte kaynaÄŸa eriÅŸmek iÃ§in kapsam olmadÄ±ÄŸÄ± durumlarda, belirteÄŸin bu ayrÄ±calÄ±klarÄ± **kullanarak (kÃ¶tÃ¼ye) kullanÄ±lamayacaÄŸÄ±** anlamÄ±na gelir.

Google aslÄ±nda [Ã¶nerir](https://cloud.google.com/compute/docs/access/service-accounts#service\_account\_permissions) ki **eriÅŸim kapsamlarÄ± kullanÄ±lmasÄ±n ve tamamen IAM'a gÃ¼venilsin**. Web yÃ¶netim portalÄ± aslÄ±nda bunu zorunlu kÄ±lar, ancak eriÅŸim kapsamlarÄ± hala Ã¶zel hizmet hesaplarÄ± kullanÄ±larak programatik olarak Ã¶rnekler Ã¼zerinde uygulanabilir.

**KapsamlarÄ±n** ne olduÄŸunu **sorgulayarak** gÃ¶rebilirsiniz:

{% code overflow="wrap" %}
```bash
curl 'https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=<access_token>'

{
"issued_to": "223044615559.apps.googleusercontent.com",
"audience": "223044615559.apps.googleusercontent.com",
"user_id": "139746512919298469201",
"scope": "openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/appengine.admin https://www.googleapis.com/auth/sqlservice.login https://www.googleapis.com/auth/compute https://www.googleapis.com/auth/accounts.reauth",
"expires_in": 2253,
"email": "username@testing.com",
"verified_email": true,
"access_type": "offline"
}
```
{% endcode %}

Ã–nceki **kapsamlar**, verilere eriÅŸmek iÃ§in **`gcloud`** kullanarak oluÅŸturulan varsayÄ±lan kapsamlardÄ±r. Bunun nedeni, **`gcloud`** kullanÄ±rken Ã¶nce bir OAuth belirteci oluÅŸturmanÄ±z ve ardÄ±ndan uÃ§ noktalara eriÅŸmek iÃ§in bunu kullanmanÄ±zdÄ±r.

Bu kapsamlar arasÄ±nda en Ã¶nemlisi muhtemelen **`cloud-platform`** dur, bu da temel olarak GCP'deki **herhangi bir hizmete eriÅŸilebileceÄŸi** anlamÄ±na gelir.

[**Burada tÃ¼m olasÄ± kapsamlarÄ±n bir listesini bulabilirsiniz**](https://developers.google.com/identity/protocols/googlescopes)**.**

EÄŸer **`gcloud`** tarayÄ±cÄ± kimlik bilgilerine sahipseniz, baÅŸka kapsamlara sahip bir belirteÃ§ **edinmek mÃ¼mkÃ¼ndÃ¼r**, ÅŸu ÅŸekilde bir ÅŸey yaparak:

{% code overflow="wrap" %}
```bash
# Maybe you can get a user token with other scopes changing the scopes array from ~/.config/gcloud/credentials.db

# Set new scopes for SDKs credentials
gcloud auth application-default login --scopes=https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/sqlservice.login,https://www.googleapis.com/auth/appengine.admin,https://www.googleapis.com/auth/compute,https://www.googleapis.com/auth/accounts.reauth,https://www.googleapis.com/auth/admin.directory.user,https://www.googleapis.com/auth/admin.directory.group,https://www.googleapis.com/auth/admin.directory.domain,https://www.googleapis.com/auth/admin.directory.user

# Print new token
gcloud auth application-default print-access-token

# To use this token with some API you might need to use curl to indicate the project header with --header "X-Goog-User-Project: <project-name>"
```
{% endcode %}

## **Terraform IAM PolitikalarÄ±, BaÄŸlantÄ±lar ve Ãœyelikler**

Terraform tarafÄ±ndan tanÄ±mlandÄ±ÄŸÄ± gibi [https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google\_project\_iam) kullanarak GCP ile terraform kullanarak bir Ã¶zneye bir kaynaÄŸa eriÅŸim vermenin farklÄ± yollarÄ± vardÄ±r:

* **Ãœyelikler**: **Ã–znelere kÄ±sÄ±tlama olmadan rollerin Ã¼yesi olarak Ã¶znelere** **Ã¼yeler olarak ayarlanÄ±r**. Bir kullanÄ±cÄ±yÄ± bir rolÃ¼n Ã¼yesi olarak ayarlayabilir ve aynÄ± rolÃ¼n bir Ã¼yesi olarak bir grup ayarlayabilir ve bu Ã¶zneleri (kullanÄ±cÄ± ve grup) diÄŸer rollerin Ã¼yesi olarak ayarlayabilirsiniz.
* **BaÄŸlantÄ±lar**: Birden fazla **Ã¶zne bir role baÄŸlanabilir**. Bu **Ã¶zneler hala baÄŸlanabilir veya diÄŸer rollerin Ã¼yesi olabilir**. Ancak, bir role baÄŸlÄ± olmayan bir Ã¶zne, bir baÄŸlÄ± role **Ã¼ye olarak ayarlandÄ±ÄŸÄ±nda, bir sonraki baÄŸlama uygulandÄ±ÄŸÄ±nda Ã¼yelik kaybolur**.
* **Politikalar**: Bir politika **yetkilidir**, rolleri ve Ã¶zneleri belirtir ve sonra, **bu Ã¶znelerin daha fazla rolÃ¼ ve bu rollerin daha fazla Ã¶znesi olamaz** (baÅŸka politikalarda, baÄŸlantÄ±larda veya Ã¼yeliklerde bile). DolayÄ±sÄ±yla, bir rol veya Ã¶zne politikada belirtilmiÅŸse, tÃ¼m yetkileri **o politika tarafÄ±ndan sÄ±nÄ±rlanÄ±r**. Elbette, bu, Ã¶znenin politikayÄ± deÄŸiÅŸtirme veya ayrÄ±calÄ±k yÃ¼kseltme izinlerine sahip olmasÄ± durumunda atlanabilir (yeni bir Ã¶zne oluÅŸturmak ve ona yeni bir rol baÄŸlamak gibi).

## Referanslar

* [https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/](https://about.gitlab.com/blog/2020/02/12/plundering-gcp-escalating-privileges-in-google-cloud-platform/)

<details>

<summary><strong>htARTE (HackTricks AWS Red Team Expert)</strong> ile sÄ±fÄ±rdan kahraman olmak iÃ§in AWS hackleme Ã¶ÄŸrenin<strong>!</strong></summary>

HackTricks'i desteklemenin diÄŸer yollarÄ±:

* Åirketinizi HackTricks'te **tanÄ±tmak isterseniz** veya HackTricks'i **PDF olarak indirmek isterseniz** [**ABONELÄ°K PLANLARI**](https://github.com/sponsors/carlospolop)'na gÃ¶z atÄ±n!
* [**Resmi PEASS & HackTricks Ã¼rÃ¼nlerini**](https://peass.creator-spring.com) edinin
* [**The PEASS Family**](https://opensea.io/collection/the-peass-family) koleksiyonumuzu keÅŸfedin, Ã¶zel [**NFT'lerimiz**](https://opensea.io/collection/the-peass-family)
* ğŸ’¬ [**Discord grubuna**](https://discord.gg/hRep4RUj7f) veya [**telegram grubuna**](https://t.me/peass) **katÄ±lÄ±n** veya bizi **Twitter** ğŸ¦ [**@hacktricks_live**](https://twitter.com/hacktricks_live)**'da takip edin**.
* **Hacking hilelerinizi** [**HackTricks**](https://github.com/carlospolop/hacktricks) ve [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github reposuna **PR gÃ¶ndererek paylaÅŸÄ±n**.

</details>
