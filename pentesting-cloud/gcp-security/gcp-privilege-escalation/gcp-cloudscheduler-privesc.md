# GCP - Cloudschedulerç‰¹æƒå‡çº§

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„å…¬å¸å¹¿å‘Šï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFç‰ˆçš„HackTricksï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘çš„ **Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) **å’Œ** [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>

## cloudscheduler

### `cloudscheduler.jobs.create` , `iam.serviceAccounts.actAs`

Cloud Schedulerå…è®¸æ‚¨è®¾ç½®å®šå‘ä»»æ„HTTPç«¯ç‚¹çš„cronä½œä¸šã€‚**å¦‚æœè¯¥ç«¯ç‚¹æ˜¯\*.googleapis.comç«¯ç‚¹**ï¼Œé‚£ä¹ˆæ‚¨è¿˜å¯ä»¥å‘Šè¯‰Scheduleræ‚¨å¸Œæœ›å®ƒå¯¹è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯ï¼Œ**ä½œä¸ºç‰¹å®šçš„æœåŠ¡å¸æˆ·**ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚

ç”±äºæˆ‘ä»¬æ§åˆ¶æ¥è‡ªCloud Schedulerçš„HTTPè¯·æ±‚çš„æ‰€æœ‰æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å®ƒä»¥å‘½ä¸­å¦ä¸€ä¸ªGoogle APIç«¯ç‚¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œä¸šï¼Œè¯¥ä½œä¸šå°†ä½¿ç”¨ç‰¹å®šçš„æœåŠ¡å¸æˆ·ä»£è¡¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å­˜å‚¨æ¡¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

{% code overflow="wrap" %}
```
gcloud scheduler jobs create http test â€“schedule=â€™* * * * *â€™ â€“uri=â€™https://storage.googleapis.com/storage/v1/b?project=<PROJECT-ID>â€™ â€“message-body â€œ{â€˜nameâ€™:â€™new-bucket-nameâ€™}â€ â€“oauth-service-account-email 111111111111-compute@developer.gserviceaccount.com â€“headers Content-Type=application/json
```
{% endcode %}

è¿™ä¸ªå‘½ä»¤ä¼šå®‰æ’ä¸€ä¸ªæ¯åˆ†é’Ÿçš„HTTP POSTè¯·æ±‚ï¼Œä»¥_111111111111-compute@developer.gserviceaccount.com_çš„èº«ä»½è¿›è¡Œèº«ä»½éªŒè¯ã€‚è¯¥è¯·æ±‚å°†å‘½ä¸­Cloud Storage APIçš„ç«¯ç‚¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåä¸ºâ€œnew-bucket-nameâ€çš„æ–°å­˜å‚¨æ¡¶ã€‚

è¿™ç§æ–¹æ³•éœ€è¦ä»¥ä¸‹**é¢å¤–çš„æƒé™**ï¼š

* _cloudscheduler.jobs.create_
* _cloudscheduler.locations.list_
* _iam.serviceAccounts.actAs_

è¦é€šè¿‡è¿™ç§æ–¹æ³•å‡çº§æˆ‘ä»¬çš„æƒé™ï¼Œæˆ‘ä»¬åªéœ€è¦**ä»¥ä¼ é€’çš„æœåŠ¡è´¦å·èº«ä»½æ¥æ„é€ æˆ‘ä»¬æƒ³è¦å‘½ä¸­çš„APIçš„HTTPè¯·æ±‚**ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„gcloudå‘½ä»¤ï¼Œè€Œä¸æ˜¯è„šæœ¬ã€‚

ä½¿ç”¨Cloud Taskså¯èƒ½ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„æ–¹æ³•ï¼Œä½†æˆ‘ä»¬åœ¨æµ‹è¯•ä¸­æ— æ³•å®ç°ã€‚

## å‚è€ƒèµ„æ–™

* [https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/](https://rhinosecuritylabs.com/gcp/privilege-escalation-google-cloud-platform-part-1/)

<details>

<summary><strong>æ”¯æŒHackTrickså¹¶è·å¾—ç¦åˆ©ï¼</strong></summary>

* å¦‚æœæ‚¨æƒ³åœ¨HackTricksä¸­çœ‹åˆ°æ‚¨çš„**å…¬å¸å¹¿å‘Š**ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è®¿é—®**PEASSçš„æœ€æ–°ç‰ˆæœ¬æˆ–ä¸‹è½½PDFæ ¼å¼çš„HackTricks**ï¼Œè¯·æŸ¥çœ‹[**è®¢é˜…è®¡åˆ’**](https://github.com/sponsors/carlospolop)ï¼
* è·å–[**å®˜æ–¹PEASSå’ŒHackTrickså‘¨è¾¹äº§å“**](https://peass.creator-spring.com)
* å‘ç°[**PEASSå®¶æ—**](https://opensea.io/collection/the-peass-family)ï¼Œæˆ‘ä»¬çš„ç‹¬å®¶[**NFT**](https://opensea.io/collection/the-peass-family)æ”¶è—å“
* **åŠ å…¥** ğŸ’¬ [**Discordç¾¤ç»„**](https://discord.gg/hRep4RUj7f) æˆ– [**Telegramç¾¤ç»„**](https://t.me/peass) æˆ– **å…³æ³¨**æˆ‘åœ¨**Twitter** ğŸ¦ [**@carlospolopm**](https://twitter.com/carlospolopm)**ã€‚**
* **é€šè¿‡å‘** [**HackTricks**](https://github.com/carlospolop/hacktricks) å’Œ [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) **githubä»“åº“æäº¤PRæ¥åˆ†äº«æ‚¨çš„é»‘å®¢æŠ€å·§ã€‚**

</details>
