# GCP - Privesc putem kori코캖enja servisa

<details>

<summary><strong>Nau캜ite hakovanje AWS-a od nule do heroja sa</strong> <a href="https://training.hacktricks.xyz/courses/arte"><strong>htARTE (HackTricks AWS Red Team Expert)</strong></a><strong>!</strong></summary>

Drugi na캜ini da podr쬴te HackTricks:

* Ako 쬰lite da vidite **va코u kompaniju reklamiranu na HackTricks-u** ili **preuzmete HackTricks u PDF formatu** proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!
* Nabavite [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)
* Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)
* **Pridru쬴te se** 游눫 [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** 游냕 [**@carlospolopm**](https://twitter.com/carlospolopm)**.**
* **Podelite svoje hakovanje trikove slanjem PR-ova na** [**HackTricks**](https://github.com/carlospolop/hacktricks) i [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repozitorijume.

</details>

## serviceusage

Slede캖a dozvola je korisna za kreiranje i kra캠u API klju캜eva, ne ove iz dokumentacije: _API klju캜 je jednostavno enkriptovan string koji **identifikuje aplikaciju bez ikakvog principala**. Korisni su za pristupanje **javno dostupnim podacima anonimno**, i koriste se za **povezivanje** API zahteva sa va코im projektom radi kvota i **naplate**._

Dakle, sa API klju캜em mo쬰te naterati kompaniju da plati za va코e kori코캖enje API-ja, ali ne캖ete mo캖i da pove캖ate privilegije.

Za u캜enje drugih dozvola i na캜ina generisanja API klju캜eva proverite:

{% content-ref url="gcp-apikeys-privesc.md" %}
[gcp-apikeys-privesc.md](gcp-apikeys-privesc.md)
{% endcontent-ref %}

### `serviceusage.apiKeys.create`

Prona캠en je neodobreni API koji se mo쬰 koristiti za **kreiranje API klju캜eva:**

{% code overflow="wrap" %}
```bash
curl -XPOST "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### `serviceusage.apiKeys.list`

Prona캠en je jo코 jedan nedokumentovani API za listanje ve캖 kreiranih API klju캜eva (klju캜evi API-ja se pojavljuju u odgovoru): 

{% code overflow="wrap" %}
```bash
curl "https://apikeys.clients6.google.com/v1/projects/<project-uniq-name>/apiKeys?access_token=$(gcloud auth print-access-token)"
```
{% endcode %}

### **`serviceusage.services.enable`** , **`serviceusage.services.use`**

Sa ovim dozvolama napada캜 mo쬰 omogu캖iti i koristiti nove usluge u projektu. Ovo bi moglo omogu캖iti **napada캜u da omogu캖i usluge poput admina ili cloudidentity-a** kako bi poku코ao pristupiti informacijama o Workspace-u, ili drugim uslugama kako bi pristupio zanimljivim podacima.&#x20;

## **Reference**

* [https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/](https://rhinosecuritylabs.com/cloud-security/privilege-escalation-google-cloud-platform-part-2/)

<details>

<summary><strong>Podr쬴te HackTricks i dobijte beneficije!</strong></summary>

Da li radite u **cybersecurity kompaniji**? 콯elite li videti **va코u kompaniju reklamiranu na HackTricks-u**? Ili 쬰lite da imate pristup **najnovijoj verziji PEASS-a ili preuzmete HackTricks u PDF formatu**? Proverite [**SUBSCRIPTION PLANS**](https://github.com/sponsors/carlospolop)!

Otkrijte [**The PEASS Family**](https://opensea.io/collection/the-peass-family), na코u kolekciju ekskluzivnih [**NFT-ova**](https://opensea.io/collection/the-peass-family)

Dobijte [**zvani캜ni PEASS & HackTricks swag**](https://peass.creator-spring.com)

**Pridru쬴te se** [**游눫**](https://emojipedia.org/speech-balloon/) [**Discord grupi**](https://discord.gg/hRep4RUj7f) ili [**telegram grupi**](https://t.me/peass) ili me **pratite** na **Twitter-u** [**游냕**](https://github.com/carlospolop/hacktricks/tree/7af18b62b3bdc423e11444677a6a73d4043511e9/\[https:/emojipedia.org/bird/README.md)[**@carlospolopm**](https://twitter.com/carlospolopm)**.**

**Podelite svoje hakovanje tako 코to 캖ete poslati PR na** [**hacktricks github repo**](https://github.com/carlospolop/hacktricks)\*\*\*\*

**.**

</details>
